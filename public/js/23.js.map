{"version":3,"sources":["webpack:///./node_modules/lodash/_baseIsNaN.js","webpack:///./node_modules/lodash/isString.js","webpack:///./node_modules/lodash/_strictIndexOf.js","webpack:///./node_modules/lodash/_baseValues.js","webpack:///./node_modules/lodash/values.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/lodash/_baseIndexOf.js","webpack:///./resources/js/components/forms/UserForm.vue?0ca9","webpack:///./resources/js/components/forms/UserForm.vue?4861","webpack:///resources/js/components/forms/UserForm.vue","webpack:///./resources/js/components/forms/UserForm.vue","webpack:///./node_modules/lodash/includes.js","webpack:///./node_modules/lodash/debounce.js"],"names":["module","exports","value","baseGetTag","isArray","isObjectLike","array","fromIndex","index","length","arrayMap","object","props","key","baseValues","keys","root","Date","now","baseFindIndex","baseIsNaN","strictIndexOf","name","action","String","method","type","default","roles","Array","user","Object","first_name","last_name","institution","curated_taxa","redirect","data","filteredTaxa","curatedTaxa","this","form","roles_ids","map","curated_taxa_ids","resetOnSuccess","computed","isCurator","watch","methods","onTaxonNameInput","fetchTaxa","axios","get","route","params","page","per_page","except","submit","processing","toLowerCase","onSuccessfulSubmit","$buefy","toast","open","setTimeout","onFailedSubmit","duration","message","component","_vm","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","attrs","trans","model","callback","$$v","$set","expression","_v","_l","role","id","_s","scopedSlots","_u","fn","option","_e","baseIndexOf","isArrayLike","isString","toInteger","values","nativeMax","Math","max","collection","guard","indexOf","isObject","toNumber","nativeMin","min","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","apply","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush"],"mappings":"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","file":"js/23.js?id=ecde2abcb67a810a4361","sourcesContent":["/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-form\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.users.first_name')}},[_c('b-input',{model:{value:(_vm.form.first_name),callback:function ($$v) {_vm.$set(_vm.form, \"first_name\", $$v)},expression:\"form.first_name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.users.last_name')}},[_c('b-input',{model:{value:(_vm.form.last_name),callback:function ($$v) {_vm.$set(_vm.form, \"last_name\", $$v)},expression:\"form.last_name\"}})],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.users.institution')}},[_c('b-input',{model:{value:(_vm.form.institution),callback:function ($$v) {_vm.$set(_vm.form, \"institution\", $$v)},expression:\"form.institution\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.users.roles')}},[_c('div',{staticClass:\"block\"},_vm._l((_vm.roles),function(role){return _c('b-checkbox',{key:role.id,attrs:{\"native-value\":role.id},model:{value:(_vm.form.roles_ids),callback:function ($$v) {_vm.$set(_vm.form, \"roles_ids\", $$v)},expression:\"form.roles_ids\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.trans('roles.' + role.name))+\"\\n        \")])}),1)]),_vm._v(\" \"),(_vm.isCurator)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.users.curated_taxa')}},[_c('b-taginput',{attrs:{\"data\":_vm.filteredTaxa,\"autocomplete\":\"\",\"field\":\"name\",\"placeholder\":\"Type taxon name\"},on:{\"typing\":_vm.onTaxonNameInput},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('span',[_vm._v(_vm._s(props.option.name))])]}}],null,false,1538493864),model:{value:(_vm.curatedTaxa),callback:function ($$v) {_vm.curatedTaxa=$$v},expression:\"curatedTaxa\"}})],1):_vm._e(),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.trans('buttons.save')))])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserForm.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"user-form\">\n    <form @submit.prevent=\"submit\">\n      <div class=\"columns\">\n        <div class=\"column\">\n          <b-field :label=\"trans('labels.users.first_name')\" class=\"is-required\">\n            <b-input v-model=\"form.first_name\" />\n          </b-field>\n        </div>\n\n        <div class=\"column\">\n          <b-field :label=\"trans('labels.users.last_name')\" class=\"is-required\">\n            <b-input v-model=\"form.last_name\" />\n          </b-field>\n        </div>\n      </div>\n\n      <b-field :label=\"trans('labels.users.institution')\">\n        <b-input v-model=\"form.institution\" />\n      </b-field>\n\n      <b-field :label=\"trans('labels.users.roles')\">\n        <div class=\"block\">\n          <b-checkbox\n            v-for=\"role in roles\"\n            :key=\"role.id\"\n            v-model=\"form.roles_ids\"\n            :native-value=\"role.id\"\n          >\n            {{ trans('roles.' + role.name) }}\n          </b-checkbox>\n        </div>\n      </b-field>\n\n      <b-field :label=\"trans('labels.users.curated_taxa')\" v-if=\"isCurator\">\n        <b-taginput\n          v-model=\"curatedTaxa\"\n          :data=\"filteredTaxa\"\n          autocomplete\n          field=\"name\"\n          placeholder=\"Type taxon name\"\n          @typing=\"onTaxonNameInput\"\n        >\n          <template v-slot:default=\"props\">\n            <span>{{ props.option.name }}</span>\n          </template>\n        </b-taginput>\n      </b-field>\n\n      <hr>\n\n      <button type=\"submit\" class=\"button is-primary\">{{ trans('buttons.save') }}</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport Form from 'form-backend-validation'\nimport _find from 'lodash/find'\nimport _includes from 'lodash/includes'\nimport _get from 'lodash/get'\nimport _debounce from 'lodash/debounce'\n\nexport default {\n  name: 'nzUserForm',\n\n  props: {\n    action: String,\n    method: {\n      type: String,\n      default: 'post'\n    },\n    roles: Array,\n    user: {\n      type: Object,\n      default() {\n        return {\n          first_name: '',\n          last_name: '',\n          institution: '',\n          roles: [],\n          curated_taxa: [],\n        }\n      }\n    },\n    redirect: String\n  },\n\n  data() {\n    return {\n      filteredTaxa: [],\n      curatedTaxa: this.user.curated_taxa,\n      form: new Form({\n        first_name: this.user.first_name,\n        last_name: this.user.last_name,\n        institution: this.user.institution,\n        roles_ids: this.user.roles.map(role => role.id),\n        curated_taxa_ids: this.user.curated_taxa.map(taxon => taxon.id)\n      }, {\n        resetOnSuccess: false\n      })\n    }\n  },\n\n  computed: {\n    isCurator() {\n      return _includes(this.form.roles_ids, _find(this.roles, { name: 'curator' }).id)\n    }\n  },\n\n  watch: {\n    curatedTaxa(value) {\n      this.form.curated_taxa_ids = value.map(taxon => taxon.id)\n    }\n  },\n\n  methods: {\n    onTaxonNameInput: _debounce(function (name) {\n      return this.fetchTaxa(name)\n    }, 500),\n\n    fetchTaxa(name) {\n      axios.get(route('api.taxa.index'), {\n        params: {\n          name,\n          page: 1,\n          per_page: 10,\n          except: this.curatedTaxa.map(taxon => taxon.id)\n        }\n      }).then(({ data }) => {\n        this.filteredTaxa = data.data\n      })\n    },\n\n    submit() {\n      if (this.form.processing) return\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmit)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit.\n     */\n    onSuccessfulSubmit() {\n      this.form.processing = true\n\n      this.$buefy.toast.open({\n          message: this.trans('Saved successfully'),\n          type: 'is-success'\n      })\n\n      // We want to wait a bit before we send the user to redirect route\n      // so we can show the message that the action was successful.\n      setTimeout(() => {\n          this.form.processing = false\n\n          window.location.href = this.redirect\n      }, 500)\n    },\n\n    /**\n     * Handle failed form submit.\n     *\n     * @param {Error} error\n     */\n    onFailedSubmit(error) {\n      this.$buefy.toast.open({\n        duration: 2500,\n        message: _get(error, 'response.data.message', error.message),\n        type: 'is-danger'\n      })\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./UserForm.vue?vue&type=template&id=1a699d11&\"\nimport script from \"./UserForm.vue?vue&type=script&lang=js&\"\nexport * from \"./UserForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n"],"sourceRoot":""}