(self.webpackChunk=self.webpackChunk||[]).push([[44],{2791:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(8062),r=i(8718),o=i.n(r),a=i(7361),s=i.n(a),u=i(8446),l=i.n(u);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){f(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const d={name:"nzFieldObservationForm",props:{action:{type:String,required:!0},method:{type:String,default:"POST"},redirectUrl:String,cancelUrl:String,submitMore:Boolean,shouldConfirmSubmit:Boolean,confirmSubmitMessage:{type:String,default:function(){return this.trans("You are about to submit")}},shouldAskReason:Boolean,shouldConfirmCancel:Boolean,submitOnlyDirty:Boolean,submitOnlyDirtyMessage:{type:String,default:function(){return this.trans("There are no changes, the data will not be saved.")}}},data:function(){return{form:this.newForm(),keepAfterSubmit:[],submittingWithRedirect:!1,submittingWithoutRedirect:!1,confirmingSubmit:!1,confirmingCancel:!1,locale:window.App.locale}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{newForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n.ZP(t,{resetOnSuccess:!1})},registerKeyListener:function(t){var e=13===(t.which||t.keyCode);t.ctrlKey&&t.shiftKey&&e?this.submitMore&&this.submitWithoutRedirect():t.ctrlKey&&e&&this.submitWithRedirect()},confirmSubmit:function(t){var e=this;if(!this.confirmingSubmit){this.confirmingSubmit=!0;var i={message:this.confirmSubmitMessage,confirmText:this.trans("buttons.save"),cancelText:this.trans("buttons.cancel"),onConfirm:t,onCancel:function(){e.confirmingSubmit=!1}};return this.shouldAskReason?this.promptForReason(i):this.$buefy.dialog.confirm(i)}},promptForReason:function(t){var e=this,i=this.$buefy.dialog.prompt(h(h({},t),{},{inputAttrs:{placeholder:this.trans("Reason"),required:!0,maxlength:255}}));return i.$nextTick((function(){i.$refs.input.addEventListener("invalid",(function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity(e.trans("This field is required and can contain max 255 chars."))})),i.$refs.input.addEventListener("input",(function(t){i.validationMessage=null}))})),i},notifyNoChanges:function(){this.$buefy.toast.open({message:this.submitOnlyDirtyMessage,type:"is-info"})},notifyNoChangesAndRedirect:function(){var t=this;this.notifyNoChanges(),setTimeout((function(){t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},submitWithRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChangesAndRedirect():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithRedirect):void this.performSubmitWithRedirect()},performSubmitWithRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithRedirect:function(){var t=this;this.form.processing=!0,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"}),setTimeout((function(){t.form.processing=!1,t.submittingWithRedirect=!1,t.hookAfterSubmitWithRedirect(),t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},hookAfterSubmitWithRedirect:function(){},submitWithoutRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChanges():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithoutRedirect):void this.performSubmitWithoutRedirect()},performSubmitWithoutRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithoutRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithoutRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithoutRedirect:function(){this.submittingWithoutRedirect=!1,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"});var t=o()(this.form.data(),this.keepAfterSubmit);this.form.reset(),this.form.populate(t),this.hookAfterSubmitWithoutRedirect()},hookAfterSubmitWithoutRedirect:function(){},onFailedSubmit:function(t){this.submittingWithRedirect=!1,this.submittingWithoutRedirect=!1,this.$buefy.toast.open({duration:2500,message:s()(t,"response.data.message",t.message),type:"is-danger"})},isDirty:function(){return!l()(this.form.data(),this.form.initial)},confirmCancel:function(){var t=this;this.confirmingCancel||(this.confirmingCancel=!0,this.$buefy.dialog.confirm({message:this.trans("If you leave this page changes will not be saved."),onConfirm:function(){t.confirmingCancel=!1,window.location.href=t.cancelUrl},onCancel:function(){t.confirmingCancel=!1},cancelText:this.trans("buttons.stay_on_page"),confirmText:this.trans("buttons.leave_page")}))},onCancel:function(t){this.shouldConfirmCancel&&this.isDirty()&&(t.preventDefault(),this.confirmCancel())}}}},9303:(t,e,i)=>{t.exports=i(5302),i(1200),i(5630),i(2016),i(2677),i(9635),i(5166),i(7140),i(8922)},9635:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302),i(2677)],void 0===(o="function"==typeof(n=function(t){var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.tags.ifd1=e.tags,e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,i,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&((e=this[t])&&e.getAll?n[this.ifds[t].name]=e.getAll():(i=this.tags[t])&&(n[i]=this.getText(i)));return n},e.getName=function(t){var e=this.tags[t];return"object"==typeof e?this.ifds[t].name:e},function(){var t,i,n,r=e.tags;for(t in r)if(Object.prototype.hasOwnProperty.call(r,t))if(i=e.ifds[t])for(t in n=r[t])Object.prototype.hasOwnProperty.call(n,t)&&(i.map[n[t]]=Number(t));else e.map[r[t]]=Number(t)}()})?n.apply(e,r):n)||(t.exports=o)}()},2677:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302),i(5630)],void 0===(o="function"==typeof(n=function(t){function e(t){t&&(Object.defineProperty(this,"map",{value:this.ifds[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}function i(e,i,n){if(n){if(!(i+n>e.byteLength))return new Blob([t.bufferSlice.call(e.buffer,i,i+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}e.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.ifds={ifd1:{name:"Thumbnail",map:e.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var n={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}};function r(t,e,i,r,o,a){var s,u,l,c,h,f,d=n[r];if(d){if(!((u=(s=d.size*o)>4?e+t.getUint32(i+8,a):i+8)+s>t.byteLength)){if(1===o)return d.getValue(t,u,a);for(l=[],c=0;c<o;c+=1)l[c]=d.getValue(t,u+c*d.size,a);if(d.ascii){for(h="",c=0;c<l.length&&"\0"!==(f=l[c]);c+=1)h+=f;return h}return l}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function o(t,e,i){return(!t||t[i])&&(!e||!0!==e[i])}function a(t,e,i,n,a,s,u,l){var c,h,f,d,p,m;if(i+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((h=i+2+12*(c=t.getUint16(i,n)))+4>t.byteLength)){for(f=0;f<c;f+=1)d=i+2+12*f,o(u,l,p=t.getUint16(d,n))&&(m=r(t,e,d,t.getUint16(d+2,n),t.getUint32(d+4,n),n),a[p]=m,s&&(s[p]=d));return t.getUint32(h,n)}console.log("Invalid Exif data: Invalid directory size.")}}function s(t,i,n,r,o,s,u){var l=t.exif[i];l&&(t.exif[i]=new e(i),t.exifOffsets&&(t.exifOffsets[i]=new e(i)),a(n,r,r+l,o,t.exif[i],t.exifOffsets&&t.exifOffsets[i],s&&s[i],u&&u[i]))}n[7]=n[1],t.parseExifData=function(t,n,r,u,l){if(!l.disableExif){var c,h,f,d=l.includeExifTags,p=l.excludeExifTags||{34665:{37500:!0}},m=n+10;if(1165519206===t.getUint32(n+4))if(m+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(n+8)){switch(t.getUint16(m)){case 18761:c=!0;break;case 19789:c=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(m+2,c)?(h=t.getUint32(m+4,c),u.exif=new e,l.disableExifOffsets||(u.exifOffsets=new e,u.exifTiffOffset=m,u.exifLittleEndian=c),(h=a(t,m,m+h,c,u.exif,u.exifOffsets,d,p))&&o(d,p,"ifd1")&&(u.exif.ifd1=h,u.exifOffsets&&(u.exifOffsets.ifd1=m+h)),Object.keys(u.exif.ifds).forEach((function(e){s(u,e,t,m,c,d,p)})),(f=u.exif.ifd1)&&f[513]&&(f[513]=i(t,m+f[513],f[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,i){var n=e.exifOffsets[274];return n?(new DataView(t,n+8,2).setUint16(0,i,e.exifLittleEndian),t):t}},t.writeExifData=function(e,i,n,r){return t.exifWriters[i.exif.map[n]](e,i,r)},t.ExifMap=e})?n.apply(e,r):n)||(t.exports=o)}()},2016:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302)],void 0===(o="function"==typeof(n=function(t){var e=t.global;e.fetch&&e.Request&&e.Response&&e.Response.prototype.blob?t.fetchBlob=function(t,i,n){function r(t){return t.blob()}if(e.Promise&&"function"!=typeof i)return fetch(new Request(t,i)).then(r);fetch(new Request(t,n)).then(r).then(i).catch((function(t){i(null,t)}))}:e.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(t.fetchBlob=function(t,i,n){function r(e,i){n=n||{};var r=new XMLHttpRequest;r.open(n.method||"GET",t),n.headers&&Object.keys(n.headers).forEach((function(t){r.setRequestHeader(t,n.headers[t])})),r.withCredentials="include"===n.credentials,r.responseType="blob",r.onload=function(){e(r.response)},r.onerror=r.onabort=r.ontimeout=function(t){e===i?i(null,t):i(t)},r.send(n.body)}return e.Promise&&"function"!=typeof i?(n=i,new Promise(r)):r(i,i)})})?n.apply(e,r):n)||(t.exports=o)}()},7140:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302),i(5166)],void 0===(o="function"==typeof(n=function(t){var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),i=this.map[t],n=this.stringValues[i];return n?n[e]:String(e)},e.getAll=function(){var t,e,i={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(i[e]=this.getText(e));return i},e.getName=function(t){return this.tags[t]},function(){var t,i=e.tags,n=e.map||{};for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[i[t]]=Number(t))}()})?n.apply(e,r):n)||(t.exports=o)}()},5166:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302),i(5630)],void 0===(o="function"==typeof(n=function(t){function e(){}function i(t,e,i){for(var n="",r=e+i,o=e;o<r;o+=1)n+=String.fromCharCode(t.getUint8(o));return n}function n(t,e,n,r,o){return"binary"===e.types[t]?new Blob([n.buffer.slice(r,r+o)]):"Uint16"===e.types[t]?n.getUint16(r):i(n,r,o)}function r(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function o(t,e,i,o,a,s){for(var u,l,c,h=e+i,f=e;f<h;)28===t.getUint8(f)&&2===t.getUint8(f+1)&&(c=t.getUint8(f+2),a&&!a[c]||s&&s[c]||(l=t.getInt16(f+3),u=n(c,o.iptc,t,f+5,l),o.iptc[c]=r(o.iptc[c],u),o.iptcOffsets&&(o.iptcOffsets[c]=f))),f+=1}function a(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function s(t,e){var i=t.getUint8(e+7);return i%2!=0&&(i+=1),0===i&&(i=4),i}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,i,n,r,u){if(!u.disableIptc)for(var l=i+n;i+8<l;){if(a(t,i)){var c=s(t,i),h=i+8+c;if(h>l){console.log("Invalid IPTC data: Invalid segment offset.");break}var f=t.getUint16(i+6+c);if(i+f>l){console.log("Invalid IPTC data: Invalid segment size.");break}return r.iptc=new e,u.disableIptcOffsets||(r.iptcOffsets=new e),void o(t,h,f,r,u.includeIptcTags,u.excludeIptcTags||{202:!0})}i+=1}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e})?n.apply(e,r):n)||(t.exports=o)}()},5630:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302)],void 0===(o="function"==typeof(n=function(t){var e=t.global,i=t.transform,n=e.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),r=e.ArrayBuffer&&ArrayBuffer.prototype.slice||function(t,e){e=e||this.byteLength-t;var i=new Uint8Array(this,t,e),n=new Uint8Array(e);return n.set(i),n.buffer},o={jpeg:{65505:[],65517:[]}};function a(i,a,s,u){var l=this;function c(a,c){if(!(e.DataView&&n&&i&&i.size>=12&&"image/jpeg"===i.type))return a(u);var h=s.maxMetaDataSize||262144;t.readFile(n.call(i,0,h),(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return c(new Error("Invalid JPEG file: Missing JPEG marker."));for(var i,n,h,f,d=2,p=e.byteLength-4,m=d;d<p&&((i=e.getUint16(d))>=65504&&i<=65519||65534===i);){if(d+(n=e.getUint16(d+2)+2)>e.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((h=o.jpeg[i])&&!s.disableMetaDataParsers)for(f=0;f<h.length;f+=1)h[f].call(l,e,d,n,u,s);m=d+=n}!s.disableImageHead&&m>6&&(u.imageHead=r.call(t,0,m)),a(u)}),c,"readAsArrayBuffer")||a(u)}return s=s||{},e.Promise&&"function"!=typeof a?(u=s=a||{},new Promise(c)):(u=u||{},c(a,a))}function s(t,e,i){return t&&e&&i?new Blob([i,n.call(t,e.byteLength)],{type:"image/jpeg"}):null}function u(t,i,n){var r={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!n&&e.Promise)return a(t,r).then((function(e){return s(t,e.imageHead,i)}));a(t,(function(e){n(s(t,e.imageHead,i))}),r)}t.transform=function(n,r,o,s,u){t.requiresMetaData(r)?a(s,(function(a){a!==u&&(e.console&&console.log(a),a=u),i.call(t,n,r,o,s,a)}),r,u=u||{}):i.apply(t,arguments)},t.blobSlice=n,t.bufferSlice=r,t.replaceHead=u,t.parseMetaData=a,t.metaDataParsers=o})?n.apply(e,r):n)||(t.exports=o)}()},8922:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302),i(1200),i(5630)],void 0===(o="function"==typeof(n=function(t){var e=t.transform,i=t.requiresCanvas,n=t.requiresMetaData,r=t.transformCoordinates,o=t.getTransformedOptions;function a(e,i){var n=e&&e.orientation;return!0===n&&!t.orientation||1===n&&t.orientation||(!i||t.orientation)&&n>1&&n<9}function s(t,e){return t!==e&&(1===t&&e>1&&e<9||t>1&&t<9)}function u(t,e){if(e>1&&e<9)switch(t){case 2:case 4:return e>4;case 5:case 7:return e%2==0;case 6:case 8:return 2===e||4===e||5===e||7===e}return!1}(function(t){if(t.global.document){var e="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",i=document.createElement("img");i.onload=function(){if(t.orientation=2===i.width&&3===i.height,t.orientation){var e=t.createCanvas(1,1,!0).getContext("2d");e.drawImage(i,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==e.getImageData(0,0,1,1).data.toString()}},i.src=e}})(t),t.requiresCanvas=function(e){return a(e)||i.call(t,e)},t.requiresMetaData=function(e){return a(e,!0)||n.call(t,e)},t.transform=function(i,n,r,o,a){e.call(t,i,n,(function(e,i){if(i){var n=t.orientation&&i.exif&&i.exif.get("Orientation");if(n>4&&n<9){var o=i.originalWidth,a=i.originalHeight;i.originalWidth=a,i.originalHeight=o}}r(e,i)}),o,a)},t.getTransformedOptions=function(e,i,n){var r=o.call(t,e,i),a=n.exif&&n.exif.get("Orientation"),l=r.orientation,c=t.orientation&&a;if(!0===l&&(l=a),!s(l,c))return r;var h=r.top,f=r.right,d=r.bottom,p=r.left,m={};for(var g in r)Object.prototype.hasOwnProperty.call(r,g)&&(m[g]=r[g]);if(m.orientation=l,(l>4&&!(c>4)||l<5&&c>4)&&(m.maxWidth=r.maxHeight,m.maxHeight=r.maxWidth,m.minWidth=r.minHeight,m.minHeight=r.minWidth,m.sourceWidth=r.sourceHeight,m.sourceHeight=r.sourceWidth),c>1){switch(c){case 2:f=r.left,p=r.right;break;case 3:h=r.bottom,f=r.left,d=r.top,p=r.right;break;case 4:h=r.bottom,d=r.top;break;case 5:h=r.left,f=r.bottom,d=r.right,p=r.top;break;case 6:h=r.left,f=r.top,d=r.right,p=r.bottom;break;case 7:h=r.right,f=r.top,d=r.left,p=r.bottom;break;case 8:h=r.right,f=r.bottom,d=r.left,p=r.top}if(u(l,c)){var v=h,y=f;h=d,f=p,d=v,p=y}}switch(m.top=h,m.right=f,m.bottom=d,m.left=p,l){case 2:m.right=p,m.left=f;break;case 3:m.top=d,m.right=p,m.bottom=h,m.left=f;break;case 4:m.top=d,m.bottom=h;break;case 5:m.top=p,m.right=d,m.bottom=f,m.left=h;break;case 6:m.top=f,m.right=d,m.bottom=p,m.left=h;break;case 7:m.top=f,m.right=h,m.bottom=p,m.left=d;break;case 8:m.top=p,m.right=h,m.bottom=f,m.left=d}return m},t.transformCoordinates=function(e,i,n){r.call(t,e,i,n);var o=i.orientation,a=t.orientation&&n.exif&&n.exif.get("Orientation");if(s(o,a)){var l=e.getContext("2d"),c=e.width,h=e.height,f=c,d=h;switch((o>4&&!(a>4)||o<5&&a>4)&&(e.width=h,e.height=c),o>4&&(f=h,d=c),a){case 2:l.translate(f,0),l.scale(-1,1);break;case 3:l.translate(f,d),l.rotate(Math.PI);break;case 4:l.translate(0,d),l.scale(1,-1);break;case 5:l.rotate(-.5*Math.PI),l.scale(-1,1);break;case 6:l.rotate(-.5*Math.PI),l.translate(-f,0);break;case 7:l.rotate(-.5*Math.PI),l.translate(-f,d),l.scale(1,-1);break;case 8:l.rotate(.5*Math.PI),l.translate(0,-d)}switch(u(o,a)&&(l.translate(f,d),l.rotate(Math.PI)),o){case 2:l.translate(c,0),l.scale(-1,1);break;case 3:l.translate(c,h),l.rotate(Math.PI);break;case 4:l.translate(0,h),l.scale(1,-1);break;case 5:l.rotate(.5*Math.PI),l.scale(1,-1);break;case 6:l.rotate(.5*Math.PI),l.translate(0,-h);break;case 7:l.rotate(.5*Math.PI),l.translate(c,-h),l.scale(-1,1);break;case 8:l.rotate(-.5*Math.PI),l.translate(-c,0)}}}})?n.apply(e,r):n)||(t.exports=o)}()},1200:(t,e,i)=>{var n,r,o;!function(a){"use strict";r=[i(5302)],void 0===(o="function"==typeof(n=function(t){var e=t.transform;t.createCanvas=function(e,i,n){if(n&&t.global.OffscreenCanvas)return new OffscreenCanvas(e,i);var r=document.createElement("canvas");return r.width=e,r.height=i,r},t.transform=function(i,n,r,o,a){e.call(t,t.scale(i,n,a),n,r,o,a)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var i,n,r,o,a=e.aspectRatio;if(!a)return e;for(n in i={},e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i.crop=!0,(r=t.naturalWidth||t.width)/(o=t.naturalHeight||t.height)>a?(i.maxWidth=o*a,i.maxHeight=o):(i.maxWidth=r,i.maxHeight=r/a),i},t.drawImage=function(t,e,i,n,r,o,a,s,u){var l=e.getContext("2d");return!1===u.imageSmoothingEnabled?(l.msImageSmoothingEnabled=!1,l.imageSmoothingEnabled=!1):u.imageSmoothingQuality&&(l.imageSmoothingQuality=u.imageSmoothingQuality),l.drawImage(t,i,n,r,o,0,0,a,s),l},t.requiresCanvas=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,i,n){i=i||{},n=n||{};var r,o,a,s,u,l,c,h,f,d,p,m,g=e.getContext||t.requiresCanvas(i)&&!!t.global.HTMLCanvasElement,v=e.naturalWidth||e.width,y=e.naturalHeight||e.height,b=v,w=y;function x(){var t=Math.max((a||b)/b,(s||w)/w);t>1&&(b*=t,w*=t)}function E(){var t=Math.min((r||b)/b,(o||w)/w);t<1&&(b*=t,w*=t)}if(g&&(c=(i=t.getTransformedOptions(e,i,n)).left||0,h=i.top||0,i.sourceWidth?(u=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(c=v-u-i.right)):u=v-c-(i.right||0),i.sourceHeight?(l=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(h=y-l-i.bottom)):l=y-h-(i.bottom||0),b=u,w=l),r=i.maxWidth,o=i.maxHeight,a=i.minWidth,s=i.minHeight,g&&r&&o&&i.crop?(b=r,w=o,(p=u/l-r/o)<0?(l=o*u/r,void 0===i.top&&void 0===i.bottom&&(h=(y-l)/2)):p>0&&(u=r*l/o,void 0===i.left&&void 0===i.right&&(c=(v-u)/2))):((i.contain||i.cover)&&(a=r=r||a,s=o=o||s),i.cover?(E(),x()):(x(),E())),g){if((f=i.pixelRatio)>1&&(!e.style.width||Math.floor(parseFloat(e.style.width,10))!==Math.floor(v/f))&&(b*=f,w*=f),t.orientationCropBug&&!e.getContext&&(c||h||u!==v||l!==y)&&(p=e,e=t.createCanvas(v,y,!0),t.drawImage(p,e,0,0,v,y,v,y,i)),(d=i.downsamplingRatio)>0&&d<1&&b<u&&w<l)for(;u*d>b;)m=t.createCanvas(u*d,l*d,!0),t.drawImage(e,m,c,h,u,l,m.width,m.height,i),c=0,h=0,u=m.width,l=m.height,e=m;return m=t.createCanvas(b,w),t.transformCoordinates(m,i,n),f>1&&(m.style.width=m.width/f+"px"),t.drawImage(e,m,c,h,u,l,b,w,i).setTransform(1,0,0,1,0,0),m}return e.width=b,e.height=w,e}})?n.apply(e,r):n)||(t.exports=o)}()},5302:function(t,e,i){var n;!function(r){"use strict";var o=r.URL||r.webkitURL;function a(t){return!!o&&o.createObjectURL(t)}function s(t){return!!o&&o.revokeObjectURL(t)}function u(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||s(t)}function l(t,e,i,n){if(!r.FileReader)return!1;var o=new FileReader;o.onload=function(){e.call(o,this.result)},i&&(o.onabort=o.onerror=function(){i.call(o,this.error)});var a=o[n||"readAsDataURL"];return a?(a.call(o,t),o):void 0}function c(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}function h(t,e,i){function n(e,n){var o,s=document.createElement("img");function f(t,i){e!==n?t instanceof Error?n(t):((i=i||{}).image=t,e(i)):e&&e(t,i)}function d(e,n){n&&r.console&&console.log(n),e&&c("Blob",e)?o=a(t=e):(o=t,i&&i.crossOrigin&&(s.crossOrigin=i.crossOrigin)),s.src=o}return s.onerror=function(t){u(o,i),n&&n.call(s,t)},s.onload=function(){u(o,i);var e={originalWidth:s.naturalWidth||s.width,originalHeight:s.naturalHeight||s.height};try{h.transform(s,i,f,t,e)}catch(t){n&&n(t)}},"string"==typeof t?(h.requiresMetaData(i)?h.fetchBlob(t,d,i):d(),s):c("Blob",t)||c("File",t)?(o=a(t))?(s.src=o,s):l(t,(function(t){s.src=t}),n):void 0}return r.Promise&&"function"!=typeof e?(i=e,new Promise(n)):n(e,e)}h.requiresMetaData=function(t){return t&&t.meta},h.fetchBlob=function(t,e){e()},h.transform=function(t,e,i,n,r){i(t,r)},h.global=r,h.readFile=l,h.isInstanceOf=c,h.createObjectURL=a,h.revokeObjectURL=s,void 0===(n=function(){return h}.call(e,i,e,t))||(t.exports=n)}("undefined"!=typeof window&&window||this)},5299:function(t){t.exports=function(){"use strict";(function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),o=window.setTimeout((function(){e(n+r)}),r);return t=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})(),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(t){try{return new CustomEvent("test"),!1}catch(t){}function e(e,i){i=i||{bubbles:!1,cancelable:!1};var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,i.bubbles,i.cancelable,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n}e.prototype=Event.prototype,t.MouseEvent=e}(window);var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0},n=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function e(i,n,r,o){t(this,e);var a=this;function s(t){t.stopPropagation(),document.addEventListener("mouseup",u),document.addEventListener("mousemove",l),a.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:a}}))}function u(t){t.stopPropagation(),document.removeEventListener("mouseup",u),document.removeEventListener("mousemove",l),a.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:a}}))}function l(t){t.stopPropagation(),a.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}this.position=i,this.constraints=n,this.cursor=r,this.eventBus=o,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=r,this.el.addEventListener("mousedown",s)},s=function(){function i(e,n,r,o){t(this,i),this.x1=e,this.y1=n,this.x2=r,this.y2=o}return e(i,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.x1=null==t?this.x1:t,this.y1=null==e?this.y1:e,this.x2=null==i?this.x2:i,this.y2=null==n?this.y2:n,this}},{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],n=this.x1+this.width()*i[0],r=this.y1+this.height()*i[1];return this.x1=n-t*i[0],this.y1=r-e*i[1],this.x2=this.x1+t,this.y2=this.y1+e,this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=this.width()*t,n=this.height()*t;return this.resize(i,n,e),this}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.width(),n=this.height();return t=null===t?this.x1:t,e=null===e?this.y1:e,this.x1=t,this.y1=e,this.x2=t+i,this.y2=e+n,this}},{key:"getRelativePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return[this.width()*t[0],this.height()*t[1]]}},{key:"getAbsolutePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return[this.x1+this.width()*t[0],this.y1+this.height()*t[1]]}},{key:"constrainToRatio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==t){switch(this.width(),this.height(),i){case"height":this.resize(this.width(),this.width()*t,e);break;case"width":this.resize(1*this.height()/t,this.height(),e);break;default:this.resize(this.width(),this.width()*t,e)}return this}}},{key:"constrainToBoundary",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],n=this.getAbsolutePoint(i),r=o(n,2),a=r[0],s=r[1],u=a,l=s,c=t-a,h=e-s,f=-2*i[0]+1,d=-2*i[1]+1,p=null,m=null;switch(f){case-1:p=u;break;case 0:p=2*Math.min(u,c);break;case 1:p=c}switch(d){case-1:m=l;break;case 0:m=2*Math.min(l,h);break;case 1:m=h}if(this.width()>p){var g=p/this.width();this.scale(g,i)}if(this.height()>m){var v=m/this.height();this.scale(v,i)}return this}},{key:"constrainToSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(o&&(o>1?(t=1*e/o,n*=o):o<1&&(e=t*o,i=1*n/o)),t&&this.width()>t){var a=t,s=null===o?this.height():e;this.resize(a,s,r)}if(e&&this.height()>e){var u=null===o?this.width():t,l=e;this.resize(u,l,r)}if(i&&this.width()<i){var c=i,h=null===o?this.height():n;this.resize(c,h,r)}if(n&&this.height()<n){var f=null===o?this.width():i,d=n;this.resize(f,d,r)}return this}}]),i}();function u(t){t.addEventListener("touchstart",l),t.addEventListener("touchend",l),t.addEventListener("touchmove",l)}function l(t){t.preventDefault();var e=t.changedTouches[0],i={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};e.target.dispatchEvent(new MouseEvent(i[t.type],{bubbles:!0,cancelable:!0,view:window,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY}))}var c=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}];function h(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}return function(o){function a(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,i,n))}return n(a,o),e(a,[{key:"getValue",value:function(t){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getValue",this).call(this,t)}},{key:"setImage",value:function(t){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setImage",this).call(this,t)}},{key:"destroy",value:function(){return i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(t,e){return this.box.move(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(t,e,i),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}]),a}(function(){function i(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t(this,i),this.options=i.parseOptions(n||{}),!e.nodeName&&null==(e=document.querySelector(e)))throw"Unable to find element.";if(!e.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:e.parentNode,element:e},o||(0===e.width||0===e.height?e.onload=function(){r.initialize(e)}:this.initialize(e))}return e(i,[{key:"initialize",value:function(t){this.createDOM(t),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(t){this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,u(this.containerEl),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",t.getAttribute("src")),this.imageEl.setAttribute("alt",t.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var e=document.createElement("div");e.className="croppr-handleContainer",this.handles=[];for(var i=0;i<c.length;i++){var n=new a(c[i].position,c[i].constraints,c[i].cursor,this.eventBus);this.handles.push(n),e.appendChild(n.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(e),this.containerEl.appendChild(this.cropperEl),t.parentElement.replaceChild(this.containerEl,t)}},{key:"setImage",value:function(t){var e=this;return this.imageEl.onload=function(){e.box=e.initializeBox(e.options),e.redraw()},this.imageEl.src=t,this.imageClippedEl.src=t,this}},{key:"destroy",value:function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)}},{key:"initializeBox",value:function(t){var e=t.startSize.width,i=t.startSize.height,n=new s(0,0,e,i);n.constrainToRatio(t.aspectRatio,[.5,.5]);var r=t.minSize,o=t.maxSize;n.constrainToSize(o.width,o.height,r.width,r.height,[.5,.5],t.aspectRatio);var a=this.cropperEl.offsetWidth,u=this.cropperEl.offsetHeight;n.constrainToBoundary(a,u,[.5,.5]);var l=this.cropperEl.offsetWidth/2-n.width()/2,c=this.cropperEl.offsetHeight/2-n.height()/2;return n.move(l,c),n}},{key:"redraw",value:function(){var t=this,e=Math.round(this.box.width()),i=Math.round(this.box.height()),n=Math.round(this.box.x1),r=Math.round(this.box.y1),o=Math.round(this.box.x2),a=Math.round(this.box.y2);window.requestAnimationFrame((function(){t.regionEl.style.transform="translate("+n+"px, "+r+"px)",t.regionEl.style.width=e+"px",t.regionEl.style.height=i+"px",t.imageClippedEl.style.clip="rect("+r+"px, "+o+"px, "+a+"px, "+n+"px)";for(var s=t.box.getAbsolutePoint([.5,.5]),u=s[0]-t.cropperEl.offsetWidth/2>>31,l=s[1]-t.cropperEl.offsetHeight/2>>31,c=-2*((u^l)+l+l+4)+8,h=0;h<t.handles.length;h++){var f=t.handles[h],d=f.el.offsetWidth,p=f.el.offsetHeight,m=n+e*f.position[0]-d/2,g=r+i*f.position[1]-p/2;f.el.style.transform="translate("+Math.round(m)+"px, "+Math.round(g)+"px)",f.el.style.zIndex=c==h?5:4}}))}},{key:"attachHandlerEvents",value:function(){var t=this.eventBus;t.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),t.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),t.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){var t=this.eventBus;function e(e){e.stopPropagation(),document.addEventListener("mouseup",n),document.addEventListener("mousemove",i),t.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function i(e){e.stopPropagation(),t.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function n(e){e.stopPropagation(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",i),t.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}this.regionEl.addEventListener("mousedown",e),t.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),t.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),t.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){var t=4,e=this,i=null;function n(n){n.stopPropagation(),document.addEventListener("mouseup",o),document.addEventListener("mousemove",r);var a=e.cropperEl.getBoundingClientRect(),u=n.clientX-a.left,l=n.clientY-a.top;i=e.box,e.box=new s(u,l,u+1,l+1),e.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:e.handles[t]}}))}function r(t){t.stopPropagation(),e.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function o(t){t.stopPropagation(),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",r),1!==e.box.width()||1!==e.box.height()?e.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:t.clientX,mouseY:t.clientY}})):e.box=i}this.overlayEl.addEventListener("mousedown",n)}},{key:"onHandleMoveStart",value:function(t){var e=t.detail.handle,i=[1-e.position[0],1-e.position[1]],n=this.box.getAbsolutePoint(i),r=o(n,2),a=r[0],s=r[1];this.activeHandle={handle:e,originPoint:i,originX:a,originY:s},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onHandleMoveMoving",value:function(t){var e=t.detail,i=e.mouseX,n=e.mouseY,r=this.cropperEl.getBoundingClientRect();i-=r.left,n-=r.top,i<0?i=0:i>r.width&&(i=r.width),n<0?n=0:n>r.height&&(n=r.height);var o=this.activeHandle.originPoint.slice(),a=this.activeHandle.originX,u=this.activeHandle.originY,l=this.activeHandle.handle,c=1===l.constraints[0],h=1===l.constraints[1],f=1===l.constraints[2],d=1===l.constraints[3],p=(d||h)&&(c||f),m=d||h?a:this.box.x1,g=d||h?a:this.box.x2,v=c||f?u:this.box.y1,y=c||f?u:this.box.y2;m=d?i:m,g=h?i:g,v=c?n:v,y=f?n:y;var b=!1,w=!1;if((d||h)&&(b=d?i>a:i<a),(c||f)&&(w=c?n>u:n<u),b){var x=m;m=g,g=x,o[0]=1-o[0]}if(w){var E=v;v=y,y=E,o[1]=1-o[1]}var S=new s(m,v,g,y);if(this.options.aspectRatio){var C=this.options.aspectRatio,A=!1;p?A=n>S.y1+C*S.width()||n<S.y2-C*S.width():(c||f)&&(A=!0);var O=A?"width":"height";S.constrainToRatio(C,o,O)}var P=this.options.minSize,k=this.options.maxSize;S.constrainToSize(k.width,k.height,P.width,P.height,o,this.options.aspectRatio);var _=this.cropperEl.offsetWidth,M=this.cropperEl.offsetHeight;S.constrainToBoundary(_,M,o),this.box=S,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onHandleMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(t){var e=t.detail,i=e.mouseX,n=e.mouseY,r=this.cropperEl.getBoundingClientRect();i-=r.left,n-=r.top,this.currentMove={offsetX:i-this.box.x1,offsetY:n-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(t){var e=t.detail,i=e.mouseX,n=e.mouseY,r=this.currentMove,o=r.offsetX,a=r.offsetY,s=this.cropperEl.getBoundingClientRect();i-=s.left,n-=s.top,this.box.move(i-o,n-a),this.box.x1<0&&this.box.move(0,null),this.box.x2>s.width&&this.box.move(s.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>s.height&&this.box.move(null,s.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.options.returnMode),"real"==t){var e=this.imageEl.naturalWidth,i=this.imageEl.naturalHeight,n=this.imageEl.getBoundingClientRect(),r=e/n.width,o=i/n.height;return{x:Math.round(this.box.x1*r),y:Math.round(this.box.y1*o),width:Math.round(this.box.width()*r),height:Math.round(this.box.height()*o)}}if("ratio"==t){var a=this.imageEl.getBoundingClientRect(),s=a.width,u=a.height;return{x:h(this.box.x1/s,3),y:h(this.box.y1/u,3),width:h(this.box.width()/s,3),height:h(this.box.height()/u,3)}}if("raw"==t)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}],[{key:"parseOptions",value:function(t){var e={aspectRatio:null,maxSize:{width:null,height:null},minSize:{width:null,height:null},startSize:{width:100,height:100,unit:"%"},returnMode:"real",onInitialize:null,onCropStart:null,onCropMove:null,onCropEnd:null},i=null;void 0!==t.aspectRatio&&("number"==typeof t.aspectRatio?i=t.aspectRatio:t.aspectRatio instanceof Array&&(i=t.aspectRatio[1]/t.aspectRatio[0]));var n=null;void 0!==t.maxSize&&null!==t.maxSize&&(n={width:t.maxSize[0]||null,height:t.maxSize[1]||null,unit:t.maxSize[2]||"px"});var r=null;void 0!==t.minSize&&null!==t.minSize&&(r={width:t.minSize[0]||null,height:t.minSize[1]||null,unit:t.minSize[2]||"px"});var o=null;void 0!==t.startSize&&null!==t.startSize&&(o={width:t.startSize[0]||null,height:t.startSize[1]||null,unit:t.startSize[2]||"%"});var a=null;"function"==typeof t.onInitialize&&(a=t.onInitialize);var s=null;"function"==typeof t.onCropStart&&(s=t.onCropStart);var u=null;"function"==typeof t.onCropEnd&&(u=t.onCropEnd);var l=null;"function"==typeof t.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),l=t.onUpdate),"function"==typeof t.onCropMove&&(l=t.onCropMove);var c=null;if(void 0!==t.returnMode){var h=t.returnMode.toLowerCase();if(-1===["real","ratio","raw"].indexOf(h))throw"Invalid return mode.";c=h}var f=function(t){for(var e=t.offsetWidth,i=t.offsetHeight,n=["maxSize","minSize","startSize"],r=0;r<n.length;r++){var o=n[r];null!==this[o]&&("%"==this[o].unit&&(null!==this[o].width&&(this[o].width=this[o].width/100*e),null!==this[o].height&&(this[o].height=this[o].height/100*i)),delete this[o].unit)}},d=function(t,e){return null!==t?t:e};return{aspectRatio:d(i,e.aspectRatio),maxSize:d(n,e.maxSize),minSize:d(r,e.minSize),startSize:d(o,e.startSize),returnMode:d(c,e.returnMode),onInitialize:d(a,e.onInitialize),onCropStart:d(s,e.onCropStart),onCropMove:d(l,e.onCropMove),onCropEnd:d(u,e.onCropEnd),convertToPixels:f}}}]),i}())}()},1528:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.record(e)}return i(t,[{key:"all",value:function(){return this.errors}},{key:"has",value:function(t){var e=this.errors.hasOwnProperty(t);e||(e=Object.keys(this.errors).filter((function(e){return e.startsWith(t+".")||e.startsWith(t+"[")})).length>0);return e}},{key:"first",value:function(t){return this.get(t)[0]}},{key:"get",value:function(t){return this.errors[t]||[]}},{key:"any",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return Object.keys(this.errors).length>0;var i={};return e.forEach((function(e){return i[e]=t.get(e)})),i}},{key:"record",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errors=t}},{key:"clear",value:function(t){if(t){var e=Object.assign({},this.errors);Object.keys(e).filter((function(e){return e===t||e.startsWith(t+".")||e.startsWith(t+"[")})).forEach((function(t){return delete e[t]})),this.errors=e}else this.errors={}}}]),t}();e.default=r},4365:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1528),s=(n=a)&&n.__esModule?n:{default:n},u=i(2110);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,t),this.processing=!1,this.successful=!1,this.withData(e).withOptions(i).withErrors({})}return o(t,[{key:"withData",value:function(t){for(var e in(0,u.isArray)(t)&&(t=t.reduce((function(t,e){return t[e]="",t}),{})),this.setInitialValues(t),this.errors=new s.default,this.processing=!1,this.successful=!1,t)(0,u.guardAgainstReservedFieldName)(e),this[e]=t[e];return this}},{key:"withErrors",value:function(t){return this.errors=new s.default(t),this}},{key:"withOptions",value:function(t){this.__options={resetOnSuccess:!0},t.hasOwnProperty("resetOnSuccess")&&(this.__options.resetOnSuccess=t.resetOnSuccess),t.hasOwnProperty("onSuccess")&&(this.onSuccess=t.onSuccess),t.hasOwnProperty("onFail")&&(this.onFail=t.onFail);var e="undefined"!=typeof window&&window.axios;if(this.__http=t.http||e||i(9669),!this.__http)throw new Error("No http library provided. Either pass an http option, or install axios.");return this}},{key:"data",value:function(){var t={};for(var e in this.initial)t[e]=this[e];return t}},{key:"only",value:function(t){var e=this;return t.reduce((function(t,i){return t[i]=e[i],t}),{})}},{key:"reset",value:function(){(0,u.merge)(this,this.initial),this.errors.clear()}},{key:"setInitialValues",value:function(t){this.initial={},(0,u.merge)(this.initial,t)}},{key:"populate",value:function(t){var e=this;return Object.keys(t).forEach((function(i){(0,u.guardAgainstReservedFieldName)(i),e.hasOwnProperty(i)&&(0,u.merge)(e,function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},i,t[i]))})),this}},{key:"clear",value:function(){for(var t in this.initial)this[t]="";this.errors.clear()}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"delete",value:function(t){return this.submit("delete",t)}},{key:"submit",value:function(t,e){var i=this;return this.__validateRequestType(t),this.errors.clear(),this.processing=!0,this.successful=!1,new Promise((function(n,r){i.__http[t](e,i.hasFiles()?(0,u.objectToFormData)(i.data()):i.data()).then((function(t){i.processing=!1,i.onSuccess(t.data),n(t.data)})).catch((function(t){i.processing=!1,i.onFail(t),r(t)}))}))}},{key:"hasFiles",value:function(){for(var t in this.initial)if(this.hasFilesDeep(this[t]))return!0;return!1}},{key:"hasFilesDeep",value:function(t){if(null===t)return!1;if("object"===(void 0===t?"undefined":r(t)))for(var e in t)if(t.hasOwnProperty(e)&&this.hasFilesDeep(t[e]))return!0;if(Array.isArray(t))for(var i in t)if(t.hasOwnProperty(i))return this.hasFilesDeep(t[i]);return(0,u.isFile)(t)}},{key:"onSuccess",value:function(t){this.successful=!0,this.__options.resetOnSuccess&&this.reset()}},{key:"onFail",value:function(t){this.successful=!1,t.response&&t.response.data.errors&&this.errors.record(t.response.data.errors)}},{key:"hasError",value:function(t){return this.errors.has(t)}},{key:"getError",value:function(t){return this.errors.first(t)}},{key:"getErrors",value:function(t){return this.errors.get(t)}},{key:"__validateRequestType",value:function(t){var e=["get","delete","head","post","put","patch"];if(-1===e.indexOf(t))throw new Error("`"+t+"` is not a valid request type, must be one of: `"+e.join("`, `")+"`.")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(new t).withData(e)}}]),t}();e.default=c},8062:(t,e,i)=>{"use strict";var n=i(4365);Object.defineProperty(e,"ZP",{enumerable:!0,get:function(){return o(n).default}});var r=i(1528);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"D1",{enumerable:!0,get:function(){return o(r).default}})},9924:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guardAgainstReservedFieldName=function(t){if(-1!==i.indexOf(t))throw new Error("Field name "+t+" isn't allowed to be used in a Form or Errors instance.")};var i=e.reservedFieldNames=["__http","__options","__validateRequestType","clear","data","delete","errors","getError","getErrors","hasError","initial","onFail","only","onSuccess","patch","populate","post","processing","successful","put","reset","submit","withData","withErrors","withOptions"]},7823:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t||"undefined"===t||0===t.length)return e.append(i,t);for(var n in t)t.hasOwnProperty(n)&&o(e,r(i,n),t[n]);return e}function r(t,e){return t?t+"["+e+"]":e}function o(t,e,r){return r instanceof Date?t.append(e,r.toISOString()):r instanceof File?t.append(e,r,r.name):"boolean"==typeof r?t.append(e,r?"1":"0"):null===r?t.append(e,""):"object"!==(void 0===r?"undefined":i(r))?t.append(e,r):void n(r,t,e)}e.objectToFormData=n},2110:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(933);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}));var r=i(7823);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var o=i(9924);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}))},933:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t){return t instanceof File||t instanceof FileList}function r(t){if(null===t)return null;if(n(t))return t;if(Array.isArray(t)){var e=[];for(var o in t)t.hasOwnProperty(o)&&(e[o]=r(t[o]));return e}if("object"===(void 0===t?"undefined":i(t))){var a={};for(var s in t)t.hasOwnProperty(s)&&(a[s]=r(t[s]));return a}return t}e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isFile=n,e.merge=function(t,e){for(var i in e)t[i]=r(e[i])},e.cloneDeep=r},1848:t=>{t.exports=function(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}},1078:(t,e,i)=>{var n=i(2488),r=i(7285);t.exports=function t(e,i,o,a,s){var u=-1,l=e.length;for(o||(o=r),s||(s=[]);++u<l;){var c=e[u];i>0&&o(c)?i>1?t(c,i-1,o,a,s):n(s,c):a||(s[s.length]=c)}return s}},7786:(t,e,i)=>{var n=i(1811),r=i(327);t.exports=function(t,e){for(var i=0,o=(e=n(e,t)).length;null!=t&&i<o;)t=t[r(e[i++])];return i&&i==o?t:void 0}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2958:(t,e,i)=>{var n=i(6384),r=i(939);t.exports=function(t,e,i,o){var a=i.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=i[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=i[a])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var d=new n;if(o)var p=o(h,f,c,t,e,d);if(!(void 0===p?r(f,h,3,o,d):p))return!1}}return!0}},7206:(t,e,i)=>{var n=i(1573),r=i(6432),o=i(6557),a=i(1469),s=i(9601);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?r(t[0],t[1]):n(t):s(t)}},1573:(t,e,i)=>{var n=i(2958),r=i(1499),o=i(2634);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(i){return i===t||n(i,t,e)}}},6432:(t,e,i)=>{var n=i(939),r=i(7361),o=i(9095),a=i(5403),s=i(9162),u=i(2634),l=i(327);t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(i){var a=r(i,t);return void 0===a&&a===e?o(i,t):n(e,a,3)}}},5970:(t,e,i)=>{var n=i(3012),r=i(9095);t.exports=function(t,e){return n(t,e,(function(e,i){return r(t,i)}))}},3012:(t,e,i)=>{var n=i(7786),r=i(611),o=i(1811);t.exports=function(t,e,i){for(var a=-1,s=e.length,u={};++a<s;){var l=e[a],c=n(t,l);i(c,l)&&r(u,o(l,t),c)}return u}},371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},9152:(t,e,i)=>{var n=i(7786);t.exports=function(t){return function(e){return n(e,t)}}},611:(t,e,i)=>{var n=i(4865),r=i(1811),o=i(5776),a=i(3218),s=i(327);t.exports=function(t,e,i,u){if(!a(t))return t;for(var l=-1,c=(e=r(e,t)).length,h=c-1,f=t;null!=f&&++l<c;){var d=s(e[l]),p=i;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(l!=h){var m=f[d];void 0===(p=u?u(m,d,f):void 0)&&(p=a(m)?m:o(e[l+1])?[]:{})}n(f,d,p),f=f[d]}return t}},1811:(t,e,i)=>{var n=i(1469),r=i(5403),o=i(5514),a=i(9833);t.exports=function(t,e){return n(t)?t:r(t,e)?[t]:o(a(t))}},7740:(t,e,i)=>{var n=i(7206),r=i(8612),o=i(3674);t.exports=function(t){return function(e,i,a){var s=Object(e);if(!r(e)){var u=n(i,3);e=o(e),i=function(t){return u(s[t],t,s)}}var l=t(e,i,a);return l>-1?s[u?e[l]:l]:void 0}}},9021:(t,e,i)=>{var n=i(5564),r=i(5357),o=i(61);t.exports=function(t){return o(r(t,void 0,n),t+"")}},1499:(t,e,i)=>{var n=i(9162),r=i(3674);t.exports=function(t){for(var e=r(t),i=e.length;i--;){var o=e[i],a=t[o];e[i]=[o,a,n(a)]}return e}},222:(t,e,i)=>{var n=i(1811),r=i(5694),o=i(1469),a=i(5776),s=i(1780),u=i(327);t.exports=function(t,e,i){for(var l=-1,c=(e=n(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&i(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||r(t))}},7285:(t,e,i)=>{var n=i(2705),r=i(5694),o=i(1469),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||r(t)||!!(a&&t&&t[a])}},5403:(t,e,i)=>{var n=i(1469),r=i(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!r(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},9162:(t,e,i)=>{var n=i(3218);t.exports=function(t){return t==t&&!n(t)}},2634:t=>{t.exports=function(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}},4523:(t,e,i)=>{var n=i(8306);t.exports=function(t){var e=n(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}},5514:(t,e,i)=>{var n=i(4523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,i,n,r){e.push(n?r.replace(o,"$1"):i||t)})),e}));t.exports=a},327:(t,e,i)=>{var n=i(3448);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},3279:(t,e,i)=>{var n=i(3218),r=i(7771),o=i(4841),a=Math.max,s=Math.min;t.exports=function(t,e,i){var u,l,c,h,f,d,p=0,m=!1,g=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=u,n=l;return u=l=void 0,p=e,h=t.apply(n,i)}function b(t){return p=t,f=setTimeout(x,e),m?y(t):h}function w(t){var i=t-d;return void 0===d||i>=e||i<0||g&&t-p>=c}function x(){var t=r();if(w(t))return E(t);f=setTimeout(x,function(t){var i=e-(t-d);return g?s(i,c-(t-p)):i}(t))}function E(t){return f=void 0,v&&u?y(t):(u=l=void 0,h)}function S(){var t=r(),i=w(t);if(u=arguments,l=this,d=t,i){if(void 0===f)return b(d);if(g)return clearTimeout(f),f=setTimeout(x,e),y(d)}return void 0===f&&(f=setTimeout(x,e)),h}return e=o(e)||0,n(i)&&(m=!!i.leading,c=(g="maxWait"in i)?a(o(i.maxWait)||0,e):c,v="trailing"in i?!!i.trailing:v),S.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=d=l=f=void 0},S.flush=function(){return void 0===f?h:E(r())},S}},3311:(t,e,i)=>{var n=i(7740)(i(998));t.exports=n},998:(t,e,i)=>{var n=i(1848),r=i(7206),o=i(554),a=Math.max;t.exports=function(t,e,i){var s=null==t?0:t.length;if(!s)return-1;var u=null==i?0:o(i);return u<0&&(u=a(s+u,0)),n(t,r(e,3),u)}},5564:(t,e,i)=>{var n=i(1078);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},7361:(t,e,i)=>{var n=i(7786);t.exports=function(t,e,i){var r=null==t?void 0:n(t,e);return void 0===r?i:r}},9095:(t,e,i)=>{var n=i(13),r=i(222);t.exports=function(t,e){return null!=t&&r(t,e,n)}},8306:(t,e,i)=>{var n=i(3369);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a)||o,a};return i.cache=new(r.Cache||n),i}r.Cache=n,t.exports=r},7771:(t,e,i)=>{var n=i(5639);t.exports=function(){return n.Date.now()}},8718:(t,e,i)=>{var n=i(5970),r=i(9021)((function(t,e){return null==t?{}:n(t,e)}));t.exports=r},9601:(t,e,i)=>{var n=i(371),r=i(9152),o=i(5403),a=i(327);t.exports=function(t){return o(t)?n(a(t)):r(t)}},554:(t,e,i)=>{var n=i(8601);t.exports=function(t){var e=n(t),i=e%1;return e==e?i?e-i:e:0}},1417:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const n={name:"nzImageModal",props:{items:{type:Array,default:function(){return[]}},value:{type:Number,default:0}},data:function(){return{newValue:this.value,active:!1}},computed:{openImage:function(){return this.items[this.newValue]}},watch:{newValue:function(){this.$emit("input",this.newValue)},openImage:{handler:function(t){this.active=Boolean(t)}}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},mounted:function(){this.active=Boolean(this.openImage)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{next:function(){var t=this.newValue+1;t>=this.items.length&&(t=0),this.newValue=t},prev:function(){var t=this.newValue-1;t<0&&(t=this.items.length-1),this.newValue=t},registerKeyListener:function(t){var e=t.which||t.keyCode;37===e?this.prev():39===e&&this.next()},onClose:function(t){var e=this;this.active=!1,this.$nextTick((function(){e.$emit("close",t)}))}}};const r=(0,i(1900).Z)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{active:t.active,"can-cancel":["escape","x"]},on:{"update:active":function(e){t.active=e},close:t.onClose}},[i("div",{staticClass:"image-modal"},[i("img",{attrs:{src:t.openImage}}),t._v(" "),t.items.length>1?i("div",{staticClass:"image-modal-navigation"},[i("div",{staticClass:"image-modal-previous",on:{click:t.prev}},[i("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("div",{staticClass:"image-modal-next",on:{click:t.next}},[i("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})])]):t._e()])])}),[],!1,null,null,null).exports},8044:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var n=i(8062),r=i(3674),o=i.n(r),a=i(3311),s=i.n(a),u=i(7361),l=i.n(u),c=i(3279),h=i.n(c),f=i(2791),d=i(914);function p(){var t={};return o()(window.App.supportedLocales).forEach((function(e){t[e]=null})),t}const m={name:"nzViewGroupForm",mixins:[f.Z],components:{NzPhotoUpload:d.Z},props:{group:{type:Object,default:function(){return{parent_id:null,only_observed_taxa:!1,taxa:[]}}},rootGroups:Array,names:{type:Object,default:function(){return p()}},descriptions:{type:Object,default:function(){return p()}}},data:function(){return{form:this.newForm(),taxa:this.group.taxa,filteredTaxa:[]}},computed:{supportedLocales:function(){return window.App.supportedLocales},parent:{get:function(){return s()(this.rootGroups,{id:this.form.parent_id})},set:function(t){this.form.parent_id=l()(t,"id")}},isRoot:function(){return!this.form.parent_id}},watch:{taxa:function(t){this.form.taxa_ids=t.map((function(t){return t.id}))}},methods:{newForm:function(){return new n.ZP({parent_id:this.group.parent_id,name:this.names,description:this.descriptions,image_url:this.group.image_url,image_path:this.group.image_path,only_observed_taxa:this.group.only_observed_taxa,taxa_ids:this.group.taxa.map((function(t){return t.id}))},{resetOnSuccess:!1})},focusOnTranslation:function(t,e){var i=this,n=o()(this.supportedLocales),r="#".concat(e,"-").concat(n[t]);setTimeout((function(){i.$el.querySelector(r).focus()}),500)},fetchTaxa:function(t){var e=this;axios.get(route("api.taxa.index"),{params:{name:t,page:1,per_page:10,except:this.taxa.map((function(t){return t.id}))}}).then((function(t){var i=t.data;e.filteredTaxa=i.data}))},onTaxonNameInput:h()((function(t){return this.fetchTaxa(t)}),500),onImageUploaded:function(t){this.form.image_path=t.path},onImageRemoved:function(){this.form.image_url=null,this.form.image_path=null}}};const g=(0,i(1900).Z)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{attrs:{action:t.action,method:"POST"},on:{submit:function(e){return e.preventDefault(),t.submitWithRedirect(e)}}},[i("b-field",{attrs:{label:t.trans("labels.view_groups.parent")}},[i("b-select",{model:{value:t.parent,callback:function(e){t.parent=e},expression:"parent"}},[i("option"),t._v(" "),t._l(t.rootGroups,(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e.name))])}))],2)],1),t._v(" "),i("b-field",{attrs:{label:t.trans("labels.view_groups.name")}},[i("b-tabs",{staticClass:"block",attrs:{size:"is-small"},on:{change:function(e){return t.focusOnTranslation(e,"name")}}},t._l(t.supportedLocales,(function(e,n){return i("b-tab-item",{key:n,attrs:{label:t.trans("languages."+e.name)}},[i("b-input",{attrs:{id:"name-"+n},model:{value:t.form.name[n],callback:function(e){t.$set(t.form.name,n,e)},expression:"form.name[locale]"}})],1)})),1)],1),t._v(" "),i("b-field",{attrs:{label:t.trans("labels.view_groups.description")}},[i("b-tabs",{staticClass:"block",attrs:{size:"is-small"},on:{change:function(e){return t.focusOnTranslation(e,"description")}}},t._l(t.supportedLocales,(function(e,n){return i("b-tab-item",{key:n,attrs:{label:t.trans("languages."+e.name)}},[i("b-input",{attrs:{type:"textarea",id:"description-"+n},model:{value:t.form.description[n],callback:function(e){t.$set(t.form.description,n,e)},expression:"form.description[locale]"}})],1)})),1)],1),t._v(" "),t.isRoot?t._e():[i("b-field",{attrs:{label:t.trans("labels.view_groups.taxa")}},[i("b-taginput",{attrs:{data:t.filteredTaxa,autocomplete:"",field:"name"},on:{typing:t.onTaxonNameInput},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.option.name))])]}}],null,!1,1538493864),model:{value:t.taxa,callback:function(e){t.taxa=e},expression:"taxa"}})],1),t._v(" "),i("b-field",[i("b-checkbox",{model:{value:t.form.only_observed_taxa,callback:function(e){t.$set(t.form,"only_observed_taxa",e)},expression:"form.only_observed_taxa"}},[t._v(t._s(t.trans("labels.view_groups.only_observed_taxa")))])],1)],t._v(" "),i("b-field",{attrs:{label:t.trans("labels.view_groups.image")}},[i("nz-photo-upload",{attrs:{"image-url":t.form.image_url,"image-path":t.form.image_path,licenses:{},"with-license":!1,"with-crop":!1},on:{uploaded:t.onImageUploaded,removed:t.onImageRemoved}})],1),t._v(" "),i("hr"),t._v(" "),i("button",{staticClass:"button is-primary",class:{"is-loading":t.form.processing},attrs:{type:"submit"},on:{click:t.submitWithRedirect}},[t._v("\n    "+t._s(t.trans("buttons.save"))+"\n  ")]),t._v(" "),i("a",{staticClass:"button is-text",attrs:{href:t.cancelUrl},on:{click:t.onCancel}},[t._v(t._s(t.trans("buttons.cancel")))])],2)}),[],!1,null,null,null).exports},914:(t,e,i)=>{"use strict";i.d(e,{Z:()=>b});var n=i(9303),r=i.n(n),o=i(5299),a=i.n(o);class s{constructor(t,e,i,n){this.x1=t,this.y1=e,this.x2=i,this.y2=n}set(t=null,e=null,i=null,n=null){return this.x1=null==t?this.x1:t,this.y1=null==e?this.y1:e,this.x2=null==i?this.x2:i,this.y2=null==n?this.y2:n,this}width(){return Math.abs(this.x2-this.x1)}height(){return Math.abs(this.y2-this.y1)}resize(t,e,i=[0,0]){const n=this.x1+this.width()*i[0],r=this.y1+this.height()*i[1];return this.x1=n-t*i[0],this.y1=r-e*i[1],this.x2=this.x1+t,this.y2=this.y1+e,this}scale(t,e=[0,0]){const i=this.width()*t,n=this.height()*t;return this.resize(i,n,e),this}move(t=null,e=null){let i=this.width(),n=this.height();return t=null===t?this.x1:t,e=null===e?this.y1:e,this.x1=t,this.y1=e,this.x2=t+i,this.y2=e+n,this}getRelativePoint(t=[0,0]){return[this.width()*t[0],this.height()*t[1]]}getAbsolutePoint(t=[0,0]){return[this.x1+this.width()*t[0],this.y1+this.height()*t[1]]}constrainToRatio(t,e=[0,0],i="height"){if(null===t)return;this.width(),this.height();switch(i){case"height":this.resize(this.width(),this.width()*t,e);break;case"width":this.resize(1*this.height()/t,this.height(),e);break;default:this.resize(this.width(),this.width()*t,e)}return this}constrainToBoundary(t,e,i=[0,0]){const[n,r]=this.getAbsolutePoint(i),o=n,a=r,s=t-n,u=e-r,l=-2*i[0]+1,c=-2*i[1]+1;let[h,f]=[null,null];switch(l){case-1:h=o;break;case 0:h=2*Math.min(o,s);break;case 1:h=s}switch(c){case-1:f=a;break;case 0:f=2*Math.min(a,u);break;case 1:f=u}if(this.width()>h){const t=h/this.width();this.scale(t,i)}if(this.height()>f){const t=f/this.height();this.scale(t,i)}return this}constrainToSize(t=null,e=null,i=null,n=null,r=[0,0],o=null){if(o&&(o>1?(t=1*e/o,n*=o):o<1&&(e=t*o,i=1*n/o)),t&&this.width()>t){const i=t,n=null===o?this.height():e;this.resize(i,n,r)}if(e&&this.height()>e){const i=null===o?this.width():t,n=e;this.resize(i,n,r)}if(i&&this.width()<i){const t=i,e=null===o?this.height():n;this.resize(t,e,r)}if(n&&this.height()<n){const t=null===o?this.width():i,e=n;this.resize(t,e,r)}return this}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p(t);if(e){var r=p(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d(this,i)}}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,i,n,r=f(o);function o(){return l(this,o),r.apply(this,arguments)}return e=o,(i=[{key:"setBoxToRealPosition",value:function(t){var e=this.imageEl.naturalWidth,i=this.imageEl.naturalHeight,n=e/this.imageEl.offsetWidth,r=i/this.imageEl.offsetHeight;this.box=new s(Math.round(t.x/n),Math.round(t.y/r),Math.round((t.x+t.width)/n),Math.round((t.y+t.height)/r)),this.redraw()}}])&&c(e.prototype,i),n&&c(e,n),o}(a());const g={name:"nzImageCropModal",mixins:[i(7101).Z],props:{canCancel:{type:[Array,Boolean],default:function(){return["escape","x"]}},imageUrl:String,crop:Object},data:function(){return{croppr:null,newCrop:this.crop,preserveRatio:!1}},mounted:function(){document.addEventListener("keydown",this.ctrlIsPressed),document.addEventListener("keyup",this.ctrlIsNotPressed)},beforeDestroy:function(){document.removeEventListener("keydown",this.ctrlIsPressed),document.removeEventListener("keyup",this.ctrlIsNotPressed)},watch:{isActive:function(t){var e=this;this.handleScroll(),this.croppr=null,t&&this.$nextTick((function(){e.croppr=new m(e.$refs.cropModalImage,{onCropEnd:function(t){e.newCrop=t},onInitialize:function(t){e.newCrop&&t.setBoxToRealPosition(e.newCrop)}})}))}},methods:{handleScroll:function(){"undefined"!=typeof window&&(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,document.body.classList.toggle("is-noscroll",this.isActive),this.isActive?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null))},cropImage:function(){this.$emit("update:crop",this.newCrop),this.close()},ctrlIsPressed:function(t){17==t.which&&this.croppr&&(this.croppr.options.aspectRatio=this.croppr.box.height()/this.croppr.box.width())},ctrlIsNotPressed:function(t){17==t.which&&this.croppr&&(this.croppr.options.aspectRatio=null)}}};var v=i(1900);const y={name:"nzPhotoUpload",components:{NzImageCropModal:(0,v.Z)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:t.animation}},[t.isActive?i("div",{staticClass:"modal is-active"},[i("div",{staticClass:"modal-background"}),t._v(" "),i("div",{staticClass:"animation-content modal-content",style:{maxWidth:t.newWidth}},[i("img",{ref:"cropModalImage",staticClass:"image",attrs:{src:t.imageUrl,alt:"Cropped image"}})]),t._v(" "),i("button",{staticClass:"modal-close is-large",attrs:{type:"button"},on:{click:function(e){return t.cancel("x")}}}),t._v(" "),i("button",{staticClass:"modal-action",attrs:{type:"button"},on:{click:t.cropImage}},[i("b-icon",{attrs:{icon:"check"}})],1)]):t._e()])}),[],!1,null,null,null).exports,NzImageModal:i(1417).Z},props:{imageUrl:{type:String,default:null},imagePath:{type:String,default:null},imageLicense:{type:[Number,String],default:null},licenses:{type:Object,required:!0},text:String,withLicense:{type:Boolean,default:!0},withCrop:{type:Boolean,default:!0}},data:function(){return{image:{url:this.imageUrl,path:this.imagePath,crop:null,license:this.imageLicense},croppedImageUrl:null,reader:null,uploading:!1,loading:!1,progress:0,hasExisting:!!this.imageUrl,error:null,showCropModal:!1,showModal:!1}},watch:{"image.crop":function(t){this.$emit("cropped",this.image),t?this.cropThumbnail(t):this.croppedImageUrl=null}},computed:{haveImage:function(){return!!this.image.url},thumbnailUrl:function(){return this.croppedImageUrl||this.image.url}},methods:{selectImage:function(){this.$refs.input.click()},onInput:function(t){this.error=null,t&&this.upload(t)},upload:function(t){var e=this;return this.uploading=!0,axios.post(route("api.photo-uploads.store"),this.makeForm(t),{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},onUploadProgress:function(t){e.progress=Math.floor(100*t.loaded/t.total)}}).then((function(i){e.image.path=i.data.file,e.image.exif=i.data.exif,e.image.license=null,e.uploading=!1,e.progress=0,e.$emit("uploaded",e.image),e.loading=!0,r()(t,(function(t){e.image.url=e.getImageDataUrl(t),e.loading=!1}),{orientation:!0})})).catch(this.handleError)},getImageDataUrl:function(t){var e=t;return e instanceof HTMLCanvasElement||((e=document.createElement("canvas")).setAttribute("width",t.width),e.setAttribute("height",t.height),e.getContext("2d").drawImage(t,0,0)),e.toDataURL()},makeForm:function(t){var e=new FormData;return e.append("file",t),e},remove:function(){var t=this;if(this.hasExisting)return this.hasExisting=!1,this.clearPhoto();axios.delete(route("api.photo-uploads.destroy",this.image.path)).then((function(){t.clearPhoto()}))},clearPhoto:function(){this.$emit("removed",this.image),this.image.path=null,this.image.url=null,this.image.crop=null,this.image.license=null,this.croppedImageUrl=null},handleError:function(t){if(this.uploading=!1,this.loading=!1,this.progress=0,this.image.url=null,this.$el.querySelector('input[type="file"]').value="",!t.response)return this.$buefy.toast.open({duration:5e3,message:t.message,position:"is-top",type:"is-danger"});this.error=t.response.data.errors.file[0]||this.trans("Error")},openCropModal:function(){this.showCropModal=!0},closeCropModal:function(){this.showCropModal=!1},cropThumbnail:function(t){var e=document.createElement("img");e.src=this.image.url;var i=document.createElement("canvas");i.setAttribute("width",t.width),i.setAttribute("height",t.height),i.getContext("2d").drawImage(e,-t.x,-t.y),this.croppedImageUrl=i.toDataURL()},handleLicenseChanged:function(t){this.image.license=t,this.$emit("license-changed",t)}}};const b=(0,v.Z)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.haveImage?i("div",{staticClass:"card"},[i("div",{staticClass:"card-image"},[i("figure",{staticClass:"has-magnifier has-text-centered",on:{click:function(e){t.showModal=!0}}},[i("img",{staticClass:"max-h-36",attrs:{src:t.thumbnailUrl,alt:"Uploaded photo"}}),t._v(" "),i("div",{staticClass:"image-magnifier"},[i("b-icon",{attrs:{icon:"expand",size:"is-medium"}})],1)])]),t._v(" "),t.haveImage?i("footer",{staticClass:"card-footer"},[i("div",{staticClass:"card-footer-item flex-col"},[i("div",{staticClass:"mb-4 w-full flex justify-between"},[t.withCrop?i("button",{staticClass:"button is-outlined is-small mr-2",attrs:{type:"button"},on:{click:t.openCropModal,close:t.closeCropModal}},[i("b-icon",{attrs:{icon:"crop"}})],1):t._e(),t._v(" "),t.image.path||t.hasExisting?i("button",{staticClass:"delete is-danger is-medium",attrs:{type:"button"},on:{click:t.remove}}):t._e()]),t._v(" "),t.withLicense?i("div",{staticClass:"w-full"},[i("b-select",{attrs:{value:t.image.license,expanded:""},on:{input:t.handleLicenseChanged}},[i("option",{domProps:{value:null}},[t._v(t._s(t.trans("labels.field_observations.default")))]),t._v(" "),t._l(t.licenses,(function(e,n){return i("option",{key:n,domProps:{value:n,textContent:t._s(e)}})}))],2)],1):t._e()])]):t._e(),t._v(" "),t.haveImage?i("nz-image-crop-modal",{attrs:{active:t.showCropModal,crop:t.image.crop,"image-url":t.image.url},on:{"update:active":function(e){t.showCropModal=e},"update:crop":function(e){return t.$set(t.image,"crop",e)}}}):t._e(),t._v(" "),t.showModal?i("nz-image-modal",{attrs:{items:[t.thumbnailUrl]},on:{close:function(e){t.showModal=!1}}}):t._e()],1):i("b-field",{attrs:{message:t.error||null,type:t.error?"is-danger":null,expanded:""}},[i("b-upload",{attrs:{"drag-drop":"",expanded:"",disabled:t.uploading||t.loading},on:{input:t.onInput}},[i("section",{ref:"uploadZone",staticClass:"section is-relative"},[i("div",{staticClass:"has-text-centered"},[i("div",[i("b-icon",{attrs:{icon:"upload",size:"is-medium"}})],1),t._v(" "),t.uploading?i("progress",{staticClass:"progress is-primary is-small",attrs:{max:"100"},domProps:{value:t.progress}},[t._v(t._s(t.progress)+"%")]):t.loading?i("div",[t._v(t._s(t.trans("Loading...")))]):i("div",[t._v(t._s(t.text))])])])])],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=621615925f55fb68c77d.js.map