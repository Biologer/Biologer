/*! For license information please see 5fff9aa1cf3f0df3.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[986],{104:(t,e,n)=>{var i=n(3661);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(r.Cache||i),n}r.Cache=i,t.exports=r},124:(t,e,n)=>{var i=n(9325);t.exports=function(){return i.Date.now()}},583:(t,e,n)=>{var i=n(7237),r=n(7255),o=n(8586),s=n(7797);t.exports=function(t){return o(t)?i(s(t)):r(t)}},631:(t,e,n)=>{var i=n(8077),r=n(9326);t.exports=function(t,e){return null!=t&&r(t,e,i)}},756:(t,e,n)=>{var i=n(3805);t.exports=function(t){return t==t&&!i(t)}},776:(t,e,n)=>{var i=n(756),r=n(5950);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,i(s)]}return e}},777:(t,e,n)=>{t.exports=n(1894)},912:t=>{t.exports=function(t){return t&&t.length?t[0]:void 0}},964:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.record(e)}return n(t,[{key:"all",value:function(){return this.errors}},{key:"has",value:function(t){var e=this.errors.hasOwnProperty(t);e||(e=Object.keys(this.errors).filter(function(e){return e.startsWith(t+".")||e.startsWith(t+"[")}).length>0);return e}},{key:"first",value:function(t){return this.get(t)[0]}},{key:"get",value:function(t){return this.errors[t]||[]}},{key:"any",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return Object.keys(this.errors).length>0;var n={};return e.forEach(function(e){return n[e]=t.get(e)}),n}},{key:"record",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errors=t}},{key:"clear",value:function(t){if(t){var e=Object.assign({},this.errors);Object.keys(e).filter(function(e){return e===t||e.startsWith(t+".")||e.startsWith(t+"[")}).forEach(function(t){return delete e[t]}),this.errors=e}else this.errors={}}}]),t}();e.default=i},1170:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var i=n(6716),r=n(8221),o=n.n(r),s=n(8156),a=n.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}const c={name:"nzTaxonAutocomplete",props:{label:{type:String,default:"Taxon"},placeholder:{type:String,default:"Search for taxon..."},taxon:{type:Object,default:null},url:{type:String,default:function(){return route("api.taxa.index")}},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean,disabled:Boolean},data:function(){return{data:[],selected:this.taxon||null,loading:!1,page:1,isLastPage:!1}},computed:{haveThumbnail:function(){return this.selected&&this.selected.thumbnail_url},icon:function(){return this.selected?"check":"search"}},watch:{taxon:function(t){this.selected=t}},methods:{fetchData:o()(function(){var t=this;if(this.value&&!this.isLastPage){this.loading=!0;var e={name:this.value,limit:20,page:this.page};this.except&&(e.except=this.except),i.A.get(this.url,{params:e}).then(function(e){var n=e.data;n.data.forEach(function(e){return t.data.push(e)}),t.isLastPage=n.meta.last_page<=t.page,t.loading=!1},function(e){t.loading=!1})}},500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.page=1,this.data=[],this.isLastPage=!1,this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===l(t)?a()(t,"name"):t},enterPressed:function(){this.$refs.autocomplete.isActive||this.$emit("name")},loadMore:function(){this.isLastPage||(this.page++,this.fetchData())}}};const u=(0,n(4486).A)(c,function(){var t=this,e=t._self._c;return e("b-field",{staticClass:"nz-taxon-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[e("b-field",{attrs:{grouped:""}},[t.haveThumbnail?e("img",{attrs:{width:"32",src:this.selected.thumbnail_url}}):t._e(),t._v(" "),e("b-autocomplete",{ref:"autocomplete",class:[t.selected?"has-icon-success":""],attrs:{value:t.value,data:t.data,field:"name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",disabled:t.disabled,autofocus:t.autofocus,"check-infinite-scroll":""},on:{input:t.onInput,select:t.onSelect,"infinite-scroll":t.loadMore},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterPressed.apply(null,arguments)}},scopedSlots:t._u([{key:"detault",fn:function(n){var i=n.option;return[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[i.thumbnail_url?e("img",{attrs:{width:"32",src:i.thumbnail_url}}):t._e()]),t._v(" "),e("div",{staticClass:"media-content"},[t._v("\n            "+t._s(i.name)+t._s(i.native_name?" (".concat(i.native_name,")"):"")+"\n          ")])])]}}])})],1)],1)},[],!1,null,null,null).exports},1225:(t,e,n)=>{"use strict";t.exports={isBrowser:!0,classes:{URLSearchParams:n(2005),FormData:n(7686),Blob},protocols:["http","https","file","blob","url","data"]}},1236:(t,e,n)=>{"use strict";var i=n(6806).version,r=n(1996),o={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){o[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var s={};o.transitional=function(t,e,n){function o(t,e){return"[Axios v"+i+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,i,a){if(!1===t)throw new r(o(i," has been removed"+(e?" in "+e:"")),r.ERR_DEPRECATED);return e&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,a)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new r("options must be an object",r.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),o=i.length;o-- >0;){var s=i[o],a=e[s];if(a){var l=t[s],c=void 0===l||a(l,s,t);if(!0!==c)throw new r("option "+s+" must be "+c,r.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new r("Unknown option "+s,r.ERR_BAD_OPTION)}},validators:o}},1328:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guardAgainstReservedFieldName=function(t){if(-1!==n.indexOf(t))throw new Error("Field name "+t+" isn't allowed to be used in a Form or Errors instance.")};var n=e.reservedFieldNames=["__http","__options","__validateRequestType","clear","data","delete","errors","getError","getErrors","hasError","initial","onFail","only","onSuccess","patch","populate","post","processing","successful","put","reset","submit","withData","withErrors","withOptions"]},1489:(t,e,n)=>{var i=n(7400);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},1683:t=>{"use strict";t.exports=function(t,e){return function(){return t.apply(e,arguments)}}},1769:(t,e,n)=>{var i=n(6449),r=n(8586),o=n(1802),s=n(3222);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:o(s(t))}},1799:(t,e,n)=>{var i=n(7217),r=n(270);t.exports=function(t,e,n,o){var s=n.length,a=s,l=!o;if(null==t)return!a;for(t=Object(t);s--;){var c=n[s];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<a;){var u=(c=n[s])[0],d=t[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in t))return!1}else{var f=new i;if(o)var m=o(d,h,u,t,e,f);if(!(void 0===m?r(h,d,3,o,f):m))return!1}}return!0}},1802:(t,e,n)=>{var i=n(2224),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=i(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)}),e});t.exports=s},1894:t=>{"use strict";t.exports="object"==typeof self?self.FormData:window.FormData},1996:(t,e,n)=>{"use strict";var i=n(3109);function r(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}i.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=r.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(t){s[t]={value:t}}),Object.defineProperties(r,s),Object.defineProperty(o,"isAxiosError",{value:!0}),r.from=function(t,e,n,s,a,l){var c=Object.create(o);return i.toFlatObject(t,c,function(t){return t!==Error.prototype}),r.call(c,t.message,e,n,s,a),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c},t.exports=r},2005:(t,e,n)=>{"use strict";var i=n(2241);t.exports="undefined"!=typeof URLSearchParams?URLSearchParams:i},2006:(t,e,n)=>{var i=n(5389),r=n(4894),o=n(5950);t.exports=function(t){return function(e,n,s){var a=Object(e);if(!r(e)){var l=i(n,3);e=o(e),n=function(t){return l(a[t],t,a)}}var c=t(e,n,s);return c>-1?a[l?e[c]:c]:void 0}}},2184:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},2224:(t,e,n)=>{var i=n(104);t.exports=function(t){var e=i(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},2241:(t,e,n)=>{"use strict";var i=n(8295);function r(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(t){return e[t]})}function o(t,e){this._pairs=[],t&&i(t,this,e)}var s=o.prototype;s.append=function(t,e){this._pairs.push([t,e])},s.toString=function(t){var e=t?function(e){return t.call(this,e,r)}:r;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")},t.exports=o},2359:(t,e,n)=>{"use strict";var i=n(1996);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new i("Request failed with status code "+n.status,[i.ERR_BAD_REQUEST,i.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},2523:t=>{t.exports=function(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}},2684:(t,e,n)=>{"use strict";var i=n(6392);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;this.promise.then(function(t){if(n._listeners){for(var e=n._listeners.length;e-- >0;)n._listeners[e](t);n._listeners=null}}),this.promise.then=function(t){var e,i=new Promise(function(t){n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,r,o){n.reason||(n.reason=new i(t,r,o),e(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},r.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},2900:(t,e,n)=>{"use strict";var i=n(3109),r=n(5493),o=n(9006),s=n(9605),a=n(5204),l=n(6448),c=n(1236),u=c.validators;function d(t){this.defaults=t,this.interceptors={request:new o,response:new o}}d.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=e.paramsSerializer;null!=r&&(i.isFunction(r)?e.paramsSerializer={serialize:r}:c.assertOptions(r,{encode:u.function,serialize:u.function},!0));var o=[],l=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(l=l&&t.synchronous,o.unshift(t.fulfilled,t.rejected))});var d,h=[];if(this.interceptors.response.forEach(function(t){h.push(t.fulfilled,t.rejected)}),!l){var f=[s,void 0];for(Array.prototype.unshift.apply(f,o),f=f.concat(h),d=Promise.resolve(e);f.length;)d=d.then(f.shift(),f.shift());return d}for(var m=e;o.length;){var p=o.shift(),g=o.shift();try{m=p(m)}catch(t){g(t);break}}try{d=s(m)}catch(t){return Promise.reject(t)}for(;h.length;)d=d.then(h.shift(),h.shift());return d},d.prototype.getUri=function(t){t=a(this.defaults,t);var e=l(t.baseURL,t.url,t.allowAbsoluteUrls);return r(e,t.params,t.paramsSerializer)},i.forEach(["delete","get","head","options"],function(t){d.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,r){return this.request(a(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}d.prototype[t]=e(),d.prototype[t+"Form"]=e(!0)}),t.exports=d},3106:(t,e,n)=>{"use strict";var i=n(3109),r=n(4135);t.exports=function(t,e,n,o){var s=this||r;return i.forEach(o,function(i){t=i.call(s,t,e,n)}),t}},3109:(t,e,n)=>{"use strict";var i,r=n(1683),o=Object.prototype.toString,s=(i=Object.create(null),function(t){var e=o.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())});function a(t){return t=t.toLowerCase(),function(e){return s(e)===t}}function l(t){return Array.isArray(t)}function c(t){return void 0===t}var u=a("ArrayBuffer");function d(t){return"number"==typeof t}function h(t){return null!==t&&"object"==typeof t}function f(t){if("object"!==s(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var m=a("Date"),p=a("File"),g=a("Blob"),b=a("FileList");function v(t){return"[object Function]"===o.call(t)}var y=a("URLSearchParams");function A(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),l(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}var x,E=(x="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return x&&t instanceof x});var S,w=a("HTMLFormElement"),C=(S=Object.prototype.hasOwnProperty,function(t,e){return S.call(t,e)});t.exports={isArray:l,isArrayBuffer:u,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||o.call(t)===e||v(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&u(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:d,isObject:h,isPlainObject:f,isEmptyObject:function(t){return t&&0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype},isUndefined:c,isDate:m,isFile:p,isBlob:g,isFunction:v,isStream:function(t){return h(t)&&v(t.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){var t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:A,merge:function t(){var e={};function n(n,i){f(e[i])&&f(n)?e[i]=t(e[i],n):f(n)?e[i]=t({},n):l(n)?e[i]=n.slice():e[i]=n}for(var i=0,r=arguments.length;i<r;i++)A(arguments[i],n);return e},extend:function(t,e,n){return A(e,function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n,i){var r,o,s,a={};if(e=e||{},null==t)return e;do{for(o=(r=Object.getOwnPropertyNames(t)).length;o-- >0;)s=r[o],i&&!i(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:a,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return-1!==i&&i===n},toArray:function(t){if(!t)return null;if(l(t))return t;var e=t.length;if(!d(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:E,isFileList:b,forEachEntry:function(t,e){for(var n,i=(t&&t[Symbol.iterator]).call(t);(n=i.next())&&!n.done;){var r=n.value;e.call(t,r[0],r[1])}},matchAll:function(t,e){for(var n,i=[];null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:w,hasOwnProperty:C}},3120:(t,e,n)=>{var i=n(4528),r=n(5891);t.exports=function t(e,n,o,s,a){var l=-1,c=e.length;for(o||(o=r),a||(a=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,s,a):i(a,u):s||(a[a.length]=u)}return a}},3170:(t,e,n)=>{var i=n(6547),r=n(1769),o=n(361),s=n(3805),a=n(7797);t.exports=function(t,e,n,l){if(!s(t))return t;for(var c=-1,u=(e=r(e,t)).length,d=u-1,h=t;null!=h&&++c<u;){var f=a(e[c]),m=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(c!=d){var p=h[f];void 0===(m=l?l(p,f,h):void 0)&&(m=s(p)?p:o(e[c+1])?[]:{})}i(h,f,m),h=h[f]}return t}},3663:(t,e,n)=>{var i=n(1799),r=n(776),o=n(7197);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},4135:(t,e,n)=>{"use strict";var i=n(5606),r=n(3109),o=n(9907),s=n(1996),a=n(6621),l=n(8295),c=n(5090),u=n(6282),d=n(5021),h={"Content-Type":"application/x-www-form-urlencoded"};function f(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var m,p={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(m=n(5271)),m),transformRequest:[function(t,e){o(e,"Accept"),o(e,"Content-Type");var n,i=e&&e["Content-Type"]||"",s=i.indexOf("application/json")>-1,a=r.isObject(t);if(a&&r.isHTMLForm(t)&&(t=new FormData(t)),r.isFormData(t))return s?JSON.stringify(d(t)):t;if(r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return f(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();if(a){if(-1!==i.indexOf("application/x-www-form-urlencoded"))return c(t,this.formSerializer).toString();if((n=r.isFileList(t))||i.indexOf("multipart/form-data")>-1){var u=this.env&&this.env.FormData;return l(n?{"files[]":t}:t,u&&new u,this.formSerializer)}}return a||s?(f(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||p.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(t&&r.isString(t)&&(n&&!this.responseType||i)){var o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw s.from(t,s.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:u.classes.FormData,Blob:u.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){p.headers[t]={}}),r.forEach(["post","put","patch"],function(t){p.headers[t]=r.merge(h)}),t.exports=p},4383:(t,e,n)=>{var i=n(6001),r=n(8816)(function(t,e){return null==t?{}:i(t,e)});t.exports=r},4413:(t,e,n)=>{"use strict";var i=n(3109);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4713:(t,e,n)=>{var i=n(2523),r=n(5389),o=n(1489),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var l=null==n?0:o(n);return l<0&&(l=s(a+l,0)),i(t,r(e,3),l)}},5021:(t,e,n)=>{"use strict";var i=n(3109);t.exports=function(t){function e(t,n,r,o){var s=t[o++];if("__proto__"===s)return!0;var a=Number.isFinite(+s),l=o>=t.length;return s=!s&&i.isArray(r)?r.length:s,l?(i.hasOwnProperty(r,s)?r[s]=[r[s],n]:r[s]=n,!a):(r[s]&&i.isObject(r[s])||(r[s]=[]),e(t,n,r[s],o)&&i.isArray(r[s])&&(r[s]=function(t){var e,n,i={},r=Object.keys(t),o=r.length;for(e=0;e<o;e++)i[n=r[e]]=t[n];return i}(r[s])),!a)}if(i.isFormData(t)&&i.isFunction(t.entries)){var n={};return i.forEachEntry(t,function(t,r){e(function(t){return i.matchAll(/\w+|\[(\w*)]/g,t).map(function(t){return"[]"===t[0]?"":t[1]||t[0]})}(t),r,n,0)}),n}return null}},5090:(t,e,n)=>{"use strict";var i=n(3109),r=n(8295),o=n(6282);t.exports=function(t,e){return r(t,new o.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return o.isNode&&i.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}},5204:(t,e,n)=>{"use strict";var i=n(3109);t.exports=function(t,e){e=e||{};var n={};function r(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isEmptyObject(e)?i.merge({},t):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function o(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:r(void 0,t[n]):r(t[n],e[n])}function s(t){if(!i.isUndefined(e[t]))return r(void 0,e[t])}function a(n){return i.isUndefined(e[n])?i.isUndefined(t[n])?void 0:r(void 0,t[n]):r(void 0,e[n])}function l(n){return n in e?r(t[n],e[n]):n in t?r(void 0,t[n]):void 0}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return i.forEach(Object.keys(t).concat(Object.keys(e)),function(t){var e=c[t]||o,r=e(t);i.isUndefined(r)&&e!==l||(n[t]=r)}),n}},5244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5772);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(7192);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var o=n(1328);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})},5271:(t,e,n)=>{"use strict";var i=n(3109),r=n(2359),o=n(4413),s=n(5493),a=n(6448),l=n(5699),c=n(9511),u=n(6621),d=n(1996),h=n(6392),f=n(7041),m=n(6282);t.exports=function(t){return new Promise(function(e,n){var p,g=t.data,b=t.headers,v=t.responseType,y=t.withXSRFToken;function A(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}i.isFormData(g)&&i.isStandardBrowserEnv()&&delete b["Content-Type"];var x=new XMLHttpRequest;if(t.auth){var E=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";b.Authorization="Basic "+btoa(E+":"+S)}var w=a(t.baseURL,t.url,t.allowAbsoluteUrls);function C(){if(x){var i="getAllResponseHeaders"in x?l(x.getAllResponseHeaders()):null,o={data:v&&"text"!==v&&"json"!==v?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:i,config:t,request:x};r(function(t){e(t),A()},function(t){n(t),A()},o),x=null}}if(x.open(t.method.toUpperCase(),s(w,t.params,t.paramsSerializer),!0),x.timeout=t.timeout,"onloadend"in x?x.onloadend=C:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(C)},x.onabort=function(){x&&(n(new d("Request aborted",d.ECONNABORTED,t,x)),x=null)},x.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",i=t.transitional||u;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new d(e,i.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,t,x)),x=null},i.isStandardBrowserEnv()&&(y&&i.isFunction(y)&&(y=y(t)),y||!1!==y&&c(w))){var R=t.xsrfHeaderName&&t.xsrfCookieName&&o.read(t.xsrfCookieName);R&&(b[t.xsrfHeaderName]=R)}"setRequestHeader"in x&&i.forEach(b,function(t,e){void 0===g&&"content-type"===e.toLowerCase()?delete b[e]:x.setRequestHeader(e,t)}),i.isUndefined(t.withCredentials)||(x.withCredentials=!!t.withCredentials),v&&"json"!==v&&(x.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&x.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(e){x&&(n(!e||e.type?new h(null,t,x):e),x.abort(),x=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),g||!1===g||0===g||""===g||(g=null);var k=f(w);k&&-1===m.protocols.indexOf(k)?n(new d("Unsupported protocol "+k+":",d.ERR_BAD_REQUEST,t)):x.send(g)})}},5389:(t,e,n)=>{var i=n(3663),r=n(7978),o=n(3488),s=n(6449),a=n(583);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?r(t[0],t[1]):i(t):a(t)}},5493:(t,e,n)=>{"use strict";var i=n(3109),r=n(2241);function o(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s));var a,l=n&&n.encode||o,c=n&&n.serialize;return(a=c?c(e,n):i.isURLSearchParams(e)?e.toString():new r(e,n).toString(l))&&(t+=(-1===t.indexOf("?")?"?":"&")+a),t}},5699:(t,e,n)=>{"use strict";var i=n(3109),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(i.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=i.trim(t.slice(0,o)).toLowerCase(),n=i.trim(t.slice(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},5772:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){return t instanceof File||t instanceof FileList}function r(t){if(null===t)return null;if(i(t))return t;if(Array.isArray(t)){var e=[];for(var o in t)t.hasOwnProperty(o)&&(e[o]=r(t[o]));return e}if("object"===(void 0===t?"undefined":n(t))){var s={};for(var a in t)t.hasOwnProperty(a)&&(s[a]=r(t[a]));return s}return t}e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isFile=i,e.merge=function(t,e){for(var n in e)t[n]=r(e[n])},e.cloneDeep=r},5891:(t,e,n)=>{var i=n(1873),r=n(2428),o=n(6449),s=i?i.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||r(t)||!!(s&&t&&t[s])}},5947:(t,e,n)=>{"use strict";var i=n(6769);Object.defineProperty(e,"Ay",{enumerable:!0,get:function(){return o(i).default}});var r=n(964);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"I",{enumerable:!0,get:function(){return o(r).default}})},5970:(t,e,n)=>{var i=n(3120);t.exports=function(t){return(null==t?0:t.length)?i(t,1):[]}},6001:(t,e,n)=>{var i=n(7420),r=n(631);t.exports=function(t,e){return i(t,e,function(e,n){return r(t,n)})}},6013:(t,e,n)=>{"use strict";n.d(e,{A:()=>no});var i=n(2893);const r="[data-trix-attachment]",o={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},s={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(t){return a(t.parentNode)===s[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(t){return a(t.parentNode)===s[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},a=t=>{var e;return null==t||null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase()},l=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),c=l&&parseInt(l[1]);var u={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:c&&c>12,samsungAndroid:c&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:"undefined"!=typeof InputEvent&&["data","getTargetRanges","inputType"].every(t=>t in InputEvent.prototype)},d={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},h={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a captionâ€¦",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URLâ€¦",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};const f=[h.bytes,h.KB,h.MB,h.GB,h.TB,h.PB];var m={prefix:"IEC",precision:2,formatter(t){switch(t){case 0:return"0 ".concat(h.bytes);case 1:return"1 ".concat(h.byte);default:let e;"SI"===this.prefix?e=1e3:"IEC"===this.prefix&&(e=1024);const n=Math.floor(Math.log(t)/Math.log(e)),i=(t/Math.pow(e,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat(f[n])}}};const p="\ufeff",g="Â ",b=function(t){for(const e in t){const n=t[e];this[e]=n}return this},v=document.documentElement,y=v.matches,A=function(t){let{onElement:e,matchingSelector:n,withCallback:i,inPhase:r,preventDefault:o,times:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e||v,l=n,c="capturing"===r,u=function(t){null!=s&&0==--s&&u.destroy();const e=S(t.target,{matchingSelector:l});null!=e&&(null==i||i.call(e,t,e),o&&t.preventDefault())};return u.destroy=()=>a.removeEventListener(t,u,c),a.addEventListener(t,u,c),u},x=function(t){let{onElement:e,bubbles:n,cancelable:i,attributes:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=null!=e?e:v;n=!1!==n,i=!1!==i;const s=document.createEvent("Events");return s.initEvent(t,n,i),null!=r&&b.call(s,r),o.dispatchEvent(s)},E=function(t,e){if(1===(null==t?void 0:t.nodeType))return y.call(t,e)},S=function(t){let{matchingSelector:e,untilNode:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(null!=t){if(null==e)return t;if(t.closest&&null==n)return t.closest(e);for(;t&&t!==n;){if(E(t,e))return t;t=t.parentNode}}},w=t=>document.activeElement!==t&&C(t,document.activeElement),C=function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},R=function(t){var e;if(null===(e=t)||void 0===e||!e.parentNode)return;let n=0;for(t=t.previousSibling;t;)n++,t=t.previousSibling;return n},k=t=>{var e;return null==t||null===(e=t.parentNode)||void 0===e?void 0:e.removeChild(t)},T=function(t){let{onlyNodesOfType:e,usingFilter:n,expandEntityReferences:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(()=>{switch(e){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(t,r,null!=n?n:null,!0===i)},O=t=>{var e;return null==t||null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase()},L=function(t){let e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"==typeof t?(i=t,t=i.tagName):i={attributes:i};const r=document.createElement(t);if(null!=i.editable&&(null==i.attributes&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(e in i.attributes)n=i.attributes[e],r.setAttribute(e,n);if(i.style)for(e in i.style)n=i.style[e],r.style[e]=n;if(i.data)for(e in i.data)n=i.data[e],r.dataset[e]=n;return i.className&&i.className.split(" ").forEach(t=>{r.classList.add(t)}),i.textContent&&(r.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(t=>{r.appendChild(t)}),r};let D;const _=function(){if(null!=D)return D;D=[];for(const t in s){const e=s[t];e.tagName&&D.push(e.tagName)}return D},N=t=>F(null==t?void 0:t.firstChild),P=function(t){let{strict:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{strict:!0};return e?F(t):F(t)||!F(t.firstChild)&&function(t){return _().includes(O(t))&&!_().includes(O(t.firstChild))}(t)},F=t=>B(t)&&"block"===(null==t?void 0:t.data),B=t=>(null==t?void 0:t.nodeType)===Node.COMMENT_NODE,I=function(t){let{name:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t)return U(t)?t.data===p?!e||t.parentNode.dataset.trixCursorTarget===e:void 0:I(t.firstChild)},M=t=>E(t,r),j=t=>U(t)&&""===(null==t?void 0:t.data),U=t=>(null==t?void 0:t.nodeType)===Node.TEXT_NODE,W={level2Enabled:!0,getLevel(){return this.level2Enabled&&u.supportsInputEvents?2:0},pickFiles(t){const e=L("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});e.addEventListener("change",()=>{t(e.files),k(e)}),k(document.getElementById(this.fileInputId)),document.body.appendChild(e),e.click()}};var q={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:"\n"},z={bold:{tagName:"strong",inheritable:!0,parser(t){const e=window.getComputedStyle(t);return"bold"===e.fontWeight||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:t=>"italic"===window.getComputedStyle(t).fontStyle},href:{groupTagName:"a",parser(t){const e="a:not(".concat(r,")"),n=t.closest(e);if(n)return n.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},V={getDefaultHTML:()=>'<div class="trix-button-row">\n      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'.concat(h.bold,'" tabindex="-1">').concat(h.bold,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="').concat(h.italic,'" tabindex="-1">').concat(h.italic,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="').concat(h.strike,'" tabindex="-1">').concat(h.strike,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="').concat(h.link,'" tabindex="-1">').concat(h.link,'</button>\n      </span>\n\n      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="').concat(h.heading1,'" tabindex="-1">').concat(h.heading1,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="').concat(h.quote,'" tabindex="-1">').concat(h.quote,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="').concat(h.code,'" tabindex="-1">').concat(h.code,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="').concat(h.bullets,'" tabindex="-1">').concat(h.bullets,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="').concat(h.numbers,'" tabindex="-1">').concat(h.numbers,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="').concat(h.outdent,'" tabindex="-1">').concat(h.outdent,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="').concat(h.indent,'" tabindex="-1">').concat(h.indent,'</button>\n      </span>\n\n      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="').concat(h.attachFiles,'" tabindex="-1">').concat(h.attachFiles,'</button>\n      </span>\n\n      <span class="trix-button-group-spacer"></span>\n\n      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="').concat(h.undo,'" tabindex="-1">').concat(h.undo,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="').concat(h.redo,'" tabindex="-1">').concat(h.redo,'</button>\n      </span>\n    </div>\n\n    <div class="trix-dialogs" data-trix-dialogs>\n      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n        <div class="trix-dialog__link-fields">\n          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="').concat(h.urlPlaceholder,'" aria-label="').concat(h.url,'" data-trix-validate-href required data-trix-input>\n          <div class="trix-button-group">\n            <input type="button" class="trix-button trix-button--dialog" value="').concat(h.link,'" data-trix-method="setAttribute">\n            <input type="button" class="trix-button trix-button--dialog" value="').concat(h.unlink,'" data-trix-method="removeAttribute">\n          </div>\n        </div>\n      </div>\n    </div>')};const H={interval:5e3};var J=Object.freeze({__proto__:null,attachments:o,blockAttributes:s,browser:u,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:d,fileSize:m,input:W,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:h,parser:q,textAttributes:z,toolbar:V,undo:H});class K{static proxyMethod(t){const{name:e,toMethod:n,toProperty:i,optional:r}=$(t);this.prototype[e]=function(){let t,o;var s,a;return n?o=r?null===(s=this[n])||void 0===s?void 0:s.call(this):this[n]():i&&(o=this[i]),r?(t=null===(a=o)||void 0===a?void 0:a[e],t?G.call(t,o,arguments):void 0):(t=o[e],G.call(t,o,arguments))}}}const $=function(t){const e=t.match(X);if(!e)throw new Error("can't parse @proxyMethod expression: ".concat(t));const n={name:e[4]};return null!=e[2]?n.toMethod=e[1]:n.toProperty=e[1],null!=e[3]&&(n.optional=!0),n},{apply:G}=Function.prototype,X=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$");var Y,Q,Z;class tt extends K{static box(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(null==t?void 0:t.toString())}static fromUCS2String(t){return new this(t,rt(t))}static fromCodepoints(t){return new this(ot(t),t)}constructor(t,e){super(...arguments),this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return ot(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return rt(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}}const et=1===(null===(Y=Array.from)||void 0===Y?void 0:Y.call(Array,"ðŸ‘¼").length),nt=null!=(null===(Q=" ".codePointAt)||void 0===Q?void 0:Q.call(" ",0)),it=" ðŸ‘¼"===(null===(Z=String.fromCodePoint)||void 0===Z?void 0:Z.call(String,32,128124));let rt,ot;rt=et&&nt?t=>Array.from(t).map(t=>t.codePointAt(0)):function(t){const e=[];let n=0;const{length:i}=t;for(;n<i;){let r=t.charCodeAt(n++);if(55296<=r&&r<=56319&&n<i){const e=t.charCodeAt(n++);56320==(64512&e)?r=((1023&r)<<10)+(1023&e)+65536:n--}e.push(r)}return e},ot=it?t=>String.fromCodePoint(...Array.from(t||[])):function(t){return(()=>{const e=[];return Array.from(t).forEach(t=>{let n="";t>65535&&(t-=65536,n+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e.push(n+String.fromCharCode(t))}),e})().join("")};let st=0;class at extends K{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++st}hasSameConstructorAs(t){return this.constructor===(null==t?void 0:t.constructor)}isEqualTo(t){return this===t}inspect(){const t=[],e=this.contentsForInspection()||{};for(const n in e){const i=e[n];t.push("".concat(n,"=").concat(i))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return tt.box(this)}getCacheKey(){return this.id.toString()}}const lt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},ct=function(t){const e=t.slice(0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.splice(...i),e},ut=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,dt=function(){const t=L("input",{dir:"auto",name:"x",dirName:"x.dir"}),e=L("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),n=L("form");n.appendChild(t),n.appendChild(e);const i=function(){try{return new FormData(n).has(e.dirName)}catch(t){return!1}}(),r=function(){try{return t.matches(":dir(ltr),:dir(rtl)")}catch(t){return!1}}();return i?function(t){return e.value=t,new FormData(n).get(e.dirName)}:r?function(e){return t.value=e,t.matches(":dir(rtl)")?"rtl":"ltr"}:function(t){const e=t.trim().charAt(0);return ut.test(e)?"rtl":"ltr"}}();let ht=null,ft=null,mt=null,pt=null;const gt=()=>(ht||(ht=At().concat(vt())),ht),bt=t=>s[t],vt=()=>(ft||(ft=Object.keys(s)),ft),yt=t=>z[t],At=()=>(mt||(mt=Object.keys(z)),mt),xt=function(t,e){Et(t).textContent=e.replace(/%t/g,t)},Et=function(t){const e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase());const n=St();return n&&e.setAttribute("nonce",n),document.head.insertBefore(e,document.head.firstChild),e},St=function(){const t=wt("trix-csp-nonce")||wt("csp-nonce");if(t){const{nonce:e,content:n}=t;return""==e?n:e}},wt=t=>document.head.querySelector("meta[name=".concat(t,"]")),Ct={"application/x-trix-feature-detection":"test"},Rt=function(t){const e=t.getData("text/plain"),n=t.getData("text/html");if(!e||!n)return null==e?void 0:e.length;{const{body:t}=(new DOMParser).parseFromString(n,"text/html");if(t.textContent===e)return!t.querySelector("*")}},kt=/Mac|^iP/.test(navigator.platform)?t=>t.metaKey:t=>t.ctrlKey,Tt=t=>setTimeout(t,1),Ot=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={};for(const n in t){const i=t[n];e[n]=i}return e},Lt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0},Dt=function(t){if(null!=t)return Array.isArray(t)||(t=[t,t]),[Pt(t[0]),Pt(null!=t[1]?t[1]:t[0])]},_t=function(t){if(null==t)return;const[e,n]=Dt(t);return Ft(e,n)},Nt=function(t,e){if(null==t||null==e)return;const[n,i]=Dt(t),[r,o]=Dt(e);return Ft(n,r)&&Ft(i,o)},Pt=function(t){return"number"==typeof t?t:Ot(t)},Ft=function(t,e){return"number"==typeof t?t===e:Lt(t,e)};class Bt extends K{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(e=>e!==t),0===this.selectionManagers.length)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}}const It=new Bt,Mt=function(){const t=window.getSelection();if(t.rangeCount>0)return t},jt=function(){var t;const e=null===(t=Mt())||void 0===t?void 0:t.getRangeAt(0);if(e&&!Wt(e))return e},Ut=function(t){const e=window.getSelection();return e.removeAllRanges(),e.addRange(t),It.update()},Wt=t=>qt(t.startContainer)||qt(t.endContainer),qt=t=>!Object.getPrototypeOf(t),zt=t=>t.replace(new RegExp("".concat(p),"g"),"").replace(new RegExp("".concat(g),"g")," "),Vt=new RegExp("[^\\S".concat(g,"]")),Ht=t=>t.replace(new RegExp("".concat(Vt.source),"g")," ").replace(/\ {2,}/g," "),Jt=function(t,e){if(t.isEqualTo(e))return["",""];const n=Kt(t,e),{length:i}=n.utf16String;let r;if(i){const{offset:o}=n,s=t.codepoints.slice(0,o).concat(t.codepoints.slice(o+i));r=Kt(e,tt.fromCodepoints(s))}else r=Kt(e,t);return[n.utf16String.toString(),r.utf16String.toString()]},Kt=function(t,e){let n=0,i=t.length,r=e.length;for(;n<i&&t.charAt(n).isEqualTo(e.charAt(n));)n++;for(;i>n+1&&t.charAt(i-1).isEqualTo(e.charAt(r-1));)i--,r--;return{utf16String:t.slice(n,i),offset:n}};class $t extends at{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t.length)return new this;let e=Qt(t[0]),n=e.getKeys();return t.slice(1).forEach(t=>{n=e.getKeysCommonToHash(Qt(t)),e=e.slice(n)}),e}static box(t){return Qt(t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(...arguments),this.values=Yt(t)}add(t,e){return this.merge(Gt(t,e))}remove(t){return new $t(Yt(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new $t(Xt(this.values,Zt(t)))}slice(t){const e={};return Array.from(t).forEach(t=>{this.has(t)&&(e[t]=this.values[t])}),new $t(e)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=Qt(t),this.getKeys().filter(e=>this.values[e]===t.values[e])}isEqualTo(t){return lt(this.toArray(),Qt(t).toArray())}isEmpty(){return 0===this.getKeys().length}toArray(){if(!this.array){const t=[];for(const e in this.values){const n=this.values[e];t.push(t.push(e,n))}this.array=t.slice(0)}return this.array}toObject(){return Yt(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}}const Gt=function(t,e){const n={};return n[t]=e,n},Xt=function(t,e){const n=Yt(t);for(const t in e){const i=e[t];n[t]=i}return n},Yt=function(t,e){const n={};return Object.keys(t).sort().forEach(i=>{i!==e&&(n[i]=t[i])}),n},Qt=function(t){return t instanceof $t?t:new $t(t)},Zt=function(t){return t instanceof $t?t.values:t};class te{static groupObjects(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{depth:n,asTree:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i&&null==n&&(n=0);const r=[];return Array.from(e).forEach(e=>{var o;if(t){var s,a,l;if(null!==(s=e.canBeGrouped)&&void 0!==s&&s.call(e,n)&&null!==(a=(l=t[t.length-1]).canBeGroupedWith)&&void 0!==a&&a.call(l,e,n))return void t.push(e);r.push(new this(t,{depth:n,asTree:i})),t=null}null!==(o=e.canBeGrouped)&&void 0!==o&&o.call(e,n)?t=[e]:r.push(e)}),t&&r.push(new this(t,{depth:n,asTree:i})),r}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{depth:e,asTree:n}=arguments.length>1?arguments[1]:void 0;this.objects=t,n&&(this.depth=e,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){const t=["objectGroup"];return Array.from(this.getObjects()).forEach(e=>{t.push(e.getCacheKey())}),t.join("/")}}class ee extends K{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(t=>{const e=JSON.stringify(t);null==this.objects[e]&&(this.objects[e]=t)})}find(t){const e=JSON.stringify(t);return this.objects[e]}}class ne{constructor(t){this.reset(t)}add(t){const e=ie(t);this.elements[e]=t}remove(t){const e=ie(t),n=this.elements[e];if(n)return delete this.elements[e],n}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.elements={},Array.from(t).forEach(t=>{this.add(t)}),t}}const ie=t=>t.dataset.trixStoreKey;class re extends K{isPerforming(){return!0===this.performing}hasPerformed(){return!0===this.performed}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,e)=>(this.performing=!0,this.perform((n,i)=>{this.succeeded=n,this.performing=!1,this.performed=!0,this.succeeded?t(i):e(i)})))),this.promise}perform(t){return t(!1)}release(){var t,e;null===(t=this.promise)||void 0===t||null===(e=t.cancel)||void 0===e||e.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}}re.proxyMethod("getPromise().then"),re.proxyMethod("getPromise().catch");class oe extends K{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(...arguments),this.object=t,this.options=e,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],null===(t=this.parentView)||void 0===t?void 0:t.invalidate()}invalidateViewForObject(t){var e;return null===(e=this.findViewForObject(t))||void 0===e?void 0:e.invalidate()}findOrCreateCachedChildView(t,e,n){let i=this.getCachedViewForObject(e);return i?this.recordChildView(i):(i=this.createChildView(...arguments),this.cacheViewForObject(i,e)),i}createChildView(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e instanceof te&&(n.viewClass=t,t=se);const i=new t(e,n);return this.recordChildView(i)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(e=>{t.push(e),t=t.concat(e.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){const e=null==t?void 0:t.id;if(e)return this.rootView.element.querySelector("[data-trix-id='".concat(e,"']"))}findViewForObject(t){for(const e of this.getAllChildViews())if(e.object===t)return e}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return!1!==this.shouldCacheViews}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var e;return null===(e=this.getViewCache())||void 0===e?void 0:e[t.getCacheKey()]}cacheViewForObject(t,e){const n=this.getViewCache();n&&(n[e.getCacheKey()]=t)}garbageCollectCachedViews(){const t=this.getViewCache();if(t){const e=this.getAllChildViews().concat(this).map(t=>t.object.getCacheKey());for(const n in t)e.includes(n)||delete t[n]}}}class se extends oe{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){const t=this.createContainerElement();return this.getChildViews().forEach(e=>{Array.from(e.getNodes()).forEach(e=>{t.appendChild(e)})}),[t]}createContainerElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}}const{entries:ae,setPrototypeOf:le,isFrozen:ce,getPrototypeOf:ue,getOwnPropertyDescriptor:de}=Object;let{freeze:he,seal:fe,create:me}=Object,{apply:pe,construct:ge}="undefined"!=typeof Reflect&&Reflect;he||(he=function(t){return t}),fe||(fe=function(t){return t}),pe||(pe=function(t,e,n){return t.apply(e,n)}),ge||(ge=function(t,e){return new t(...e)});const be=_e(Array.prototype.forEach),ve=_e(Array.prototype.lastIndexOf),ye=_e(Array.prototype.pop),Ae=_e(Array.prototype.push),xe=_e(Array.prototype.splice),Ee=_e(String.prototype.toLowerCase),Se=_e(String.prototype.toString),we=_e(String.prototype.match),Ce=_e(String.prototype.replace),Re=_e(String.prototype.indexOf),ke=_e(String.prototype.trim),Te=_e(Object.prototype.hasOwnProperty),Oe=_e(RegExp.prototype.test),Le=(De=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ge(De,e)});var De;function _e(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return pe(t,e,i)}}function Ne(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ee;le&&le(t,null);let i=e.length;for(;i--;){let r=e[i];if("string"==typeof r){const t=n(r);t!==r&&(ce(e)||(e[i]=t),r=t)}t[r]=!0}return t}function Pe(t){for(let e=0;e<t.length;e++)Te(t,e)||(t[e]=null);return t}function Fe(t){const e=me(null);for(const[n,i]of ae(t))Te(t,n)&&(Array.isArray(i)?e[n]=Pe(i):i&&"object"==typeof i&&i.constructor===Object?e[n]=Fe(i):e[n]=i);return e}function Be(t,e){for(;null!==t;){const n=de(t,e);if(n){if(n.get)return _e(n.get);if("function"==typeof n.value)return _e(n.value)}t=ue(t)}return function(){return null}}const Ie=he(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Me=he(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),je=he(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ue=he(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),We=he(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qe=he(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ze=he(["#text"]),Ve=he(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),He=he(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Je=he(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ke=he(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$e=fe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ge=fe(/<%[\w\W]*|[\w\W]*%>/gm),Xe=fe(/\$\{[\w\W]*/gm),Ye=fe(/^data-[\-\w.\u00B7-\uFFFF]+$/),Qe=fe(/^aria-[\-\w]+$/),Ze=fe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tn=fe(/^(?:\w+script|data):/i),en=fe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nn=fe(/^html$/i),rn=fe(/^[a-z][.\w]*(-[.\w]+)+$/i);var on=Object.freeze({__proto__:null,ARIA_ATTR:Qe,ATTR_WHITESPACE:en,CUSTOM_ELEMENT:rn,DATA_ATTR:Ye,DOCTYPE_NAME:nn,ERB_EXPR:Ge,IS_ALLOWED_URI:Ze,IS_SCRIPT_OR_DATA:tn,MUSTACHE_EXPR:$e,TMPLIT_EXPR:Xe});var sn=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=e=>t(e);if(n.version="3.2.5",n.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return n.isSupported=!1,n;let{document:i}=e;const r=i,o=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:m}=e,p=c.prototype,g=Be(p,"cloneNode"),b=Be(p,"remove"),v=Be(p,"nextSibling"),y=Be(p,"childNodes"),A=Be(p,"parentNode");if("function"==typeof a){const t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let x,E="";const{implementation:S,createNodeIterator:w,createDocumentFragment:C,getElementsByTagName:R}=i,{importNode:k}=r;let T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof ae&&"function"==typeof A&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:O,ERB_EXPR:L,TMPLIT_EXPR:D,DATA_ATTR:_,ARIA_ATTR:N,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:F,CUSTOM_ELEMENT:B}=on;let{IS_ALLOWED_URI:I}=on,M=null;const j=Ne({},[...Ie,...Me,...je,...We,...ze]);let U=null;const W=Ne({},[...Ve,...He,...Je,...Ke]);let q=Object.seal(me(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,V=null,H=!0,J=!0,K=!1,$=!0,G=!1,X=!0,Y=!1,Q=!1,Z=!1,tt=!1,et=!1,nt=!1,it=!0,rt=!1,ot=!0,st=!1,at={},lt=null;const ct=Ne({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ut=null;const dt=Ne({},["audio","video","img","source","image","track"]);let ht=null;const ft=Ne({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mt="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",gt="http://www.w3.org/1999/xhtml";let bt=gt,vt=!1,yt=null;const At=Ne({},[mt,pt,gt],Se);let xt=Ne({},["mi","mo","mn","ms","mtext"]),Et=Ne({},["annotation-xml"]);const St=Ne({},["title","style","font","a","script"]);let wt=null;const Ct=["application/xhtml+xml","text/html"];let Rt=null,kt=null;const Tt=i.createElement("form"),Ot=function(t){return t instanceof RegExp||t instanceof Function},Lt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!kt||kt!==t){if(t&&"object"==typeof t||(t={}),t=Fe(t),wt=-1===Ct.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,Rt="application/xhtml+xml"===wt?Se:Ee,M=Te(t,"ALLOWED_TAGS")?Ne({},t.ALLOWED_TAGS,Rt):j,U=Te(t,"ALLOWED_ATTR")?Ne({},t.ALLOWED_ATTR,Rt):W,yt=Te(t,"ALLOWED_NAMESPACES")?Ne({},t.ALLOWED_NAMESPACES,Se):At,ht=Te(t,"ADD_URI_SAFE_ATTR")?Ne(Fe(ft),t.ADD_URI_SAFE_ATTR,Rt):ft,ut=Te(t,"ADD_DATA_URI_TAGS")?Ne(Fe(dt),t.ADD_DATA_URI_TAGS,Rt):dt,lt=Te(t,"FORBID_CONTENTS")?Ne({},t.FORBID_CONTENTS,Rt):ct,z=Te(t,"FORBID_TAGS")?Ne({},t.FORBID_TAGS,Rt):{},V=Te(t,"FORBID_ATTR")?Ne({},t.FORBID_ATTR,Rt):{},at=!!Te(t,"USE_PROFILES")&&t.USE_PROFILES,H=!1!==t.ALLOW_ARIA_ATTR,J=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,$=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,G=t.SAFE_FOR_TEMPLATES||!1,X=!1!==t.SAFE_FOR_XML,Y=t.WHOLE_DOCUMENT||!1,tt=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,nt=t.RETURN_TRUSTED_TYPE||!1,Z=t.FORCE_BODY||!1,it=!1!==t.SANITIZE_DOM,rt=t.SANITIZE_NAMED_PROPS||!1,ot=!1!==t.KEEP_CONTENT,st=t.IN_PLACE||!1,I=t.ALLOWED_URI_REGEXP||Ze,bt=t.NAMESPACE||gt,xt=t.MATHML_TEXT_INTEGRATION_POINTS||xt,Et=t.HTML_INTEGRATION_POINTS||Et,q=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Ot(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Ot(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(J=!1),et&&(tt=!0),at&&(M=Ne({},ze),U=[],!0===at.html&&(Ne(M,Ie),Ne(U,Ve)),!0===at.svg&&(Ne(M,Me),Ne(U,He),Ne(U,Ke)),!0===at.svgFilters&&(Ne(M,je),Ne(U,He),Ne(U,Ke)),!0===at.mathMl&&(Ne(M,We),Ne(U,Je),Ne(U,Ke))),t.ADD_TAGS&&(M===j&&(M=Fe(M)),Ne(M,t.ADD_TAGS,Rt)),t.ADD_ATTR&&(U===W&&(U=Fe(U)),Ne(U,t.ADD_ATTR,Rt)),t.ADD_URI_SAFE_ATTR&&Ne(ht,t.ADD_URI_SAFE_ATTR,Rt),t.FORBID_CONTENTS&&(lt===ct&&(lt=Fe(lt)),Ne(lt,t.FORBID_CONTENTS,Rt)),ot&&(M["#text"]=!0),Y&&Ne(M,["html","head","body"]),M.table&&(Ne(M,["tbody"]),delete z.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Le('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Le('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=t.TRUSTED_TYPES_POLICY,E=x.createHTML("")}else void 0===x&&(x=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(n=e.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(m,o)),null!==x&&"string"==typeof E&&(E=x.createHTML(""));he&&he(t),kt=t}},Dt=Ne({},[...Me,...je,...Ue]),_t=Ne({},[...We,...qe]),Nt=function(t){Ae(n.removed,{element:t});try{A(t).removeChild(t)}catch(e){b(t)}},Pt=function(t,e){try{Ae(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){Ae(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(tt||et)try{Nt(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Ft=function(t){let e=null,n=null;if(Z)t="<remove></remove>"+t;else{const e=we(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===wt&&bt===gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=x?x.createHTML(t):t;if(bt===gt)try{e=(new f).parseFromString(r,wt)}catch(t){}if(!e||!e.documentElement){e=S.createDocument(bt,"template",null);try{e.documentElement.innerHTML=vt?E:r}catch(t){}}const o=e.body||e.documentElement;return t&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),bt===gt?R.call(e,Y?"html":"body")[0]:Y?e.documentElement:o},Bt=function(t){return w.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},It=function(t){return t instanceof h&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof d)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},Mt=function(t){return"function"==typeof l&&t instanceof l};function jt(t,e,i){be(t,t=>{t.call(n,e,i,kt)})}const Ut=function(t){let e=null;if(jt(T.beforeSanitizeElements,t,null),It(t))return Nt(t),!0;const i=Rt(t.nodeName);if(jt(T.uponSanitizeElement,t,{tagName:i,allowedTags:M}),t.hasChildNodes()&&!Mt(t.firstElementChild)&&Oe(/<[/\w!]/g,t.innerHTML)&&Oe(/<[/\w!]/g,t.textContent))return Nt(t),!0;if(7===t.nodeType)return Nt(t),!0;if(X&&8===t.nodeType&&Oe(/<[/\w]/g,t.data))return Nt(t),!0;if(!M[i]||z[i]){if(!z[i]&&qt(i)){if(q.tagNameCheck instanceof RegExp&&Oe(q.tagNameCheck,i))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(i))return!1}if(ot&&!lt[i]){const e=A(t)||t.parentNode,n=y(t)||t.childNodes;if(n&&e)for(let i=n.length-1;i>=0;--i){const r=g(n[i],!0);r.__removalCount=(t.__removalCount||0)+1,e.insertBefore(r,v(t))}}return Nt(t),!0}return t instanceof c&&!function(t){let e=A(t);e&&e.tagName||(e={namespaceURI:bt,tagName:"template"});const n=Ee(t.tagName),i=Ee(e.tagName);return!!yt[t.namespaceURI]&&(t.namespaceURI===pt?e.namespaceURI===gt?"svg"===n:e.namespaceURI===mt?"svg"===n&&("annotation-xml"===i||xt[i]):Boolean(Dt[n]):t.namespaceURI===mt?e.namespaceURI===gt?"math"===n:e.namespaceURI===pt?"math"===n&&Et[i]:Boolean(_t[n]):t.namespaceURI===gt?!(e.namespaceURI===pt&&!Et[i])&&!(e.namespaceURI===mt&&!xt[i])&&!_t[n]&&(St[n]||!Dt[n]):!("application/xhtml+xml"!==wt||!yt[t.namespaceURI]))}(t)?(Nt(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!Oe(/<\/no(script|embed|frames)/i,t.innerHTML)?(G&&3===t.nodeType&&(e=t.textContent,be([O,L,D],t=>{e=Ce(e,t," ")}),t.textContent!==e&&(Ae(n.removed,{element:t.cloneNode()}),t.textContent=e)),jt(T.afterSanitizeElements,t,null),!1):(Nt(t),!0)},Wt=function(t,e,n){if(it&&("id"===e||"name"===e)&&(n in i||n in Tt))return!1;if(J&&!V[e]&&Oe(_,e));else if(H&&Oe(N,e));else if(!U[e]||V[e]){if(!(qt(t)&&(q.tagNameCheck instanceof RegExp&&Oe(q.tagNameCheck,t)||q.tagNameCheck instanceof Function&&q.tagNameCheck(t))&&(q.attributeNameCheck instanceof RegExp&&Oe(q.attributeNameCheck,e)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(e))||"is"===e&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Oe(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(ht[e]);else if(Oe(I,Ce(n,F,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Re(n,"data:")||!ut[t])if(K&&!Oe(P,Ce(n,F,"")));else if(n)return!1;return!0},qt=function(t){return"annotation-xml"!==t&&we(t,B)},zt=function(t){jt(T.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||It(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let r=e.length;for(;r--;){const o=e[r],{name:s,namespaceURI:a,value:l}=o,c=Rt(s);let u="value"===s?l:ke(l);if(i.attrName=c,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,jt(T.uponSanitizeAttribute,t,i),u=i.attrValue,!rt||"id"!==c&&"name"!==c||(Pt(s,t),u="user-content-"+u),X&&Oe(/((--!?|])>)|<\/(style|title)/i,u)){Pt(s,t);continue}if(i.forceKeepAttr)continue;if(Pt(s,t),!i.keepAttr)continue;if(!$&&Oe(/\/>/i,u)){Pt(s,t);continue}G&&be([O,L,D],t=>{u=Ce(u,t," ")});const d=Rt(t.nodeName);if(Wt(d,c,u)){if(x&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(a);else switch(m.getAttributeType(d,c)){case"TrustedHTML":u=x.createHTML(u);break;case"TrustedScriptURL":u=x.createScriptURL(u)}try{a?t.setAttributeNS(a,s,u):t.setAttribute(s,u),It(t)?Nt(t):ye(n.removed)}catch(t){}}}jt(T.afterSanitizeAttributes,t,null)},Vt=function t(e){let n=null;const i=Bt(e);for(jt(T.beforeSanitizeShadowDOM,e,null);n=i.nextNode();)jt(T.uponSanitizeShadowNode,n,null),Ut(n),zt(n),n.content instanceof s&&t(n.content);jt(T.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,a=null,c=null;if(vt=!t,vt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Mt(t)){if("function"!=typeof t.toString)throw Le("toString is not a function");if("string"!=typeof(t=t.toString()))throw Le("dirty is not a string, aborting")}if(!n.isSupported)return t;if(Q||Lt(e),n.removed=[],"string"==typeof t&&(st=!1),st){if(t.nodeName){const e=Rt(t.nodeName);if(!M[e]||z[e])throw Le("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)i=Ft("\x3c!----\x3e"),o=i.ownerDocument.importNode(t,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!tt&&!G&&!Y&&-1===t.indexOf("<"))return x&&nt?x.createHTML(t):t;if(i=Ft(t),!i)return tt?null:nt?E:""}i&&Z&&Nt(i.firstChild);const u=Bt(st?t:i);for(;a=u.nextNode();)Ut(a),zt(a),a.content instanceof s&&Vt(a.content);if(st)return t;if(tt){if(et)for(c=C.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(U.shadowroot||U.shadowrootmode)&&(c=k.call(r,c,!0)),c}let d=Y?i.outerHTML:i.innerHTML;return Y&&M["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Oe(nn,i.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+d),G&&be([O,L,D],t=>{d=Ce(d,t," ")}),x&&nt?x.createHTML(d):d},n.setConfig=function(){Lt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Q=!0},n.clearConfig=function(){kt=null,Q=!1},n.isValidAttribute=function(t,e,n){kt||Lt({});const i=Rt(t),r=Rt(e);return Wt(i,r,n)},n.addHook=function(t,e){"function"==typeof e&&Ae(T[t],e)},n.removeHook=function(t,e){if(void 0!==e){const n=ve(T[t],e);return-1===n?void 0:xe(T[t],n,1)[0]}return ye(T[t])},n.removeHooks=function(t){T[t]=[]},n.removeAllHooks=function(){T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();sn.addHook("uponSanitizeAttribute",function(t,e){/^data-trix-/.test(e.attrName)&&(e.forceKeepAttr=!0)});const an="style href src width height language class".split(" "),ln="javascript:".split(" "),cn="script iframe form noscript".split(" ");class un extends K{static setHTML(t,e,n){const i=new this(e,n).sanitize(),r=i.getHTML?i.getHTML():i.outerHTML;t.innerHTML=r}static sanitize(t,e){const n=new this(t,e);return n.sanitize(),n}constructor(t){let{allowedAttributes:e,forbiddenProtocols:n,forbiddenElements:i,purifyOptions:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(...arguments),this.allowedAttributes=e||an,this.forbiddenProtocols=n||ln,this.forbiddenElements=i||cn,this.purifyOptions=r||{},this.body=dn(t)}sanitize(){this.sanitizeElements(),this.normalizeListElementNesting();const t=Object.assign({},d,this.purifyOptions);return sn.setConfig(t),this.body=sn.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){const t=T(this.body),e=[];for(;t.nextNode();){const n=t.currentNode;switch(n.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(n)?e.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:e.push(n)}}return e.forEach(t=>k(t)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(e=>{let{name:n}=e;this.allowedAttributes.includes(n)||0===n.indexOf("data-trix")||t.removeAttribute(n)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{const e=t.previousElementSibling;e&&"li"===O(e)&&e.appendChild(t)}),this.body}elementIsRemovable(t){if((null==t?void 0:t.nodeType)===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(O(t))}elementIsntSerializable(t){return"false"===t.getAttribute("data-trix-serialize")&&!M(t)}}const dn=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>");const e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,Array.from(e.head.querySelectorAll("style")).forEach(t=>{e.body.appendChild(t)}),e.body},{css:hn}=J;class fn extends oe{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t;const e=t=L({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),n=this.getHref();return n&&(t=L({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),e.appendChild(t)),this.attachment.hasContent()?un.setHTML(t,this.attachment.getContent()):this.createContentNodes().forEach(e=>{t.appendChild(e)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=L({tagName:"progress",attributes:{class:hn.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[mn("left"),e,mn("right")]}createCaptionElement(){const t=L({tagName:"figcaption",className:hn.attachmentCaption}),e=this.attachmentPiece.getCaption();if(e)t.classList.add("".concat(hn.attachmentCaption,"--edited")),t.textContent=e;else{let e,n;const i=this.getCaptionConfig();if(i.name&&(e=this.attachment.getFilename()),i.size&&(n=this.attachment.getFormattedFilesize()),e){const n=L({tagName:"span",className:hn.attachmentName,textContent:e});t.appendChild(n)}if(n){e&&t.appendChild(document.createTextNode(" "));const i=L({tagName:"span",className:hn.attachmentSize,textContent:n});t.appendChild(i)}}return t}getClassName(){const t=[hn.attachment,"".concat(hn.attachment,"--").concat(this.attachment.getType())],e=this.attachment.getExtension();return e&&t.push("".concat(hn.attachment,"--").concat(e)),t.join(" ")}getData(){const t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:e}=this.attachmentPiece;return e.isEmpty()||(t.trixAttributes=JSON.stringify(e)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!pn(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;const e=this.attachment.getType(),n=Ot(null===(t=o[e])||void 0===t?void 0:t.caption);return"file"===e&&(n.name=!0),n}findProgressElement(){var t;return null===(t=this.findElement())||void 0===t?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){const t=this.attachment.getUploadProgress(),e=this.findProgressElement();e&&(e.value=t)}}const mn=t=>L({tagName:"span",textContent:p,data:{trixCursorTarget:t,trixSerialize:!1}}),pn=function(t,e){const n=L("div");return un.setHTML(n,t||""),n.querySelector(e)};class gn extends fn{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=L({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){const t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",h.captionPlaceholder),t}refresh(t){var e;if(t||(t=null===(e=this.findElement())||void 0===e?void 0:e.querySelector("img")),t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){const e=this.attachment.getURL(),n=this.attachment.getPreviewURL();if(t.src=n||e,n===e)t.removeAttribute("data-trix-serialized-attributes");else{const n=JSON.stringify({src:e});t.setAttribute("data-trix-serialized-attributes",n)}const i=this.attachment.getWidth(),r=this.attachment.getHeight();null!=i&&(t.width=i),null!=r&&(t.height=r);const o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}}class bn extends oe{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes();const e=this.createElement();if(e){const n=function(t){for(;null!==(e=t)&&void 0!==e&&e.firstElementChild;){var e;t=t.firstElementChild}return t}(e);Array.from(t).forEach(t=>{n.appendChild(t)}),t=[e]}return t}createAttachmentNodes(){const t=this.attachment.isPreviewable()?gn:fn;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if(null!==(t=this.textConfig)&&void 0!==t&&t.plaintext)return[document.createTextNode(this.string)];{const t=[],e=this.string.split("\n");for(let n=0;n<e.length;n++){const i=e[n];if(n>0){const e=L("br");t.push(e)}if(i.length){const e=document.createTextNode(this.preserveSpaces(i));t.push(e)}}return t}}createElement(){let t,e,n;const i={};for(e in this.attributes){n=this.attributes[e];const o=yt(e);if(o){if(o.tagName){var r;const e=L(o.tagName);r?(r.appendChild(e),r=e):t=r=e}if(o.styleProperty&&(i[o.styleProperty]=n),o.style)for(e in o.style)n=o.style[e],i[e]=n}}if(Object.keys(i).length)for(e in t||(t=L("span")),i)n=i[e],t.style[e]=n;return t}createContainerElement(){for(const t in this.attributes){const e=this.attributes[t],n=yt(t);if(n&&n.groupTagName){const i={};return i[t]=e,L(n.groupTagName,i)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,g)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(g," $2")).replace(/\ {2}/g,"".concat(g," ")).replace(/\ {2}/g," ".concat(g)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,g)),t}}class vn extends oe{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){const t=[],e=te.groupObjects(this.getPieces()),n=e.length-1;for(let r=0;r<e.length;r++){const o=e[r],s={};0===r&&(s.isFirst=!0),r===n&&(s.isLast=!0),yn(i)&&(s.followsWhitespace=!0);const a=this.findOrCreateCachedChildView(bn,o,{textConfig:this.textConfig,context:s});t.push(...Array.from(a.getNodes()||[]));var i=o}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}}const yn=t=>/\s$/.test(null==t?void 0:t.toString()),{css:An}=J;class xn extends oe{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){const t=[document.createComment("block")];if(this.block.isEmpty())t.push(L("br"));else{var e;const n=null===(e=bt(this.block.getLastAttribute()))||void 0===e?void 0:e.text,i=this.findOrCreateCachedChildView(vn,this.block.text,{textConfig:n});t.push(...Array.from(i.getNodes()||[])),this.shouldAddExtraNewlineElement()&&t.push(L("br"))}if(this.attributes.length)return t;{let e;const{tagName:n}=s.default;this.block.isRTL()&&(e={dir:"rtl"});const i=L({tagName:n,attributes:e});return t.forEach(t=>i.appendChild(t)),[i]}}createContainerElement(t){const e={};let n;const i=this.attributes[t],{tagName:r,htmlAttributes:o=[]}=bt(i);if(0===t&&this.block.isRTL()&&Object.assign(e,{dir:"rtl"}),"attachmentGallery"===i){const t=this.block.getBlockBreakPosition();n="".concat(An.attachmentGallery," ").concat(An.attachmentGallery,"--").concat(t)}return Object.entries(this.block.htmlAttributes).forEach(t=>{let[n,i]=t;o.includes(n)&&(e[n]=i)}),L({tagName:r,className:n,attributes:e})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}}class En extends oe{static render(t){const e=L("div"),n=new this(t,{element:e});return n.render(),n.sync(),e}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new ne,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=L("div"),!this.document.isEmpty()){const t=te.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(t=>{const e=this.findOrCreateCachedChildView(xn,t);Array.from(e.getNodes()).map(t=>this.shadowElement.appendChild(t))})}}isSynced(){return wn(this.shadowElement,this.element)}sync(){const t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(Sn(this.element)),Tt(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){const t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(e=>{t.appendChild(e.cloneNode(!0))}),Array.from(Sn(t)).forEach(t=>{const e=this.elementStore.remove(t);e&&t.parentNode.replaceChild(e,t)}),t}}const Sn=t=>t.querySelectorAll("[data-trix-store-key]"),wn=(t,e)=>Cn(t.innerHTML)===Cn(e.innerHTML),Cn=t=>t.replace(/&nbsp;/g," ");function Rn(t){var e,n;function i(e,n){try{var o=t[e](n),s=o.value,a=s instanceof kn;Promise.resolve(a?s.v:s).then(function(n){if(a){var l="return"===e?"return":"next";if(!s.k||n.done)return i(l,n);n=t[l](n).value}r(o.done?"return":"normal",n)},function(t){i("throw",t)})}catch(t){r("throw",t)}}function r(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,r){return new Promise(function(o,s){var a={key:t,arg:r,resolve:o,reject:s,next:null};n?n=n.next=a:(e=n=a,i(t,r))})},"function"!=typeof t.return&&(this.return=void 0)}function kn(t,e){this.v=t,this.k=e}function Tn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function On(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Dn(t,e,"get"))}function Ln(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Dn(t,e,"set"),n),n}function Dn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _n(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Nn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pn(t,e,n){Nn(t,e),e.set(t,n)}Rn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Rn.prototype.next=function(t){return this._invoke("next",t)},Rn.prototype.throw=function(t){return this._invoke("throw",t)},Rn.prototype.return=function(t){return this._invoke("return",t)};class Fn extends at{static registerType(t,e){e.type=t,this.types[t]=e}static fromJSON(t){const e=this.types[t.type];if(e)return e.fromJSON(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(...arguments),this.attributes=$t.box(e)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return 0===this.length}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}}Tn(Fn,"types",{});class Bn extends re{constructor(t){super(...arguments),this.url=t}perform(t){const e=new Image;e.onload=()=>(e.width=this.width=e.naturalWidth,e.height=this.height=e.naturalHeight,t(!0,e)),e.onerror=()=>t(!1),e.src=this.url}}class In extends at{static attachmentForFile(t){const e=new this(this.attributesForFile(t));return e.setFile(t),e}static attributesForFile(t){return new $t({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=$t.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.attributes.merge(t);var n,i,r,o;if(!this.attributes.isEqualTo(e))return this.attributes=e,this.didChangeAttributes(),null===(n=this.previewDelegate)||void 0===n||null===(i=n.attachmentDidChangeAttributes)||void 0===i||i.call(n,this),null===(r=this.delegate)||void 0===r||null===(o=r.attachmentDidChangeAttributes)||void 0===o?void 0:o.call(r,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return null!=this.file&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):In.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){const t=this.attributes.get("filesize");return"number"==typeof t?m.formatter(t):""}getExtension(){var t;return null===(t=this.getFilename().match(/\.(\w+)$/))||void 0===t?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return null!=this.uploadProgress?this.uploadProgress:0}setUploadProgress(t){var e,n;if(this.uploadProgress!==t)return this.uploadProgress=t,null===(e=this.uploadProgressDelegate)||void 0===e||null===(n=e.attachmentDidChangeUploadProgress)||void 0===n?void 0:n.call(e,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){var e,n,i,r;if(t!==this.getPreviewURL())return this.previewURL=t,null===(e=this.previewDelegate)||void 0===e||null===(n=e.attachmentDidChangeAttributes)||void 0===n||n.call(e,this),null===(i=this.delegate)||void 0===i||null===(r=i.attachmentDidChangePreviewURL)||void 0===r?void 0:r.call(i,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,e){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new Bn(t).then(n=>{let{width:i,height:r}=n;return this.getWidth()&&this.getHeight()||this.setAttributes({width:i,height:r}),this.preloadingURL=null,this.setPreviewURL(t),null==e?void 0:e()}).catch(()=>(this.preloadingURL=null,null==e?void 0:e()))}}Tn(In,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);class Mn extends Fn{static fromJSON(t){return new this(In.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice([t])),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){const t=this.attributes.slice(Mn.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var e;return super.isEqualTo(t)&&this.attachment.id===(null==t||null===(e=t.attachment)||void 0===e?void 0:e.id)}toString(){return"ï¿¼"}toJSON(){const t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}}Tn(Mn,"permittedAttributes",["caption","presentation"]),Fn.registerType("attachment",Mn);class jn extends Fn{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=(t=>t.replace(/\r\n?/g,"\n"))(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return"\n"===this.toString()&&!0===this.getAttribute("blockBreak")}toJSON(){const t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let e,n;return 0===t?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+"â€¦"),JSON.stringify(t.toString())}}Fn.registerType("string",jn);class Un extends at{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this.constructor(ct(this.objects,...e))}eachObject(t){return this.objects.map((e,n)=>t(e,n))}insertObjectAtIndex(t,e){return this.splice(e,0,t)}insertSplittableListAtIndex(t,e){return this.splice(e,0,...t.objects)}insertSplittableListAtPosition(t,e){const[n,i]=this.splitObjectAtPosition(e);return new this.constructor(n).insertSplittableListAtIndex(t,i)}editObjectAtIndex(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)}replaceObjectAtIndex(t,e){return this.splice(e,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){const[e,n,i]=this.splitObjectsAtRange(t);return new this.constructor(e.slice(n,i+1))}selectSplittableList(t){const e=this.objects.filter(e=>t(e));return new this.constructor(e)}removeObjectsInRange(t){const[e,n,i]=this.splitObjectsAtRange(t);return new this.constructor(e).splice(n,i-n+1)}transformObjectsInRange(t,e){const[n,i,r]=this.splitObjectsAtRange(t),o=n.map((t,n)=>i<=n&&n<=r?e(t):t);return new this.constructor(o)}splitObjectsAtRange(t){let e,[n,i,r]=this.splitObjectAtPosition(qn(t));return[n,e]=new this.constructor(n).splitObjectAtPosition(zn(t)+r),[n,i,e-1]}getObjectAtPosition(t){const{index:e}=this.findIndexAndOffsetAtPosition(t);return this.objects[e]}splitObjectAtPosition(t){let e,n;const{index:i,offset:r}=this.findIndexAndOffsetAtPosition(t),o=this.objects.slice(0);if(null!=i)if(0===r)e=i,n=0;else{const t=this.getObjectAtIndex(i),[s,a]=t.splitAtOffset(r);o.splice(i,1,s,a),e=i+1,n=s.getLength()-r}else e=o.length,n=0;return[o,e,n]}consolidate(){const t=[];let e=this.objects[0];return this.objects.slice(1).forEach(n=>{var i,r;null!==(i=(r=e).canBeConsolidatedWith)&&void 0!==i&&i.call(r,n)?e=e.consolidateWith(n):(t.push(e),e=n)}),e&&t.push(e),new this.constructor(t)}consolidateFromIndexToIndex(t,e){const n=this.objects.slice(0).slice(t,e+1),i=new this.constructor(n).consolidate().toArray();return this.splice(t,n.length,...i)}findIndexAndOffsetAtPosition(t){let e,n=0;for(e=0;e<this.objects.length;e++){const i=n+this.objects[e].getLength();if(n<=t&&t<i)return{index:e,offset:t-n};n=i}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,e){let n=0;for(let i=0;i<this.objects.length;i++){const r=this.objects[i];if(i<t)n+=r.getLength();else if(i===t){n+=e;break}}return n}getEndPosition(){return null==this.endPosition&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||Wn(this.objects,null==t?void 0:t.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}}const Wn=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length!==e.length)return!1;let n=!0;for(let i=0;i<t.length;i++){const r=t[i];n&&!r.isEqualTo(e[i])&&(n=!1)}return n},qn=t=>t[0],zn=t=>t[1];class Vn extends at{static textForAttachmentWithAttributes(t,e){return new this([new Mn(t,e)])}static textForStringWithAttributes(t,e){return new this([new jn(t,e)])}static fromJSON(t){return new this(Array.from(t).map(t=>Fn.fromJSON(t)))}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(...arguments);const e=t.filter(t=>!t.isEmpty());this.pieceList=new Un(e)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){const e=this.getPieces().map(e=>t.find(e)||e);return new this.constructor(e)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])}moveTextFromRangeToPosition(t,e){if(t[0]<=e&&e<=t[1])return;const n=this.getTextAtRange(t),i=n.getLength();return t[0]<e&&(e-=i),this.removeTextAtRange(t).insertTextAtPosition(n,e)}addAttributeAtRange(t,e,n){const i={};return i[t]=e,this.addAttributesAtRange(i,n)}addAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,e=>e.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,e=>e.copyWithoutAttribute(t)))}setAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,e=>e.copyWithAttributes(t)))}getAttributesAtPosition(t){var e;return(null===(e=this.pieceList.getObjectAtPosition(t))||void 0===e?void 0:e.getAttributes())||{}}getCommonAttributes(){const t=Array.from(this.pieceList.toArray()).map(t=>t.getAttributes());return $t.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,e){let n,i=n=e;const r=this.getLength();for(;i>0&&this.getCommonAttributesAtRange([i-1,n])[t];)i--;for(;n<r&&this.getCommonAttributesAtRange([e,n+1])[t];)n++;return[i,n]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){const e=this.getLength();return this.getStringAtRange([e-t.length,e])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let e=0;for(const i of this.pieceList.toArray()){var n;if((null===(n=i.attachment)||void 0===n?void 0:n.id)===t)return{attachment:i.attachment,position:e};e+=i.length}return{attachment:null,position:null}}getAttachmentById(t){const{attachment:e}=this.getAttachmentAndPositionById(t);return e}getRangeOfAttachment(t){const e=this.getAttachmentAndPositionById(t.id),n=e.position;if(t=e.attachment)return[n,n+1]}updateAttributesForAttachment(t,e){const n=this.getRangeOfAttachment(e);return n?this.addAttributesAtRange(t,n):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return 0===this.getLength()}isEqualTo(t){var e;return super.isEqualTo(t)||(null==t||null===(e=t.pieceList)||void 0===e?void 0:e.isEqualTo(this.pieceList))}isBlockBreak(){return 1===this.getLength()&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){const t=this.pieceList.selectSplittableList(t=>t.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return dt(this.toString())}isRTL(){return"rtl"===this.getDirection()}}class Hn extends at{static fromJSON(t){return new this(Vn.fromJSON(t.text),t.attributes,t.htmlAttributes)}constructor(t,e,n){super(...arguments),this.text=Jn(t||new Vn),this.attributes=e||[],this.htmlAttributes=n||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return!!super.isEqualTo(t)||this.text.isEqualTo(null==t?void 0:t.text)&&lt(this.attributes,null==t?void 0:t.attributes)&&Lt(this.htmlAttributes,null==t?void 0:t.htmlAttributes)}copyWithText(t){return new Hn(t,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new Hn(this.text,t,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){const e=t.find(this.text);return e?this.copyWithText(e):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){const e=this.attributes.concat(Qn(t));return this.copyWithAttributes(e)}addHTMLAttribute(t,e){const n=Object.assign({},this.htmlAttributes,{[t]:e});return new Hn(this.text,this.attributes,n)}removeAttribute(t){const{listAttribute:e}=bt(t),n=ti(ti(this.attributes,t),e);return this.copyWithAttributes(n)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return Zn(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return Zn(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>bt(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){const t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){const t=this.getLastNestableAttribute();if(t){const e=this.attributes.lastIndexOf(t),n=ct(this.attributes,e+1,0,...Qn(t));return this.copyWithAttributes(n)}return this}getListItemAttributes(){return this.attributes.filter(t=>bt(t).listAttribute)}isListItem(){var t;return null===(t=bt(this.getLastAttribute()))||void 0===t?void 0:t.listAttribute}isTerminalBlock(){var t;return null===(t=bt(this.getLastAttribute()))||void 0===t?void 0:t.terminal}breaksOnReturn(){var t;return null===(t=bt(this.getLastAttribute()))||void 0===t?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,e){const n=this.toString();let i;switch(t){case"forward":i=n.indexOf("\n",e);break;case"backward":i=n.slice(0,e).lastIndexOf("\n")}if(-1!==i)return i}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){const e=Vn.textForStringWithAttributes("\n"),n=this.getTextWithoutBlockBreak().appendText(e);return this.copyWithText(n.appendText(t.text))}splitAtOffset(t){let e,n;return 0===t?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return Xn(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,e){const n=t.getAttributes(),i=n[e],r=this.attributes[e];return r===i&&!(!1===bt(r).group&&!(()=>{if(!pt){pt=[];for(const t in s){const{listAttribute:e}=s[t];null!=e&&pt.push(e)}}return pt})().includes(n[e+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}}const Jn=function(t){return t=Kn(t),Gn(t)},Kn=function(t){let e=!1;const n=t.getPieces();let i=n.slice(0,n.length-1);const r=n[n.length-1];return r?(i=i.map(t=>t.isBlockBreak()?(e=!0,Yn(t)):t),e?new Vn([...i,r]):t):t},$n=Vn.textForStringWithAttributes("\n",{blockBreak:!0}),Gn=function(t){return Xn(t)?t:t.appendText($n)},Xn=function(t){const e=t.getLength();return 0!==e&&t.getTextAtRange([e-1,e]).isBlockBreak()},Yn=t=>t.copyWithoutAttribute("blockBreak"),Qn=function(t){const{listAttribute:e}=bt(t);return e?[e,t]:[t]},Zn=t=>t.slice(-1)[0],ti=function(t,e){const n=t.lastIndexOf(e);return-1===n?t:ct(t,n,1)};class ei extends at{static fromJSON(t){return new this(Array.from(t).map(t=>Hn.fromJSON(t)))}static fromString(t,e){const n=Vn.textForStringWithAttributes(t,e);return new this([new Hn(n)])}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(...arguments),0===t.length&&(t=[new Hn]),this.blockList=Un.box(t)}isEmpty(){const t=this.getBlockAtIndex(0);return 1===this.blockList.length&&t.isEmpty()&&!t.hasAttributes()}copy(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(t)}copyUsingObjectsFromDocument(t){const e=new ee(t.getObjects());return this.copyUsingObjectMap(e)}copyUsingObjectMap(t){const e=this.getBlocks().map(e=>t.find(e)||e.copyUsingObjectMap(t));return new this.constructor(e)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.getBlocks().map(e=>{const n=t.concat(e.getAttributes());return e.copyWithAttributes(n)});return new this.constructor(e)}replaceBlock(t,e){const n=this.blockList.indexOf(t);return-1===n?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))}insertDocumentAtRange(t,e){const{blockList:n}=t;e=Dt(e);let[i]=e;const{index:r,offset:o}=this.locationFromPosition(i);let s=this;const a=this.getBlockAtPosition(i);return _t(e)&&a.isEmpty()&&!a.hasAttributes()?s=new this.constructor(s.blockList.removeObjectAtIndex(r)):a.getBlockBreakPosition()===o&&i++,s=s.removeTextAtRange(e),new this.constructor(s.blockList.insertSplittableListAtPosition(n,i))}mergeDocumentAtRange(t,e){let n,i;e=Dt(e);const[r]=e,o=this.locationFromPosition(r),s=this.getBlockAtIndex(o.index).getAttributes(),a=t.getBaseBlockAttributes(),l=s.slice(-a.length);if(lt(a,l)){const e=s.slice(0,-a.length);n=t.copyWithBaseBlockAttributes(e)}else n=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(s);const c=n.getBlockCount(),u=n.getBlockAtIndex(0);if(lt(s,u.getAttributes())){const t=u.getTextWithoutBlockBreak();if(i=this.insertTextAtRange(t,e),c>1){n=new this.constructor(n.getBlocks().slice(1));const e=r+t.getLength();i=i.insertDocumentAtRange(n,e)}}else i=this.insertDocumentAtRange(n,e);return i}insertTextAtRange(t,e){e=Dt(e);const[n]=e,{index:i,offset:r}=this.locationFromPosition(n),o=this.removeTextAtRange(e);return new this.constructor(o.blockList.editObjectAtIndex(i,e=>e.copyWithText(e.text.insertTextAtPosition(t,r))))}removeTextAtRange(t){let e;t=Dt(t);const[n,i]=t;if(_t(t))return this;const[r,o]=Array.from(this.locationRangeFromRange(t)),s=r.index,a=r.offset,l=this.getBlockAtIndex(s),c=o.index,u=o.offset,d=this.getBlockAtIndex(c);if(i-n==1&&l.getBlockBreakPosition()===a&&d.getBlockBreakPosition()!==u&&"\n"===d.text.getStringAtPosition(u))e=this.blockList.editObjectAtIndex(c,t=>t.copyWithText(t.text.removeTextAtRange([u,u+1])));else{let t;const n=l.text.getTextAtRange([0,a]),i=d.text.getTextAtRange([u,d.getLength()]),r=n.appendText(i);t=s!==c&&0===a&&l.getAttributeLevel()>=d.getAttributeLevel()?d.copyWithText(r):l.copyWithText(r);const o=c+1-s;e=this.blockList.splice(s,o,t)}return new this.constructor(e)}moveTextFromRangeToPosition(t,e){let n;t=Dt(t);const[i,r]=t;if(i<=e&&e<=r)return this;let o=this.getDocumentAtRange(t),s=this.removeTextAtRange(t);const a=i<e;a&&(e-=o.getLength());const[l,...c]=o.getBlocks();return 0===c.length?(n=l.getTextWithoutBlockBreak(),a&&(e+=1)):n=l.text,s=s.insertTextAtRange(n,e),0===c.length?s:(o=new this.constructor(c),e+=n.getLength(),s.insertDocumentAtRange(o,e))}addAttributeAtRange(t,e,n){let{blockList:i}=this;return this.eachBlockAtRange(n,(n,r,o)=>i=i.editObjectAtIndex(o,function(){return bt(t)?n.addAttribute(t,e):r[0]===r[1]?n:n.copyWithText(n.text.addAttributeAtRange(t,e,r))})),new this.constructor(i)}addAttribute(t,e){let{blockList:n}=this;return this.eachBlock((i,r)=>n=n.editObjectAtIndex(r,()=>i.addAttribute(t,e))),new this.constructor(n)}removeAttributeAtRange(t,e){let{blockList:n}=this;return this.eachBlockAtRange(e,function(e,i,r){bt(t)?n=n.editObjectAtIndex(r,()=>e.removeAttribute(t)):i[0]!==i[1]&&(n=n.editObjectAtIndex(r,()=>e.copyWithText(e.text.removeAttributeAtRange(t,i))))}),new this.constructor(n)}updateAttributesForAttachment(t,e){const n=this.getRangeOfAttachment(e),[i]=Array.from(n),{index:r}=this.locationFromPosition(i),o=this.getTextAtIndex(r);return new this.constructor(this.blockList.editObjectAtIndex(r,n=>n.copyWithText(o.updateAttributesForAttachment(t,e))))}removeAttributeForAttachment(t,e){const n=this.getRangeOfAttachment(e);return this.removeAttributeAtRange(t,n)}setHTMLAttributeAtPosition(t,e,n){const i=this.getBlockAtPosition(t),r=i.addHTMLAttribute(e,n);return this.replaceBlock(i,r)}insertBlockBreakAtRange(t){let e;t=Dt(t);const[n]=t,{offset:i}=this.locationFromPosition(n),r=this.removeTextAtRange(t);return 0===i&&(e=[new Hn]),new this.constructor(r.blockList.insertSplittableListAtPosition(new Un(e),n))}applyBlockAttributeAtRange(t,e,n){const i=this.expandRangeToLineBreaksAndSplitBlocks(n);let r=i.document;n=i.range;const o=bt(t);if(o.listAttribute){r=r.removeLastListAttributeAtRange(n,{exceptAttributeName:t});const e=r.convertLineBreaksToBlockBreaksInRange(n);r=e.document,n=e.range}else r=o.exclusive?r.removeBlockAttributesAtRange(n):o.terminal?r.removeLastTerminalAttributeAtRange(n):r.consolidateBlocksAtRange(n);return r.addAttributeAtRange(t,e,n)}removeLastListAttributeAtRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockList:n}=this;return this.eachBlockAtRange(t,function(t,i,r){const o=t.getLastAttribute();o&&bt(o).listAttribute&&o!==e.exceptAttributeName&&(n=n.editObjectAtIndex(r,()=>t.removeAttribute(o)))}),new this.constructor(n)}removeLastTerminalAttributeAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(t,n,i){const r=t.getLastAttribute();r&&bt(r).terminal&&(e=e.editObjectAtIndex(i,()=>t.removeAttribute(r)))}),new this.constructor(e)}removeBlockAttributesAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(t,n,i){t.hasAttributes()&&(e=e.editObjectAtIndex(i,()=>t.copyWithoutAttributes()))}),new this.constructor(e)}expandRangeToLineBreaksAndSplitBlocks(t){let e;t=Dt(t);let[n,i]=t;const r=this.locationFromPosition(n),o=this.locationFromPosition(i);let s=this;const a=s.getBlockAtIndex(r.index);if(r.offset=a.findLineBreakInDirectionFromPosition("backward",r.offset),null!=r.offset&&(e=s.positionFromLocation(r),s=s.insertBlockBreakAtRange([e,e+1]),o.index+=1,o.offset-=s.getBlockAtIndex(r.index).getLength(),r.index+=1),r.offset=0,0===o.offset&&o.index>r.index)o.index-=1,o.offset=s.getBlockAtIndex(o.index).getBlockBreakPosition();else{const t=s.getBlockAtIndex(o.index);"\n"===t.text.getStringAtRange([o.offset-1,o.offset])?o.offset-=1:o.offset=t.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==t.getBlockBreakPosition()&&(e=s.positionFromLocation(o),s=s.insertBlockBreakAtRange([e,e+1]))}return n=s.positionFromLocation(r),i=s.positionFromLocation(o),{document:s,range:t=Dt([n,i])}}convertLineBreaksToBlockBreaksInRange(t){t=Dt(t);let[e]=t;const n=this.getStringAtRange(t).slice(0,-1);let i=this;return n.replace(/.*?\n/g,function(t){e+=t.length,i=i.insertBlockBreakAtRange([e-1,e])}),{document:i,range:t}}consolidateBlocksAtRange(t){t=Dt(t);const[e,n]=t,i=this.locationFromPosition(e).index,r=this.locationFromPosition(n).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(i,r))}getDocumentAtRange(t){t=Dt(t);const e=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(e)}getStringAtRange(t){let e;const n=t=Dt(t);return n[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){const{index:e}=this.locationFromPosition(t);return this.getBlockAtIndex(e)}getTextAtIndex(t){var e;return null===(e=this.getBlockAtIndex(t))||void 0===e?void 0:e.text}getTextAtPosition(t){const{index:e}=this.locationFromPosition(t);return this.getTextAtIndex(e)}getPieceAtPosition(t){const{index:e,offset:n}=this.locationFromPosition(t);return this.getTextAtIndex(e).getPieceAtPosition(n)}getCharacterAtPosition(t){const{index:e,offset:n}=this.locationFromPosition(t);return this.getTextAtIndex(e).getStringAtRange([n,n+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,e){let n,i;t=Dt(t);const[r,o]=t,s=this.locationFromPosition(r),a=this.locationFromPosition(o);if(s.index===a.index)return n=this.getBlockAtIndex(s.index),i=[s.offset,a.offset],e(n,i,s.index);for(let t=s.index;t<=a.index;t++)if(n=this.getBlockAtIndex(t),n){switch(t){case s.index:i=[s.offset,n.text.getLength()];break;case a.index:i=[0,a.offset];break;default:i=[0,n.text.getLength()]}e(n,i,t)}}getCommonAttributesAtRange(t){t=Dt(t);const[e]=t;if(_t(t))return this.getCommonAttributesAtPosition(e);{const e=[],n=[];return this.eachBlockAtRange(t,function(t,i){if(i[0]!==i[1])return e.push(t.text.getCommonAttributesAtRange(i)),n.push(ni(t))}),$t.fromCommonAttributesOfObjects(e).merge($t.fromCommonAttributesOfObjects(n)).toObject()}}getCommonAttributesAtPosition(t){let e,n;const{index:i,offset:r}=this.locationFromPosition(t),o=this.getBlockAtIndex(i);if(!o)return{};const s=ni(o),a=o.text.getAttributesAtPosition(r),l=o.text.getAttributesAtPosition(r-1),c=Object.keys(z).filter(t=>z[t].inheritable);for(e in l)n=l[e],(n===a[e]||c.includes(e))&&(s[e]=n);return s}getRangeOfCommonAttributeAtPosition(t,e){const{index:n,offset:i}=this.locationFromPosition(e),r=this.getTextAtIndex(n),[o,s]=Array.from(r.getExpandedRangeForAttributeAtOffset(t,i)),a=this.positionFromLocation({index:n,offset:o}),l=this.positionFromLocation({index:n,offset:s});return Dt([a,l])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let e=1;e<this.getBlockCount();e++){const n=this.getBlockAtIndex(e).getAttributes(),i=Math.min(t.length,n.length);t=(()=>{const e=[];for(let r=0;r<i&&n[r]===t[r];r++)e.push(n[r]);return e})()}return t}getAttachmentById(t){for(const e of this.getAttachments())if(e.id===t)return e}getAttachmentPieces(){let t=[];return this.blockList.eachObject(e=>{let{text:n}=e;return t=t.concat(n.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let e=0;const n=this.blockList.toArray();for(let i=0;i<n.length;i++){const{text:r}=n[i],o=r.getRangeOfAttachment(t);if(o)return Dt([e+o[0],e+o[1]]);e+=r.getLength()}}getLocationRangeOfAttachment(t){const e=this.getRangeOfAttachment(t);return this.locationRangeFromRange(e)}getAttachmentPieceForAttachment(t){for(const e of this.getAttachmentPieces())if(e.attachment===t)return e}findRangesForBlockAttribute(t){let e=0;const n=[];return this.getBlocks().forEach(i=>{const r=i.getLength();i.hasAttribute(t)&&n.push([e,e+r]),e+=r}),n}findRangesForTextAttribute(t){let{withValue:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=[];const r=[];return this.getPieces().forEach(o=>{const s=o.getLength();(function(n){return e?n.getAttribute(t)===e:n.hasAttribute(t)})(o)&&(i[1]===n?i[1]=n+s:r.push(i=[n,n+s])),n+=s}),r}locationFromPosition(t){const e=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(null!=e.index)return e;{const t=this.getBlocks();return{index:t.length-1,offset:t[t.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return Dt(this.locationFromPosition(t))}locationRangeFromRange(t){if(!(t=Dt(t)))return;const[e,n]=Array.from(t),i=this.locationFromPosition(e),r=this.locationFromPosition(n);return Dt([i,r])}rangeFromLocationRange(t){let e;t=Dt(t);const n=this.positionFromLocation(t[0]);return _t(t)||(e=this.positionFromLocation(t[1])),Dt([n,e])}isEqualTo(t){return this.blockList.isEqualTo(null==t?void 0:t.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){const t=[];return Array.from(this.getTexts()).forEach(e=>{t.push(...Array.from(e.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){const t=[];return this.blockList.eachObject(e=>t.push(e.copyWithText(e.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(t=>JSON.parse(t.text.toConsole())))}}const ni=function(t){const e={},n=t.getLastAttribute();return n&&(e[n]=!0),e},ii=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{string:t=zt(t),attributes:e,type:"string"}},ri=(t,e)=>{try{return JSON.parse(t.getAttribute("data-trix-".concat(e)))}catch(t){return{}}};class oi extends K{static parse(t,e){const n=new this(t,e);return n.parse(),n}constructor(t){let{referenceElement:e,purifyOptions:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=e,this.purifyOptions=n,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return ei.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),un.setHTML(this.containerElement,this.html,{purifyOptions:this.purifyOptions});const t=T(this.containerElement,{usingFilter:ci});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=L({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return k(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){const e=t.parentNode;if(e===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes("\n");if(e===this.containerElement||this.isBlockElement(e)){var n;const t=this.getBlockAttributes(e),i=this.getBlockHTMLAttributes(e);lt(t,null===(n=this.currentBlock)||void 0===n?void 0:n.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(t,e,i),this.currentBlockElement=e)}}appendBlockForElement(t){const e=this.isBlockElement(t),n=C(this.currentBlockElement,t);if(e&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){const e=this.getBlockAttributes(t),i=this.getBlockHTMLAttributes(t);if(t.firstChild){if(n&&lt(e,this.currentBlock.attributes))return this.appendStringWithAttributes("\n");this.currentBlock=this.appendBlockForAttributesWithElement(e,t,i),this.currentBlockElement=t}}}else if(this.currentBlockElement&&!n&&!e){const e=this.findParentBlockElement(t);if(e)return this.appendBlockForElement(e);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:e}=t;for(;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&this.blockElements.includes(e))return e;e=e.parentElement}return null}processTextNode(t){let e=t.data;var n;return si(t.parentNode)||(e=Ht(e),hi(null===(n=t.previousSibling)||void 0===n?void 0:n.textContent)&&(e=ui(e))),this.appendStringWithAttributes(e,this.getTextAttributes(t.parentNode))}processElement(t){let e;if(M(t)){if(e=ri(t,"attachment"),Object.keys(e).length){const n=this.getTextAttributes(t);this.appendAttachmentWithAttributes(e,n),t.innerHTML=""}return this.processedElements.push(t)}switch(O(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes("\n",this.getTextAttributes(t)),this.processedElements.push(t);case"img":e={url:t.getAttribute("src"),contentType:"image"};const n=(t=>{const e=t.getAttribute("width"),n=t.getAttribute("height"),i={};return e&&(i.width=parseInt(e,10)),n&&(i.height=parseInt(n,10)),i})(t);for(const t in n){const i=n[t];e[t]=i}return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(q.tableRowSeparator);break;case"td":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(q.tableCellSeparator)}}appendBlockForAttributesWithElement(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.blockElements.push(e);const i=function(){return{text:[],attributes:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},htmlAttributes:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}(t,n);return this.blocks.push(i),i}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,e){return this.appendPiece(ii(t,e))}appendAttachmentWithAttributes(t,e){return this.appendPiece(function(t){return{attachment:t,attributes:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},type:"attachment"}}(t,e))}appendPiece(t){return 0===this.blocks.length&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,e){const{text:n}=this.blocks[e],i=n[n.length-1];if("string"!==(null==i?void 0:i.type))return n.push(ii(t));i.string+=t}prependStringToTextAtIndex(t,e){const{text:n}=this.blocks[e],i=n[0];if("string"!==(null==i?void 0:i.type))return n.unshift(ii(t));i.string=t+i.string}getTextAttributes(t){let e;const n={};for(const i in z){const r=z[i];if(r.tagName&&S(t,{matchingSelector:r.tagName,untilNode:this.containerElement}))n[i]=!0;else if(r.parser){if(e=r.parser(t),e){let o=!1;for(const n of this.findBlockElementAncestors(t))if(r.parser(n)===e){o=!0;break}o||(n[i]=e)}}else r.styleProperty&&(e=t.style[r.styleProperty],e&&(n[i]=e))}if(M(t)){const i=ri(t,"attributes");for(const t in i)e=i[t],n[t]=e}return n}getBlockAttributes(t){const e=[];for(;t&&t!==this.containerElement;){for(const i in s){const r=s[i];var n;!1!==r.parse&&O(t)===r.tagName&&(null!==(n=r.test)&&void 0!==n&&n.call(r,t)||!r.test)&&(e.push(i),r.listAttribute&&e.push(r.listAttribute))}t=t.parentNode}return e.reverse()}getBlockHTMLAttributes(t){const e={},n=Object.values(s).find(e=>e.tagName===O(t));return((null==n?void 0:n.htmlAttributes)||[]).forEach(n=>{t.hasAttribute(n)&&(e[n]=t.getAttribute(n))}),e}findBlockElementAncestors(t){const e=[];for(;t&&t!==this.containerElement;){const n=O(t);_().includes(n)&&e.push(t),t=t.parentNode}return e}isBlockElement(t){if((null==t?void 0:t.nodeType)===Node.ELEMENT_NODE&&!M(t)&&!S(t,{matchingSelector:"td",untilNode:this.containerElement}))return _().includes(O(t))||"block"===window.getComputedStyle(t).display}isInsignificantTextNode(t){if((null==t?void 0:t.nodeType)!==Node.TEXT_NODE)return;if(!di(t.data))return;const{parentNode:e,previousSibling:n,nextSibling:i}=t;return ai(e.previousSibling)&&!this.isBlockElement(e.previousSibling)||si(e)?void 0:!n||this.isBlockElement(n)||!i||this.isBlockElement(i)}isExtraBR(t){return"br"===O(t)&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}needsTableSeparator(t){if(q.removeBlankTableCells){var e;const n=null===(e=t.previousSibling)||void 0===e?void 0:e.textContent;return n&&/\S/.test(n)}return t.previousSibling}translateBlockElementMarginsToNewlines(){const t=this.getMarginOfDefaultBlockElement();for(let e=0;e<this.blocks.length;e++){const n=this.getMarginOfBlockElementAtIndex(e);n&&(n.top>2*t.top&&this.prependStringToTextAtIndex("\n",e),n.bottom>2*t.bottom&&this.appendStringToTextAtIndex("\n",e))}}getMarginOfBlockElementAtIndex(t){const e=this.blockElements[t];if(e&&e.textContent&&!_().includes(O(e))&&!this.processedElements.includes(e))return li(e)}getMarginOfDefaultBlockElement(){const t=L(s.default.tagName);return this.containerElement.appendChild(t),li(t)}}const si=function(t){const{whiteSpace:e}=window.getComputedStyle(t);return["pre","pre-wrap","pre-line"].includes(e)},ai=t=>t&&!hi(t.textContent),li=function(t){const e=window.getComputedStyle(t);if("block"===e.display)return{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}},ci=function(t){return"style"===O(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},ui=t=>t.replace(new RegExp("^".concat(Vt.source,"+")),""),di=t=>new RegExp("^".concat(Vt.source,"*$")).test(t),hi=t=>/\s$/.test(t),fi=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],mi="data-trix-serialized-attributes",pi="[".concat(mi,"]"),gi=new RegExp("\x3c!--block--\x3e","g"),bi={"application/json":function(t){let e;if(t instanceof ei)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=oi.parse(t.innerHTML).getDocument()}return e.toSerializableDocument().toJSONString()},"text/html":function(t){let e;if(t instanceof ei)e=En.render(t);else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=t.cloneNode(!0)}return Array.from(e.querySelectorAll("[data-trix-serialize=false]")).forEach(t=>{k(t)}),fi.forEach(t=>{Array.from(e.querySelectorAll("[".concat(t,"]"))).forEach(e=>{e.removeAttribute(t)})}),Array.from(e.querySelectorAll(pi)).forEach(t=>{try{const e=JSON.parse(t.getAttribute(mi));t.removeAttribute(mi);for(const n in e){const i=e[n];t.setAttribute(n,i)}}catch(t){}}),e.innerHTML.replace(gi,"")}};var vi=Object.freeze({__proto__:null});class yi extends K{constructor(t,e){super(...arguments),this.attachmentManager=t,this.attachment=e,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}}yi.proxyMethod("attachment.getAttribute"),yi.proxyMethod("attachment.hasAttribute"),yi.proxyMethod("attachment.setAttribute"),yi.proxyMethod("attachment.getAttributes"),yi.proxyMethod("attachment.setAttributes"),yi.proxyMethod("attachment.isPending"),yi.proxyMethod("attachment.isPreviewable"),yi.proxyMethod("attachment.getURL"),yi.proxyMethod("attachment.getHref"),yi.proxyMethod("attachment.getFilename"),yi.proxyMethod("attachment.getFilesize"),yi.proxyMethod("attachment.getFormattedFilesize"),yi.proxyMethod("attachment.getExtension"),yi.proxyMethod("attachment.getContentType"),yi.proxyMethod("attachment.getFile"),yi.proxyMethod("attachment.setFile"),yi.proxyMethod("attachment.releaseFile"),yi.proxyMethod("attachment.getUploadProgress"),yi.proxyMethod("attachment.setUploadProgress");class Ai extends K{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(t=>{this.manageAttachment(t)})}getAttachments(){const t=[];for(const e in this.managedAttachments){const n=this.managedAttachments[e];t.push(n)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new yi(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){var e,n;if(this.attachmentIsManaged(t))return null===(e=this.delegate)||void 0===e||null===(n=e.attachmentManagerDidRequestRemovalOfAttachment)||void 0===n?void 0:n.call(e,t)}unmanageAttachment(t){const e=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],e}}class xi{constructor(t){this.composition=t,this.document=this.composition.document;const e=this.composition.getSelectedRange();this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?0!==this.startLocation.offset:this.breaksOnReturn&&"\n"!==this.nextCharacter}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&"\n"===this.nextCharacter||"\n"===this.previousCharacter)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&0===this.startLocation.offset&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}}class Ei extends K{constructor(){super(...arguments),this.document=new ei,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){var e,n;if(!t.isEqualTo(this.document))return this.document=t,this.refreshAttachments(),this.revision++,null===(e=this.delegate)||void 0===e||null===(n=e.compositionDidChangeDocument)||void 0===n?void 0:n.call(e,t)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var e,n,i,r;let{document:o,selectedRange:s}=t;return null===(e=this.delegate)||void 0===e||null===(n=e.compositionWillLoadSnapshot)||void 0===n||n.call(e),this.setDocument(null!=o?o:new ei),this.setSelection(null!=s?s:[0,0]),null===(i=this.delegate)||void 0===i||null===(r=i.compositionDidLoadSnapshot)||void 0===r?void 0:r.call(i)}insertText(t){let{updatePosition:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{updatePosition:!0};const n=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,n));const i=n[0],r=i+t.getLength();return e&&this.setSelection(r),this.notifyDelegateOfInsertionAtRange([i,r])}insertBlock(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hn;const e=new ei([t]);return this.insertDocument(e)}insertDocument(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ei;const e=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,e));const n=e[0],i=n+t.getLength();return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([n,i])}insertString(t,e){const n=this.getCurrentTextAttributes(),i=Vn.textForStringWithAttributes(t,n);return this.insertText(i,e)}insertBlockBreak(){const t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));const e=t[0],n=e+1;return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([e,n])}insertLineBreak(){const t=new xi(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){const e=new ei([t.block.copyWithoutText()]);return this.insertDocument(e)}return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString("\n")}insertHTML(t){const e=oi.parse(t,{purifyOptions:{SAFE_FOR_XML:!0}}).getDocument(),n=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(e,n));const i=n[0],r=i+e.getLength()-1;return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([i,r])}replaceHTML(t){const e=oi.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),i=this.document.rangeFromLocationRange(n);return this.setDocument(e),this.setSelection(i)}insertFile(t){return this.insertFiles([t])}insertFiles(t){const e=[];return Array.from(t).forEach(t=>{var n;if(null!==(n=this.delegate)&&void 0!==n&&n.compositionShouldAcceptFile(t)){const n=In.attachmentForFile(t);e.push(n)}}),this.insertAttachments(e)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let e=new Vn;return Array.from(t).forEach(t=>{var n;const i=t.getType(),r=null===(n=o[i])||void 0===n?void 0:n.presentation,s=this.getCurrentTextAttributes();r&&(s.presentation=r);const a=Vn.textForAttachmentWithAttributes(t,s);e=e.appendText(a)}),this.insertText(e)}shouldManageDeletingInDirection(t){const e=this.getLocationRange();if(_t(e)){if("backward"===t&&0===e[0].offset)return!0;if(this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1}deleteInDirection(t){let e,n,i,{length:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=this.getLocationRange();let s=this.getSelectedRange();const a=_t(s);if(a?n="backward"===t&&0===o[0].offset:i=o[0].index!==o[1].index,n&&this.canDecreaseBlockAttributeLevel()){const t=this.getBlock();if(t.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(s[0]),t.isEmpty())return!1}return a&&(s=this.getExpandedRangeInDirection(t,{length:r}),"backward"===t&&(e=this.getAttachmentAtRange(s))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(s)),this.setSelection(s[0]),!n&&!i&&void 0)}moveTextFromRange(t){const[e]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)}removeAttachment(t){const e=this.document.getRangeOfAttachment(t);if(e)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])}removeLastBlockAttribute(){const[t,e]=Array.from(this.getSelectedRange()),n=this.document.getBlockAtPosition(e);return this.removeCurrentAttribute(n.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(null!=this.placeholderPosition)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){const e=this.currentAttributes[t];return null!=e&&!1!==e}toggleCurrentAttribute(t){const e=!this.currentAttributes[t];return e?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return bt(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){const e=this.getSelectedDocument();if(e){for(const t of Array.from(e.getAttachments()))if(!t.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){const e=this.getBlock();if(e)return!e.isTerminalBlock()}setCurrentAttribute(t,e){return bt(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(t,e,n){var i;const r=this.document.getBlockAtPosition(t),o=null===(i=bt(r.getLastAttribute()))||void 0===i?void 0:i.htmlAttributes;if(r&&null!=o&&o.includes(e)){const i=this.document.setHTMLAttributeAtPosition(t,e,n);this.setDocument(i)}}setTextAttribute(t,e){const n=this.getSelectedRange();if(!n)return;const[i,r]=Array.from(n);if(i!==r)return this.setDocument(this.document.addAttributeAtRange(t,e,n));if("href"===t){const t=Vn.textForStringWithAttributes(e,{href:e});return this.insertText(t)}}setBlockAttribute(t,e){const n=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)}removeCurrentAttribute(t){return bt(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){const e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}removeBlockAttribute(t){const e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}canDecreaseNestingLevel(){var t;return(null===(t=this.getBlock())||void 0===t?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;const e=this.getBlock();if(e){if(null===(t=bt(e.getLastNestableAttribute()))||void 0===t||!t.listAttribute)return e.getNestingLevel()>0;{const t=this.getPreviousBlock();if(t)return function(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return lt((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(0,t.length),t)}(t.getListItemAttributes(),e.getListItemAttributes())}}}decreaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return(null===(t=this.getBlock())||void 0===t?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;const e=null===(t=this.getBlock())||void 0===t?void 0:t.getLastAttribute();if(e)return this.removeCurrentAttribute(e)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange());const{index:e}=this.document.locationFromPosition(t);let n=e;const i=this.getBlock().getAttributeLevel();let r=this.document.getBlockAtIndex(n+1);for(;r&&r.isListItem()&&!(r.getAttributeLevel()<=i);)n++,r=this.document.getBlockAtIndex(n+1);t=this.document.positionFromLocation({index:e,offset:0});const o=this.document.positionFromLocation({index:n,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,o]))}updateCurrentAttributes(){const t=this.getSelectedRange({ignoreLock:!0});if(t){const e=this.document.getCommonAttributesAtRange(t);if(Array.from(gt()).forEach(t=>{e[t]||this.canSetCurrentAttribute(t)||(e[t]=!1)}),!Lt(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return b.call({},this.currentAttributes)}getCurrentTextAttributes(){const t={};for(const e in this.currentAttributes){const n=this.currentAttributes[e];!1!==n&&yt(e)&&(t[e]=n)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var e;const n=this.document.locationRangeFromRange(t);return null===(e=this.delegate)||void 0===e?void 0:e.compositionDidRequestChangingSelectionToLocationRange(n)}getSelectedRange(){const t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){const e=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(e)}getPosition(){const t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||Dt({index:0,offset:0})}withTargetLocationRange(t,e){let n;this.targetLocationRange=t;try{n=e()}finally{this.targetLocationRange=null}return n}withTargetRange(t,e){const n=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(n,e)}withTargetDOMRange(t,e){const n=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(n,e)}getExpandedRangeInDirection(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[n,i]=Array.from(this.getSelectedRange());return"backward"===t?e?n-=e:n=this.translateUTF16PositionFromOffset(n,-1):e?i+=e:i=this.translateUTF16PositionFromOffset(i,1),Dt([n,i])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;const e=this.getExpandedRangeInDirection(t);return null!=this.getAttachmentAtRange(e)}moveCursorInDirection(t){let e,n;if(this.editingAttachment)n=this.document.getRangeOfAttachment(this.editingAttachment);else{const i=this.getSelectedRange();n=this.getExpandedRangeInDirection(t),e=!Nt(i,n)}if("backward"===t?this.setSelectedRange(n[0]):this.setSelectedRange(n[1]),e){const t=this.getAttachmentAtRange(n);if(t)return this.editAttachment(t)}}expandSelectionInDirection(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getExpandedRangeInDirection(t,{length:e});return this.setSelectedRange(n)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){const e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e);return this.setSelectedRange(n)}selectionContainsAttachments(){var t;return(null===(t=this.getSelectedAttachments())||void 0===t?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){const e=this.document.locationFromPosition(t);if(e)return this.locationIsCursorTarget(e)}positionIsBlockBreak(t){var e;return null===(e=this.document.getPieceAtPosition(t))||void 0===e?void 0:e.isBlockBreak()}getSelectedDocument(){const t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return null===(t=this.getSelectedDocument())||void 0===t?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){const t=this.document.getAttachments(),{added:e,removed:n}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[],i=[],r=new Set;t.forEach(t=>{r.add(t)});const o=new Set;return e.forEach(t=>{o.add(t),r.has(t)||n.push(t)}),t.forEach(t=>{o.has(t)||i.push(t)}),{added:n,removed:i}}(this.attachments,t);return this.attachments=t,Array.from(n).forEach(t=>{var e,n;t.delegate=null,null===(e=this.delegate)||void 0===e||null===(n=e.compositionDidRemoveAttachment)||void 0===n||n.call(e,t)}),(()=>{const t=[];return Array.from(e).forEach(e=>{var n,i;e.delegate=this,t.push(null===(n=this.delegate)||void 0===n||null===(i=n.compositionDidAddAttachment)||void 0===i?void 0:i.call(n,e))}),t})()}attachmentDidChangeAttributes(t){var e,n;return this.revision++,null===(e=this.delegate)||void 0===e||null===(n=e.compositionDidEditAttachment)||void 0===n?void 0:n.call(e,t)}attachmentDidChangePreviewURL(t){var e,n;return this.revision++,null===(e=this.delegate)||void 0===e||null===(n=e.compositionDidChangeAttachmentPreviewURL)||void 0===n?void 0:n.call(e,t)}editAttachment(t,e){var n,i;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,null===(n=this.delegate)||void 0===n||null===(i=n.compositionDidStartEditingAttachment)||void 0===i?void 0:i.call(n,this.editingAttachment,e)}stopEditingAttachment(){var t,e;this.editingAttachment&&(null===(t=this.delegate)||void 0===t||null===(e=t.compositionDidStopEditingAttachment)||void 0===e||e.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))}removeAttributeForAttachment(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))}breakFormattedBlock(t){let{document:e}=t;const{block:n}=t;let i=t.startPosition,r=[i-1,i];n.getBlockBreakPosition()===t.startLocation.offset?(n.breaksOnReturn()&&"\n"===t.nextCharacter?i+=1:e=e.removeTextAtRange(r),r=[i,i]):"\n"===t.nextCharacter?"\n"===t.previousCharacter?r=[i-1,i+1]:(r=[i,i+1],i+=1):t.startLocation.offset-1!=0&&(i+=1);const o=new ei([n.removeLastAttribute().copyWithoutText()]);return this.setDocument(e.insertDocumentAtRange(o,r)),this.setSelection(i)}getPreviousBlock(){const t=this.getLocationRange();if(t){const{index:e}=t[0];if(e>0)return this.document.getBlockAtIndex(e-1)}}getBlock(){const t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){const e=this.document.getDocumentAtRange(t);if(e.toString()==="".concat("ï¿¼","\n"))return e.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,e;return null===(t=this.delegate)||void 0===t||null===(e=t.compositionDidChangeCurrentAttributes)||void 0===e?void 0:e.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var e,n;return null===(e=this.delegate)||void 0===e||null===(n=e.compositionDidPerformInsertionAtRange)||void 0===n?void 0:n.call(e,t)}translateUTF16PositionFromOffset(t,e){const n=this.document.toUTF16String(),i=n.offsetFromUCS2Offset(t);return n.offsetToUCS2Offset(i+e)}}Ei.proxyMethod("getSelectionManager().getPointRange"),Ei.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),Ei.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),Ei.proxyMethod("getSelectionManager().locationIsCursorTarget"),Ei.proxyMethod("getSelectionManager().selectionIsExpanded"),Ei.proxyMethod("delegate?.getSelectionManager");class Si extends K{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:e,consolidatable:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.undoEntries.slice(-1)[0];if(!n||!wi(i,t,e)){const n=this.createEntry({description:t,context:e});this.undoEntries.push(n),this.redoEntries=[]}}undo(){const t=this.undoEntries.pop();if(t){const e=this.createEntry(t);return this.redoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}redo(){const t=this.redoEntries.pop();if(t){const e=this.createEntry(t);return this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{description:null==t?void 0:t.toString(),context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}}}const wi=(t,e,n)=>(null==t?void 0:t.description)===(null==e?void 0:e.toString())&&(null==t?void 0:t.context)===JSON.stringify(n),Ci="attachmentGallery";class Ri{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(Ci,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(e=>{e[1]-e[0]>1&&(e[0]+=t,e[1]+=t,"\n"!==this.document.getCharacterAtPosition(e[1])&&(this.document=this.document.insertBlockBreakAtRange(e[1]),e[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),e[1]++,t++),0!==e[0]&&"\n"!==this.document.getCharacterAtPosition(e[0]-1)&&(this.document=this.document.insertBlockBreakAtRange(e[0]),e[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),e[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(Ci,!0,e))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(Ci)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}}const ki=function(t){const e=new Ri(t);return e.perform(),e.getSnapshot()},Ti=[ki];class Oi{constructor(t,e,n){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new Si(this.composition),this.filters=Ti.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=oi.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(e)}loadJSON(t){let{document:e,selectedRange:n}=t;return e=ei.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})}loadSnapshot(t){return this.undoManager=new Si(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){const e=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(e)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.composition.setCurrentAttribute(t,e)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}setHTMLAtributeAtPosition(t,e,n){this.composition.setHTMLAtributeAtPosition(t,e,n)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:e,consolidatable:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:e,consolidatable:n})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}}class Li{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,e){let{strict:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},i=0,r=!1;const o={index:0,offset:0},s=this.findAttachmentElementParentForNode(t);s&&(t=s.parentNode,e=R(s));const a=T(this.element,{usingFilter:Pi});for(;a.nextNode();){const s=a.currentNode;if(s===t&&U(t)){I(s)||(o.offset+=e);break}if(s.parentNode===t){if(i++===e)break}else if(!C(t,s)&&i>0)break;P(s,{strict:n})?(r&&o.index++,o.offset=0,r=!0):o.offset+=Di(s)}return o}findContainerAndOffsetFromLocation(t){let e,n;if(0===t.index&&0===t.offset){for(e=this.element,n=0;e.firstChild;)if(e=e.firstChild,N(e)){n=1;break}return[e,n]}let[i,r]=this.findNodeAndOffsetFromLocation(t);if(i){if(U(i))0===Di(i)?(e=i.parentNode.parentNode,n=R(i.parentNode),I(i,{name:"right"})&&n++):(e=i,n=t.offset-r);else{if(e=i.parentNode,!P(i.previousSibling)&&!N(e))for(;i===e.lastChild&&(i=e,e=e.parentNode,!N(e)););n=R(i),0!==t.offset&&n++}return[e,n]}}findNodeAndOffsetFromLocation(t){let e,n,i=0;for(const r of this.getSignificantNodesForIndex(t.index)){const o=Di(r);if(t.offset<=i+o)if(U(r)){if(e=r,n=i,t.offset===n&&I(e))break}else e||(e=r,n=i);if(i+=o,i>t.offset)break}return[e,n]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(M(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){const e=[],n=T(this.element,{usingFilter:_i});let i=!1;for(;n.nextNode();){const o=n.currentNode;var r;if(F(o)){if(null!=r?r++:r=0,r===t)i=!0;else if(i)break}else i&&e.push(o)}return e}}const Di=function(t){return t.nodeType===Node.TEXT_NODE?I(t)?0:t.textContent.length:"br"===O(t)||M(t)?1:0},_i=function(t){return Ni(t)===NodeFilter.FILTER_ACCEPT?Pi(t):NodeFilter.FILTER_REJECT},Ni=function(t){return j(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Pi=function(t){return M(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};class Fi{createDOMRangeFromPoint(t){let e,{x:n,y:i}=t;if(document.caretPositionFromPoint){const{offsetNode:t,offset:r}=document.caretPositionFromPoint(n,i);return e=document.createRange(),e.setStart(t,r),e}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(n,i);if(document.body.createTextRange){const r=jt();try{const t=document.body.createTextRange();t.moveToPoint(n,i),t.select()}catch(t){}return e=jt(),Ut(r),e}}getClientRectsForDOMRange(t){const e=Array.from(t.getClientRects());return[e[0],e[e.length-1]]}}class Bi extends K{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new Li(this.element),this.pointMapper=new Fi,this.lockCount=0,A("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!1===t.strict?this.createLocationRangeFromDOMRange(jt()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=Dt(t);const e=this.createDOMRangeFromLocationRange(t);e&&(Ut(e),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=Dt(t);const e=this.getLocationAtPoint(t[0]),n=this.getLocationAtPoint(t[1]);this.setLocationRange([e,n])}getClientRectAtLocationRange(t){const e=this.createDOMRangeFromLocationRange(t);if(e)return this.getClientRectsForDOMRange(e)[1]}locationIsCursorTarget(t){const e=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return I(e)}lock(){0==this.lockCount++&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(0==--this.lockCount){const{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,null!=t)return this.setLocationRange(t)}}clearSelection(){var t;return null===(t=Mt())||void 0===t?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return!0===(null===(t=jt())||void 0===t?void 0:t.collapsed)}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,e){if(null==t||!this.domRangeWithinElement(t))return;const n=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e);if(!n)return;const i=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e);return Dt([n,i])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;const e=()=>{if(this.paused=!1,clearTimeout(n),Array.from(t).forEach(t=>{t.destroy()}),C(document,this.element))return this.selectionDidChange()},n=setTimeout(e,200);t=["mousemove","keydown"].map(t=>A(t,{onElement:document,withCallback:e}))}selectionDidChange(){if(!this.paused&&!w(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){var e,n;if((null!=t?t:t=this.createLocationRangeFromDOMRange(jt()))&&!Nt(t,this.currentLocationRange))return this.currentLocationRange=t,null===(e=this.delegate)||void 0===e||null===(n=e.locationRangeDidChange)||void 0===n?void 0:n.call(e,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(t){const e=this.findContainerAndOffsetFromLocation(t[0]),n=_t(t)?e:this.findContainerAndOffsetFromLocation(t[1])||e;if(null!=e&&null!=n){const t=document.createRange();return t.setStart(...Array.from(e||[])),t.setEnd(...Array.from(n||[])),t}}getLocationAtPoint(t){const e=this.createDOMRangeFromPoint(t);var n;if(e)return null===(n=this.createLocationRangeFromDOMRange(e))||void 0===n?void 0:n[0]}domRangeWithinElement(t){return t.collapsed?C(this.element,t.startContainer):C(this.element,t.startContainer)&&C(this.element,t.endContainer)}}Bi.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),Bi.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),Bi.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),Bi.proxyMethod("pointMapper.createDOMRangeFromPoint"),Bi.proxyMethod("pointMapper.getClientRectsForDOMRange");var Ii=Object.freeze({__proto__:null,Attachment:In,AttachmentManager:Ai,AttachmentPiece:Mn,Block:Hn,Composition:Ei,Document:ei,Editor:Oi,HTMLParser:oi,HTMLSanitizer:un,LineBreakInsertion:xi,LocationMapper:Li,ManagedAttachment:yi,Piece:Fn,PointMapper:Fi,SelectionManager:Bi,SplittableList:Un,StringPiece:jn,Text:Vn,UndoManager:Si}),Mi=Object.freeze({__proto__:null,ObjectView:oe,AttachmentView:fn,BlockView:xn,DocumentView:En,PieceView:bn,PreviewableAttachmentView:gn,TextView:vn});const{lang:ji,css:Ui,keyNames:Wi}=J,qi=function(t){return function(){const e=t.apply(this,arguments);e.do(),this.undos||(this.undos=[]),this.undos.push(e.undo)}};class zi extends K{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(...arguments),Tn(this,"makeElementMutable",qi(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),Tn(this,"addToolbar",qi(()=>{const t=L({tagName:"div",className:Ui.attachmentToolbar,data:{trixMutable:!0},childNodes:L({tagName:"div",className:"trix-button-row",childNodes:L({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:L({tagName:"button",className:"trix-button trix-button--remove",textContent:ji.remove,attributes:{title:ji.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&t.appendChild(L({tagName:"div",className:Ui.attachmentMetadataContainer,childNodes:L({tagName:"span",className:Ui.attachmentMetadata,childNodes:[L({tagName:"span",className:Ui.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),L({tagName:"span",className:Ui.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),A("click",{onElement:t,withCallback:this.didClickToolbar}),A("click",{onElement:t,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),x("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:t,attachment:this.attachment}}),{do:()=>this.element.appendChild(t),undo:()=>k(t)}})),Tn(this,"installCaptionEditor",qi(()=>{const t=L({tagName:"textarea",className:Ui.attachmentCaptionEditor,attributes:{placeholder:ji.captionPlaceholder},data:{trixMutable:!0}});t.value=this.attachmentPiece.getCaption();const e=t.cloneNode();e.classList.add("trix-autoresize-clone"),e.tabIndex=-1;const n=function(){e.value=t.value,t.style.height=e.scrollHeight+"px"};A("input",{onElement:t,withCallback:n}),A("input",{onElement:t,withCallback:this.didInputCaption}),A("keydown",{onElement:t,withCallback:this.didKeyDownCaption}),A("change",{onElement:t,withCallback:this.didChangeCaption}),A("blur",{onElement:t,withCallback:this.didBlurCaption});const i=this.element.querySelector("figcaption"),r=i.cloneNode();return{do:()=>{if(i.style.display="none",r.appendChild(t),r.appendChild(e),r.classList.add("".concat(Ui.attachmentCaption,"--editing")),i.parentElement.insertBefore(r,i),n(),this.options.editCaption)return Tt(()=>t.focus())},undo(){k(r),i.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=e,this.container=n,this.options=i,this.attachment=this.attachmentPiece.attachment,"a"===O(this.element)&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let e=this.undos.pop();for(this.savePendingCaption();e;)e(),e=this.undos.pop();null===(t=this.delegate)||void 0===t||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(null!=this.pendingCaption){const r=this.pendingCaption;var t,e,n,i;this.pendingCaption=null,r?null===(t=this.delegate)||void 0===t||null===(e=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)||void 0===e||e.call(t,{caption:r},this.attachment):null===(n=this.delegate)||void 0===n||null===(i=n.attachmentEditorDidRequestRemovingAttributeForAttachment)||void 0===i||i.call(n,"caption",this.attachment)}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var e;if("remove"===t.target.getAttribute("data-trix-action"))return null===(e=this.delegate)||void 0===e?void 0:e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(t){var e,n;if("return"===Wi[t.keyCode])return t.preventDefault(),this.savePendingCaption(),null===(e=this.delegate)||void 0===e||null===(n=e.attachmentEditorDidRequestDeselectingAttachment)||void 0===n?void 0:n.call(e,this.attachment)}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}}class Vi extends K{constructor(t,e){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=e,this.documentView=new En(this.composition.document,{element:this.element}),A("focus",{onElement:this.element,withCallback:this.didFocus}),A("blur",{onElement:this.element,withCallback:this.didBlur}),A("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),A("mousedown",{onElement:this.element,matchingSelector:r,withCallback:this.didClickAttachment}),A("click",{onElement:this.element,matchingSelector:"a".concat(r),preventDefault:!0})}didFocus(t){var e;const n=()=>{var t,e;if(!this.focused)return this.focused=!0,null===(t=this.delegate)||void 0===t||null===(e=t.compositionControllerDidFocus)||void 0===e?void 0:e.call(t)};return(null===(e=this.blurPromise)||void 0===e?void 0:e.then(n))||n()}didBlur(t){this.blurPromise=new Promise(t=>Tt(()=>{var e,n;return w(this.element)||(this.focused=null,null===(e=this.delegate)||void 0===e||null===(n=e.compositionControllerDidBlur)||void 0===n||n.call(e)),this.blurPromise=null,t()}))}didClickAttachment(t,e){var n,i;const r=this.findAttachmentForElement(e),o=!!S(t.target,{matchingSelector:"figcaption"});return null===(n=this.delegate)||void 0===n||null===(i=n.compositionControllerDidSelectAttachment)||void 0===i?void 0:i.call(n,r,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,e,n,i,r,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&(null===(n=this.delegate)||void 0===n||null===(i=n.compositionControllerWillSyncDocumentView)||void 0===i||i.call(n),this.documentView.sync(),null===(r=this.delegate)||void 0===r||null===(o=r.compositionControllerDidSyncDocumentView)||void 0===o||o.call(r)),null===(t=this.delegate)||void 0===t||null===(e=t.compositionControllerDidRender)||void 0===e?void 0:e.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,e){var n;if((null===(n=this.attachmentEditor)||void 0===n?void 0:n.attachment)===t)return;const i=this.documentView.findElementForObject(t);if(!i)return;this.uninstallAttachmentEditor();const r=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new zi(r,i,this.element,e),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return null===(t=this.attachmentEditor)||void 0===t?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,e){var n,i;return null===(n=this.delegate)||void 0===n||null===(i=n.compositionControllerWillUpdateAttachment)||void 0===i||i.call(n,e),this.composition.updateAttributesForAttachment(t,e)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,e){var n,i;return null===(n=this.delegate)||void 0===n||null===(i=n.compositionControllerWillUpdateAttachment)||void 0===i||i.call(n,e),this.composition.removeAttributeForAttachment(t,e)}attachmentEditorDidRequestRemovalOfAttachment(t){var e,n;return null===(e=this.delegate)||void 0===e||null===(n=e.compositionControllerDidRequestRemovalOfAttachment)||void 0===n?void 0:n.call(e,t)}attachmentEditorDidRequestDeselectingAttachment(t){var e,n;return null===(e=this.delegate)||void 0===e||null===(n=e.compositionControllerDidRequestDeselectingAttachment)||void 0===n?void 0:n.call(e,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}}class Hi extends K{}const Ji="data-trix-mutable",Ki="[".concat(Ji,"]"),$i={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};class Gi extends K{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,$i)}stop(){return this.observer.disconnect()}didMutate(t){var e,n;if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length)return null===(e=this.delegate)||void 0===e||null===(n=e.elementDidMutate)||void 0===n||n.call(e,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(t=>this.mutationIsSignificant(t))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(const e of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(e))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!j(t)}nodeIsMutable(t){return S(t,{matchingSelector:Ki})}nodesModifiedByMutation(t){const e=[];switch(t.type){case"attributes":t.attributeName!==Ji&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push(...Array.from(t.addedNodes||[])),e.push(...Array.from(t.removedNodes||[]))}return e}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){const{additions:t,deletions:e}=this.getTextChangesFromCharacterData(),n=this.getTextChangesFromChildList();Array.from(n.additions).forEach(e=>{Array.from(t).includes(e)||t.push(e)}),e.push(...Array.from(n.deletions||[]));const i={},r=t.join("");r&&(i.textAdded=r);const o=e.join("");return o&&(i.textDeleted=o),i}getMutationsByType(t){return Array.from(this.mutations).filter(e=>e.type===t)}getTextChangesFromChildList(){let t,e;const n=[],i=[];Array.from(this.getMutationsByType("childList")).forEach(t=>{n.push(...Array.from(t.addedNodes||[])),i.push(...Array.from(t.removedNodes||[]))}),0===n.length&&1===i.length&&F(i[0])?(t=[],e=["\n"]):(t=Xi(n),e=Xi(i));const r=t.filter((t,n)=>t!==e[n]).map(zt),o=e.filter((e,n)=>e!==t[n]).map(zt);return{additions:r,deletions:o}}getTextChangesFromCharacterData(){let t,e;const n=this.getMutationsByType("characterData");if(n.length){const i=n[0],r=n[n.length-1],o=function(t,e){let n,i;return t=tt.box(t),(e=tt.box(e)).length<t.length?[i,n]=Jt(t,e):[n,i]=Jt(e,t),{added:n,removed:i}}(zt(i.oldValue),zt(r.target.data));t=o.added,e=o.removed}return{additions:t?[t]:[],deletions:e?[e]:[]}}}const Xi=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=[];for(const n of Array.from(t))switch(n.nodeType){case Node.TEXT_NODE:e.push(n.data);break;case Node.ELEMENT_NODE:"br"===O(n)?e.push("\n"):e.push(...Array.from(Xi(n.childNodes)||[]))}return e};class Yi extends re{constructor(t){super(...arguments),this.file=t}perform(t){const e=new FileReader;return e.onerror=()=>t(!1),e.onload=()=>{e.onerror=null;try{e.abort()}catch(t){}return t(!0,this.file)},e.readAsArrayBuffer(this.file)}}class Qi{constructor(t){this.element=t}shouldIgnore(t){return!!u.samsungAndroid&&(this.previousEvent=this.event,this.event=t,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&Zi(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&"insertText"!==this.event.inputType&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var t;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&(null===(t=this.event.data)||void 0===t?void 0:t.length)>50}isBeforeInputInsertText(){return"beforeinput"===this.event.type&&"insertText"===this.event.inputType}previousEventWasUnidentifiedKeydown(){var t,e;return"keydown"===(null===(t=this.previousEvent)||void 0===t?void 0:t.type)&&"Unidentified"===(null===(e=this.previousEvent)||void 0===e?void 0:e.key)}}const Zi=(t,e)=>er(t)===er(e),tr=new RegExp("(".concat("ï¿¼","|").concat(p,"|").concat(g,"|\\s)+"),"g"),er=t=>t.replace(tr," ").trim();class nr extends K{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new Gi(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new Qi(this.element);for(const t in this.constructor.events)A(t,{onElement:this.element,withCallback:this.handlerFor(t)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,e;return null===(t=this.delegate)||void 0===t||null===(e=t.inputControllerDidRequestRender)||void 0===e?void 0:e.call(t)}requestReparse(){var t,e;return null===(t=this.delegate)||void 0===t||null===(e=t.inputControllerDidRequestReparse)||void 0===e||e.call(t),this.requestRender()}attachFiles(t){const e=Array.from(t).map(t=>new Yi(t));return Promise.all(e).then(t=>{this.handleInput(function(){var e,n;return null===(e=this.delegate)||void 0===e||e.inputControllerWillAttachFiles(),null===(n=this.responder)||void 0===n||n.insertFiles(t),this.requestRender()})})}handlerFor(t){return e=>{e.defaultPrevented||this.handleInput(()=>{if(!w(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(e))return;this.eventName=t,this.constructor.events[t].call(this,e)}})}}handleInput(t){try{var e;null===(e=this.delegate)||void 0===e||e.inputControllerWillHandleInput(),t.call(this)}finally{var n;null===(n=this.delegate)||void 0===n||n.inputControllerDidHandleInput()}}createLinkHTML(t,e){const n=document.createElement("a");return n.href=t,n.textContent=e||t,n.outerHTML}}var ir;Tn(nr,"events",{});const{browser:rr,keyNames:or}=J;let sr=0;class ar extends nr{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(const e in t){const n=t[e];this.inputSummary[e]=n}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),It.reset()}elementDidMutate(t){var e,n;return this.isComposing()?null===(e=this.delegate)||void 0===e||null===(n=e.inputControllerDidAllowUnhandledInput)||void 0===n?void 0:n.call(e):this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:e,textDeleted:n}=t;if(this.inputSummary.preferDocument)return!0;const i=null!=e?e===this.inputSummary.textAdded:!this.inputSummary.textAdded,r=null!=n?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=["\n"," \n"].includes(e)&&!i,s="\n"===n&&!r;if(o&&!s||s&&!o){const t=this.getSelectedRange();if(t){var a;const n=o?e.replace(/\n$/,"").length||-1:(null==e?void 0:e.length)||1;if(null!==(a=this.responder)&&void 0!==a&&a.positionIsBlockBreak(t[1]+n))return!0}}return i&&r}mutationIsSignificant(t){var e;const n=Object.keys(t).length>0,i=""===(null===(e=this.compositionInput)||void 0===e?void 0:e.getEndData());return n||!i}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new hr(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,e){var n;return!1!==(null===(n=this.responder)||void 0===n?void 0:n.deleteInDirection(t))?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(t){var e;if(!function(t){if(null==t||!t.setData)return!1;for(const e in Ct){const n=Ct[e];try{if(t.setData(e,n),!t.getData(e)===n)return!1}catch(t){return!1}}return!0}(t))return;const n=null===(e=this.responder)||void 0===e?void 0:e.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(n)),t.setData("text/html",En.render(n).innerHTML),t.setData("text/plain",n.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){const e={};return Array.from((null==t?void 0:t.types)||[]).forEach(t=>{e[t]=!0}),e.Files||e["application/x-trix-document"]||e["text/html"]||e["text/plain"]}getPastedHTMLUsingHiddenElement(t){const e=this.getSelectedRange(),n={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},i=L({style:n,tagName:"div",editable:!0});return document.body.appendChild(i),i.focus(),requestAnimationFrame(()=>{const n=i.innerHTML;return k(i),this.setSelectedRange(e),t(n)})}}Tn(ar,"events",{keydown(t){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;const e=or[t.keyCode];if(e){var n;let i=this.keys;["ctrl","alt","shift","meta"].forEach(e=>{var n;t["".concat(e,"Key")]&&("ctrl"===e&&(e="control"),i=null===(n=i)||void 0===n?void 0:n[e])}),null!=(null===(n=i)||void 0===n?void 0:n[e])&&(this.setInputSummary({keyName:e}),It.reset(),i[e].call(this,t))}if(kt(t)){const e=String.fromCharCode(t.keyCode).toLowerCase();if(e){var i;const n=["alt","shift"].map(e=>{if(t["".concat(e,"Key")])return e}).filter(t=>t);n.push(e),null!==(i=this.delegate)&&void 0!==i&&i.inputControllerDidReceiveKeyboardCommand(n)&&t.preventDefault()}}},keypress(t){if(null!=this.inputSummary.eventName)return;if(t.metaKey)return;if(t.ctrlKey&&!t.altKey)return;const e=ur(t);var n,i;return e?(null===(n=this.delegate)||void 0===n||n.inputControllerWillPerformTyping(),null===(i=this.responder)||void 0===i||i.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput(t){const{data:e}=t,{textAdded:n}=this.inputSummary;if(n&&n!==e&&n.toUpperCase()===e){var i;const t=this.getSelectedRange();return this.setSelectedRange([t[0],t[1]+n.length]),null===(i=this.responder)||void 0===i||i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(t)}},dragenter(t){t.preventDefault()},dragstart(t){var e,n;return this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),null===(e=this.delegate)||void 0===e||null===(n=e.inputControllerDidStartDrag)||void 0===n?void 0:n.call(e)},dragover(t){if(this.draggedRange||this.canAcceptDataTransfer(t.dataTransfer)){t.preventDefault();const i={x:t.clientX,y:t.clientY};var e,n;if(!Lt(i,this.draggingPoint))return this.draggingPoint=i,null===(e=this.delegate)||void 0===e||null===(n=e.inputControllerDidReceiveDragOverPoint)||void 0===n?void 0:n.call(e,this.draggingPoint)}},dragend(t){var e,n;null===(e=this.delegate)||void 0===e||null===(n=e.inputControllerDidCancelDrag)||void 0===n||n.call(e),this.draggedRange=null,this.draggingPoint=null},drop(t){var e,n;t.preventDefault();const i=null===(e=t.dataTransfer)||void 0===e?void 0:e.files,r=t.dataTransfer.getData("application/x-trix-document"),o={x:t.clientX,y:t.clientY};if(null===(n=this.responder)||void 0===n||n.setLocationRangeFromPointRange(o),null!=i&&i.length)this.attachFiles(i);else if(this.draggedRange){var s,a;null===(s=this.delegate)||void 0===s||s.inputControllerWillMoveText(),null===(a=this.responder)||void 0===a||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(r){var l;const t=ei.fromJSONString(r);null===(l=this.responder)||void 0===l||l.insertDocument(t),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(t){var e,n;if(null!==(e=this.responder)&&void 0!==e&&e.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),null===(n=this.delegate)||void 0===n||n.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented))return this.requestRender()},copy(t){var e;null!==(e=this.responder)&&void 0!==e&&e.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault()},paste(t){const e=t.clipboardData||t.testClipboardData,n={clipboard:e};if(!e||dr(t))return void this.getPastedHTMLUsingHiddenElement(t=>{var e,i,r;return n.type="text/html",n.html=t,null===(e=this.delegate)||void 0===e||e.inputControllerWillPaste(n),null===(i=this.responder)||void 0===i||i.insertHTML(n.html),this.requestRender(),null===(r=this.delegate)||void 0===r?void 0:r.inputControllerDidPaste(n)});const i=e.getData("URL"),r=e.getData("text/html"),o=e.getData("public.url-name");if(i){var s,a,l;let t;n.type="text/html",t=o?Ht(o).trim():i,n.html=this.createLinkHTML(i,t),null===(s=this.delegate)||void 0===s||s.inputControllerWillPaste(n),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()}),null===(a=this.responder)||void 0===a||a.insertHTML(n.html),this.requestRender(),null===(l=this.delegate)||void 0===l||l.inputControllerDidPaste(n)}else if(Rt(e)){var c,u,d;n.type="text/plain",n.string=e.getData("text/plain"),null===(c=this.delegate)||void 0===c||c.inputControllerWillPaste(n),this.setInputSummary({textAdded:n.string,didDelete:this.selectionIsExpanded()}),null===(u=this.responder)||void 0===u||u.insertString(n.string),this.requestRender(),null===(d=this.delegate)||void 0===d||d.inputControllerDidPaste(n)}else if(r){var h,f,m;n.type="text/html",n.html=r,null===(h=this.delegate)||void 0===h||h.inputControllerWillPaste(n),null===(f=this.responder)||void 0===f||f.insertHTML(n.html),this.requestRender(),null===(m=this.delegate)||void 0===m||m.inputControllerDidPaste(n)}else if(Array.from(e.types).includes("Files")){var p,g;const t=null===(p=e.items)||void 0===p||null===(p=p[0])||void 0===p||null===(g=p.getAsFile)||void 0===g?void 0:g.call(p);if(t){var b,v,y;const e=lr(t);!t.name&&e&&(t.name="pasted-file-".concat(++sr,".").concat(e)),n.type="File",n.file=t,null===(b=this.delegate)||void 0===b||b.inputControllerWillAttachFiles(),null===(v=this.responder)||void 0===v||v.insertFile(n.file),this.requestRender(),null===(y=this.delegate)||void 0===y||y.inputControllerDidPaste(n)}}t.preventDefault()},compositionstart(t){return this.getCompositionInput().start(t.data)},compositionupdate(t){return this.getCompositionInput().update(t.data)},compositionend(t){return this.getCompositionInput().end(t.data)},beforeinput(t){this.inputSummary.didInput=!0},input(t){return this.inputSummary.didInput=!0,t.stopPropagation()}}),Tn(ar,"keys",{backspace(t){var e;return null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},delete(t){var e;return null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},return(t){var e,n;return this.setInputSummary({preferDocument:!0}),null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),null===(n=this.responder)||void 0===n?void 0:n.insertLineBreak()},tab(t){var e,n;null!==(e=this.responder)&&void 0!==e&&e.canIncreaseNestingLevel()&&(null===(n=this.responder)||void 0===n||n.increaseNestingLevel(),this.requestRender(),t.preventDefault())},left(t){var e;if(this.selectionIsInCursorTarget())return t.preventDefault(),null===(e=this.responder)||void 0===e?void 0:e.moveCursorInDirection("backward")},right(t){var e;if(this.selectionIsInCursorTarget())return t.preventDefault(),null===(e=this.responder)||void 0===e?void 0:e.moveCursorInDirection("forward")},control:{d(t){var e;return null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h(t){var e;return null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o(t){var e,n;return t.preventDefault(),null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),null===(n=this.responder)||void 0===n||n.insertString("\n",{updatePosition:!1}),this.requestRender()}},shift:{return(t){var e,n;null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),null===(n=this.responder)||void 0===n||n.insertString("\n"),this.requestRender(),t.preventDefault()},tab(t){var e,n;null!==(e=this.responder)&&void 0!==e&&e.canDecreaseNestingLevel()&&(null===(n=this.responder)||void 0===n||n.decreaseNestingLevel(),this.requestRender(),t.preventDefault())},left(t){if(this.selectionIsInCursorTarget())return t.preventDefault(),this.expandSelectionInDirection("backward")},right(t){if(this.selectionIsInCursorTarget())return t.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(t){var e;return this.setInputSummary({preferDocument:!1}),null===(e=this.delegate)||void 0===e?void 0:e.inputControllerWillPerformTyping()}},meta:{backspace(t){var e;return this.setInputSummary({preferDocument:!1}),null===(e=this.delegate)||void 0===e?void 0:e.inputControllerWillPerformTyping()}}}),ar.proxyMethod("responder?.getSelectedRange"),ar.proxyMethod("responder?.setSelectedRange"),ar.proxyMethod("responder?.expandSelectionInDirection"),ar.proxyMethod("responder?.selectionIsInCursorTarget"),ar.proxyMethod("responder?.selectionIsExpanded");const lr=t=>{var e;return null===(e=t.type)||void 0===e||null===(e=e.match(/\/(\w+)$/))||void 0===e?void 0:e[1]},cr=!(null===(ir=" ".codePointAt)||void 0===ir||!ir.call(" ",0)),ur=function(t){if(t.key&&cr&&t.key.codePointAt(0)===t.keyCode)return t.key;{let e;if(null===t.which?e=t.keyCode:0!==t.which&&0!==t.charCode&&(e=t.charCode),null!=e&&"escape"!==or[e])return tt.fromCodepoints([e]).toString()}},dr=function(t){const e=t.clipboardData;if(e){if(e.types.includes("text/html")){for(const t of e.types){const n=/^CorePasteboardFlavorType/.test(t),i=/^dyn\./.test(t)&&e.getData(t);if(n||i)return!0}return!1}{const t=e.types.includes("com.apple.webarchive"),n=e.types.includes("com.apple.flat-rtfd");return t||n}}};class hr extends K{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){var e,n;(this.data.start=t,this.isSignificant())&&("keypress"===this.inputSummary.eventName&&this.inputSummary.textAdded&&(null===(n=this.responder)||void 0===n||n.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=null===(e=this.responder)||void 0===e?void 0:e.getSelectedRange())}update(t){if(this.data.update=t,this.isSignificant()){const t=this.selectPlaceholder();t&&(this.forgetPlaceholder(),this.range=t)}}end(t){return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),null===(n=this.responder)||void 0===n||n.setSelectedRange(this.range),null===(i=this.responder)||void 0===i||i.insertString(this.data.end),null===(r=this.responder)||void 0===r?void 0:r.setSelectedRange(this.range[0]+this.data.end.length)):null!=this.data.start||null!=this.data.update?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var e,n,i,r}getEndData(){return this.data.end}isEnded(){return null!=this.getEndData()}isSignificant(){return!rr.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var t,e;return 0===(null===(t=this.data.start)||void 0===t?void 0:t.length)&&(null===(e=this.data.end)||void 0===e?void 0:e.length)>0&&this.range}}hr.proxyMethod("inputController.setInputSummary"),hr.proxyMethod("inputController.requestRender"),hr.proxyMethod("inputController.requestReparse"),hr.proxyMethod("responder?.selectionIsExpanded"),hr.proxyMethod("responder?.insertPlaceholder"),hr.proxyMethod("responder?.selectPlaceholder"),hr.proxyMethod("responder?.forgetPlaceholder");class fr extends nr{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?null===(t=this.delegate)||void 0===t||null===(e=t.inputControllerDidAllowUnhandledInput)||void 0===e?void 0:e.call(t):void 0:this.reparse();var t,e}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t,e;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||null===(e=this.delegate)||void 0===e||e.render(),null===(t=this.afterRender)||void 0===t||t.call(this),this.afterRender=null}reparse(){var t;return null===(t=this.delegate)||void 0===t?void 0:t.reparse()}insertString(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return null===(t=this.delegate)||void 0===t||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.insertString(e,n)})}toggleAttributeIfSupported(t){var e;if(gt().includes(t))return null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var e;return null===(e=this.responder)||void 0===e?void 0:e.toggleCurrentAttribute(t)})}activateAttributeIfSupported(t,e){var n;if(gt().includes(t))return null===(n=this.delegate)||void 0===n||n.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var n;return null===(n=this.responder)||void 0===n?void 0:n.setCurrentAttribute(t,e)})}deleteInDirection(t){let{recordUndoEntry:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recordUndoEntry:!0};var n;e&&(null===(n=this.delegate)||void 0===n||n.inputControllerWillPerformTyping());const i=()=>{var e;return null===(e=this.responder)||void 0===e?void 0:e.deleteInDirection(t)},r=this.getTargetDOMRange({minLength:this.composing?1:2});return r?this.withTargetDOMRange(r,i):i()}withTargetDOMRange(t,e){var n;return"function"==typeof t&&(e=t,t=this.getTargetDOMRange()),t?null===(n=this.responder)||void 0===n?void 0:n.withTargetDOMRange(t,e.bind(this)):(It.reset(),e.call(this))}getTargetDOMRange(){var t,e;let{minLength:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{minLength:0};const i=null===(t=(e=this.event).getTargetRanges)||void 0===t?void 0:t.call(e);if(i&&i.length){const t=mr(i[0]);if(0===n||t.toString().length>=n)return t}}withEvent(t,e){let n;this.event=t;try{n=e.call(this)}finally{this.event=null}return n}}Tn(fr,"events",{keydown(t){if(kt(t)){var e;const n=yr(t);null!==(e=this.delegate)&&void 0!==e&&e.inputControllerDidReceiveKeyboardCommand(n)&&t.preventDefault()}else{let e=t.key;t.altKey&&(e+="+Alt"),t.shiftKey&&(e+="+Shift");const n=this.constructor.keys[e];if(n)return this.withEvent(t,n)}},paste(t){var e;let n;const i=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("URL");return br(t)?(t.preventDefault(),this.attachFiles(t.clipboardData.files)):vr(t)?(t.preventDefault(),n={type:"text/plain",string:t.clipboardData.getData("text/plain")},null===(r=this.delegate)||void 0===r||r.inputControllerWillPaste(n),null===(o=this.responder)||void 0===o||o.insertString(n.string),this.render(),null===(s=this.delegate)||void 0===s?void 0:s.inputControllerDidPaste(n)):i?(t.preventDefault(),n={type:"text/html",html:this.createLinkHTML(i)},null===(a=this.delegate)||void 0===a||a.inputControllerWillPaste(n),null===(l=this.responder)||void 0===l||l.insertHTML(n.html),this.render(),null===(c=this.delegate)||void 0===c?void 0:c.inputControllerDidPaste(n)):void 0;var r,o,s,a,l,c},beforeinput(t){const e=this.constructor.inputTypes[t.inputType],n=(i=t,!(!/iPhone|iPad/.test(navigator.userAgent)||i.inputType&&"insertParagraph"!==i.inputType));var i;e&&(this.withEvent(t,e),n||this.scheduleRender()),n&&this.render()},input(t){It.reset()},dragstart(t){var e,n;null!==(e=this.responder)&&void 0!==e&&e.selectionContainsAttachments()&&(t.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:null===(n=this.responder)||void 0===n?void 0:n.getSelectedRange(),point:Ar(t)})},dragenter(t){pr(t)&&t.preventDefault()},dragover(t){if(this.dragging){t.preventDefault();const n=Ar(t);var e;if(!Lt(n,this.dragging.point))return this.dragging.point=n,null===(e=this.responder)||void 0===e?void 0:e.setLocationRangeFromPointRange(n)}else pr(t)&&t.preventDefault()},drop(t){var e,n;if(this.dragging)return t.preventDefault(),null===(e=this.delegate)||void 0===e||e.inputControllerWillMoveText(),null===(n=this.responder)||void 0===n||n.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(pr(t)){var i;t.preventDefault();const e=Ar(t);return null===(i=this.responder)||void 0===i||i.setLocationRangeFromPointRange(e),this.attachFiles(t.dataTransfer.files)}},dragend(){var t;this.dragging&&(null===(t=this.responder)||void 0===t||t.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(t){this.composing&&(this.composing=!1,u.recentAndroid||this.scheduleRender())}}),Tn(fr,"keys",{ArrowLeft(){var t,e;if(null!==(t=this.responder)&&void 0!==t&&t.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),null===(e=this.responder)||void 0===e?void 0:e.moveCursorInDirection("backward")},ArrowRight(){var t,e;if(null!==(t=this.responder)&&void 0!==t&&t.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),null===(e=this.responder)||void 0===e?void 0:e.moveCursorInDirection("forward")},Backspace(){var t,e,n;if(null!==(t=this.responder)&&void 0!==t&&t.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),null===(e=this.delegate)||void 0===e||e.inputControllerWillPerformTyping(),null===(n=this.responder)||void 0===n||n.deleteInDirection("backward"),this.render()},Tab(){var t,e;if(null!==(t=this.responder)&&void 0!==t&&t.canIncreaseNestingLevel())return this.event.preventDefault(),null===(e=this.responder)||void 0===e||e.increaseNestingLevel(),this.render()},"Tab+Shift"(){var t,e;if(null!==(t=this.responder)&&void 0!==t&&t.canDecreaseNestingLevel())return this.event.preventDefault(),null===(e=this.responder)||void 0===e||e.decreaseNestingLevel(),this.render()}}),Tn(fr,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var t;this.deleteByDragRange=null===(t=this.responder)||void 0===t?void 0:t.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var t;if(null!==(t=this.responder)&&void 0!==t&&t.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var t;if(null!==(t=this.responder)&&void 0!==t&&t.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(const n in null===(t=this.responder)||void 0===t?void 0:t.getCurrentAttributes()){var t,e;null===(e=this.responder)||void 0===e||e.removeCurrentAttribute(n)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var t;return null===(t=this.delegate)||void 0===t?void 0:t.inputControllerWillPerformRedo()},historyUndo(){var t;return null===(t=this.delegate)||void 0===t?void 0:t.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){const t=this.deleteByDragRange;var e;if(t)return this.deleteByDragRange=null,null===(e=this.delegate)||void 0===e||e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return null===(e=this.responder)||void 0===e?void 0:e.moveTextFromRange(t)})},insertFromPaste(){const{dataTransfer:t}=this.event,e={dataTransfer:t},n=t.getData("URL"),i=t.getData("text/html");if(n){var r;let i;this.event.preventDefault(),e.type="text/html";const o=t.getData("public.url-name");i=o?Ht(o).trim():n,e.html=this.createLinkHTML(n,i),null===(r=this.delegate)||void 0===r||r.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.insertHTML(e.html)}),this.afterRender=()=>{var t;return null===(t=this.delegate)||void 0===t?void 0:t.inputControllerDidPaste(e)}}else if(Rt(t)){var o;e.type="text/plain",e.string=t.getData("text/plain"),null===(o=this.delegate)||void 0===o||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.insertString(e.string)}),this.afterRender=()=>{var t;return null===(t=this.delegate)||void 0===t?void 0:t.inputControllerDidPaste(e)}}else if(gr(this.event)){var s;e.type="File",e.file=t.files[0],null===(s=this.delegate)||void 0===s||s.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.insertFile(e.file)}),this.afterRender=()=>{var t;return null===(t=this.delegate)||void 0===t?void 0:t.inputControllerDidPaste(e)}}else if(i){var a;this.event.preventDefault(),e.type="text/html",e.html=i,null===(a=this.delegate)||void 0===a||a.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.insertHTML(e.html)}),this.afterRender=()=>{var t;return null===(t=this.delegate)||void 0===t?void 0:t.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString("\n")},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var t;return null===(t=this.delegate)||void 0===t||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return null===(t=this.responder)||void 0===t?void 0:t.insertLineBreak()})},insertReplacementText(){const t=this.event.dataTransfer.getData("text/plain"),e=this.event.getTargetRanges()[0];this.withTargetDOMRange(e,()=>{this.insertString(t,{updatePosition:!1})})},insertText(){var t;return this.insertString(this.event.data||(null===(t=this.event.dataTransfer)||void 0===t?void 0:t.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});const mr=function(t){const e=document.createRange();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),e},pr=t=>{var e;return Array.from((null===(e=t.dataTransfer)||void 0===e?void 0:e.types)||[]).includes("Files")},gr=t=>{var e;return(null===(e=t.dataTransfer.files)||void 0===e?void 0:e[0])&&!br(t)&&!(t=>{let{dataTransfer:e}=t;return e.types.includes("Files")&&e.types.includes("text/html")&&e.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(t)},br=function(t){const e=t.clipboardData;if(e)return Array.from(e.types).filter(t=>t.match(/file/i)).length===e.types.length&&e.files.length>=1},vr=function(t){const e=t.clipboardData;if(e)return e.types.includes("text/plain")&&1===e.types.length},yr=function(t){const e=[];return t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.push(t.key),e},Ar=t=>({x:t.clientX,y:t.clientY}),xr="[data-trix-attribute]",Er="[data-trix-action]",Sr="".concat(xr,", ").concat(Er),wr="[data-trix-dialog]",Cr="".concat(wr,"[data-trix-active]"),Rr="".concat(wr," [data-trix-method]"),kr="".concat(wr," [data-trix-input]"),Tr=(t,e)=>(e||(e=Lr(t)),t.querySelector("[data-trix-input][name='".concat(e,"']"))),Or=t=>t.getAttribute("data-trix-action"),Lr=t=>t.getAttribute("data-trix-attribute")||t.getAttribute("data-trix-dialog-attribute");class Dr extends K{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),A("mousedown",{onElement:this.element,matchingSelector:Er,withCallback:this.didClickActionButton}),A("mousedown",{onElement:this.element,matchingSelector:xr,withCallback:this.didClickAttributeButton}),A("click",{onElement:this.element,matchingSelector:Sr,preventDefault:!0}),A("click",{onElement:this.element,matchingSelector:Rr,withCallback:this.didClickDialogButton}),A("keydown",{onElement:this.element,matchingSelector:kr,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,e){var n;null===(n=this.delegate)||void 0===n||n.toolbarDidClickButton(),t.preventDefault();const i=Or(e);return this.getDialog(i)?this.toggleDialog(i):null===(r=this.delegate)||void 0===r?void 0:r.toolbarDidInvokeAction(i,e);var r}didClickAttributeButton(t,e){var n;null===(n=this.delegate)||void 0===n||n.toolbarDidClickButton(),t.preventDefault();const i=Lr(e);var r;return this.getDialog(i)?this.toggleDialog(i):null===(r=this.delegate)||void 0===r||r.toolbarDidToggleAttribute(i),this.refreshAttributeButtons()}didClickDialogButton(t,e){const n=S(e,{matchingSelector:wr});return this[e.getAttribute("data-trix-method")].call(this,n)}didKeyDownDialogInput(t,e){if(13===t.keyCode){t.preventDefault();const n=e.getAttribute("name"),i=this.getDialog(n);this.setAttribute(i)}if(27===t.keyCode)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,e)=>{t.disabled=!1===this.actions[e]})}eachActionButton(t){return Array.from(this.element.querySelectorAll(Er)).map(e=>t(e,Or(e)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,e)=>(t.disabled=!1===this.attributes[e],this.attributes[e]||this.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(xr)).map(e=>t(e,Lr(e)))}applyKeyboardCommand(t){const e=JSON.stringify(t.sort());for(const t of Array.from(this.element.querySelectorAll("[data-trix-key]"))){const n=t.getAttribute("data-trix-key").split("+");if(JSON.stringify(n.sort())===e)return x("mousedown",{onElement:t}),!0}return!1}dialogIsVisible(t){const e=this.getDialog(t);if(e)return e.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var e,n;this.hideDialog(),null===(e=this.delegate)||void 0===e||e.toolbarWillShowDialog();const i=this.getDialog(t);i.setAttribute("data-trix-active",""),i.classList.add("trix-active"),Array.from(i.querySelectorAll("input[disabled]")).forEach(t=>{t.removeAttribute("disabled")});const r=Lr(i);if(r){const e=Tr(i,t);e&&(e.value=this.attributes[r]||"",e.select())}return null===(n=this.delegate)||void 0===n?void 0:n.toolbarDidShowDialog(t)}setAttribute(t){var e;const n=Lr(t),i=Tr(t,n);return!i.willValidate||(i.setCustomValidity(""),i.checkValidity()&&this.isSafeAttribute(i))?(null===(e=this.delegate)||void 0===e||e.toolbarDidUpdateAttribute(n,i.value),this.hideDialog()):(i.setCustomValidity("Invalid value"),i.setAttribute("data-trix-validate",""),i.classList.add("trix-validate"),i.focus())}isSafeAttribute(t){return!t.hasAttribute("data-trix-validate-href")||sn.isValidAttribute("a","href",t.value)}removeAttribute(t){var e;const n=Lr(t);return null===(e=this.delegate)||void 0===e||e.toolbarDidRemoveAttribute(n),this.hideDialog()}hideDialog(){const t=this.element.querySelector(Cr);var e;if(t)return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),null===(e=this.delegate)||void 0===e?void 0:e.toolbarDidHideDialog((t=>t.getAttribute("data-trix-dialog"))(t))}resetDialogInputs(){Array.from(this.element.querySelectorAll(kr)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}}class _r extends Hi{constructor(t){let{editorElement:e,document:n,html:i}=t;super(...arguments),this.editorElement=e,this.selectionManager=new Bi(this.editorElement),this.selectionManager.delegate=this,this.composition=new Ei,this.composition.delegate=this,this.attachmentManager=new Ai(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=2===W.getLevel()?new fr(this.editorElement):new ar(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Vi(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Dr(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new Oi(this.composition,this.selectionManager,this.editorElement),n?this.editor.loadDocument(n):this.editor.loadHTML(i)}registerSelectionManager(){return It.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return It.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){const e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:e})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);const e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){const e=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:e})}compositionDidStartEditingAttachment(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)}compositionControllerDidRequestDeselectingAttachment(t){const e=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(e[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!Nt(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t,e){return this.invokeAction(t,e)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,e){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){return!!this.actionIsExternal(t)||!(null===(e=this.actions[t])||void 0===e||null===(e=e.test)||void 0===e||!e.call(this));var e}invokeAction(t,e){return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t,invokingElement:e}):null===(n=this.actions[t])||void 0===n||null===(n=n.perform)||void 0===n?void 0:n.call(this);var n}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){const t={};for(const e in this.actions)t[e]=this.canInvokeAction(e);return t}updateCurrentActions(){const t=this.getCurrentActions();if(!Lt(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(e=>{const{document:n,selectedRange:i}=t;t=e.call(this.editor,t)||{},t.document||(t.document=n),t.selectedRange||(t.selectedRange=i)}),e=t,n=this.composition.getSnapshot(),!Nt(e.selectedRange,n.selectedRange)||!e.document.isEqualTo(n.document))return this.composition.loadSnapshot(t);var e,n}updateInputElement(){const t=function(t,e){const n=bi[e];if(n)return n(t);throw new Error("unknown content type: ".concat(e))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(t)}notifyEditorElement(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){const e=bt(t),n=this.selectionManager.getLocationRange();if(e||!_t(n))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return[this.getLocationContext(),this.getTimeContext(),...Array.from(e)]}getLocationContext(){const t=this.selectionManager.getLocationRange();return _t(t)?t[0].index:t}getTimeContext(){return H.interval>0?Math.floor((new Date).getTime()/H.interval):0}isFocused(){var t;return this.editorElement===(null===(t=this.editorElement.ownerDocument)||void 0===t?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}}Tn(_r,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return W.pickFiles(this.editor.insertFiles)}}}),_r.proxyMethod("getSelectionManager().setLocationRange"),_r.proxyMethod("getSelectionManager().getLocationRange");var Nr=Object.freeze({__proto__:null,AttachmentEditorController:zi,CompositionController:Vi,Controller:Hi,EditorController:_r,InputController:nr,Level0InputController:ar,Level2InputController:fr,ToolbarController:Dr}),Pr=Object.freeze({__proto__:null,MutationObserver:Gi,SelectionChangeObserver:Bt}),Fr=Object.freeze({__proto__:null,FileVerificationOperation:Yi,ImagePreloadOperation:Bn});xt("trix-toolbar","%t {\n  display: block;\n}\n\n%t {\n  white-space: nowrap;\n}\n\n%t [data-trix-dialog] {\n  display: none;\n}\n\n%t [data-trix-dialog][data-trix-active] {\n  display: block;\n}\n\n%t [data-trix-dialog] [data-trix-validate]:invalid {\n  background-color: #ffdddd;\n}");class Br extends HTMLElement{connectedCallback(){""===this.innerHTML&&(this.innerHTML=V.getDefaultHTML())}}let Ir=0;const Mr=function(t){return jr(t),Ur(t)},jr=function(t){var e,n;if(null!==(e=(n=document).queryCommandSupported)&&void 0!==e&&e.call(n,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),A("mscontrolselect",{onElement:t,preventDefault:!0})},Ur=function(t){var e,n;if(null!==(e=(n=document).queryCommandSupported)&&void 0!==e&&e.call(n,"DefaultParagraphSeparator")){const{tagName:t}=s.default;if(["div","p"].includes(t))return document.execCommand("DefaultParagraphSeparator",!1,t)}},Wr=u.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};xt("trix-editor","%t {\n    display: block;\n}\n\n%t:empty::before {\n    content: attr(placeholder);\n    color: graytext;\n    cursor: text;\n    pointer-events: none;\n    white-space: pre-line;\n}\n\n%t a[contenteditable=false] {\n    cursor: text;\n}\n\n%t img {\n    max-width: 100%;\n    height: auto;\n}\n\n%t ".concat(r," figcaption textarea {\n    resize: none;\n}\n\n%t ").concat(r," figcaption textarea.trix-autoresize-clone {\n    position: absolute;\n    left: -9999px;\n    max-height: 0px;\n}\n\n%t ").concat(r," figcaption[data-trix-placeholder]:empty::before {\n    content: attr(data-trix-placeholder);\n    color: graytext;\n}\n\n%t [data-trix-cursor-target] {\n    display: ").concat(Wr.display," !important;\n    width: ").concat(Wr.width," !important;\n    padding: 0 !important;\n    margin: 0 !important;\n    border: none !important;\n}\n\n%t [data-trix-cursor-target=left] {\n    vertical-align: top !important;\n    margin-left: -1px !important;\n}\n\n%t [data-trix-cursor-target=right] {\n    vertical-align: bottom !important;\n    margin-right: -1px !important;\n}"));var qr=new WeakMap,zr=new WeakSet;class Vr{constructor(t){var e;Nn(this,e=zr),e.add(this),Pn(this,qr,{writable:!0,value:void 0}),this.element=t,Ln(this,qr,t.attachInternals())}connectedCallback(){_n(this,zr,Hr).call(this)}disconnectedCallback(){}get labels(){return On(this,qr).labels}get disabled(){var t;return null===(t=this.element.inputElement)||void 0===t?void 0:t.disabled}set disabled(t){this.element.toggleAttribute("disabled",t)}get required(){return this.element.hasAttribute("required")}set required(t){this.element.toggleAttribute("required",t),_n(this,zr,Hr).call(this)}get validity(){return On(this,qr).validity}get validationMessage(){return On(this,qr).validationMessage}get willValidate(){return On(this,qr).willValidate}setFormValue(t){_n(this,zr,Hr).call(this)}checkValidity(){return On(this,qr).checkValidity()}reportValidity(){return On(this,qr).reportValidity()}setCustomValidity(t){_n(this,zr,Hr).call(this,t)}}function Hr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{required:e,value:n}=this.element,i=e&&!n,r=!!t,o=L("input",{required:e}),s=t||o.validationMessage;On(this,qr).setValidity({valueMissing:i,customError:r},s)}var Jr=new WeakMap,Kr=new WeakMap,$r=new WeakMap;class Gr{constructor(t){Pn(this,Jr,{writable:!0,value:void 0}),Pn(this,Kr,{writable:!0,value:t=>{t.defaultPrevented||t.target===this.element.form&&this.element.reset()}}),Pn(this,$r,{writable:!0,value:t=>{if(t.defaultPrevented)return;if(this.element.contains(t.target))return;const e=S(t.target,{matchingSelector:"label"});e&&Array.from(this.labels).includes(e)&&this.element.focus()}}),this.element=t}connectedCallback(){Ln(this,Jr,function(t){if(t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"))return;const e=function(){const e=Array.from(t.labels).map(e=>{if(!e.contains(t))return e.textContent}).filter(t=>t).join(" ");return e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")};return e(),A("focus",{onElement:t,withCallback:e})}(this.element)),window.addEventListener("reset",On(this,Kr),!1),window.addEventListener("click",On(this,$r),!1)}disconnectedCallback(){var t;null===(t=On(this,Jr))||void 0===t||t.destroy(),window.removeEventListener("reset",On(this,Kr),!1),window.removeEventListener("click",On(this,$r),!1)}get labels(){const t=[];this.element.id&&this.element.ownerDocument&&t.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));const e=S(this.element,{matchingSelector:"label"});return e&&[this.element,null].includes(e.control)&&t.push(e),t}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(t){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(t){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(t){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(t){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}}var Xr=new WeakMap;class Yr extends HTMLElement{constructor(){super(),Pn(this,Xr,{writable:!0,value:void 0}),Ln(this,Xr,this.constructor.formAssociated?new Vr(this):new Gr(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++Ir),this.trixId)}get labels(){return On(this,Xr).labels}get disabled(){return On(this,Xr).disabled}set disabled(t){On(this,Xr).disabled=t}get required(){return On(this,Xr).required}set required(t){On(this,Xr).required=t}get validity(){return On(this,Xr).validity}get validationMessage(){return On(this,Xr).validationMessage}get willValidate(){return On(this,Xr).willValidate}get type(){return this.localName}get toolbarElement(){var t;if(this.hasAttribute("toolbar"))return null===(t=this.ownerDocument)||void 0===t?void 0:t.getElementById(this.getAttribute("toolbar"));if(this.parentNode){const t="trix-toolbar-".concat(this.trixId);return this.setAttribute("toolbar",t),this.internalToolbar=L("trix-toolbar",{id:t}),this.parentNode.insertBefore(this.internalToolbar,this),this.internalToolbar}}get form(){var t;return null===(t=this.inputElement)||void 0===t?void 0:t.form}get inputElement(){var t;if(this.hasAttribute("input"))return null===(t=this.ownerDocument)||void 0===t?void 0:t.getElementById(this.getAttribute("input"));if(this.parentNode){const t="trix-input-".concat(this.trixId);this.setAttribute("input",t);const e=L("input",{type:"hidden",id:t});return this.parentNode.insertBefore(e,this.nextElementSibling),e}}get editor(){var t;return null===(t=this.editorController)||void 0===t?void 0:t.editor}get name(){var t;return null===(t=this.inputElement)||void 0===t?void 0:t.name}get value(){var t;return null===(t=this.inputElement)||void 0===t?void 0:t.value}set value(t){var e;this.defaultValue=t,null===(e=this.editor)||void 0===e||e.loadHTML(this.defaultValue)}attributeChangedCallback(t,e,n){"connected"===t&&this.isConnected&&null!=e&&e!==n&&requestAnimationFrame(()=>this.reconnect())}notify(t,e){if(this.editorController)return x("trix-".concat(t),{onElement:this,attributes:e})}setFormValue(t){this.inputElement&&(this.inputElement.value=t,On(this,Xr).setFormValue(t))}connectedCallback(){this.hasAttribute("data-trix-internal")||(function(t){if(!t.hasAttribute("contenteditable"))t.setAttribute("contenteditable",""),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.times=1,A(t,e)}("focus",{onElement:t,withCallback:()=>Mr(t)})}(this),function(t){t.hasAttribute("role")||t.setAttribute("role","textbox")}(this),this.editorController||(x("trix-before-initialize",{onElement:this}),this.editorController=new _r({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>x("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),On(this,Xr).connectedCallback(),this.toggleAttribute("connected",!0),function(t){!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t&&t.focus()}(this))}disconnectedCallback(){var t;null===(t=this.editorController)||void 0===t||t.unregisterSelectionManager(),On(this,Xr).disconnectedCallback(),this.toggleAttribute("connected",!1)}reconnect(){this.removeInternalToolbar(),this.disconnectedCallback(),this.connectedCallback()}removeInternalToolbar(){var t;null===(t=this.internalToolbar)||void 0===t||t.remove(),this.internalToolbar=null}checkValidity(){return On(this,Xr).checkValidity()}reportValidity(){return On(this,Xr).reportValidity()}setCustomValidity(t){On(this,Xr).setCustomValidity(t)}formDisabledCallback(t){this.inputElement&&(this.inputElement.disabled=t),this.toggleAttribute("contenteditable",!t)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}}Tn(Yr,"formAssociated","ElementInternals"in window),Tn(Yr,"observedAttributes",["connected"]);const Qr={VERSION:"2.1.15",config:J,core:vi,models:Ii,views:Mi,controllers:Nr,observers:Pr,operations:Fr,elements:Object.freeze({__proto__:null,TrixEditorElement:Yr,TrixToolbarElement:Br}),filters:Object.freeze({__proto__:null,Filter:Ri,attachmentGalleryFilter:ki})};function Zr(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<8;n++)e+=t.charAt(Math.floor(62*Math.random()));return e}Object.assign(Qr,Ii),window.Trix=Qr,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",Br),customElements.get("trix-editor")||customElements.define("trix-editor",Yr)},0),i.Ay.config.ignoredElements=["trix-editor","trix-toolbar"];const to={name:"nzWysiwyg",props:{name:String,value:String},data:function(){return{inputId:Zr(),toolbarId:"toolbar-"+Zr(),lang:Qr.config.lang}},mounted:function(){this.$refs.trix.addEventListener("trix-change",this.onInput)},beforeDestroy:function(){this.$refs.trix.removeEventListener("trix-change",this.onInput)},methods:{onInput:function(t){this.$emit("input",t.target.innerHTML)},focus:function(){this.$refs.trix.focus()}}},eo=to;const no=(0,n(4486).A)(eo,function(){var t=this,e=t._self._c;return e("div",{staticClass:"wysiwyg"},[e("input",{ref:"input",attrs:{id:t.inputId,type:"hidden",name:t.name},domProps:{value:t.value}}),t._v(" "),e("trix-toolbar",{attrs:{id:t.toolbarId}},[e("div",{staticClass:"trix-button-row"},[e("span",{staticClass:"trix-button-group trix-button-group--text-tools",attrs:{"data-trix-button-group":"text-tools"}},[e("button",{staticClass:"trix-button trix-button--icon trix-button--icon-bold",attrs:{type:"button","data-trix-attribute":"bold","data-trix-key":"b",title:t.lang.bold}},[t._v(t._s(t.lang.bold))]),t._v(" "),e("button",{staticClass:"trix-button trix-button--icon trix-button--icon-italic",attrs:{type:"button","data-trix-attribute":"italic","data-trix-key":"i",title:t.lang.italic}},[t._v(t._s(t.lang.italic))]),t._v(" "),e("button",{staticClass:"trix-button trix-button--icon trix-button--icon-strike",attrs:{type:"button","data-trix-attribute":"strike",title:t.lang.strike}},[t._v(t._s(t.lang.strike))]),t._v(" "),e("button",{staticClass:"trix-button trix-button--icon trix-button--icon-link",attrs:{type:"button","data-trix-attribute":"href","data-trix-action":"link","data-trix-key":"k",title:t.lang.link}},[t._v(t._s(t.lang.link))])]),t._v(" "),e("span",{staticClass:"trix-button-group trix-button-group--history-tools",attrs:{"data-trix-button-group":"history-tools"}},[e("button",{staticClass:"trix-button trix-button--icon trix-button--icon-undo",attrs:{type:"button","data-trix-action":"undo","data-trix-key":"z",title:t.lang.undo}},[t._v(t._s(t.lang.undo))]),t._v(" "),e("button",{staticClass:"trix-button trix-button--icon trix-button--icon-redo",attrs:{type:"button","data-trix-action":"redo","data-trix-key":"shift+z",title:t.lang.redo}},[t._v(t._s(t.lang.redo))])])]),t._v(" "),e("div",{staticClass:"trix-dialogs",attrs:{"data-trix-dialogs":""}},[e("div",{staticClass:"trix-dialog trix-dialog--link",attrs:{"data-trix-dialog":"href","data-trix-dialog-attribute":"href"}},[e("div",{staticClass:"trix-dialog__link-fields"},[e("input",{staticClass:"trix-input trix-input--dialog",attrs:{type:"url",name:"href",placeholder:t.lang.urlPlaceholder,required:"","data-trix-input":""}}),t._v(" "),e("div",{staticClass:"trix-button-group"},[e("input",{staticClass:"trix-button trix-button--dialog",attrs:{type:"button",value:t.lang.link,"data-trix-method":"setAttribute"}}),t._v(" "),e("input",{staticClass:"trix-button trix-button--dialog",attrs:{type:"button",value:t.lang.unlink,"data-trix-method":"removeAttribute"}})])])])])]),t._v(" "),e("trix-editor",{ref:"trix",attrs:{input:t.inputId,toolbar:t.toolbarId}})],1)},[],!1,null,null,null).exports},6170:(t,e,n)=>{t.exports=n(912)},6189:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},6282:(t,e,n)=>{"use strict";t.exports=n(1225)},6392:(t,e,n)=>{"use strict";var i=n(1996);function r(t,e,n){i.call(this,null==t?"canceled":t,i.ERR_CANCELED,e,n),this.name="CanceledError"}n(3109).inherits(r,i,{__CANCEL__:!0}),t.exports=r},6448:(t,e,n)=>{"use strict";var i=n(2184),r=n(9845);t.exports=function(t,e,n){var o=!i(e);return t&&(o||!1===n)?r(t,e):e}},6621:t=>{"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},6716:(t,e,n)=>{"use strict";n.d(e,{A:()=>we});var i={};function r(t,e){return function(){return t.apply(e,arguments)}}n.r(i),n.d(i,{hasBrowserEnv:()=>pt,hasStandardBrowserEnv:()=>bt,hasStandardBrowserWebWorkerEnv:()=>vt,navigator:()=>gt,origin:()=>yt});var o=n(5606);const{toString:s}=Object.prototype,{getPrototypeOf:a}=Object,{iterator:l,toStringTag:c}=Symbol,u=(d=Object.create(null),t=>{const e=s.call(t);return d[e]||(d[e]=e.slice(8,-1).toLowerCase())});var d;const h=t=>(t=t.toLowerCase(),e=>u(e)===t),f=t=>e=>typeof e===t,{isArray:m}=Array,p=f("undefined");function g(t){return null!==t&&!p(t)&&null!==t.constructor&&!p(t.constructor)&&y(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const b=h("ArrayBuffer");const v=f("string"),y=f("function"),A=f("number"),x=t=>null!==t&&"object"==typeof t,E=t=>{if("object"!==u(t))return!1;const e=a(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||c in t||l in t)},S=h("Date"),w=h("File"),C=h("Blob"),R=h("FileList"),k=h("URLSearchParams"),[T,O,L,D]=["ReadableStream","Request","Response","Headers"].map(h);function _(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let i,r;if("object"!=typeof t&&(t=[t]),m(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{if(g(t))return;const r=n?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let s;for(i=0;i<o;i++)s=r[i],e.call(null,t[s],s,t)}}function N(t,e){if(g(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i,r=n.length;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,F=t=>!p(t)&&t!==P;const B=(I="undefined"!=typeof Uint8Array&&a(Uint8Array),t=>I&&t instanceof I);var I;const M=h("HTMLFormElement"),j=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),U=h("RegExp"),W=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};_(n,(n,r)=>{let o;!1!==(o=e(n,r,t))&&(i[r]=o||n)}),Object.defineProperties(t,i)};const q=h("AsyncFunction"),z=(V="function"==typeof setImmediate,H=y(P.postMessage),V?setImmediate:H?(J=`axios@${Math.random()}`,K=[],P.addEventListener("message",({source:t,data:e})=>{t===P&&e===J&&K.length&&K.shift()()},!1),t=>{K.push(t),P.postMessage(J,"*")}):t=>setTimeout(t));var V,H,J,K;const $="undefined"!=typeof queueMicrotask?queueMicrotask.bind(P):void 0!==o&&o.nextTick||z,G={isArray:m,isArrayBuffer:b,isBuffer:g,isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||y(t.append)&&("formdata"===(e=u(t))||"object"===e&&y(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&b(t.buffer),e},isString:v,isNumber:A,isBoolean:t=>!0===t||!1===t,isObject:x,isPlainObject:E,isEmptyObject:t=>{if(!x(t)||g(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(t){return!1}},isReadableStream:T,isRequest:O,isResponse:L,isHeaders:D,isUndefined:p,isDate:S,isFile:w,isBlob:C,isRegExp:U,isFunction:y,isStream:t=>x(t)&&y(t.pipe),isURLSearchParams:k,isTypedArray:B,isFileList:R,forEach:_,merge:function t(){const{caseless:e,skipUndefined:n}=F(this)&&this||{},i={},r=(r,o)=>{const s=e&&N(i,o)||o;E(i[s])&&E(r)?i[s]=t(i[s],r):E(r)?i[s]=t({},r):m(r)?i[s]=r.slice():n&&p(r)||(i[s]=r)};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&_(arguments[t],r);return i},extend:(t,e,n,{allOwnKeys:i}={})=>(_(e,(e,i)=>{n&&y(e)?t[i]=r(e,n):t[i]=e},{allOwnKeys:i}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,i)=>{let r,o,s;const l={};if(e=e||{},null==t)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)s=r[o],i&&!i(s,t,e)||l[s]||(e[s]=t[s],l[s]=!0);t=!1!==n&&a(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:u,kindOfTest:h,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},toArray:t=>{if(!t)return null;if(m(t))return t;let e=t.length;if(!A(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[l]).call(t);let i;for(;(i=n.next())&&!i.done;){const n=i.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const i=[];for(;null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:M,hasOwnProperty:j,hasOwnProp:j,reduceDescriptors:W,freezeMethods:t=>{W(t,(e,n)=>{if(y(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];y(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(t,e)=>{const n={},i=t=>{t.forEach(t=>{n[t]=!0})};return m(t)?i(t):i(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:N,global:P,isContextDefined:F,isSpecCompliantForm:function(t){return!!(t&&y(t.append)&&"FormData"===t[c]&&t[l])},toJSONObject:t=>{const e=new Array(10),n=(t,i)=>{if(x(t)){if(e.indexOf(t)>=0)return;if(g(t))return t;if(!("toJSON"in t)){e[i]=t;const r=m(t)?[]:{};return _(t,(t,e)=>{const o=n(t,i+1);!p(o)&&(r[e]=o)}),e[i]=void 0,r}}return t};return n(t,0)},isAsyncFn:q,isThenable:t=>t&&(x(t)||y(t))&&y(t.then)&&y(t.catch),setImmediate:z,asap:$,isIterable:t=>null!=t&&y(t[l])};function X(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}G.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const Y=X.prototype,Q={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Q[t]={value:t}}),Object.defineProperties(X,Q),Object.defineProperty(Y,"isAxiosError",{value:!0}),X.from=(t,e,n,i,r,o)=>{const s=Object.create(Y);G.toFlatObject(t,s,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t);const a=t&&t.message?t.message:"Error",l=null==e&&t?t.code:e;return X.call(s,a,l,n,i,r),t&&null==s.cause&&Object.defineProperty(s,"cause",{value:t,configurable:!0}),s.name=t&&t.name||"Error",o&&Object.assign(s,o),s};const Z=X;var tt=n(8287).hp;function et(t){return G.isPlainObject(t)||G.isArray(t)}function nt(t){return G.endsWith(t,"[]")?t.slice(0,-2):t}function it(t,e,n){return t?t.concat(e).map(function(t,e){return t=nt(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}const rt=G.toFlatObject(G,{},null,function(t){return/^is[A-Z]/.test(t)});const ot=function(t,e,n){if(!G.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(n=G.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!G.isUndefined(e[t])})).metaTokens,r=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(r))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(G.isDate(t))return t.toISOString();if(G.isBoolean(t))return t.toString();if(!a&&G.isBlob(t))throw new Z("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(t)||G.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):tt.from(t):t}function c(t,n,r){let a=t;if(t&&!r&&"object"==typeof t)if(G.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(G.isArray(t)&&function(t){return G.isArray(t)&&!t.some(et)}(t)||(G.isFileList(t)||G.endsWith(n,"[]"))&&(a=G.toArray(t)))return n=nt(n),a.forEach(function(t,i){!G.isUndefined(t)&&null!==t&&e.append(!0===s?it([n],i,o):null===s?n:n+"[]",l(t))}),!1;return!!et(t)||(e.append(it(r,n,o),l(t)),!1)}const u=[],d=Object.assign(rt,{defaultVisitor:c,convertValue:l,isVisitable:et});if(!G.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!G.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),G.forEach(n,function(n,o){!0===(!(G.isUndefined(n)||null===n)&&r.call(e,n,G.isString(o)?o.trim():o,i,d))&&t(n,i?i.concat(o):[o])}),u.pop()}}(t),e};function st(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function at(t,e){this._pairs=[],t&&ot(t,this,e)}const lt=at.prototype;lt.append=function(t,e){this._pairs.push([t,e])},lt.toString=function(t){const e=t?function(e){return t.call(this,e,st)}:st;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};const ct=at;function ut(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function dt(t,e,n){if(!e)return t;const i=n&&n.encode||ut;G.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(o=r?r(e,n):G.isURLSearchParams(e)?e.toString():new ct(e,n).toString(i),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}const ht=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){G.forEach(this.handlers,function(e){null!==e&&t(e)})}},ft={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ct,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},pt="undefined"!=typeof window&&"undefined"!=typeof document,gt="object"==typeof navigator&&navigator||void 0,bt=pt&&(!gt||["ReactNative","NativeScript","NS"].indexOf(gt.product)<0),vt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,yt=pt&&window.location.href||"http://localhost",At={...i,...mt};const xt=function(t){function e(t,n,i,r){let o=t[r++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=r>=t.length;if(o=!o&&G.isArray(i)?i.length:o,a)return G.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s;i[o]&&G.isObject(i[o])||(i[o]=[]);return e(t,n,i[o],r)&&G.isArray(i[o])&&(i[o]=function(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}(i[o])),!s}if(G.isFormData(t)&&G.isFunction(t.entries)){const n={};return G.forEachEntry(t,(t,i)=>{e(function(t){return G.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),i,n,0)}),n}return null};const Et={transitional:ft,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,r=G.isObject(t);r&&G.isHTMLForm(t)&&(t=new FormData(t));if(G.isFormData(t))return i?JSON.stringify(xt(t)):t;if(G.isArrayBuffer(t)||G.isBuffer(t)||G.isStream(t)||G.isFile(t)||G.isBlob(t)||G.isReadableStream(t))return t;if(G.isArrayBufferView(t))return t.buffer;if(G.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return ot(t,new At.classes.URLSearchParams,{visitor:function(t,e,n,i){return At.isNode&&G.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}(t,this.formSerializer).toString();if((o=G.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return ot(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),function(t,e,n){if(G.isString(t))try{return(e||JSON.parse)(t),G.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Et.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(G.isResponse(t)||G.isReadableStream(t))return t;if(t&&G.isString(t)&&(n&&!this.responseType||i)){const n=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(t){if(n){if("SyntaxError"===t.name)throw Z.from(t,Z.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:At.classes.FormData,Blob:At.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],t=>{Et.headers[t]={}});const St=Et,wt=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ct=Symbol("internals");function Rt(t){return t&&String(t).trim().toLowerCase()}function kt(t){return!1===t||null==t?t:G.isArray(t)?t.map(kt):String(t)}function Tt(t,e,n,i,r){return G.isFunction(i)?i.call(this,e,n):(r&&(e=n),G.isString(e)?G.isString(i)?-1!==e.indexOf(i):G.isRegExp(i)?i.test(e):void 0:void 0)}class Ot{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function r(t,e,n){const r=Rt(e);if(!r)throw new Error("header name must be a non-empty string");const o=G.findKey(i,r);(!o||void 0===i[o]||!0===n||void 0===n&&!1!==i[o])&&(i[o||e]=kt(t))}const o=(t,e)=>G.forEach(t,(t,n)=>r(t,n,e));if(G.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(G.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))o((t=>{const e={};let n,i,r;return t&&t.split("\n").forEach(function(t){r=t.indexOf(":"),n=t.substring(0,r).trim().toLowerCase(),i=t.substring(r+1).trim(),!n||e[n]&&wt[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e})(t),e);else if(G.isObject(t)&&G.isIterable(t)){let n,i,r={};for(const e of t){if(!G.isArray(e))throw TypeError("Object iterator must return a key-value pair");r[i=e[0]]=(n=r[i])?G.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}o(r,e)}else null!=t&&r(e,t,n);return this}get(t,e){if(t=Rt(t)){const n=G.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}(t);if(G.isFunction(e))return e.call(this,t,n);if(G.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Rt(t)){const n=G.findKey(this,t);return!(!n||void 0===this[n]||e&&!Tt(0,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function r(t){if(t=Rt(t)){const r=G.findKey(n,t);!r||e&&!Tt(0,n[r],r,e)||(delete n[r],i=!0)}}return G.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const r=e[n];t&&!Tt(0,this[r],r,t,!0)||(delete this[r],i=!0)}return i}normalize(t){const e=this,n={};return G.forEach(this,(i,r)=>{const o=G.findKey(n,r);if(o)return e[o]=kt(i),void delete e[r];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}(r):String(r).trim();s!==r&&delete e[r],e[s]=kt(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return G.forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&G.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(t=>n.set(t)),n}static accessor(t){const e=(this[Ct]=this[Ct]={accessors:{}}).accessors,n=this.prototype;function i(t){const i=Rt(t);e[i]||(!function(t,e){const n=G.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(t,n,r){return this[i].call(this,e,t,n,r)},configurable:!0})})}(n,t),e[i]=!0)}return G.isArray(t)?t.forEach(i):i(t),this}}Ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),G.reduceDescriptors(Ot.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}}),G.freezeMethods(Ot);const Lt=Ot;function Dt(t,e){const n=this||St,i=e||n,r=Lt.from(i.headers);let o=i.data;return G.forEach(t,function(t){o=t.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function _t(t){return!(!t||!t.__CANCEL__)}function Nt(t,e,n){Z.call(this,null==t?"canceled":t,Z.ERR_CANCELED,e,n),this.name="CanceledError"}G.inherits(Nt,Z,{__CANCEL__:!0});const Pt=Nt;function Ft(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new Z("Request failed with status code "+n.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const Bt=function(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=i[s];r||(r=l),n[o]=a,i[o]=l;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),l-r<e)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const It=function(t,e){let n,i,r=0,o=1e3/e;const s=(e,o=Date.now())=>{r=o,n=null,i&&(clearTimeout(i),i=null),t(...e)};return[(...t)=>{const e=Date.now(),a=e-r;a>=o?s(t,e):(n=t,i||(i=setTimeout(()=>{i=null,s(n)},o-a)))},()=>n&&s(n)]},Mt=(t,e,n=3)=>{let i=0;const r=Bt(50,250);return It(n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-i,l=r(a);i=o;t({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:n,lengthComputable:null!=s,[e?"download":"upload"]:!0})},n)},jt=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},Ut=t=>(...e)=>G.asap(()=>t(...e)),Wt=At.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,At.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(At.origin),At.navigator&&/(msie|trident)/i.test(At.navigator.userAgent)):()=>!0,qt=At.hasStandardBrowserEnv?{write(t,e,n,i,r,o,s){if("undefined"==typeof document)return;const a=[`${t}=${encodeURIComponent(e)}`];G.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),G.isString(i)&&a.push(`path=${i}`),G.isString(r)&&a.push(`domain=${r}`),!0===o&&a.push("secure"),G.isString(s)&&a.push(`SameSite=${s}`),document.cookie=a.join("; ")},read(t){if("undefined"==typeof document)return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function zt(t,e,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(i||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Vt=t=>t instanceof Lt?{...t}:t;function Ht(t,e){e=e||{};const n={};function i(t,e,n,i){return G.isPlainObject(t)&&G.isPlainObject(e)?G.merge.call({caseless:i},t,e):G.isPlainObject(e)?G.merge({},e):G.isArray(e)?e.slice():e}function r(t,e,n,r){return G.isUndefined(e)?G.isUndefined(t)?void 0:i(void 0,t,0,r):i(t,e,0,r)}function o(t,e){if(!G.isUndefined(e))return i(void 0,e)}function s(t,e){return G.isUndefined(e)?G.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function a(n,r,o){return o in e?i(n,r):o in t?i(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e,n)=>r(Vt(t),Vt(e),0,!0)};return G.forEach(Object.keys({...t,...e}),function(i){const o=l[i]||r,s=o(t[i],e[i],i);G.isUndefined(s)&&o!==a||(n[i]=s)}),n}const Jt=t=>{const e=Ht({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:o,headers:s,auth:a}=e;if(e.headers=s=Lt.from(s),e.url=dt(zt(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),G.isFormData(n))if(At.hasStandardBrowserEnv||At.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(G.isFunction(n.getHeaders)){const t=n.getHeaders(),e=["content-type","content-length"];Object.entries(t).forEach(([t,n])=>{e.includes(t.toLowerCase())&&s.set(t,n)})}if(At.hasStandardBrowserEnv&&(i&&G.isFunction(i)&&(i=i(e)),i||!1!==i&&Wt(e.url))){const t=r&&o&&qt.read(o);t&&s.set(r,t)}return e},Kt="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise(function(e,n){const i=Jt(t);let r=i.data;const o=Lt.from(i.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=i;function m(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(s),i.signal&&i.signal.removeEventListener("abort",s)}let p=new XMLHttpRequest;function g(){if(!p)return;const i=Lt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Ft(function(t){e(t),m()},function(t){n(t),m()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:t,request:p}),p=null}p.open(i.method.toUpperCase(),i.url,!0),p.timeout=i.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new Z("Request aborted",Z.ECONNABORTED,t,p)),p=null)},p.onerror=function(e){const i=e&&e.message?e.message:"Network Error",r=new Z(i,Z.ERR_NETWORK,t,p);r.event=e||null,n(r),p=null},p.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||ft;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new Z(e,r.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,t,p)),p=null},void 0===r&&o.setContentType(null),"setRequestHeader"in p&&G.forEach(o.toJSON(),function(t,e){p.setRequestHeader(e,t)}),G.isUndefined(i.withCredentials)||(p.withCredentials=!!i.withCredentials),d&&"json"!==d&&(p.responseType=i.responseType),f&&([l,u]=Mt(f,!0),p.addEventListener("progress",l)),h&&p.upload&&([a,c]=Mt(h),p.upload.addEventListener("progress",a),p.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(s=e=>{p&&(n(!e||e.type?new Pt(null,t,p):e),p.abort(),p=null)},i.cancelToken&&i.cancelToken.subscribe(s),i.signal&&(i.signal.aborted?s():i.signal.addEventListener("abort",s)));const b=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);b&&-1===At.protocols.indexOf(b)?n(new Z("Unsupported protocol "+b+":",Z.ERR_BAD_REQUEST,t)):p.send(r||null)})},$t=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const r=function(t){if(!n){n=!0,s();const e=t instanceof Error?t:this.reason;i.abort(e instanceof Z?e:new Pt(e instanceof Error?e.message:e))}};let o=e&&setTimeout(()=>{o=null,r(new Z(`timeout ${e} of ms exceeded`,Z.ETIMEDOUT))},e);const s=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(r):t.removeEventListener("abort",r)}),t=null)};t.forEach(t=>t.addEventListener("abort",r));const{signal:a}=i;return a.unsubscribe=()=>G.asap(s),a}},Gt=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let i,r=0;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Xt=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Yt=(t,e,n,i)=>{const r=async function*(t,e){for await(const n of Xt(t))yield*Gt(n,e)}(t,e);let o,s=0,a=t=>{o||(o=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await r.next();if(e)return a(),void t.close();let o=i.byteLength;if(n){let t=s+=o;n(t)}t.enqueue(new Uint8Array(i))}catch(t){throw a(t),t}},cancel:t=>(a(t),r.return())},{highWaterMark:2})},{isFunction:Qt}=G,Zt=(({Request:t,Response:e})=>({Request:t,Response:e}))(G.global),{ReadableStream:te,TextEncoder:ee}=G.global,ne=(t,...e)=>{try{return!!t(...e)}catch(t){return!1}},ie=t=>{t=G.merge.call({skipUndefined:!0},Zt,t);const{fetch:e,Request:n,Response:i}=t,r=e?Qt(e):"function"==typeof fetch,o=Qt(n),s=Qt(i);if(!r)return!1;const a=r&&Qt(te),l=r&&("function"==typeof ee?(c=new ee,t=>c.encode(t)):async t=>new Uint8Array(await new n(t).arrayBuffer()));var c;const u=o&&a&&ne(()=>{let t=!1;const e=new n(At.origin,{body:new te,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),d=s&&a&&ne(()=>G.isReadableStream(new i("").body)),h={stream:d&&(t=>t.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!h[t]&&(h[t]=(e,n)=>{let i=e&&e[t];if(i)return i.call(e);throw new Z(`Response type '${t}' is not supported`,Z.ERR_NOT_SUPPORT,n)})});const f=async(t,e)=>{const i=G.toFiniteNumber(t.getContentLength());return null==i?(async t=>{if(null==t)return 0;if(G.isBlob(t))return t.size;if(G.isSpecCompliantForm(t)){const e=new n(At.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return G.isArrayBufferView(t)||G.isArrayBuffer(t)?t.byteLength:(G.isURLSearchParams(t)&&(t+=""),G.isString(t)?(await l(t)).byteLength:void 0)})(e):i};return async t=>{let{url:r,method:s,data:a,signal:l,cancelToken:c,timeout:m,onDownloadProgress:p,onUploadProgress:g,responseType:b,headers:v,withCredentials:y="same-origin",fetchOptions:A}=Jt(t),x=e||fetch;b=b?(b+"").toLowerCase():"text";let E=$t([l,c&&c.toAbortSignal()],m),S=null;const w=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let C;try{if(g&&u&&"get"!==s&&"head"!==s&&0!==(C=await f(v,a))){let t,e=new n(r,{method:"POST",body:a,duplex:"half"});if(G.isFormData(a)&&(t=e.headers.get("content-type"))&&v.setContentType(t),e.body){const[t,n]=jt(C,Mt(Ut(g)));a=Yt(e.body,65536,t,n)}}G.isString(y)||(y=y?"include":"omit");const e=o&&"credentials"in n.prototype,l={...A,signal:E,method:s.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:e?y:void 0};S=o&&new n(r,l);let c=await(o?x(S,A):x(r,l));const m=d&&("stream"===b||"response"===b);if(d&&(p||m&&w)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=c[e]});const e=G.toFiniteNumber(c.headers.get("content-length")),[n,r]=p&&jt(e,Mt(Ut(p),!0))||[];c=new i(Yt(c.body,65536,n,()=>{r&&r(),w&&w()}),t)}b=b||"text";let R=await h[G.findKey(h,b)||"text"](c,t);return!m&&w&&w(),await new Promise((e,n)=>{Ft(e,n,{data:R,headers:Lt.from(c.headers),status:c.status,statusText:c.statusText,config:t,request:S})})}catch(e){if(w&&w(),e&&"TypeError"===e.name&&/Load failed|fetch/i.test(e.message))throw Object.assign(new Z("Network Error",Z.ERR_NETWORK,t,S),{cause:e.cause||e});throw Z.from(e,e&&e.code,t,S)}}},re=new Map,oe=t=>{let e=t&&t.env||{};const{fetch:n,Request:i,Response:r}=e,o=[i,r,n];let s,a,l=o.length,c=re;for(;l--;)s=o[l],a=c.get(s),void 0===a&&c.set(s,a=l?new Map:ie(e)),c=a;return a},se=(oe(),{http:null,xhr:Kt,fetch:{get:oe}});G.forEach(se,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}});const ae=t=>`- ${t}`,le=t=>G.isFunction(t)||null===t||!1===t;const ce={getAdapter:function(t,e){t=G.isArray(t)?t:[t];const{length:n}=t;let i,r;const o={};for(let s=0;s<n;s++){let n;if(i=t[s],r=i,!le(i)&&(r=se[(n=String(i)).toLowerCase()],void 0===r))throw new Z(`Unknown adapter '${n}'`);if(r&&(G.isFunction(r)||(r=r.get(e))))break;o[n||"#"+s]=r}if(!r){const t=Object.entries(o).map(([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build"));let e=n?t.length>1?"since :\n"+t.map(ae).join("\n"):" "+ae(t[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+e,"ERR_NOT_SUPPORT")}return r},adapters:se};function ue(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pt(null,t)}function de(t){ue(t),t.headers=Lt.from(t.headers),t.data=Dt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return ce.getAdapter(t.adapter||St.adapter,t)(t).then(function(e){return ue(t),e.data=Dt.call(t,t.transformResponse,e),e.headers=Lt.from(e.headers),e},function(e){return _t(e)||(ue(t),e&&e.response&&(e.response.data=Dt.call(t,t.transformResponse,e.response),e.response.headers=Lt.from(e.response.headers))),Promise.reject(e)})}const he="1.13.2",fe={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{fe[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const me={};fe.transitional=function(t,e,n){function i(t,e){return"[Axios v"+he+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,r,o)=>{if(!1===t)throw new Z(i(r," has been removed"+(e?" in "+e:"")),Z.ERR_DEPRECATED);return e&&!me[r]&&(me[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,o)}},fe.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};const pe={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],s=e[o];if(s){const e=t[o],n=void 0===e||s(e,o,t);if(!0!==n)throw new Z("option "+o+" must be "+n,Z.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Z("Unknown option "+o,Z.ERR_BAD_OPTION)}},validators:fe},ge=pe.validators;class be{constructor(t){this.defaults=t||{},this.interceptors={request:new ht,response:new ht}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const n=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?n&&!String(t.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+n):t.stack=n}catch(t){}}throw t}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Ht(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:r}=e;void 0!==n&&pe.assertOptions(n,{silentJSONParsing:ge.transitional(ge.boolean),forcedJSONParsing:ge.transitional(ge.boolean),clarifyTimeoutError:ge.transitional(ge.boolean)},!1),null!=i&&(G.isFunction(i)?e.paramsSerializer={serialize:i}:pe.assertOptions(i,{encode:ge.function,serialize:ge.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),pe.assertOptions(e,{baseUrl:ge.spelling("baseURL"),withXsrfToken:ge.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=r&&G.merge(r.common,r[e.method]);r&&G.forEach(["delete","get","head","post","put","patch","common"],t=>{delete r[t]}),e.headers=Lt.concat(o,r);const s=[];let a=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))});const l=[];let c;this.interceptors.response.forEach(function(t){l.push(t.fulfilled,t.rejected)});let u,d=0;if(!a){const t=[de.bind(this),void 0];for(t.unshift(...s),t.push(...l),u=t.length,c=Promise.resolve(e);d<u;)c=c.then(t[d++],t[d++]);return c}u=s.length;let h=e;for(;d<u;){const t=s[d++],e=s[d++];try{h=t(h)}catch(t){e.call(this,t);break}}try{c=de.call(this,h)}catch(t){return Promise.reject(t)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(t){return dt(zt((t=Ht(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}G.forEach(["delete","get","head","options"],function(t){be.prototype[t]=function(e,n){return this.request(Ht(n||{},{method:t,url:e,data:(n||{}).data}))}}),G.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,r){return this.request(Ht(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}be.prototype[t]=e(),be.prototype[t+"Form"]=e(!0)});const ve=be;class ye{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const i=new Promise(t=>{n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,i,r){n.reason||(n.reason=new Pt(t,i,r),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new ye(function(e){t=e}),cancel:t}}}const Ae=ye;const xe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(xe).forEach(([t,e])=>{xe[e]=t});const Ee=xe;const Se=function t(e){const n=new ve(e),i=r(ve.prototype.request,n);return G.extend(i,ve.prototype,n,{allOwnKeys:!0}),G.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(Ht(e,n))},i}(St);Se.Axios=ve,Se.CanceledError=Pt,Se.CancelToken=Ae,Se.isCancel=_t,Se.VERSION=he,Se.toFormData=ot,Se.AxiosError=Z,Se.Cancel=Se.CanceledError,Se.all=function(t){return Promise.all(t)},Se.spread=function(t){return function(e){return t.apply(null,e)}},Se.isAxiosError=function(t){return G.isObject(t)&&!0===t.isAxiosError},Se.mergeConfig=Ht,Se.AxiosHeaders=Lt,Se.formToJSON=t=>xt(G.isHTMLForm(t)?new FormData(t):t),Se.getAdapter=ce.getAdapter,Se.HttpStatusCode=Ee,Se.default=Se;const we=Se},6769:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(964),a=(i=s)&&i.__esModule?i:{default:i},l=n(5244);var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.processing=!1,this.successful=!1,this.withData(e).withOptions(n).withErrors({})}return o(t,[{key:"withData",value:function(t){for(var e in(0,l.isArray)(t)&&(t=t.reduce(function(t,e){return t[e]="",t},{})),this.setInitialValues(t),this.errors=new a.default,this.processing=!1,this.successful=!1,t)(0,l.guardAgainstReservedFieldName)(e),this[e]=t[e];return this}},{key:"withErrors",value:function(t){return this.errors=new a.default(t),this}},{key:"withOptions",value:function(t){this.__options={resetOnSuccess:!0},t.hasOwnProperty("resetOnSuccess")&&(this.__options.resetOnSuccess=t.resetOnSuccess),t.hasOwnProperty("onSuccess")&&(this.onSuccess=t.onSuccess),t.hasOwnProperty("onFail")&&(this.onFail=t.onFail);var e="undefined"!=typeof window&&window.axios;if(this.__http=t.http||e||n(6784),!this.__http)throw new Error("No http library provided. Either pass an http option, or install axios.");return this}},{key:"data",value:function(){var t={};for(var e in this.initial)t[e]=this[e];return t}},{key:"only",value:function(t){var e=this;return t.reduce(function(t,n){return t[n]=e[n],t},{})}},{key:"reset",value:function(){(0,l.merge)(this,this.initial),this.errors.clear()}},{key:"setInitialValues",value:function(t){this.initial={},(0,l.merge)(this.initial,t)}},{key:"populate",value:function(t){var e=this;return Object.keys(t).forEach(function(n){(0,l.guardAgainstReservedFieldName)(n),e.hasOwnProperty(n)&&(0,l.merge)(e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,t[n]))}),this}},{key:"clear",value:function(){for(var t in this.initial)this[t]="";this.errors.clear()}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"delete",value:function(t){return this.submit("delete",t)}},{key:"submit",value:function(t,e){var n=this;return this.__validateRequestType(t),this.errors.clear(),this.processing=!0,this.successful=!1,new Promise(function(i,r){n.__http[t](e,n.hasFiles()?(0,l.objectToFormData)(n.data()):n.data()).then(function(t){n.processing=!1,n.onSuccess(t.data),i(t.data)}).catch(function(t){n.processing=!1,n.onFail(t),r(t)})})}},{key:"hasFiles",value:function(){for(var t in this.initial)if(this.hasFilesDeep(this[t]))return!0;return!1}},{key:"hasFilesDeep",value:function(t){if(null===t)return!1;if("object"===(void 0===t?"undefined":r(t)))for(var e in t)if(t.hasOwnProperty(e)&&this.hasFilesDeep(t[e]))return!0;if(Array.isArray(t))for(var n in t)if(t.hasOwnProperty(n))return this.hasFilesDeep(t[n]);return(0,l.isFile)(t)}},{key:"onSuccess",value:function(t){this.successful=!0,this.__options.resetOnSuccess&&this.reset()}},{key:"onFail",value:function(t){this.successful=!1,t.response&&t.response.data.errors&&this.errors.record(t.response.data.errors)}},{key:"hasError",value:function(t){return this.errors.has(t)}},{key:"getError",value:function(t){return this.errors.first(t)}},{key:"getErrors",value:function(t){return this.errors.get(t)}},{key:"__validateRequestType",value:function(t){var e=["get","delete","head","post","put","patch"];if(-1===e.indexOf(t))throw new Error("`"+t+"` is not a valid request type, must be one of: `"+e.join("`, `")+"`.")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(new t).withData(e)}}]),t}();e.default=c},6784:(t,e,n)=>{t.exports=n(8894)},6806:t=>{t.exports={version:"0.30.2"}},7041:t=>{"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},7192:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t||"undefined"===t||0===t.length)return e.append(n,t);for(var i in t)t.hasOwnProperty(i)&&o(e,r(n,i),t[i]);return e}function r(t,e){return t?t+"["+e+"]":e}function o(t,e,r){return r instanceof Date?t.append(e,r.toISOString()):r instanceof File?t.append(e,r,r.name):"boolean"==typeof r?t.append(e,r?"1":"0"):null===r?t.append(e,""):"object"!==(void 0===r?"undefined":n(r))?t.append(e,r):void i(r,t,e)}e.objectToFormData=i},7197:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},7237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},7255:(t,e,n)=>{var i=n(7422);t.exports=function(t){return function(e){return i(e,t)}}},7309:(t,e,n)=>{var i=n(2006)(n(4713));t.exports=i},7420:(t,e,n)=>{var i=n(7422),r=n(3170),o=n(1769);t.exports=function(t,e,n){for(var s=-1,a=e.length,l={};++s<a;){var c=e[s],u=i(t,c);n(u,c)&&r(l,o(c,t),u)}return l}},7422:(t,e,n)=>{var i=n(1769),r=n(7797);t.exports=function(t,e){for(var n=0,o=(e=i(e,t)).length;null!=t&&n<o;)t=t[r(e[n++])];return n&&n==o?t:void 0}},7686:t=>{"use strict";t.exports=FormData},7797:(t,e,n)=>{var i=n(4394);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},7978:(t,e,n)=>{var i=n(270),r=n(8156),o=n(631),s=n(8586),a=n(756),l=n(7197),c=n(7797);t.exports=function(t,e){return s(t)&&a(e)?l(c(t),e):function(n){var s=r(n,t);return void 0===s&&s===e?o(n,t):i(e,s,3)}}},7980:(t,e,n)=>{"use strict";var i=n(3109);t.exports=function(t){return i.isObject(t)&&!0===t.isAxiosError}},7984:(t,e,n)=>{"use strict";n.d(e,{A:()=>m});var i=n(5947),r=n(4383),o=n.n(r),s=n(8156),a=n.n(s),l=n(2404),c=n.n(l);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function f(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const m={name:"nzFieldObservationForm",props:{action:{type:String,required:!0},method:{type:String,default:"POST"},redirectUrl:String,cancelUrl:String,submitMore:Boolean,shouldConfirmSubmit:Boolean,confirmSubmitMessage:{type:String,default:function(){return this.trans("You are about to submit")}},shouldAskReason:Boolean,shouldConfirmCancel:Boolean,submitOnlyDirty:Boolean,submitOnlyDirtyMessage:{type:String,default:function(){return this.trans("There are no changes, the data will not be saved.")}}},data:function(){return{form:this.newForm(),keepAfterSubmit:[],submittingWithRedirect:!1,submittingWithoutRedirect:!1,confirmingSubmit:!1,confirmingCancel:!1,locale:window.App.locale}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{newForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.Ay(t,{resetOnSuccess:!1})},registerKeyListener:function(t){var e=13===(t.which||t.keyCode);t.ctrlKey&&t.shiftKey&&e?this.submitMore&&this.submitWithoutRedirect():t.ctrlKey&&e&&this.submitWithRedirect()},confirmSubmit:function(t){var e=this;if(!this.confirmingSubmit){this.confirmingSubmit=!0;var n={message:this.confirmSubmitMessage,confirmText:this.trans("buttons.save"),cancelText:this.trans("buttons.cancel"),onConfirm:t,onCancel:function(){e.confirmingSubmit=!1}};return this.shouldAskReason?this.promptForReason(n):this.$buefy.dialog.confirm(n)}},promptForReason:function(t){var e=this,n=this.$buefy.dialog.prompt(h(h({},t),{},{inputAttrs:{placeholder:this.trans("Reason"),required:!0,maxlength:255}}));return n.$nextTick(function(){n.$refs.input.addEventListener("invalid",function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity(e.trans("This field is required and can contain max 255 chars."))}),n.$refs.input.addEventListener("input",function(t){n.validationMessage=null})}),n},notifyNoChanges:function(){this.$buefy.toast.open({message:this.submitOnlyDirtyMessage,type:"is-info"})},notifyNoChangesAndRedirect:function(){var t=this;this.notifyNoChanges(),setTimeout(function(){t.redirectUrl&&(window.location.href=t.redirectUrl)},500)},submitWithRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChangesAndRedirect():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithRedirect):void this.performSubmitWithRedirect()},performSubmitWithRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithRedirect:function(){var t=this;this.form.processing=!0,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"}),setTimeout(function(){t.form.processing=!1,t.submittingWithRedirect=!1,t.hookAfterSubmitWithRedirect(),t.redirectUrl&&(window.location.href=t.redirectUrl)},500)},hookAfterSubmitWithRedirect:function(){},submitWithoutRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChanges():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithoutRedirect):void this.performSubmitWithoutRedirect()},performSubmitWithoutRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithoutRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithoutRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithoutRedirect:function(){this.submittingWithoutRedirect=!1,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"});var t=o()(this.form.data(),this.keepAfterSubmit);this.form.reset(),this.form.populate(t),this.hookAfterSubmitWithoutRedirect()},hookAfterSubmitWithoutRedirect:function(){},onFailedSubmit:function(t){this.submittingWithRedirect=!1,this.submittingWithoutRedirect=!1,this.$buefy.toast.open({duration:2500,message:a()(t,"response.data.message",t.message),type:"is-danger"})},isDirty:function(){return!c()(this.form.data(),this.form.initial)},confirmCancel:function(){var t=this;this.confirmingCancel||(this.confirmingCancel=!0,this.$buefy.dialog.confirm({message:this.trans("If you leave this page changes will not be saved."),onConfirm:function(){t.confirmingCancel=!1,window.location.href=t.cancelUrl},onCancel:function(){t.confirmingCancel=!1},cancelText:this.trans("buttons.stay_on_page"),confirmText:this.trans("buttons.leave_page")}))},onCancel:function(t){this.shouldConfirmCancel&&this.isDirty()&&(t.preventDefault(),this.confirmCancel())}}}},8077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8156:(t,e,n)=>{var i=n(7422);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},8221:(t,e,n)=>{var i=n(3805),r=n(124),o=n(9374),s=Math.max,a=Math.min;t.exports=function(t,e,n){var l,c,u,d,h,f,m=0,p=!1,g=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=l,i=c;return l=c=void 0,m=e,d=t.apply(i,n)}function y(t){var n=t-f;return void 0===f||n>=e||n<0||g&&t-m>=u}function A(){var t=r();if(y(t))return x(t);h=setTimeout(A,function(t){var n=e-(t-f);return g?a(n,u-(t-m)):n}(t))}function x(t){return h=void 0,b&&l?v(t):(l=c=void 0,d)}function E(){var t=r(),n=y(t);if(l=arguments,c=this,f=t,n){if(void 0===h)return function(t){return m=t,h=setTimeout(A,e),p?v(t):d}(f);if(g)return clearTimeout(h),h=setTimeout(A,e),v(f)}return void 0===h&&(h=setTimeout(A,e)),d}return e=o(e)||0,i(n)&&(p=!!n.leading,u=(g="maxWait"in n)?s(o(n.maxWait)||0,e):u,b="trailing"in n?!!n.trailing:b),E.cancel=function(){void 0!==h&&clearTimeout(h),m=0,l=f=c=h=void 0},E.flush=function(){return void 0===h?d:x(r())},E}},8295:(t,e,n)=>{"use strict";var i=n(8287).hp,r=n(3109),o=n(1996),s=n(777);function a(t){return r.isPlainObject(t)||r.isArray(t)}function l(t){return r.endsWith(t,"[]")?t.slice(0,-2):t}function c(t,e,n){return t?t.concat(e).map(function(t,e){return t=l(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}var u=r.toFlatObject(r,{},null,function(t){return/^is[A-Z]/.test(t)});t.exports=function(t,e,n){if(!r.isObject(t))throw new TypeError("target must be an object");e=e||new(s||FormData);var d,h=(n=r.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!r.isUndefined(e[t])})).metaTokens,f=n.visitor||v,m=n.dots,p=n.indexes,g=(n.Blob||"undefined"!=typeof Blob&&Blob)&&((d=e)&&r.isFunction(d.append)&&"FormData"===d[Symbol.toStringTag]&&d[Symbol.iterator]);if(!r.isFunction(f))throw new TypeError("visitor must be a function");function b(t){if(null===t)return"";if(r.isDate(t))return t.toISOString();if(!g&&r.isBlob(t))throw new o("Blob is not supported. Use a Buffer instead.");return r.isArrayBuffer(t)||r.isTypedArray(t)?g&&"function"==typeof Blob?new Blob([t]):i.from(t):t}function v(t,n,i){var o=t;if(t&&!i&&"object"==typeof t)if(r.endsWith(n,"{}"))n=h?n:n.slice(0,-2),t=JSON.stringify(t);else if(r.isArray(t)&&function(t){return r.isArray(t)&&!t.some(a)}(t)||r.isFileList(t)||r.endsWith(n,"[]")&&(o=r.toArray(t)))return n=l(n),o.forEach(function(t,i){!r.isUndefined(t)&&null!==t&&e.append(!0===p?c([n],i,m):null===p?n:n+"[]",b(t))}),!1;return!!a(t)||(e.append(c(i,n,m),b(t)),!1)}var y=[],A=Object.assign(u,{defaultVisitor:v,convertValue:b,isVisitable:a});if(!r.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!r.isUndefined(n)){if(-1!==y.indexOf(n))throw Error("Circular reference detected in "+i.join("."));y.push(n),r.forEach(n,function(n,o){!0===(!(r.isUndefined(n)||null===n)&&f.call(e,n,r.isString(o)?o.trim():o,i,A))&&t(n,i?i.concat(o):[o])}),y.pop()}}(t),e}},8586:(t,e,n)=>{var i=n(6449),r=n(4394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(s.test(t)||!o.test(t)||null!=e&&t in Object(e))}},8811:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},8816:(t,e,n)=>{var i=n(5970),r=n(6757),o=n(2865);t.exports=function(t){return o(r(t,void 0,i),t+"")}},8894:(t,e,n)=>{"use strict";var i=n(3109),r=n(1683),o=n(2900),s=n(5204),a=n(4135),l=n(5021);var c=function t(e){var n=new o(e),a=r(o.prototype.request,n);return i.extend(a,o.prototype,n),i.extend(a,n),a.create=function(n){return t(s(e,n))},a}(a);c.Axios=o,c.CanceledError=n(6392),c.CancelToken=n(2684),c.isCancel=n(6189),c.VERSION=n(6806).version,c.toFormData=n(8295),c.AxiosError=n(1996),c.Cancel=c.CanceledError,c.all=function(t){return Promise.all(t)},c.spread=n(8811),c.isAxiosError=n(7980),c.formToJSON=function(t){return l(i.isHTMLForm(t)?new FormData(t):t)},t.exports=c,t.exports.default=c},8986:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>x});var i=n(5947),r=n(5950),o=n.n(r),s=n(7309),a=n.n(s),l=n(6170),c=n.n(l),u=n(8156),d=n.n(u),h=n(7984),f=n(6013),m=n(1170);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(){var t={};return o()(window.App.supportedLocales).forEach(function(e){t[e]=null}),t}const A={name:"nzTaxonForm",mixins:[h.A],components:{NzWysiwyg:f.A,NzTaxonAutocomplete:m.A},props:{taxon:{type:Object,default:function(){return{name:null,parent_id:null,rank:"species",rank_level:10,author:null,fe_id:null,fe_old_id:null,conservation_legislations:[],conservation_documents:[],red_lists:[],stages:[],restricted:!1,allochthonous:!1,invasive:!1,uses_atlas_codes:!1,synonyms:[]}}},ranks:Array,conservationLegislations:Array,conservationDocuments:Array,redListCategories:Array,redLists:{type:Array,default:function(){return[]}},stages:Array,nativeNames:{type:Object,default:function(){return y()}},descriptions:{type:Object,default:function(){return y()}},removedSynonyms:{type:Array,default:function(){return[]}},taxonomy:Boolean},data:function(){return{form:this.newForm(),parentName:d()(this.taxon,"parent.name"),selectedParent:null,chosenRedList:null,synonym_name:null,synonym_author:null,synonym_error:null,synonyms:this.taxon.synonyms}},computed:{rankOptions:function(){var t=this;return this.selectedParent?this.ranks.filter(function(e){return e.level<t.selectedParent.rank_level}):this.ranks},availableRedLists:function(){var t=this.form.red_lists_data;return this.redLists.filter(function(e){return!a()(t,function(t){return e.id==t.red_list_id})})},supportedLocales:function(){return window.App.supportedLocales},sanitizedName:{get:function(){return this.form.name},set:function(t){this.form.name=t.replace(/\s+/g," ").trim()}}},watch:{selectedParent:function(t){this.shouldResetRank(t)&&(this.form.rank=null)},"form.name":{handler:function(t){this.sanitizedName=t},immediate:!0}},methods:{newForm:function(){return new i.Ay(b(b({},this.taxon),{},{stages_ids:this.taxon.stages.map(function(t){return t.id}),conservation_legislations_ids:this.taxon.conservation_legislations.map(function(t){return t.id}),conservation_documents_ids:this.taxon.conservation_documents.map(function(t){return t.id}),red_lists_data:this.taxon.red_lists.map(function(t){return{red_list_id:t.id,category:t.pivot.category}}),native_name:this.nativeNames,description:this.descriptions,reason:null,uses_atlas_codes:this.taxon.uses_atlas_codes,synonyms:this.taxon.synonyms,removed_synonyms:this.removedSynonyms}),{resetOnSuccess:!1})},addRedList:function(){this.chosenRedList&&(this.form.red_lists_data.push({red_list_id:this.chosenRedList.id,category:c()(this.redListCategories)}),this.chosenRedList=null)},removeRedList:function(t){this.form.red_lists_data.splice(t,1)},getRedListName:function(t){return a()(this.redLists,{id:t}).name},onTaxonSelect:function(t){this.selectedParent=t,this.form.parent_id=t?t.id:null,t&&t.stages.length&&(this.form.stages_ids=t.stages.map(function(t){return t.id}))},shouldResetRank:function(t){return t&&this.getRankLevel(this.form.rank)>=t.rank_level},getRankLevel:function(t){return d()(a()(this.ranks,{value:t}),"level")},focusOnTranslation:function(t,e){var n=this,i=o()(this.supportedLocales),r="".concat(e,"-").concat(i[t]);setTimeout(function(){c()(n.$refs[r]).focus()},500)},addSynonym:function(){var t=this,e=!0;this.synonym_name?(this.form.synonyms.forEach(function(n,i){t.synonym_name===n.name&&(e=!1,t.synonym_error="labels.observations.duplicate_value",t.$forceUpdate())}),e&&(this.form.synonyms.push({name:this.synonym_name,author:this.synonym_author}),this.synonym_name=null,this.synonym_author=null,this.synonym_error=null)):(this.synonym_error="labels.observations.field_is_required",this.$forceUpdate())},removeSynonym:function(t){this.removedSynonyms.push(this.synonyms[t]),this.$delete(this.synonyms,t)}},loadSynonyms:function(){if(!this.taxon.synonyms)return[];var t=[];return this.taxon.synonyms.forEach(function(e){return t.push(e.name)}),t}};const x=(0,n(4486).A)(A,function(){var t=this,e=t._self._c;return e("form",{attrs:{action:t.action,method:"POST"},on:{submit:function(e){return e.preventDefault(),t.submitWithRedirect.apply(null,arguments)}}},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4"},[e("nz-taxon-autocomplete",{attrs:{label:t.trans("labels.taxa.parent"),error:t.form.errors.has("parent_id"),message:t.form.errors.first("parent_id"),taxon:t.taxon.parent||null,except:t.taxon.id,placeholder:t.trans("labels.taxa.search_for_taxon"),autofocus:"",disabled:t.taxonomy},on:{select:t.onTaxonSelect},model:{value:t.parentName,callback:function(e){t.parentName=e},expression:"parentName"}})],1),t._v(" "),e("div",{staticClass:"column is-5"},[e("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.taxa.name"),type:t.form.errors.has("name")?"is-danger":"",message:t.form.errors.has("name")?t.form.errors.first("name"):""}},[e("b-input",{attrs:{disabled:t.taxonomy},model:{value:t.sanitizedName,callback:function(e){t.sanitizedName="string"==typeof e?e.trim():e},expression:"sanitizedName"}})],1)],1),t._v(" "),e("div",{staticClass:"column is-3"},[e("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.taxa.rank"),type:t.form.errors.has("rank")?"is-danger":"",message:t.form.errors.has("rank")?t.form.errors.first("rank"):""}},[e("b-select",{attrs:{expanded:"",disabled:t.taxonomy},model:{value:t.form.rank,callback:function(e){t.$set(t.form,"rank",e)},expression:"form.rank"}},t._l(t.rankOptions,function(n,i){return e("option",{key:i,domProps:{value:n.value,textContent:t._s(n.label)}})}),0)],1)],1)]),t._v(" "),e("b-field",{attrs:{label:t.trans("labels.taxa.author"),type:t.form.errors.has("author")?"is-danger":"",message:t.form.errors.has("author")?t.form.errors.first("author"):""}},[e("b-input",{attrs:{disabled:t.taxonomy},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),e("hr"),t._v(" "),e("b-field",{attrs:{label:t.trans("labels.taxa.native_name")}},[e("b-tabs",{staticClass:"block",attrs:{size:"is-small"},on:{change:function(e){return t.focusOnTranslation(e,"native_name")}}},t._l(t.supportedLocales,function(n,i){return e("b-tab-item",{key:i,attrs:{label:t.trans("languages."+n.name)}},[e("b-input",{ref:"native_name-".concat(i),refInFor:!0,attrs:{disabled:t.taxonomy},model:{value:t.form.native_name[i],callback:function(e){t.$set(t.form.native_name,i,e)},expression:"form.native_name[locale]"}})],1)}),1)],1),t._v(" "),e("b-field",{attrs:{label:t.trans("labels.taxa.description")}},[e("b-tabs",{staticClass:"block",attrs:{size:"is-small"},on:{change:function(e){return t.focusOnTranslation(e,"description")}}},t._l(t.supportedLocales,function(n,i){return e("b-tab-item",{key:i,attrs:{label:t.trans("languages."+n.name)}},[e("nz-wysiwyg",{ref:"description-".concat(i),refInFor:!0,model:{value:t.form.description[i],callback:function(e){t.$set(t.form.description,i,e)},expression:"form.description[locale]"}})],1)}),1)],1),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-half"},[e("b-field",{attrs:{label:t.trans("labels.taxa.fe_old_id"),type:t.form.errors.has("fe_old_id")?"is-danger":"",message:t.form.errors.has("fe_old_id")?t.form.errors.first("fe_old_id"):""}},[e("b-input",{attrs:{disabled:t.taxonomy},model:{value:t.form.fe_old_id,callback:function(e){t.$set(t.form,"fe_old_id",e)},expression:"form.fe_old_id"}})],1)],1),t._v(" "),e("div",{staticClass:"column is-half"},[e("b-field",{attrs:{label:t.trans("labels.taxa.fe_id"),type:t.form.errors.has("fe_id")?"is-danger":"",message:t.form.errors.has("fe_id")?t.form.errors.first("fe_id"):""}},[e("b-input",{attrs:{disabled:t.taxonomy},model:{value:t.form.fe_id,callback:function(e){t.$set(t.form,"fe_id",e)},expression:"form.fe_id"}})],1)],1)]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("b-field",{attrs:{label:t.trans("labels.taxa.restricted")}},[e("div",{staticClass:"field"},[e("b-switch",{attrs:{disabled:t.taxonomy},model:{value:t.form.restricted,callback:function(e){t.$set(t.form,"restricted",e)},expression:"form.restricted"}},[t._v("\n            "+t._s(t.form.restricted?t.trans("Yes"):t.trans("No"))+"\n          ")])],1)])],1),t._v(" "),e("div",{staticClass:"column"},[e("b-field",{attrs:{label:t.trans("labels.taxa.allochthonous")}},[e("b-switch",{attrs:{disabled:t.taxonomy},model:{value:t.form.allochthonous,callback:function(e){t.$set(t.form,"allochthonous",e)},expression:"form.allochthonous"}},[t._v("\n          "+t._s(t.form.allochthonous?t.trans("Yes"):t.trans("No"))+"\n        ")])],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-field",{attrs:{label:t.trans("labels.taxa.invasive")}},[e("b-switch",{attrs:{disabled:t.taxonomy},model:{value:t.form.invasive,callback:function(e){t.$set(t.form,"invasive",e)},expression:"form.invasive"}},[t._v("\n          "+t._s(t.form.invasive?t.trans("Yes"):t.trans("No"))+"\n        ")])],1)],1)]),t._v(" "),t.stages.length?e("b-field",{attrs:{label:t.trans("labels.taxa.stages")}},[e("div",{staticClass:"block"},t._l(t.stages,function(n){return e("b-checkbox",{key:n.id,attrs:{"native-value":n.id,disabled:t.taxonomy},model:{value:t.form.stages_ids,callback:function(e){t.$set(t.form,"stages_ids",e)},expression:"form.stages_ids"}},[t._v("\n        "+t._s(t.trans("stages."+n.name))+"\n      ")])}),1)]):t._e(),t._v(" "),t.conservationLegislations.length?e("b-field",{attrs:{label:t.trans("labels.taxa.conservation_legislations")}},[e("div",{staticClass:"block"},[e("div",{staticClass:"columns is-multiline is-gapless"},t._l(t.conservationLegislations,function(n){return e("div",{key:n.id,staticClass:"column is-half"},[e("b-tooltip",{attrs:{label:n.description,multilined:""}},[e("b-checkbox",{attrs:{"native-value":n.id,disabled:t.taxonomy},model:{value:t.form.conservation_legislations_ids,callback:function(e){t.$set(t.form,"conservation_legislations_ids",e)},expression:"form.conservation_legislations_ids"}},[t._v("\n              "+t._s(n.name)+"\n            ")])],1)],1)}),0)])]):t._e(),t._v(" "),t.conservationDocuments.length?e("b-field",{attrs:{label:t.trans("labels.taxa.conservation_documents")}},[e("div",{staticClass:"block"},[e("div",{staticClass:"columns is-multiline is-gapless"},t._l(t.conservationDocuments,function(n){return e("div",{key:n.id,staticClass:"column is-half"},[e("b-tooltip",{attrs:{label:n.description,multilined:""}},[e("b-checkbox",{attrs:{"native-value":n.id,disabled:t.taxonomy},model:{value:t.form.conservation_documents_ids,callback:function(e){t.$set(t.form,"conservation_documents_ids",e)},expression:"form.conservation_documents_ids"}},[t._v("\n              "+t._s(n.name)+"\n            ")])],1)],1)}),0)])]):t._e(),t._v(" "),t.redLists.length?e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v(t._s(t.trans("labels.taxa.red_lists")))]),t._v(" "),t._l(t.form.red_lists_data,function(n,i){return e("b-field",{key:i,attrs:{grouped:""}},[e("div",{staticClass:"control is-expanded"},[e("span",{domProps:{textContent:t._s(t.getRedListName(n.red_list_id))}})]),t._v(" "),e("b-select",{model:{value:n.category,callback:function(e){t.$set(n,"category",e)},expression:"addedRedList.category"}},t._l(t.redListCategories,function(n){return e("option",{key:n,domProps:{value:n,textContent:t._s(n)}})}),0),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button has-text-danger",attrs:{type:"button",disabled:t.taxonomy},on:{click:function(e){return t.removeRedList(i)}}},[t._v("Ã—")])])],1)}),t._v(" "),t.availableRedLists.length?e("b-field",{attrs:{grouped:""}},[e("b-select",{attrs:{expanded:"",disabled:t.taxonomy},model:{value:t.chosenRedList,callback:function(e){t.chosenRedList=e},expression:"chosenRedList"}},t._l(t.availableRedLists,function(n){return e("option",{key:n.id,domProps:{value:n,textContent:t._s(n.name)}})}),0),t._v(" "),e("div",{staticClass:"control"},[e("button",{staticClass:"button",attrs:{type:"button",disabled:t.taxonomy},on:{click:t.addRedList}},[t._v(t._s(t.trans("labels.taxa.add_red_list")))])])],1):t._e()],2):t._e(),t._v(" "),e("b-field",{attrs:{label:t.trans("labels.taxa.atlas_codes")}},[e("b-checkbox",{attrs:{disabled:t.taxonomy},model:{value:t.form.uses_atlas_codes,callback:function(e){t.$set(t.form,"uses_atlas_codes",e)},expression:"form.uses_atlas_codes"}},[t._v("\n      "+t._s(t.trans("labels.taxa.uses_atlas_codes"))+"\n    ")])],1),t._v(" "),e("hr"),t._v(" "),e("b-field",{attrs:{label:t.trans("labels.taxa.synonyms"),type:t.form.errors.has("synonyms")?"is-danger":null,message:t.form.errors.has("synonyms")?t.form.errors.first("synonyms"):null,addons:!1}},[t._l(t.synonyms,function(n,i){return e("b-field",{key:i,attrs:{expanded:"",addons:!1}},[e("b-field",{attrs:{expanded:""}},[e("b-input",{attrs:{name:"synonyms[".concat(i,"][name]"),placeholder:t.trans("labels.taxa.synonym_name"),expanded:"",disabled:t.taxonomy},model:{value:t.form.synonyms[i].name,callback:function(e){t.$set(t.form.synonyms[i],"name",e)},expression:"form.synonyms[i].name"}}),t._v(" "),e("b-input",{attrs:{name:"synonyms[".concat(i,"][author]"),placeholder:t.trans("labels.taxa.synonym_author"),expanded:"",disabled:t.taxonomy},model:{value:t.form.synonyms[i].author,callback:function(e){t.$set(t.form.synonyms[i],"author",e)},expression:"form.synonyms[i].author"}}),t._v(" "),e("p",{staticClass:"control"},[e("button",{staticClass:"button is-danger is-outlined",attrs:{type:"button",disabled:t.taxonomy},on:{click:function(e){return t.removeSynonym(i)}}},[e("b-icon",{attrs:{icon:"times",size:"is-small"}})],1)])],1)],1)}),t._v(" "),e("b-field",{attrs:{type:t.synonym_error?"is-danger":null,message:t.synonym_error?t.trans(t.synonym_error):null}},[e("b-input",{attrs:{id:"synonym_name",maxlength:"50",placeholder:t.trans("labels.taxa.synonym_name"),expanded:"",disabled:t.taxonomy},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addSynonym.apply(null,arguments))}},model:{value:t.synonym_name,callback:function(e){t.synonym_name=e},expression:"synonym_name"}}),t._v(" "),e("b-input",{attrs:{id:"synonym_author",maxlength:"50",placeholder:t.trans("labels.taxa.synonym_author"),expanded:"",disabled:t.taxonomy},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addSynonym.apply(null,arguments))}},model:{value:t.synonym_author,callback:function(e){t.synonym_author=e},expression:"synonym_author"}}),t._v(" "),e("p",{staticClass:"control"},[e("button",{staticClass:"button is-secondary is-outlined",attrs:{type:"button",disabled:t.taxonomy},on:{click:t.addSynonym}},[t._v("\n          "+t._s(t.trans("labels.taxa.add_synonym"))+"\n        ")])])],1)],2),t._v(" "),e("hr"),t._v(" "),e("button",{staticClass:"button is-primary",class:{"is-loading":t.form.processing},attrs:{type:"submit",disabled:t.taxonomy},on:{click:t.submitWithRedirect}},[t._v("\n    "+t._s(t.trans("buttons.save"))+"\n  ")]),t._v(" "),e("a",{staticClass:"button is-text",attrs:{href:t.cancelUrl},on:{click:t.onCancel}},[t._v(t._s(t.trans("buttons.cancel")))])],1)},[],!1,null,null,null).exports},9006:(t,e,n)=>{"use strict";var i=n(3109);function r(){this.handlers=[]}r.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.clear=function(){this.handlers&&(this.handlers=[])},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},9326:(t,e,n)=>{var i=n(1769),r=n(2428),o=n(6449),s=n(361),a=n(294),l=n(7797);t.exports=function(t,e,n){for(var c=-1,u=(e=i(e,t)).length,d=!1;++c<u;){var h=l(e[c]);if(!(d=null!=t&&n(t,h)))break;t=t[h]}return d||++c!=u?d:!!(u=null==t?0:t.length)&&a(u)&&s(h,u)&&(o(t)||r(t))}},9511:(t,e,n)=>{"use strict";var i=n(3109);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},9605:(t,e,n)=>{"use strict";var i=n(3109),r=n(3106),o=n(6189),s=n(4135),a=n(6392),l=n(9907);function c(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new a}t.exports=function(t){return c(t),t.headers=t.headers||{},t.data=r.call(t,t.data,t.headers,null,t.transformRequest),l(t.headers,"Accept"),l(t.headers,"Content-Type"),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return c(t),e.data=r.call(t,e.data,e.headers,e.status,t.transformResponse),e},function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=r.call(t,e.response.data,e.response.headers,e.response.status,t.transformResponse))),Promise.reject(e)})}},9845:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}},9907:(t,e,n)=>{"use strict";var i=n(3109);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}}}]);
//# sourceMappingURL=5fff9aa1cf3f0df3.js.map