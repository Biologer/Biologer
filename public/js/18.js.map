{"version":3,"sources":["webpack:///./resources/js/components/inputs/DateInput.vue?0c44","webpack:///./resources/js/components/inputs/DateInput.vue?e061","webpack:///resources/js/components/inputs/DateInput.vue","webpack:///./resources/js/components/inputs/DateInput.vue","webpack:///./resources/js/components/forms/LiteratureObservationForm.vue?de1a","webpack:///./resources/js/mixins/PersistentForm.js","webpack:///resources/js/components/forms/LiteratureObservationForm.vue","webpack:///./resources/js/components/forms/LiteratureObservationForm.vue?eaad","webpack:///./resources/js/components/forms/LiteratureObservationForm.vue","webpack:///./node_modules/lodash/now.js","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue?6fa7","webpack:///resources/js/components/inputs/PublicationAutocomplete.vue","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue?9c07","webpack:///./resources/js/components/inputs/PublicationAutocomplete.vue","webpack:///./resources/js/expiring-storage.js","webpack:///./resources/js/components/inputs/SpatialInput.vue?1219","webpack:///./resources/js/components/inputs/SpatialInput.vue?4894","webpack:///resources/js/components/inputs/SpatialInput.vue","webpack:///./resources/js/components/inputs/SpatialInput.vue","webpack:///./resources/js/mixins/FormMixin.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?0331","webpack:///resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?b12f","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue"],"names":["name","props","label","type","String","default","year","Number","month","day","placeholders","Object","errors","computed","now","months","this","isThisYear","splice","days","isThisMonth","watch","truncateDay","methods","length","onYearInput","$emit","value","onMonthInput","onDayInput","component","_vm","_h","$createElement","_c","_self","attrs","has","first","on","_v","domProps","_l","index","_s","cacheKey","cacheLifetime","storageKey","window","location","host","pathname","getFormKey","otherPersistentKeys","saveState","data","_pick","$data","form","expiringStorage","set","restoreState","previousState","get","populate","forEach","key","undefined","$set","clearPersistedState","mixins","PersistentForm","FormMixin","components","NzDateInput","NzSpatialInput","NzPublicationAutocomplete","NzTaxonAutocomplete","submitMoreWithSameTaxon","Boolean","observation","original_date","original_locality","original_elevation","original_coordinates","original_identification","original_identification_validity","other_original_data","collecting_start_year","collecting_start_month","collecting_end_year","collecting_end_month","place_where_referenced_in_publication","publication_id","taxon_id","is_original_data","cited_publication_id","latitude","longitude","accuracy","elevation","minimum_elevation","maximum_elevation","georeferenced_by","georeferenced_date","observer","identifier","note","sex","number","project","found_on","habitat","stage_id","time","dataset","taxon","publication","cited_publication","sexes","validityOptions","Array","keepAfterSubmit","getAttributesToKeep","submittingWithoutRedirectWithSameTaxon","locale","App","taxonName","publicationCitation","citedPublication","stages","georeferencedDate","val","isValid","toDate","created","newForm","reason","resetOnSuccess","onTaxonSelect","id","onPublicationSelect","citation","onCitedPublicationSelect","onTimeInput","hookAfterSubmitWithoutRedirect","handleIsOriginalDataInput","addNewPublication","href","route","dateFormater","handleElevationFetched","submitWithoutRedirectWithSameTaxon","processing","submitOnlyDirty","shouldConfirmSubmit","confirmSubmit","performSubmitWithoutRedirectWithSameTaxon","confirmingSubmit","shouldAskReason","method","toLowerCase","action","onSuccessfulSubmitWithoutRedirectWithSameTaxon","$buefy","toast","open","message","trans","reset","keep","staticClass","ref","model","callback","$$v","expression","$ziggy","$event","preventDefault","directives","rawName","_n","Date","stage","slot","content","class","_e","submittingWithRedirect","submitWithRedirect","submittingWithoutRedirect","submitWithoutRedirect","cancelUrl","onCancel","root","module","exports","placeholder","error","except","autofocus","disabled","selected","loading","icon","fetchData","params","onSelect","user","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","option","scopedSlots","_u","fn","_t","ExpiringStorage","cached","JSON","parse","localStorage","getItem","expires","removeItem","lifeTimeInMinutes","currentTime","getTime","setItem","stringify","hasOtherErrors","emptyAccuracy","calculateEmptyAccuracy","gmaps","center","zoom","showDetails","elevationService","position","coordinatesSet","isNaN","mapHasErrors","newAccuracy","centerCoordinates","lat","lng","getElevation","setCurrentLocationAsMapCenter","castNumber","onLocationInput","updateLocation","event","target","onLongitudeInput","updateLongitude","onLatitudeInput","updateLatitude","onAccuracyInput","updateAccuracy","onElevationInput","updateElevation","setMarker","updateRadius","radius","google","maps","ElevationService","getElevationForLocations","locations","status","ElevationStatus","OK","results","onZoomChanged","parseInt","Math","pow","navigator","geolocation","getCurrentPosition","staticStyle","streetViewControl","strokeWeight","required","redirectUrl","submitMore","confirmSubmitMessage","shouldConfirmCancel","submitOnlyDirtyMessage","confirmingCancel","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","Form","e","enter","which","keyCode","ctrlKey","shiftKey","onConfirm","options","confirmText","cancelText","promptForReason","dialog","confirm","prompt","inputAttrs","maxlength","$nextTick","$refs","input","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","notifyNoChangesAndRedirect","setTimeout","isDirty","performSubmitWithRedirect","then","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","duration","_get","_isEqual","initial","confirmCancel","isObject","toNumber","nativeMax","max","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","args","thisArg","apply","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","url","haveThumbnail","thumbnail_url","limit","enterPressed","autocomplete","isActive","nativeOn","indexOf","_k","native_name"],"mappings":"4FAAA,I,iCCA+M,ECwC/M,CACEA,KAAM,cAENC,MAAO,CACLC,MAAO,CACLC,KAAMC,OACNC,QAAN,QAGIC,KAAM,CACJH,KAAMI,OACNF,QAAN,sBAGIG,MAAO,CACLL,KAAMI,OACNF,QAAN,yBAGII,IAAK,CACHN,KAAMI,OACNF,QAAN,sBAGIK,aAAc,CACZP,KAAMQ,OADZ,mBAGQ,MAAO,CACLL,KAAM,OACNE,MAAO,QACPC,IAAK,SAKXG,OAAQ,CACNT,KAAMQ,OACNN,QAAN,+CAIEQ,SAAU,CACRC,IADJ,WAEM,OAAO,OAAb,IAAa,IAGTC,OALJ,WAMM,IAAKC,KAAKV,MAAQU,KAAKV,KAAO,OAApC,IAAoC,GAApC,gBAEM,IAAN,mCAEA,eAIM,OAFIW,GAAYF,EAAOG,OAAO,OAApC,IAAoC,GAApC,WAEaH,GAGTI,KAjBJ,WAoBM,KAFN,uBAEqB,MAAO,GAEtB,IAAN,yEAEA,gEAIM,OAFIC,IAAaD,EAAO,OAA9B,IAA8B,GAA9B,QAEa,IAAb,SAIEE,MAAO,CACLf,KADJ,YAEUU,KAAKV,KAAO,OAAtB,IAAsB,GAAtB,0CACQ,KAAR,mBAGMU,KAAKM,eAGPd,MATJ,WAUMQ,KAAKM,gBAITC,QAAS,CACPD,YADJ,WAEUN,KAAKG,KAAKK,OAASR,KAAKP,KAC1B,KAAR,kBAIIgB,YAPJ,SAOA,GACMT,KAAKU,MAAM,eAAgBC,GAAS,OAGtCC,aAXJ,SAWA,GACMZ,KAAKU,MAAM,eAAgBC,IAG7BE,WAfJ,SAeA,GACMb,KAAKU,MAAM,aAAcC,M,YCxI3BG,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAI7B,QAAQ,CAACgC,EAAG,UAAU,CAACE,MAAM,CAAC,SAAW,GAAG,QAAU,KAAK,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,KAAOL,EAAInB,OAAOyB,IAAI,QAAU,YAAa,GAAG,QAAUN,EAAInB,OAAOyB,IAAI,QAAUN,EAAInB,OAAO0B,MAAM,QAAS,GAAG,SAAW,KAAK,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,YAAcL,EAAIrB,aAAaJ,KAAK,MAAQyB,EAAIzB,MAAMiC,GAAG,CAAC,MAAQR,EAAIN,gBAAgB,GAAGM,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,KAAOL,EAAInB,OAAOyB,IAAI,SAAW,YAAa,GAAG,QAAUN,EAAInB,OAAOyB,IAAI,SAAWN,EAAInB,OAAO0B,MAAM,SAAU,GAAG,SAAW,KAAK,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,YAAcL,EAAIrB,aAAaF,MAAM,MAAQuB,EAAIvB,MAAM,SAAW,IAAI+B,GAAG,CAAC,MAAQR,EAAIH,eAAe,CAACM,EAAG,SAAS,CAACO,SAAS,CAAC,MAAQ,QAAQV,EAAIS,GAAG,KAAKT,EAAIW,GAAIX,EAAU,QAAE,SAASvB,EAAMmC,GAAO,OAAOT,EAAG,SAAS,CAACO,SAAS,CAAC,MAASE,EAAQ,EAAG,YAAcZ,EAAIa,GAAGpC,UAAa,IAAI,GAAGuB,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,KAAOL,EAAInB,OAAOyB,IAAI,OAAS,YAAa,GAAG,QAAUN,EAAInB,OAAOyB,IAAI,OAASN,EAAInB,OAAO0B,MAAM,OAAQ,GAAG,SAAW,KAAK,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,YAAcL,EAAIrB,aAAaD,IAAI,MAAQsB,EAAItB,IAAI,SAAW,IAAI8B,GAAG,CAAC,MAAQR,EAAIF,aAAa,CAACK,EAAG,SAAS,CAACO,SAAS,CAAC,MAAQ,QAAQV,EAAIS,GAAG,KAAKT,EAAIW,GAAIX,EAAQ,MAAE,SAAStB,GAAK,OAAOyB,EAAG,SAAS,CAACO,SAAS,CAAC,MAAQhC,EAAI,YAAcsB,EAAIa,GAAGnC,UAAW,IAAI,IAAI,IAAI,KACl0C,IGUpB,EACA,KACA,KACA,MAIa,IAAAqB,E,kDClBf,I,8cCGe,OACb7B,MAAO,CACL4C,SAAU,CAAExC,QAAS,MACrByC,cAAe,CAAEzC,QAAS,OAG5BQ,SAAU,CACRkC,WADQ,WAEN,OAAO/B,KAAK6B,SAAL,kBACQ7B,KAAK6B,UADb,kBAEQG,OAAOC,SAASC,MAFxB,OAE+BF,OAAOC,SAASE,YAI1D5B,QAAS,CACP6B,WADO,WAEL,MAAO,QAGTC,oBALO,WAML,MAAO,IAGTC,UATO,WAUL,IAAMC,E,+VAAO,CAAH,GACLC,IAAMxC,KAAKyC,MAAOzC,KAAKqC,uBADlB,CAERK,KAAM1C,KAAKA,KAAKoC,cAAcG,SAGhCI,IAAgBC,IAAI5C,KAAK+B,WAAYQ,EAAMvC,KAAK8B,gBAGlDe,aAlBO,WAkBQ,WACPC,EAAgBH,IAAgBI,IAAI/C,KAAK+B,YAEzB,OAAlBe,IAIJ9C,KAAKA,KAAKoC,cAAcY,SAASF,EAAcJ,MAE/C1C,KAAKqC,sBAAsBY,SAAQ,SAAAC,QACNC,IAAvBL,EAAcI,IAChB,EAAKE,KAAK,EAAMF,EAAKJ,EAAcI,OAIvClD,KAAKqD,wBAGPA,oBApCO,WAqCLV,IAAe,OAAQ3C,KAAK+B,e,sYC+XlC,ICrb+N,EDqb/N,CACE/C,KAAM,8BAENsE,OAAQ,CAACC,EAAgBC,EAA3B,GAEEC,WAAY,CACVC,YAAJ,IACIC,eAAJ,IACIC,0BAAJ,IACIC,oBAAJ,KAGE5E,MAAO,CACL6E,wBAAyBC,QAEzBC,YAAa,CACX7E,KAAMQ,OADZ,mBAGQ,MAAO,CACLsE,cAAe,KACfC,kBAAmB,KACnBC,mBAAoB,KACpBC,qBAAsB,KACtBC,wBAAyB,KACzBC,iCAAkC,KAClCC,oBAAqB,KACrBC,sBAAuB,KACvBC,uBAAwB,KACxBC,oBAAqB,KACrBC,qBAAsB,KACtBC,sCAAuC,KACvCC,eAAgB,KAChBC,SAAU,KACVxF,KAAM,OAAhB,IAAgB,GAAhB,OACUE,MAAO,OAAjB,IAAiB,GAAjB,UACUC,IAAK,OAAf,IAAe,GAAf,OACUsF,kBAAkB,EAClBC,qBAAsB,KACtBC,SAAU,KACVC,UAAW,KACXjD,SAAU,KACVkD,SAAU,KACVC,UAAW,KACXC,kBAAmB,KACnBC,kBAAmB,KACnBC,iBAAkB,KAClBC,mBAAoB,KAEpBC,SAAU,KACVC,WAAY,KACZC,KAAM,KACNC,IAAK,KACLC,OAAQ,KACRC,QAAS,KACTC,SAAU,KACVC,QAAS,KACTC,SAAU,KACVC,KAAM,KACNC,QAAS,KAETC,MAAO,KACPC,YAAa,KACbC,kBAAmB,QAKzBC,MAAO,CACLpH,KAAMQ,OACNN,QAAN,sBAGImH,gBAAiB,CACfrH,KAAM,CAACsH,MAAO9G,QACdN,QAAN,uBAIEkD,KA9EF,WA+EI,MAAO,CACLmE,gBAAiB1G,KAAK2G,sBACtBC,wCAAwC,EACxCC,OAAQ7E,OAAO8E,IAAID,OACnBE,UAAW,IAAjB,kCACMC,oBAAqB,IAA3B,4CACMC,iBAAkB,IAAxB,oDAIEpH,SAAU,CACRqH,OADJ,WAEM,OAAOlH,KAAK0C,KAAK0D,MACvB,uBACA,IAGIF,KAPJ,WAQM,OAAOlG,KAAK0C,KAAKwD,KACvB,6CACA,MAGIiB,kBAAmB,CACjBpE,IADN,WAEQ,IAAR,4CAEQ,OAAOqE,EAAIC,UAAYD,EAAIE,SAAW,MAGxC1E,IAPN,SAOA,GACQ5C,KAAK0C,KAAK8C,mBAAqB,OAAvC,IAAuC,CAAvC,2BAKE+B,QAnHF,WAoHIvH,KAAK6C,gBAGPtC,QAAS,CACP8B,oBADJ,WAEM,MAAO,CAAC,YAAa,sBAAuB,qBAQ9CmF,QAVJ,WAWM,OAAO,IAAI,EAAjB,E,+VAAA,IACA,iBADA,CAEQC,OAAQ,OAChB,CACQC,gBAAgB,KASpBC,cAxBJ,SAwBA,cACM3H,KAAK0C,KAAK0D,MAAQA,GAAS,KAC3BpG,KAAK0C,KAAKoC,SAAWsB,EAAQA,EAAMwB,GAAK,KACxC5H,KAAK+G,UAAYX,EAAQA,EAAMpH,KAAO,MAE5C,gEAGQgB,KAAK0C,KAAKuD,SAAW,OASzB4B,oBAzCJ,SAyCA,GACM7H,KAAK0C,KAAK2D,YAAcA,GAAe,KACvCrG,KAAK0C,KAAKmC,eAAiBwB,EAAcA,EAAYuB,GAAK,KAC1D5H,KAAKgH,oBAAsBX,EAAcA,EAAYyB,SAAW,MAQlEC,yBApDJ,SAoDA,GACM/H,KAAK0C,KAAK4D,kBAAoBD,GAAe,KAC7CrG,KAAK0C,KAAKsC,qBAAuBqB,EAAcA,EAAYuB,GAAK,KAChE5H,KAAKiH,iBAAmBZ,EAAcA,EAAYyB,SAAW,MAM/DE,YA7DJ,SA6DA,GACMhI,KAAK0C,KAAKwD,KAAOvF,EAAQ,OAA/B,IAA+B,CAA/B,yBAQIgG,oBAtEJ,WAuEM,MAAO,CACb,WACA,WACA,YACA,WACA,YACA,OACA,QACA,MACA,UACA,WACA,aACA,UACA,cACA,iBACA,oBACA,uBACA,mBACA,oBACA,oBACA,oBACA,qBACA,uBACA,mBACA,uBAIIsB,+BAnGJ,WAoGMjI,KAAK+G,UAAY,IAGnBmB,0BAvGJ,SAuGA,GACUvH,GACFX,KAAK+H,yBAAyB,MAGhC/H,KAAK0C,KAAKqC,iBAAmBpE,GAG/BwH,kBA/GJ,WAgHMnI,KAAKsC,YAELN,OAAOC,SAASmG,KAAOC,MAAM,8BAG/BC,aArHJ,SAqHA,GACM,OAAO,OAAb,IAAa,CAAb,yBAGIC,uBAzHJ,SAyHA,GACMvI,KAAK0C,KAAK2C,kBAAoBD,EAC9BpF,KAAK0C,KAAK4C,kBAAoBF,GAMhCoD,mCAjIJ,WAkIM,IAAIxI,KAAK0C,KAAK+F,WAEd,OAAIzI,KAAK0I,kBAAf,sCAEU1I,KAAK2I,oBAA4B3I,KAAK4I,cAAc5I,KAAK6I,gDAE7D7I,KAAK6I,6CAMPA,0CA9IJ,WA8IA,yEACM7I,KAAK4G,wCAAyC,EAC9C5G,KAAK8I,kBAAmB,EAEpB9I,KAAK+I,kBACP/I,KAAK0C,KAAK+E,OAASA,GAGrBzH,KAAK0C,KAAK1C,KAAKgJ,OAAOC,eAAejJ,KAAKkJ,QAChD,0DADA,OAEA,YACQ,EAAR,0CACQ,EAAR,sBAOIC,+CAjKJ,WAkKMnJ,KAAK4G,wCAAyC,EAE9C5G,KAAKoJ,OAAOC,MAAMC,KAAK,CACrBC,QAASvJ,KAAKwJ,MAAM,sBACpBrK,KAAM,eAIR,IAAN,oDACA,2EACA,gDAEMa,KAAK0C,KAAK+G,QACVzJ,KAAK0C,KAAKM,SAAS0G,M,YEptBrB5I,EAAY,YACd,GJRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACyI,YAAY,8BAA8BvI,MAAM,CAAC,OAASL,EAAImI,OAAO,OAAS,OAAO,KAAOnI,EAAI8F,SAAS,CAAC3F,EAAG,MAAM,CAACyI,YAAY,QAAQ,CAACzI,EAAG,8BAA8B,CAAC0I,IAAI,0BAA0BD,YAAY,cAAcvI,MAAM,CAAC,YAAcL,EAAI2B,KAAK2D,YAAY,MAAQtF,EAAI2B,KAAK9C,OAAOyB,IAAI,kBAAkB,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,kBAAoBN,EAAI2B,KAAK9C,OAAO0B,MAAM,kBAAoB,KAAK,UAAY,YAAY,MAAQP,EAAIyI,MAAM,8CAA8C,YAAczI,EAAIyI,MAAM,0DAA0DjI,GAAG,CAAC,OAASR,EAAI8G,qBAAqBgC,MAAM,CAAClJ,MAAOI,EAAuB,oBAAE+I,SAAS,SAAUC,GAAMhJ,EAAIiG,oBAAoB+C,GAAKC,WAAW,wBAAwB,CAAC9I,EAAG,IAAI,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sDAAsD,KAAOzI,EAAIkJ,OAAO,8BAA8B1I,GAAG,CAAC,MAAQ,SAAS2I,GAAgC,OAAxBA,EAAOC,iBAAwBpJ,EAAIoH,kBAAkB+B,MAAW,CAAChJ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,WAAW,KAAKL,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,cAAcvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,mDAAmD,MAAQzI,EAAI2B,KAAK9C,OAAOyB,IAAI,oBAAoB,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,oBAAsBN,EAAI2B,KAAK9C,OAAO0B,MAAM,oBAAsB,OAAO,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQL,EAAI2B,KAAKqC,iBAAiB,SAAW,IAAIxD,GAAG,CAAC,MAAQR,EAAImH,4BAA4B,CAAChH,EAAG,SAAS,CAACO,SAAS,CAAC,OAAQ,IAAO,CAACV,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,oDAAoDzI,EAAIS,GAAG,KAAKN,EAAG,SAAS,CAACO,SAAS,CAAC,OAAQ,IAAQ,CAACV,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,kDAAkD,GAAGzI,EAAIS,GAAG,KAAKN,EAAG,8BAA8B,CAACkJ,WAAW,CAAC,CAACpL,KAAK,OAAOqL,QAAQ,SAAS1J,OAAQI,EAAI2B,KAAKqC,iBAAkBiF,WAAW,2BAA2BL,YAAY,cAAcvI,MAAM,CAAC,YAAcL,EAAI2B,KAAK4D,kBAAkB,MAAQvF,EAAI2B,KAAK9C,OAAOyB,IAAI,wBAAwB,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,wBAA0BN,EAAI2B,KAAK9C,OAAO0B,MAAM,wBAA0B,KAAK,MAAQP,EAAIyI,MAAM,oDAAoD,YAAczI,EAAIyI,MAAM,0DAA0DjI,GAAG,CAAC,OAASR,EAAIgH,0BAA0B8B,MAAM,CAAClJ,MAAOI,EAAoB,iBAAE+I,SAAS,SAAUC,GAAMhJ,EAAIkG,iBAAiB8C,GAAKC,WAAW,qBAAqB,CAAC9I,EAAG,IAAI,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sDAAsD,KAAOzI,EAAIkJ,OAAO,8BAA8B1I,GAAG,CAAC,MAAQ,SAAS2I,GAAgC,OAAxBA,EAAOC,iBAAwBpJ,EAAIoH,kBAAkB+B,MAAW,CAAChJ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,WAAW,KAAKL,EAAIS,GAAG,KAAKN,EAAG,wBAAwB,CAAC0I,IAAI,oBAAoBD,YAAY,cAAcvI,MAAM,CAAC,MAAQL,EAAI2B,KAAK0D,MAAM,MAAQrF,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAY,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAcN,EAAI2B,KAAK9C,OAAO0B,MAAM,YAAc,KAAK,UAAY,YAAY,MAAQP,EAAIyI,MAAM,wCAAwC,YAAczI,EAAIyI,MAAM,oDAAoDjI,GAAG,CAAC,OAASR,EAAI4G,eAAekC,MAAM,CAAClJ,MAAOI,EAAa,UAAE+I,SAAS,SAAUC,GAAMhJ,EAAIgG,UAAUgD,GAAKC,WAAW,eAAejJ,EAAIS,GAAG,KAAKN,EAAG,gBAAgB,CAACE,MAAM,CAAC,KAAOL,EAAI2B,KAAKpD,KAAK,MAAQyB,EAAI2B,KAAKlD,MAAM,IAAMuB,EAAI2B,KAAKjD,IAAI,OAASsB,EAAI2B,KAAK9C,OAAO,MAAQmB,EAAIyI,MAAM,uCAAuC,aAAe,CAC57GlK,KAAMyB,EAAIyI,MAAM,uCAChBhK,MAAOuB,EAAIyI,MAAM,wCACjB/J,IAAKsB,EAAIyI,MAAM,wCAChBjI,GAAG,CAAC,cAAc,SAAS2I,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,OAAQwH,IAAS,eAAe,SAASA,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,QAASwH,IAAS,aAAa,SAASA,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,MAAOwH,OAAYnJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACA,EAAG,KAAK,CAACyI,YAAY,aAAa,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,oDAAoDzI,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,cAAcvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,0DAA0D,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,2BAA6B,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,2BAA6BN,EAAI2B,KAAK9C,OAAO0B,MAAM,2BAA6B,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,2BAA2ByI,MAAM,CAAClJ,MAAOI,EAAI2B,KAA4B,wBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,0BAA2BqH,IAAMC,WAAW,mCAAmC,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,cAAcvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,mEAAmE,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,oCAAsC,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,oCAAsCN,EAAI2B,KAAK9C,OAAO0B,MAAM,oCAAsC,OAAO,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,mCAAmC,SAAW,IAAIyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAqC,iCAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,mCAAoCqH,IAAMC,WAAW,0CAA0CjJ,EAAIW,GAAIX,EAAmB,iBAAE,SAAS7B,EAAMyB,GAAO,OAAOO,EAAG,SAAS,CAACgC,IAAIvC,EAAMc,SAAS,CAAC,MAAQd,IAAQ,CAACI,EAAIS,GAAGT,EAAIa,GAAG1C,SAAY,IAAI,GAAG6B,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,WAAW,CAACzI,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,gDAAgD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,iBAAmB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,iBAAmBN,EAAI2B,KAAK9C,OAAO0B,MAAM,iBAAmB,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,iBAAiByI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAkB,cAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,gBAAiBqH,IAAMC,WAAW,yBAAyB,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,oDAAoD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,qBAAuB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,qBAAuBN,EAAI2B,KAAK9C,OAAO0B,MAAM,qBAAuB,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAAsB,kBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,oBAAqBqH,IAAMC,WAAW,6BAA6B,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,WAAW,CAACzI,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,uDAAuD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,wBAA0B,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,wBAA0BN,EAAI2B,KAAK9C,OAAO0B,MAAM,wBAA0B,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAAyB,qBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,uBAAwBqH,IAAMC,WAAW,gCAAgC,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,qDAAqD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,sBAAwB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,sBAAwBN,EAAI2B,KAAK9C,OAAO0B,MAAM,sBAAwB,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,YAAcL,EAAIyI,MAAM,kEAAkEK,MAAM,CAAClJ,MAAOI,EAAI2B,KAAuB,mBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,qBAAsBqH,IAAMC,WAAW,8BAA8B,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,OAAOvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sDAAsD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,uBAAyB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,uBAAyBN,EAAI2B,KAAK9C,OAAO0B,MAAM,uBAAyB,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAwB,oBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,sBAAuBqH,IAAMC,WAAW,+BAA+B,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,WAAW,CAACzI,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,wDAAwD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,yBAA2B,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,yBAA2BN,EAAI2B,KAAK9C,OAAO0B,MAAM,yBAA2B,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAA0B,sBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,wBAAyBqH,IAAMC,WAAW,iCAAiC,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,yDAAyD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,0BAA4B,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,0BAA4BN,EAAI2B,KAAK9C,OAAO0B,MAAM,0BAA4B,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAA2B,uBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,yBAA0BqH,IAAMC,WAAW,kCAAkC,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,WAAW,CAACzI,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sDAAsD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,uBAAyB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,uBAAyBN,EAAI2B,KAAK9C,OAAO0B,MAAM,uBAAyB,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAAwB,oBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,sBAAuBqH,IAAMC,WAAW,+BAA+B,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACyI,YAAY,SAASvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,uDAAuD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,wBAA0B,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,wBAA0BN,EAAI2B,KAAK9C,OAAO0B,MAAM,wBAA0B,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAAyB,qBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,uBAAwBqH,IAAMC,WAAW,gCAAgC,IAAI,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,mBAAmB,CAACyI,YAAY,OAAOvI,MAAM,CAAC,SAAWL,EAAI2B,KAAKuC,SAAS,UAAYlE,EAAI2B,KAAKwC,UAAU,SAAWnE,EAAI2B,KAAKT,SAAS,SAAWlB,EAAI2B,KAAKyC,SAAS,UAAYpE,EAAI2B,KAAK0C,UAAU,OAASrE,EAAI2B,KAAK9C,OAAO,mBAAmBmB,EAAI2B,KAAK9C,OAAOyB,IAAI,sBAAwBN,EAAI2B,KAAK9C,OAAOyB,IAAI,sBAAsBE,GAAG,CAAC,kBAAkB,SAAS2I,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,WAAYwH,IAAS,mBAAmB,SAASA,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,YAAawH,IAAS,kBAAkB,SAASA,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,WAAYwH,IAAS,kBAAkB,SAASA,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,WAAYwH,IAAS,mBAAmB,SAASA,GAAQ,OAAOnJ,EAAIqC,KAAKrC,EAAI2B,KAAM,YAAawH,IAAS,oBAAoBnJ,EAAIwH,yBAAyB,CAACrH,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sDAAsD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,qBAAuB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,qBAAuBN,EAAI2B,KAAK9C,OAAO0B,MAAM,qBAAuB,KAAK,eAAe,aAAa,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAsB,kBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,oBAAqB3B,EAAIuJ,GAAGP,KAAOC,WAAW,6BAA6B,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sDAAsD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,qBAAuB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,qBAAuBN,EAAI2B,KAAK9C,OAAO0B,MAAM,qBAAuB,KAAK,eAAe,aAAa,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAsB,kBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,oBAAqB3B,EAAIuJ,GAAGP,KAAOC,WAAW,6BAA6B,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,WAAW,CAACzI,EAAG,MAAM,CAACyI,YAAY,UAAU,CAACzI,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,mDAAmD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,oBAAsB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,oBAAsBN,EAAI2B,KAAK9C,OAAO0B,MAAM,oBAAsB,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAAqB,iBAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,mBAAoB3B,EAAIuJ,GAAGP,KAAOC,WAAW,4BAA4B,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,UAAU,CAACzI,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,qDAAqD,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,sBAAwB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,sBAAwBN,EAAI2B,KAAK9C,OAAO0B,MAAM,sBAAwB,OAAO,CAACJ,EAAG,eAAe,CAACE,MAAM,CAAC,WAAW,IAAImJ,KAAO,iBAAgB,EAAM,iBAAiBxJ,EAAIuH,aAAa,oBAAoB,EAAE,YAAc,cAAcuB,MAAM,CAAClJ,MAAOI,EAAqB,kBAAE+I,SAAS,SAAUC,GAAMhJ,EAAIoG,kBAAkB4C,GAAKC,WAAW,sBAAsB,CAAC9I,EAAG,SAAS,CAACyI,YAAY,mBAAmBvI,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAAS2I,GAAQnJ,EAAI2B,KAAK8C,mBAAqB,QAAQ,CAACtE,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,WAAWL,EAAIS,GAAG,KAAKN,EAAG,OAAO,CAACH,EAAIS,GAAG,YAAY,MAAM,IAAI,KAAKT,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,wCAAwC,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAc,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAcN,EAAI2B,KAAK9C,OAAO0B,MAAM,YAAc,OAAO,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,UAAYL,EAAImG,OAAO1G,OAAO,SAAW,YAAYqJ,MAAM,CAAClJ,MAAOI,EAAI2B,KAAa,SAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,WAAYqH,IAAMC,WAAW,kBAAkB,CAAC9I,EAAG,SAAS,CAACO,SAAS,CAAC,MAAQ,OAAO,CAACV,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,qDAAqDzI,EAAIS,GAAG,KAAKT,EAAIW,GAAIX,EAAU,QAAE,SAASyJ,GAAO,OAAOtJ,EAAG,SAAS,CAACgC,IAAIsH,EAAM5C,GAAGnG,SAAS,CAAC,MAAQ+I,EAAM5C,GAAG,YAAc7G,EAAIa,GAAGb,EAAIyI,MAAM,UAAUgB,EAAMxL,cAAa,IAAI,GAAG+B,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,sCAAsC,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,OAAS,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,OAASN,EAAI2B,KAAK9C,OAAO0B,MAAM,OAAS,OAAO,CAACJ,EAAG,WAAW,CAACE,MAAM,CAAC,SAAW,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAQ,IAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,MAAOqH,IAAMC,WAAW,aAAa,CAAC9I,EAAG,SAAS,CAACO,SAAS,CAAC,MAAQ,OAAO,CAACV,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,qDAAqDzI,EAAIS,GAAG,KAAKT,EAAIW,GAAIX,EAAS,OAAE,SAAS7B,EAAM0G,GAAK,OAAO1E,EAAG,SAAS,CAACgC,IAAI0C,EAAInE,SAAS,CAAC,MAAQmE,EAAI,YAAc7E,EAAIa,GAAG1C,UAAa,IAAI,GAAG6B,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,yCAAyC,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,UAAY,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,UAAYN,EAAI2B,KAAK9C,OAAO0B,MAAM,UAAY,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,UAAUyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAW,OAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,SAAUqH,IAAMC,WAAW,kBAAkB,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,QAAQ,CAACzI,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,uCAAuC,MAAQzI,EAAI2B,KAAK9C,OAAOyB,IAAI,QAAQ,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,QAAUN,EAAI2B,KAAK9C,OAAO0B,MAAM,QAAU,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAS,KAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,OAAQqH,IAAMC,WAAW,gBAAgB,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,0CAA0C,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,WAAa,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,WAAaN,EAAI2B,KAAK9C,OAAO0B,MAAM,WAAa,OAAO,CAACJ,EAAG,UAAU,CAAC2I,MAAM,CAAClJ,MAAOI,EAAI2B,KAAY,QAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,UAAWqH,IAAMC,WAAW,mBAAmB,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,2CAA2C,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAc,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAcN,EAAI2B,KAAK9C,OAAO0B,MAAM,YAAc,OAAO,CAACJ,EAAG,QAAQ,CAACyI,YAAY,QAAQvI,MAAM,CAAC,KAAO,QAAQ,IAAM,YAAYqJ,KAAK,SAAS,CAACvJ,EAAG,OAAO,CAACkJ,WAAW,CAAC,CAACpL,KAAK,UAAUqL,QAAQ,YAAY1J,MAAM,CAAE+J,QAAS3J,EAAIyI,MAAM,oDAAqDQ,WAAW,wEAAwEL,YAAY,aAAa,CAAC5I,EAAIS,GAAG,iBAAiBT,EAAIa,GAAGb,EAAIyI,MAAM,4CAA4C,oBAAoBzI,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,WAAW,KAAO,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAa,SAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,WAAYqH,IAAMC,WAAW,oBAAoB,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,uCAAuC,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,QAAU,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,QAAUN,EAAI2B,KAAK9C,OAAO0B,MAAM,QAAU,OAAO,CAACJ,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAImF,KAAK,YAAcnF,EAAIyI,MAAM,kDAAkD,KAAO,UAAU,iBAAgB,GAAOjI,GAAG,CAAC,MAAQR,EAAIiH,cAAc,CAAC9G,EAAG,SAAS,CAACyI,YAAY,mBAAmBvI,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAAS2I,GAAQnJ,EAAI2B,KAAKwD,KAAO,QAAQ,CAAChF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,YAAY,MAAM,GAAGL,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,WAAW,CAACzI,EAAG,MAAM,CAACyI,YAAY,UAAU,CAACzI,EAAG,MAAM,CAACyI,YAAY,SAAS,CAACzI,EAAG,QAAQ,CAACyI,YAAY,QAAQvI,MAAM,CAAC,IAAM,YAAY,CAACF,EAAG,OAAO,CAACkJ,WAAW,CAAC,CAACpL,KAAK,UAAUqL,QAAQ,YAAY1J,MAAM,CAAE+J,QAAS3J,EAAIyI,MAAM,mDAAoDQ,WAAW,uEAAuEL,YAAY,aAAa,CAAC5I,EAAIS,GAAG,qBAAqBT,EAAIa,GAAGb,EAAIyI,MAAM,2CAA2C,wBAAwBzI,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,UAAU,KAAO,WAAWyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAY,QAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,UAAWqH,IAAMC,WAAW,kBAAkBjJ,EAAIS,GAAG,KAAMT,EAAI2B,KAAK9C,OAAOyB,IAAI,WAAYH,EAAG,IAAI,CAACyI,YAAY,OAAOgB,MAAM,CAAE,YAAa5J,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAaI,SAAS,CAAC,UAAYV,EAAIa,GAAGb,EAAI2B,KAAK9C,OAAO0B,MAAM,eAAeP,EAAI6J,MAAM,KAAK7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,UAAU,CAACzI,EAAG,MAAM,CAACyI,YAAY,SAAS,CAACzI,EAAG,QAAQ,CAACyI,YAAY,QAAQvI,MAAM,CAAC,IAAM,YAAY,CAACL,EAAIS,GAAG,mBAAmBT,EAAIa,GAAGb,EAAIyI,MAAM,2CAA2C,oBAAoBzI,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,GAAK,UAAU,KAAO,WAAWyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAY,QAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,UAAWqH,IAAMC,WAAW,kBAAkBjJ,EAAIS,GAAG,KAAMT,EAAI2B,KAAK9C,OAAOyB,IAAI,WAAYH,EAAG,IAAI,CAACyI,YAAY,OAAOgB,MAAM,CAAE,YAAa5J,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAaI,SAAS,CAAC,UAAYV,EAAIa,GAAGb,EAAI2B,KAAK9C,OAAO0B,MAAM,eAAeP,EAAI6J,MAAM,OAAO7J,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,2CAA2C,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAc,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,YAAcN,EAAI2B,KAAK9C,OAAO0B,MAAM,YAAc,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,YAAYyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAa,SAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,WAAYqH,IAAMC,WAAW,oBAAoB,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,6CAA6C,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,cAAgB,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,cAAgBN,EAAI2B,KAAK9C,OAAO0B,MAAM,cAAgB,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,cAAcyI,MAAM,CAAClJ,MAAOI,EAAI2B,KAAe,WAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,aAAcqH,IAAMC,WAAW,sBAAsB,IAAI,IAAI,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQL,EAAIyI,MAAM,wEAAwE,KAAOzI,EAAI2B,KAAK9C,OAAOyB,IAAI,yCAA2C,YAAc,KAAK,QAAUN,EAAI2B,KAAK9C,OAAOyB,IAAI,yCAA2CN,EAAI2B,KAAK9C,OAAO0B,MAAM,yCAA2C,OAAO,CAACJ,EAAG,UAAU,CAACE,MAAM,CAAC,YAAcL,EAAIyI,MAAM,qFAAqFK,MAAM,CAAClJ,MAAOI,EAAI2B,KAA0C,sCAAEoH,SAAS,SAAUC,GAAMhJ,EAAIqC,KAAKrC,EAAI2B,KAAM,wCAAyCqH,IAAMC,WAAW,iDAAiD,GAAGjJ,EAAIS,GAAG,KAAKN,EAAG,MAAMH,EAAIS,GAAG,KAAKN,EAAG,SAAS,CAACkJ,WAAW,CAAC,CAACpL,KAAK,UAAUqL,QAAQ,YAAY1J,MAAM,CAAE+J,QAAS3J,EAAIyI,MAAM,gDAAiDQ,WAAW,oEAAoEL,YAAY,oBAAoBgB,MAAM,CAClihB,aAAc5J,EAAI8J,wBAClBzJ,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAAS2I,GAAgC,OAAxBA,EAAOC,iBAAwBpJ,EAAI+J,mBAAmBZ,MAAW,CAACnJ,EAAIS,GAAG,SAAST,EAAIa,GAAGb,EAAIyI,MAAM,iBAAiB,UAAUzI,EAAIS,GAAG,KAAMT,EAAc,WAAEG,EAAG,SAAS,CAACkJ,WAAW,CAAC,CAACpL,KAAK,UAAUqL,QAAQ,YAAY1J,MAAM,CAAE+J,QAAS3J,EAAIyI,MAAM,qDAAsDQ,WAAW,yEAAyEL,YAAY,oBAAoBgB,MAAM,CACxd,eAAgB5J,EAAIgK,0BACpB,aAAchK,EAAIgK,2BAClB3J,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAAS2I,GAAgC,OAAxBA,EAAOC,iBAAwBpJ,EAAIiK,sBAAsBd,MAAW,CAACnJ,EAAIS,GAAG,SAAST,EAAIa,GAAGb,EAAIyI,MAAM,sBAAsB,UAAUzI,EAAI6J,KAAK7J,EAAIS,GAAG,KAAMT,EAA2B,wBAAEG,EAAG,SAAS,CAACkJ,WAAW,CAAC,CAACpL,KAAK,UAAUqL,QAAQ,YAAY1J,MAAM,CAAE+J,QAAS3J,EAAIyI,MAAM,gEAAiEQ,WAAW,oFAAoFL,YAAY,oBAAoBgB,MAAM,CAC5gB,eAAgB5J,EAAI6F,uCACpB,aAAc7F,EAAI6F,wCAClBxF,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAAS2I,GAAgC,OAAxBA,EAAOC,iBAAwBpJ,EAAIyH,mCAAmC0B,MAAW,CAACnJ,EAAIS,GAAG,SAAST,EAAIa,GAAGb,EAAIyI,MAAM,wDAAwD,UAAUzI,EAAI6J,KAAK7J,EAAIS,GAAG,KAAKN,EAAG,IAAI,CAACyI,YAAY,iBAAiBvI,MAAM,CAAC,KAAOL,EAAIkK,WAAW1J,GAAG,CAAC,MAAQR,EAAImK,WAAW,CAACnK,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,uBAAuB,KAC5X,IIFpB,EACA,KACA,KACA,MAIa,UAAA1I,E,8BClBf,IAAIqK,EAAO,EAAQ,QAsBnBC,EAAOC,QAJG,WACR,OAAOF,EAAKZ,KAAKzK,Q,oCCnBnB,I,oSCmCA,ICnC6N,EDmC7N,CACEd,KAAM,4BAENC,MAAO,CACLC,MAAO,CACLC,KAAMC,OACNC,QAAN,eAEIiM,YAAa,CACXnM,KAAMC,OACNC,QAAN,6BAEIgH,YAAa,CACXlH,KAAMQ,OACNN,QAAN,MAEIgJ,MAAO,CACLlJ,KAAMC,OACNC,QAAN,uCAEIsB,MAAO,CACLxB,KAAMC,OACNC,QAAN,IAEIkM,MAAOxH,QACPwF,QAAS,CACPpK,KAAMC,OACNC,QAAN,MAEImM,OAAQ,GACRC,UAAW1H,QACX2H,SAAU3H,SAGZxB,KAlCF,WAmCI,MAAO,CACLA,KAAM,GACNoJ,SAAU3L,KAAKqG,aAAe,KAC9BuF,SAAS,IAIb/L,SAAU,CACRgM,KADJ,WAEM,OAAO7L,KAAK2L,SAAW,QAAU,WAIrCtL,MAAO,CACLgG,YADJ,SACA,GACMrG,KAAK2L,SAAWhL,IAIpBJ,QAAS,CACPuL,UAAW,KAAf,sBACM,GAAK9L,KAAKW,MAAV,CAEAX,KAAKuC,KAAO,GACZvC,KAAK4L,SAAU,EAEf,IAAN,GACQ9D,SAAU9H,KAAKW,OAGbX,KAAKwL,SACPO,EAAOP,OAASxL,KAAKwL,QAGvB,EAAN,6DACajJ,KAAKU,SAAQ,SAA1B,4BACQ,EAAR,cACA,YACQ,EAAR,iBAEA,KAEI+I,SAvBJ,SAuBA,GACMhM,KAAK2L,SAAWM,EAEhBjM,KAAKU,MAAM,SAAUuL,IAGvBC,QA7BJ,SA6BA,GACM,IAAN,+BACUC,GAAgBA,IAAiBxL,GACnC,KAAR,eAGMX,KAAKU,MAAM,QAASC,GAEpBX,KAAK8L,aAGPM,aAxCJ,WAyCMpM,KAAKqM,IAAIC,cAAc,SAASC,SAOlCC,SAhDJ,SAgDA,GACM,GAAKC,EAEL,MAAN,WAAa,EAAb,GACA,kBACA,K,YEvII3L,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACyI,YAAY,8BAA8BvI,MAAM,CAAC,MAAQL,EAAI7B,MAAM,KAAO6B,EAAIwK,MAAQ,YAAc,KAAK,QAAUxK,EAAIwI,UAAU,CAACrI,EAAG,UAAU,CAACE,MAAM,CAAC,QAAU,KAAK,CAACF,EAAG,iBAAiB,CAACE,MAAM,CAAC,MAAQL,EAAIJ,MAAM,KAAOI,EAAIwB,KAAK,MAAQ,WAAW,QAAUxB,EAAI6K,QAAQ,KAAO7K,EAAI8K,KAAK,YAAc9K,EAAIuK,YAAY,SAAW,GAAG,UAAYvK,EAAI0K,UAAU,SAAW1K,EAAI2K,UAAUnK,GAAG,CAAC,MAAQR,EAAImL,QAAQ,OAASnL,EAAIiL,UAAUU,YAAY3L,EAAI4L,GAAG,CAAC,CAACzJ,IAAI,UAAU0J,GAAG,SAAS3N,GAAO,MAAO,CAACiC,EAAG,MAAM,CAACyI,YAAY,SAAS,CAACzI,EAAG,MAAM,CAACyI,YAAY,iBAAiB,CAAC5I,EAAIS,GAAG,iBAAiBT,EAAIa,GAAG3C,EAAMwN,OAAO3E,UAAU,2BAA2B/G,EAAIS,GAAG,KAAKT,EAAI8L,GAAG,YAAY,IAAI,KAC9vB,IGUpB,EACA,KACA,KACA,MAIa,IAAA/L,E,qNClBTgM,E,iLACA5J,GACF,IAAM6J,EAASC,KAAKC,MAClBC,aAAaC,QAAQjK,IAGvB,OAAM6J,EAIU,IAAIxC,KAAKwC,EAAOK,SAElB,IAAI7C,MAChB2C,aAAaG,WAAWnK,GACjB,MAGF6J,EAAOpM,MAVL,O,0BAaPuC,GACF,OAAyB,OAAlBlD,KAAK+C,IAAIG,K,0BAGdA,EAAKvC,EAAO2M,GACd,IAAMC,GAAc,IAAIhD,MAAOiD,UAEzBJ,EAAU,IAAI7C,KAAKgD,EAAkC,IAApBD,GAEvCJ,aAAaO,QAAQvK,EAAK8J,KAAKU,UAAU,CAAE/M,QAAOyM,e,6BAG7ClK,GACUlD,KAAK+C,IAAIG,IAGtBgK,aAAaG,WAAWnK,Q,gCAKf,QAAI4J,G,kCCzCnB,I,qBCAkN,ECoGlN,CACE9N,KAAM,iBAENC,MAAO,CACLkG,SAAU5F,OACV6F,UAAW,CACTjG,KAAMI,OACNF,QAAN,KAEI4F,SAAU,CACR9F,KAAMI,OACNF,QAAN,IAEI6F,UAAW,CACT/F,KAAMI,OACNF,QAAN,IAEI4C,SAAU,CACR9C,KAAM,CAACC,OAAQG,QACfF,QAAN,IAEIO,OAAQ,CACNT,KAAMQ,OADZ,mBAGQ,MAAO,KAGXgO,eAAgB,CACdxO,KAAM4E,QACN1E,SAAN,IAIEkD,KAjCF,WAkCI,MAAO,CACLqL,cAAe5N,KAAK6N,uBAAuB7L,OAAO8E,IAAIgH,MAAMC,OAAOC,MACnEC,aAAa,EACbC,iBAAkB,KAClBH,OAAQ/L,OAAO8E,IAAIgH,MAAMC,SAI7BlO,SAAU,CAMRsO,SANJ,WAOM,OAAKnO,KAAKoO,eAIH,CAAb,sCAHe,MAWXA,eAnBJ,WAoBM,QAASC,MAAMrO,KAAKiF,WAC1B,sBACA,uBACA,wBASIqJ,aAhCJ,WAiCM,OAAOtO,KAAK2N,gBAClB,6BACA,8BACA,8BACA,6BACA,6BAGIY,YAzCJ,WA0CM,OAAOvO,KAAKmF,UAAYnF,KAAK4N,eAG/BY,kBA7CJ,WA8CM,OAAOxO,KAAKmO,UAAY,CACtBM,IAAKzO,KAAK+N,OAAO9I,SACjByJ,IAAK1O,KAAK+N,OAAO7I,aAKvB7E,MAAO,CAIL8N,SAJJ,SAIA,GACUnO,KAAKoO,gBACPpO,KAAK2O,aAAahO,KAKxB4G,QA1GF,WA2GIvH,KAAK4O,iCAGPrO,QAAS,CAOPsO,WAPJ,SAOA,GACM,OAAOR,MAAM1N,IAAoB,KAAVA,EAAe,KAAOpB,OAAOoB,IAOtDmO,gBAfJ,SAeA,GACM9O,KAAK+O,eAAeC,EAAMC,OAAOtO,QAQnCoO,eAxBJ,SAwBA,GACM/O,KAAKU,MAAM,kBAAmBC,IAQhCuO,iBAAkB,KAAtB,YACMlP,KAAKmP,gBAAgBH,EAAMC,OAAOtO,SACxC,KAOIwO,gBA1CJ,SA0CA,GACMnP,KAAKU,MAAM,mBAAoBV,KAAK6O,WAAWlO,KAQjDyO,gBAAiB,KAArB,YACMpP,KAAKqP,eAAeL,EAAMC,OAAOtO,SACvC,KAOI0O,eA5DJ,SA4DA,GACMrP,KAAKU,MAAM,kBAAmBV,KAAK6O,WAAWlO,KAQhD2O,gBAAiB,KAArB,YACMtP,KAAKuP,eAAeP,EAAMC,OAAOtO,SACvC,KAOI4O,eA9EJ,SA8EA,GACMvP,KAAKU,MAAM,kBAAmBV,KAAK6O,WAAWlO,KAQhD6O,iBAvFJ,SAuFA,GACMxP,KAAKyP,gBAAgBT,EAAMC,OAAOtO,QAQpC8O,gBAhGJ,SAgGA,GACMzP,KAAKU,MAAM,mBAAoBV,KAAK6O,WAAWlO,KAQjD+O,UAzGJ,SAyGA,GACM,IAAN,iBACA,iBAEM1P,KAAKqP,eAAeZ,GACpBzO,KAAKmP,gBAAgBT,IAQvBiB,aAtHJ,SAsHA,GACM,IAAN,cAE4B,OAAlB3P,KAAKmF,UAAqByK,IAAW5P,KAAK4N,eAI9C5N,KAAKuP,eAAeK,IAQtBjB,aArIJ,SAqIA,cAEWkB,QAAWA,OAAOC,MAASD,OAAOC,KAAKC,mBAOvC/P,KAAKkO,mBACRlO,KAAKkO,iBAAmB,IAAI2B,OAAOC,KAAKC,kBAG1C/P,KAAKkO,iBAAiB8B,yBAAyB,CAC7CC,UAAW,CAAC9B,KACpB,cACQ,GAAI+B,GAAUL,OAAOC,KAAKK,gBAAgBC,IAAOC,EAAQ7P,OAAzD,CAIA,IAAR,2BAEQ,EAAR,6BAEQ,EAAR,yBAQI8P,cArKJ,SAqKA,GACMtQ,KAAK4N,cAAgB5N,KAAK6N,uBAAuBG,IAQnDH,uBA9KJ,SA8KA,GACM,OAAO0C,SA/Rb,OA+RiCC,KAAKC,IAAI,EAAGzC,KAMzCY,8BArLJ,WAqLA,WAEW8B,UAAUC,cAAe3Q,KAAKmO,UAInCuC,UAAUC,YAAYC,oBAAmB,SAA/C,GACY,EAAZ,WAIQ,EAAR,kCACQ,EAAR,oCACQ,EAAR,sB,YC7YI9P,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACyI,YAAY,iBAAiB,CAACzI,EAAG,UAAU,CAACyI,YAAY,cAAcvI,MAAM,CAAC,MAAQL,EAAIyI,MAAM,mCAAmC,CAACtI,EAAG,WAAW,CAAC2P,YAAY,CAAC,MAAQ,OAAO,aAAa,SAASzP,MAAM,CAAC,OAASL,EAAIyN,kBAAkB,KAAOzN,EAAIgN,OAAOC,KAAK,QAAU,CAAC8C,mBAAkB,IAAQvP,GAAG,CAAC,MAAQR,EAAI2O,UAAU,aAAe3O,EAAIuP,gBAAgB,CAACpP,EAAG,cAAc,CAACE,MAAM,CAAC,SAAWL,EAAIoN,SAAS,WAAY,EAAK,WAAY,GAAM5M,GAAG,CAAC,QAAUR,EAAI2O,aAAa3O,EAAIS,GAAG,KAAMT,EAAIoN,UAAYpN,EAAIwN,YAAarN,EAAG,cAAc,CAACE,MAAM,CAAC,OAASL,EAAIoN,SAAS,OAASpN,EAAIwN,YAAY,UAAW,EAAK,QAAU,CAAEwC,aAAc,MAAOxP,GAAG,CAAC,eAAiBR,EAAI4O,gBAAgB5O,EAAI6J,MAAM,IAAI,GAAG7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,kBAAkB,CAAE5I,EAAgB,aAAEG,EAAG,OAAO,CAACyI,YAAY,6BAA6B,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,+BAA+BzI,EAAI6J,KAAK7J,EAAIS,GAAG,KAAKN,EAAG,SAAS,CAACyI,YAAY,mCAAmCgB,MAAM,CAAC,kBAAmB5J,EAAIuN,cAAclN,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,MAAQ,SAAS2I,GAAQnJ,EAAIkN,aAAelN,EAAIkN,eAAe,CAAClN,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,2CAA2CzI,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACkJ,WAAW,CAAC,CAACpL,KAAK,OAAOqL,QAAQ,SAAS1J,MAAOI,EAAe,YAAEiJ,WAAW,iBAAiB,CAAC9I,EAAG,MAAM,CAACyI,YAAY,oBAAoB,CAACzI,EAAG,MAAM,CAACyI,YAAY,iCAAiC,CAACzI,EAAG,QAAQ,CAACyI,YAAY,kBAAkB,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,0CAA0CzI,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,wBAAwB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,iBAAiBgB,MAAM,CAAC,YAAa5J,EAAInB,OAAOyB,IAAI,aAAaD,MAAM,CAAC,YAAc,gBAAgBK,SAAS,CAAC,MAAQV,EAAIkE,UAAU1D,GAAG,CAAC,MAAQR,EAAIqO,qBAAqBrO,EAAIS,GAAG,KAAMT,EAAInB,OAAOyB,IAAI,YAAaH,EAAG,IAAI,CAACyI,YAAY,iBAAiBlI,SAAS,CAAC,YAAcV,EAAIa,GAAGb,EAAInB,OAAO0B,MAAM,gBAAgBP,EAAI6J,OAAO7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,iCAAiC,CAACzI,EAAG,QAAQ,CAACyI,YAAY,kBAAkB,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,2CAA2CzI,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,wBAAwB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,iBAAiBgB,MAAM,CAAC,YAAa5J,EAAInB,OAAOyB,IAAI,cAAcD,MAAM,CAAC,YAAc,gBAAgBK,SAAS,CAAC,MAAQV,EAAImE,WAAW3D,GAAG,CAAC,MAAQR,EAAImO,sBAAsBnO,EAAIS,GAAG,KAAMT,EAAInB,OAAOyB,IAAI,aAAcH,EAAG,IAAI,CAACyI,YAAY,iBAAiBlI,SAAS,CAAC,YAAcV,EAAIa,GAAGb,EAAInB,OAAO0B,MAAM,iBAAiBP,EAAI6J,SAAS7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,oBAAoB,CAACzI,EAAG,MAAM,CAACyI,YAAY,qBAAqB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,kBAAkB,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,4CAA4CzI,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,wBAAwB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,iBAAiBvI,MAAM,CAAC,YAAc,YAAYK,SAAS,CAAC,MAAQV,EAAIoE,UAAU5D,GAAG,CAAC,MAAQR,EAAIuO,qBAAqBvO,EAAIS,GAAG,KAAMT,EAAInB,OAAOyB,IAAI,YAAaH,EAAG,IAAI,CAACyI,YAAY,iBAAiBlI,SAAS,CAAC,YAAcV,EAAIa,GAAGb,EAAInB,OAAO0B,MAAM,gBAAgBP,EAAI6J,OAAO7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,iCAAiC,CAACzI,EAAG,QAAQ,CAACyI,YAAY,kBAAkB,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,6CAA6CzI,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,wBAAwB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,iBAAiBvI,MAAM,CAAC,YAAc,YAAYK,SAAS,CAAC,MAAQV,EAAIqE,WAAW7D,GAAG,CAAC,MAAQR,EAAIyO,sBAAsBzO,EAAIS,GAAG,KAAMT,EAAInB,OAAOyB,IAAI,aAAcH,EAAG,IAAI,CAACyI,YAAY,iBAAiBlI,SAAS,CAAC,YAAcV,EAAIa,GAAGb,EAAInB,OAAO0B,MAAM,iBAAiBP,EAAI6J,SAAS7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,qBAAqB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,kBAAkB,CAAC5I,EAAIS,GAAGT,EAAIa,GAAGb,EAAIyI,MAAM,0CAA0CzI,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,wBAAwB,CAACzI,EAAG,QAAQ,CAACyI,YAAY,iBAAiBgB,MAAM,CAAC,YAAa5J,EAAInB,OAAOyB,IAAI,aAAaD,MAAM,CAAC,YAAc,YAAYK,SAAS,CAAC,MAAQV,EAAIkB,UAAUV,GAAG,CAAC,MAAQR,EAAI+N,qBAAqB/N,EAAIS,GAAG,KAAMT,EAAInB,OAAOyB,IAAI,YAAaH,EAAG,IAAI,CAACyI,YAAY,iBAAiBlI,SAAS,CAAC,YAAcV,EAAIa,GAAGb,EAAInB,OAAO0B,MAAM,gBAAgBP,EAAI6J,OAAO7J,EAAIS,GAAG,KAAKT,EAAI8L,GAAG,YAAY,IAAI,KACrrI,IGUpB,EACA,KACA,KACA,MAIa,IAAA/L,E,ydCZA,KACb9B,KAAM,yBAENC,MAAO,CACLiK,OAAQ,CACN/J,KAAMC,OACN4R,UAAU,GAGZhI,OAAQ,CACN7J,KAAMC,OACNC,QAAS,QAGX4R,YAAa7R,OACb6L,UAAW7L,OAEX8R,WAAYnN,QACZ4E,oBAAqB5E,QACrBoN,qBAAsB,CACpBhS,KAAMC,OADc,mBAGlB,OAAOY,KAAKwJ,MAAM,6BAGtBT,gBAAiBhF,QACjBqN,oBAAqBrN,QACrB2E,gBAAiB3E,QACjBsN,uBAAwB,CACtBlS,KAAMC,OADgB,mBAGpB,OAAOY,KAAKwJ,MAAM,wDAKxBjH,KApCa,WAqCX,MAAO,CACLG,KAAM1C,KAAKwH,UACXd,gBAAiB,GACjBmE,wBAAwB,EACxBE,2BAA2B,EAC3BjC,kBAAkB,EAClBwI,kBAAkB,EAClBzK,OAAQ7E,OAAO8E,IAAID,SAIvBU,QAhDa,WAiDXgK,SAASC,iBAAiB,QAASxR,KAAKyR,sBAG1CC,cApDa,WAqDXH,SAASI,oBAAoB,QAAS3R,KAAKyR,sBAG7ClR,QAAS,CAOPiH,QAPO,WAOY,IAAXjF,EAAW,uDAAJ,GACb,OAAO,IAAIqP,IAAKrP,EAAM,CACpBmF,gBAAgB,KASpB+J,oBAlBO,SAkBaI,GAClB,IAAMC,EAAQ,MAAQD,EAAEE,OAASF,EAAEG,SAE/BH,EAAEI,SAAWJ,EAAEK,UAAYJ,EAC7B9R,KAAKkR,YAAclR,KAAKgL,wBACf6G,EAAEI,SAAWH,GACtB9R,KAAK8K,sBASTlC,cAjCO,SAiCOuJ,GAAW,WACvB,IAAInS,KAAK8I,iBAAT,CAEA9I,KAAK8I,kBAAmB,EAExB,IAAMsJ,EAAU,CACd7I,QAASvJ,KAAKmR,qBACdkB,YAAarS,KAAKwJ,MAAM,gBACxB8I,WAAYtS,KAAKwJ,MAAM,kBACvB2I,YACAjH,SAAU,WAAQ,EAAKpC,kBAAmB,IAG5C,OAAK9I,KAAK+I,gBAIH/I,KAAKuS,gBAAgBH,GAHnBpS,KAAKoJ,OAAOoJ,OAAOC,QAAQL,KAYtCG,gBA3DO,SA2DSH,GAAS,WACjBI,EAASxS,KAAKoJ,OAAOoJ,OAAOE,O,+VAAnB,IACVN,EADU,CAEbO,WAAY,CACRrH,YAAatL,KAAKwJ,MAAM,UACxBwH,UAAU,EACV4B,UAAW,QAmBjB,OAdAJ,EAAOK,WAAU,WACfL,EAAOM,MAAMC,MAAMvB,iBAAiB,WAAW,SAACK,GAC9CA,EAAE5C,OAAO+D,kBAAkB,IAEtBnB,EAAE5C,OAAOgE,SAASC,OACrBrB,EAAE5C,OAAO+D,kBAAkB,EAAKxJ,MAAM,6DAI1CgJ,EAAOM,MAAMC,MAAMvB,iBAAiB,SAAS,SAACK,GAC5CW,EAAOW,kBAAoB,WAIxBX,GAMTY,gBA1FO,WA2FLpT,KAAKoJ,OAAOC,MAAMC,KAAK,CACrBC,QAASvJ,KAAKqR,uBACdlS,KAAM,aAOVkU,2BApGO,WAoGsB,WAC3BrT,KAAKoT,kBAELE,YAAW,WACL,EAAKrC,cACPjP,OAAOC,SAASmG,KAAO,EAAK6I,eAE7B,MAMLnG,mBAjHO,WAkHL,IAAI9K,KAAK0C,KAAK+F,WAEd,OAAIzI,KAAK0I,kBAAoB1I,KAAKuT,UAAkBvT,KAAKqT,6BAErDrT,KAAK2I,oBAA4B3I,KAAK4I,cAAc5I,KAAKwT,gCAE7DxT,KAAKwT,6BAMPA,0BA9HO,WA8HkC,IAAf/L,EAAe,uDAAN,KACjCzH,KAAK6K,wBAAyB,EAC9B7K,KAAK8I,kBAAmB,EAEpB9I,KAAK+I,kBACP/I,KAAK0C,KAAK+E,OAASA,GAGrBzH,KAAK0C,KAAK1C,KAAKgJ,OAAOC,eAAejJ,KAAKkJ,QACrCuK,KAAKzT,KAAK0T,gCADf,MAEW1T,KAAK2T,iBAMlBD,+BA9IO,WA8I0B,WAC/B1T,KAAK0C,KAAK+F,YAAa,EAEvBzI,KAAKoJ,OAAOC,MAAMC,KAAK,CACrBC,QAASvJ,KAAKwJ,MAAM,sBACpBrK,KAAM,eAKRmU,YAAW,WACT,EAAK5Q,KAAK+F,YAAa,EACvB,EAAKoC,wBAAyB,EAE9B,EAAK+I,8BAED,EAAK3C,cACPjP,OAAOC,SAASmG,KAAO,EAAK6I,eAE7B,MAML2C,4BAvKO,aA4KP5I,sBA5KO,WA6KL,IAAIhL,KAAK0C,KAAK+F,WAEd,OAAIzI,KAAK0I,kBAAqB1I,KAAKuT,UAAkBvT,KAAKoT,kBAEtDpT,KAAK2I,oBAA4B3I,KAAK4I,cAAc5I,KAAK6T,mCAE7D7T,KAAK6T,gCAMPA,6BAzLO,WAyLqC,IAAfpM,EAAe,uDAAN,KACpCzH,KAAK+K,2BAA4B,EACjC/K,KAAK8I,kBAAmB,EAEpB9I,KAAK+I,kBACP/I,KAAK0C,KAAK+E,OAASA,GAGrBzH,KAAK0C,KAAK1C,KAAKgJ,OAAOC,eAAejJ,KAAKkJ,QACrCuK,KAAKzT,KAAK8T,mCADf,MAEW9T,KAAK2T,iBAMlBG,kCAzMO,WA0ML9T,KAAK+K,2BAA4B,EAEjC/K,KAAKoJ,OAAOC,MAAMC,KAAK,CACrBC,QAASvJ,KAAKwJ,MAAM,sBACpBrK,KAAM,eAIR,IAAMuK,EAAOlH,IAAMxC,KAAK0C,KAAKH,OAAQvC,KAAK0G,iBAC1C1G,KAAK0C,KAAK+G,QACVzJ,KAAK0C,KAAKM,SAAS0G,GAEnB1J,KAAKiI,kCAMPA,+BA5NO,aAmOP0L,eAnOO,SAmOQpI,GACbvL,KAAK6K,wBAAyB,EAC9B7K,KAAK+K,2BAA4B,EAEjC/K,KAAKoJ,OAAOC,MAAMC,KAAK,CACrByK,SAAU,KACVxK,QAASyK,IAAKzI,EAAO,wBAAyBA,EAAMhC,SACpDpK,KAAM,eASVoU,QAnPO,WAoPL,OAASU,IAASjU,KAAK0C,KAAKH,OAAQvC,KAAK0C,KAAKwR,UAMhDC,cA1PO,WA0PS,WACVnU,KAAKsR,mBAETtR,KAAKsR,kBAAmB,EAExBtR,KAAKoJ,OAAOoJ,OAAOC,QAAQ,CACzBlJ,QAASvJ,KAAKwJ,MAAM,qDACpB2I,UAAW,WACT,EAAKb,kBAAmB,EACxBtP,OAAOC,SAASmG,KAAO,EAAK6C,WAE9BC,SAAU,WAAQ,EAAKoG,kBAAmB,GAC1CgB,WAAYtS,KAAKwJ,MAAM,wBACvB6I,YAAarS,KAAKwJ,MAAM,0BAS5B0B,SAhRO,SAgRE8D,GACHhP,KAAKoR,qBAAuBpR,KAAKuT,YACnCvE,EAAM7E,iBAENnK,KAAKmU,qB,qBClVb,IAAIC,EAAW,EAAQ,QACnBtU,EAAM,EAAQ,QACduU,EAAW,EAAQ,QAMnBC,EAAY9D,KAAK+D,IACjBC,EAAYhE,KAAKiE,IAqLrBrJ,EAAOC,QA7HP,SAAkBqJ,EAAMC,EAAMvC,GAC5B,IAAIwC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAiB,EACjBC,GAAU,EACVC,GAAS,EACTC,GAAW,EAEf,GAAmB,mBAARX,EACT,MAAM,IAAIY,UAzEQ,uBAmFpB,SAASC,EAAWrP,GAClB,IAAIsP,EAAOZ,EACPa,EAAUZ,EAKd,OAHAD,EAAWC,OAAW1R,EACtB+R,EAAiBhP,EACjB6O,EAASL,EAAKgB,MAAMD,EAASD,GAI/B,SAASG,EAAYzP,GAMnB,OAJAgP,EAAiBhP,EAEjB8O,EAAU1B,WAAWsC,EAAcjB,GAE5BQ,EAAUI,EAAWrP,GAAQ6O,EAatC,SAASc,EAAa3P,GACpB,IAAI4P,EAAoB5P,EAAO+O,EAM/B,YAAyB9R,IAAjB8R,GAA+Ba,GAAqBnB,GACzDmB,EAAoB,GAAOV,GANJlP,EAAOgP,GAM8BJ,EAGjE,SAASc,IACP,IAAI1P,EAAOpG,IACX,GAAI+V,EAAa3P,GACf,OAAO6P,EAAa7P,GAGtB8O,EAAU1B,WAAWsC,EA3BvB,SAAuB1P,GACrB,IAEI8P,EAAcrB,GAFMzO,EAAO+O,GAI/B,OAAOG,EACHZ,EAAUwB,EAAalB,GAJD5O,EAAOgP,IAK7Bc,EAoB+BC,CAAc/P,IAGnD,SAAS6P,EAAa7P,GAKpB,OAJA8O,OAAU7R,EAINkS,GAAYT,EACPW,EAAWrP,IAEpB0O,EAAWC,OAAW1R,EACf4R,GAeT,SAASmB,IACP,IAAIhQ,EAAOpG,IACPqW,EAAaN,EAAa3P,GAM9B,GAJA0O,EAAWwB,UACXvB,EAAW7U,KACXiV,EAAe/O,EAEXiQ,EAAY,CACd,QAAgBhT,IAAZ6R,EACF,OAAOW,EAAYV,GAErB,GAAIG,EAIF,OAFAiB,aAAarB,GACbA,EAAU1B,WAAWsC,EAAcjB,GAC5BY,EAAWN,GAMtB,YAHgB9R,IAAZ6R,IACFA,EAAU1B,WAAWsC,EAAcjB,IAE9BI,EAIT,OA3GAJ,EAAON,EAASM,IAAS,EACrBP,EAAShC,KACX+C,IAAY/C,EAAQ+C,QAEpBL,GADAM,EAAS,YAAahD,GACHkC,EAAUD,EAASjC,EAAQ0C,UAAY,EAAGH,GAAQG,EACrEO,EAAW,aAAcjD,IAAYA,EAAQiD,SAAWA,GAoG1Da,EAAUI,OApCV,gBACkBnT,IAAZ6R,GACFqB,aAAarB,GAEfE,EAAiB,EACjBN,EAAWK,EAAeJ,EAAWG,OAAU7R,GAgCjD+S,EAAUK,MA7BV,WACE,YAAmBpT,IAAZ6R,EAAwBD,EAASgB,EAAajW,MA6BhDoW,I,kCC3LT,I,oSCyCA,ICzCuN,EDyCvN,CACElX,KAAM,sBAENC,MAAO,CACLC,MAAO,CACLC,KAAMC,OACNC,QAAN,SAEIiM,YAAa,CACXnM,KAAMC,OACNC,QAAN,uBAEI+G,MAAO,CACLjH,KAAMQ,OACNN,QAAN,MAEImX,IAAK,CACHrX,KAAMC,OACNC,QAAN,4CAEIsB,MAAO,CACLxB,KAAMC,OACNC,QAAN,IAEIkM,MAAOxH,QACPwF,QAAS,CACPpK,KAAMC,OACNC,QAAN,MAEImM,OAAQ,GACRC,UAAW1H,SAGbxB,KAjCF,WAkCI,MAAO,CACLA,KAAM,GACNoJ,SAAU3L,KAAKoG,OAAS,KACxBwF,SAAS,IAIb/L,SAAU,CACR4W,cADJ,WAEM,OAAOzW,KAAK2L,UAAY3L,KAAK2L,SAAS+K,eAGxC7K,KALJ,WAMM,OAAO7L,KAAK2L,SAAW,QAAU,WAIrCtL,MAAO,CACL+F,MADJ,SACA,GACMpG,KAAK2L,SAAWhL,IAIpBJ,QAAS,CACPuL,UAAW,KAAf,sBACM,GAAK9L,KAAKW,MAAV,CAEAX,KAAKuC,KAAO,GACZvC,KAAK4L,SAAU,EAEf,IAAN,GACQ5M,KAAMgB,KAAKW,MACXgW,MAAO,IAGL3W,KAAKwL,SACPO,EAAOP,OAASxL,KAAKwL,QAGvB,EAAN,gBACQO,OAAR,IACA,kBAEA,EADA,KAEaxJ,KAAKU,SAAQ,SAA1B,4BACQ,EAAR,cACA,YACQ,EAAR,iBAEA,KAEI+I,SA5BJ,SA4BA,GACMhM,KAAK2L,SAAWvF,EAEhBpG,KAAKU,MAAM,SAAU0F,IAGvB8F,QAlCJ,SAkCA,GACM,IAAN,+BACUC,GAAgBA,IAAiBxL,GACnCX,KAAKgM,SAAS,MAGhBhM,KAAKU,MAAM,QAASC,GAEpBX,KAAK8L,aAGPM,aA7CJ,WA8CMpM,KAAKqM,IAAIC,cAAc,SAASC,SAOlCC,SArDJ,SAqDA,GACM,GAAKC,EAEL,MAAN,WAAa,EAAb,GACA,cACA,GAGImK,aA7DJ,WA8DW5W,KAAK8S,MAAM+D,aAAaC,UAC3B9W,KAAKU,MAAM,Y,YE1JfI,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACyI,YAAY,wBAAwBvI,MAAM,CAAC,MAAQL,EAAI7B,MAAM,KAAO6B,EAAIwK,MAAQ,YAAc,KAAK,QAAUxK,EAAIwI,UAAU,CAACrI,EAAG,UAAU,CAACE,MAAM,CAAC,QAAU,KAAK,CAAEL,EAAiB,cAAEG,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,KAAK,IAAMpB,KAAK2L,SAAS+K,iBAAiB3V,EAAI6J,KAAK7J,EAAIS,GAAG,KAAKN,EAAG,iBAAiB,CAAC0I,IAAI,eAAexI,MAAM,CAAC,MAAQL,EAAIJ,MAAM,KAAOI,EAAIwB,KAAK,MAAQ,OAAO,QAAUxB,EAAI6K,QAAQ,KAAO7K,EAAI8K,KAAK,YAAc9K,EAAIuK,YAAY,SAAW,GAAG,UAAYvK,EAAI0K,WAAWlK,GAAG,CAAC,MAAQR,EAAImL,QAAQ,OAASnL,EAAIiL,UAAU+K,SAAS,CAAC,QAAU,SAAS7M,GAAQ,OAAIA,EAAO/K,KAAK6X,QAAQ,QAAQjW,EAAIkW,GAAG/M,EAAO8H,QAAQ,QAAQ,GAAG9H,EAAOhH,IAAI,SAAkB,KAAcnC,EAAI6V,aAAa1M,KAAUwC,YAAY3L,EAAI4L,GAAG,CAAC,CAACzJ,IAAI,UAAU0J,GAAG,SAAS3N,GAAO,MAAO,CAACiC,EAAG,MAAM,CAACyI,YAAY,SAAS,CAACzI,EAAG,MAAM,CAACyI,YAAY,cAAc,CAAE1K,EAAMwN,OAAoB,cAAEvL,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,KAAK,IAAMnC,EAAMwN,OAAOiK,iBAAiB3V,EAAI6J,OAAO7J,EAAIS,GAAG,KAAKN,EAAG,MAAM,CAACyI,YAAY,iBAAiB,CAAC5I,EAAIS,GAAG,iBAAiBT,EAAIa,GAAG3C,EAAMwN,OAAOzN,MAAM+B,EAAIa,GAAG3C,EAAMwN,OAAOyK,YAAe,KAAQjY,EAAMwN,OAAkB,YAAI,IAAO,IAAI,4BAA4B,IAAI,KACltC,IGUpB,EACA,KACA,KACA,MAIa,IAAA3L,E","file":"js/18.js?id=00dd1a42e0589466b8ca","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{attrs:{\"label\":_vm.label}},[_c('b-field',{attrs:{\"expanded\":\"\",\"grouped\":\"\"}},[_c('b-field',{attrs:{\"type\":_vm.errors.has('year') ? 'is-danger': '',\"message\":_vm.errors.has('year') ? _vm.errors.first('year'): '',\"expanded\":\"\"}},[_c('b-input',{attrs:{\"placeholder\":_vm.placeholders.year,\"value\":_vm.year},on:{\"input\":_vm.onYearInput}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"type\":_vm.errors.has('month') ? 'is-danger': '',\"message\":_vm.errors.has('month') ? _vm.errors.first('month'): '',\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.placeholders.month,\"value\":_vm.month,\"expanded\":\"\"},on:{\"input\":_vm.onMonthInput}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.months),function(month,index){return _c('option',{domProps:{\"value\":(index + 1),\"textContent\":_vm._s(month)}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"type\":_vm.errors.has('day') ? 'is-danger': '',\"message\":_vm.errors.has('day') ? _vm.errors.first('day'): '',\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.placeholders.day,\"value\":_vm.day,\"expanded\":\"\"},on:{\"input\":_vm.onDayInput}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.days),function(day){return _c('option',{domProps:{\"value\":day,\"textContent\":_vm._s(day)}})})],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateInput.vue?vue&type=script&lang=js&\"","<template>\n  <b-field :label=\"label\">\n    <b-field expanded grouped>\n      <b-field\n        :type=\"errors.has('year') ? 'is-danger': ''\"\n        :message=\"errors.has('year') ? errors.first('year'): ''\"\n        expanded\n      >\n        <b-input :placeholder=\"placeholders.year\" :value=\"year\" @input=\"onYearInput\" />\n      </b-field>\n\n      <b-field\n        :type=\"errors.has('month') ? 'is-danger': ''\"\n        :message=\"errors.has('month') ? errors.first('month'): ''\"\n        expanded\n      >\n        <b-select :placeholder=\"placeholders.month\" :value=\"month\" @input=\"onMonthInput\" expanded>\n          <option :value=\"null\"></option>\n          <option v-for=\"(month, index) in months\" :value=\"(index + 1)\" v-text=\"month\"></option>\n        </b-select>\n      </b-field>\n\n      <b-field\n        :type=\"errors.has('day') ? 'is-danger': ''\"\n        :message=\"errors.has('day') ? errors.first('day'): ''\"\n        expanded\n      >\n        <b-select :placeholder=\"placeholders.day\" :value=\"day\" @input=\"onDayInput\" expanded>\n          <option :value=\"null\"></option>\n          <option v-for=\"day in days\" :value=\"day\" v-text=\"day\"></option>\n        </b-select>\n      </b-field>\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport dayjs from '@/dayjs'\nimport _range from 'lodash/range'\n\nexport default {\n  name: 'nzDateInput',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Date'\n    },\n\n    year: {\n      type: Number,\n      default: dayjs().year()\n    },\n\n    month: {\n      type: Number,\n      default: dayjs().month() + 1\n    },\n\n    day: {\n      type: Number,\n      default: dayjs().date()\n    },\n\n    placeholders: {\n      type: Object,\n      default() {\n        return {\n          year: 'Year',\n          month: 'Month',\n          day: 'Day'\n        }\n      }\n    },\n\n    errors: {\n      type: Object,\n      default: () => ({ has: () => false })\n    }\n  },\n\n  computed: {\n    now() {\n      return dayjs()\n    },\n\n    months() {\n      if (!this.year || this.year > dayjs().year()) return []\n\n      const isThisYear = this.year === dayjs().year()\n\n      let months = dayjs.months()\n\n      if (isThisYear) months.splice(dayjs().month() + 1)\n\n      return months\n    },\n\n    days() {\n      const haveDate = this.year && this.month\n\n      if (!haveDate) return []\n\n      const isThisMonth = this.year === dayjs().year() && (this.month - 1) === dayjs().month()\n\n      let days = dayjs(new Date(this.year, this.month - 1, 1)).daysInMonth()\n\n      if (isThisMonth) days = dayjs().date()\n\n      return _range(1, days + 1)\n    }\n  },\n\n  watch: {\n    year() {\n      if (this.year > dayjs().year() || this.months.length < this.month -1)  {\n          this.onMonthInput(null)\n      }\n\n      this.truncateDay()\n    },\n\n    month() {\n      this.truncateDay()\n    }\n  },\n\n  methods: {\n    truncateDay() {\n      if (this.days.length < this.day)  {\n          this.onDayInput(null)\n      }\n    },\n\n    onYearInput(value) {\n      this.$emit('update:year', +value || null)\n    },\n\n    onMonthInput(value) {\n      this.$emit('update:month', value)\n    },\n\n    onDayInput(value) {\n      this.$emit('update:day', value)\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./DateInput.vue?vue&type=template&id=113a099e&\"\nimport script from \"./DateInput.vue?vue&type=script&lang=js&\"\nexport * from \"./DateInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"literature-observation-form\",attrs:{\"action\":_vm.action,\"method\":\"POST\",\"lang\":_vm.locale}},[_c('div',{staticClass:\"mb-8\"},[_c('nz-publication-autocomplete',{ref:\"publicationAutocomplete\",staticClass:\"is-required\",attrs:{\"publication\":_vm.form.publication,\"error\":_vm.form.errors.has('publication_id'),\"message\":_vm.form.errors.has('publication_id') ? _vm.form.errors.first('publication_id') : null,\"autofocus\":\"autofocus\",\"label\":_vm.trans('labels.literature_observations.publication'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_publication')},on:{\"select\":_vm.onPublicationSelect},model:{value:(_vm.publicationCitation),callback:function ($$v) {_vm.publicationCitation=$$v},expression:\"publicationCitation\"}},[_c('a',{staticClass:\"button\",attrs:{\"title\":_vm.trans('labels.literature_observations.add_new_publication'),\"href\":_vm.$ziggy('admin.publications.create')},on:{\"click\":function($event){$event.preventDefault();return _vm.addNewPublication($event)}}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}})],1)]),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.literature_observations.is_original_data'),\"error\":_vm.form.errors.has('is_original_data'),\"message\":_vm.form.errors.has('is_original_data') ? _vm.form.errors.first('is_original_data') : null}},[_c('b-select',{attrs:{\"value\":_vm.form.is_original_data,\"expanded\":\"\"},on:{\"input\":_vm.handleIsOriginalDataInput}},[_c('option',{domProps:{\"value\":true}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.original_data')))]),_vm._v(\" \"),_c('option',{domProps:{\"value\":false}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.citation')))])])],1),_vm._v(\" \"),_c('nz-publication-autocomplete',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.form.is_original_data),expression:\"!form.is_original_data\"}],staticClass:\"is-required\",attrs:{\"publication\":_vm.form.cited_publication,\"error\":_vm.form.errors.has('cited_publication_id'),\"message\":_vm.form.errors.has('cited_publication_id') ? _vm.form.errors.first('cited_publication_id') : null,\"label\":_vm.trans('labels.literature_observations.cited_publication'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_publication')},on:{\"select\":_vm.onCitedPublicationSelect},model:{value:(_vm.citedPublication),callback:function ($$v) {_vm.citedPublication=$$v},expression:\"citedPublication\"}},[_c('a',{staticClass:\"button\",attrs:{\"title\":_vm.trans('labels.literature_observations.add_new_publication'),\"href\":_vm.$ziggy('admin.publications.create')},on:{\"click\":function($event){$event.preventDefault();return _vm.addNewPublication($event)}}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}})],1)]),_vm._v(\" \"),_c('nz-taxon-autocomplete',{ref:\"taxonAutocomplete\",staticClass:\"is-required\",attrs:{\"taxon\":_vm.form.taxon,\"error\":_vm.form.errors.has('taxon_id'),\"message\":_vm.form.errors.has('taxon_id') ? _vm.form.errors.first('taxon_id') : null,\"autofocus\":\"autofocus\",\"label\":_vm.trans('labels.literature_observations.taxon'),\"placeholder\":_vm.trans('labels.literature_observations.search_for_taxon')},on:{\"select\":_vm.onTaxonSelect},model:{value:(_vm.taxonName),callback:function ($$v) {_vm.taxonName=$$v},expression:\"taxonName\"}}),_vm._v(\" \"),_c('nz-date-input',{attrs:{\"year\":_vm.form.year,\"month\":_vm.form.month,\"day\":_vm.form.day,\"errors\":_vm.form.errors,\"label\":_vm.trans('labels.literature_observations.date'),\"placeholders\":{\n          year: _vm.trans('labels.literature_observations.year'),\n          month: _vm.trans('labels.literature_observations.month'),\n          day: _vm.trans('labels.literature_observations.day')\n      }},on:{\"update:year\":function($event){return _vm.$set(_vm.form, \"year\", $event)},\"update:month\":function($event){return _vm.$set(_vm.form, \"month\", $event)},\"update:day\":function($event){return _vm.$set(_vm.form, \"day\", $event)}}}),_vm._v(\" \"),_c('div',[_c('h2',{staticClass:\"is-size-4\"},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.verbatim_data')))]),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_identification'),\"type\":_vm.form.errors.has('original_identification') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_identification') ? _vm.form.errors.first('original_identification') : null}},[_c('b-input',{attrs:{\"name\":\"original_identification\"},model:{value:(_vm.form.original_identification),callback:function ($$v) {_vm.$set(_vm.form, \"original_identification\", $$v)},expression:\"form.original_identification\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_identification_validity'),\"type\":_vm.form.errors.has('original_identification_validity') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_identification_validity') ? _vm.form.errors.first('original_identification_validity') : null}},[_c('b-select',{attrs:{\"name\":\"original_identification_validity\",\"expanded\":\"\"},model:{value:(_vm.form.original_identification_validity),callback:function ($$v) {_vm.$set(_vm.form, \"original_identification_validity\", $$v)},expression:\"form.original_identification_validity\"}},_vm._l((_vm.validityOptions),function(label,value){return _c('option',{key:value,domProps:{\"value\":value}},[_vm._v(_vm._s(label))])}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_date'),\"type\":_vm.form.errors.has('original_date') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_date') ? _vm.form.errors.first('original_date') : null}},[_c('b-input',{attrs:{\"name\":\"original_date\"},model:{value:(_vm.form.original_date),callback:function ($$v) {_vm.$set(_vm.form, \"original_date\", $$v)},expression:\"form.original_date\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_locality'),\"type\":_vm.form.errors.has('original_locality') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_locality') ? _vm.form.errors.first('original_locality') : null}},[_c('b-input',{model:{value:(_vm.form.original_locality),callback:function ($$v) {_vm.$set(_vm.form, \"original_locality\", $$v)},expression:\"form.original_locality\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_coordinates'),\"type\":_vm.form.errors.has('original_coordinates') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_coordinates') ? _vm.form.errors.first('original_coordinates') : null}},[_c('b-input',{model:{value:(_vm.form.original_coordinates),callback:function ($$v) {_vm.$set(_vm.form, \"original_coordinates\", $$v)},expression:\"form.original_coordinates\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.original_elevation'),\"type\":_vm.form.errors.has('original_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_elevation') ? _vm.form.errors.first('original_elevation') : null}},[_c('b-input',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.original_elevation_placeholder')},model:{value:(_vm.form.original_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"original_elevation\", $$v)},expression:\"form.original_elevation\"}})],1)],1),_vm._v(\" \"),_c('b-field',{staticClass:\"mb-8\",attrs:{\"label\":_vm.trans('labels.literature_observations.other_original_data'),\"type\":_vm.form.errors.has('other_original_data') ? 'is-danger' : null,\"message\":_vm.form.errors.has('other_original_data') ? _vm.form.errors.first('other_original_data') : null}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.other_original_data),callback:function ($$v) {_vm.$set(_vm.form, \"other_original_data\", $$v)},expression:\"form.other_original_data\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_start_year'),\"type\":_vm.form.errors.has('collecting_start_year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_start_year') ? _vm.form.errors.first('collecting_start_year') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_start_year),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_start_year\", $$v)},expression:\"form.collecting_start_year\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_start_month'),\"type\":_vm.form.errors.has('collecting_start_month') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_start_month') ? _vm.form.errors.first('collecting_start_month') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_start_month),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_start_month\", $$v)},expression:\"form.collecting_start_month\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_end_year'),\"type\":_vm.form.errors.has('collecting_end_year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_end_year') ? _vm.form.errors.first('collecting_end_year') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_end_year),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_end_year\", $$v)},expression:\"form.collecting_end_year\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.literature_observations.collecting_end_month'),\"type\":_vm.form.errors.has('collecting_end_month') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_end_month') ? _vm.form.errors.first('collecting_end_month') : null}},[_c('b-input',{model:{value:(_vm.form.collecting_end_month),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_end_month\", $$v)},expression:\"form.collecting_end_month\"}})],1)],1)],1),_vm._v(\" \"),_c('nz-spatial-input',{staticClass:\"mb-4\",attrs:{\"latitude\":_vm.form.latitude,\"longitude\":_vm.form.longitude,\"location\":_vm.form.location,\"accuracy\":_vm.form.accuracy,\"elevation\":_vm.form.elevation,\"errors\":_vm.form.errors,\"has-other-errors\":_vm.form.errors.has('minimum_elevation') || _vm.form.errors.has('maximum_elevation')},on:{\"update:latitude\":function($event){return _vm.$set(_vm.form, \"latitude\", $event)},\"update:longitude\":function($event){return _vm.$set(_vm.form, \"longitude\", $event)},\"update:location\":function($event){return _vm.$set(_vm.form, \"location\", $event)},\"update:accuracy\":function($event){return _vm.$set(_vm.form, \"accuracy\", $event)},\"update:elevation\":function($event){return _vm.$set(_vm.form, \"elevation\", $event)},\"elevation-fetched\":_vm.handleElevationFetched}},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.minimum_elevation_m'),\"type\":_vm.form.errors.has('minimum_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('minimum_elevation') ? _vm.form.errors.first('minimum_elevation') : null,\"custom-class\":\"is-small\"}},[_c('b-input',{attrs:{\"type\":\"number\",\"size\":\"is-small\"},model:{value:(_vm.form.minimum_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"minimum_elevation\", _vm._n($$v))},expression:\"form.minimum_elevation\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.maximum_elevation_m'),\"type\":_vm.form.errors.has('maximum_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('maximum_elevation') ? _vm.form.errors.first('maximum_elevation') : null,\"custom-class\":\"is-small\"}},[_c('b-input',{attrs:{\"type\":\"number\",\"size\":\"is-small\"},model:{value:(_vm.form.maximum_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"maximum_elevation\", _vm._n($$v))},expression:\"form.maximum_elevation\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.georeferenced_by'),\"type\":_vm.form.errors.has('georeferenced_by') ? 'is-danger' : null,\"message\":_vm.form.errors.has('georeferenced_by') ? _vm.form.errors.first('georeferenced_by') : null}},[_c('b-input',{model:{value:(_vm.form.georeferenced_by),callback:function ($$v) {_vm.$set(_vm.form, \"georeferenced_by\", _vm._n($$v))},expression:\"form.georeferenced_by\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.georeferenced_date'),\"type\":_vm.form.errors.has('georeferenced_date') ? 'is-danger' : null,\"message\":_vm.form.errors.has('georeferenced_date') ? _vm.form.errors.first('georeferenced_date') : null}},[_c('b-datepicker',{attrs:{\"max-date\":new Date(),\"mobile-native\":false,\"date-formatter\":_vm.dateFormater,\"first-day-of-week\":1,\"placeholder\":\"DD.MM.YYYY\"},model:{value:(_vm.georeferencedDate),callback:function ($$v) {_vm.georeferencedDate=$$v},expression:\"georeferencedDate\"}},[_c('button',{staticClass:\"button is-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.form.georeferenced_date = null}}},[_c('b-icon',{attrs:{\"icon\":\"close\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Clear\")])],1)])],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.stage'),\"type\":_vm.form.errors.has('stage_id') ? 'is-danger' : null,\"message\":_vm.form.errors.has('stage_id') ? _vm.form.errors.first('stage_id') : null}},[_c('b-select',{attrs:{\"disabled\":!_vm.stages.length,\"expanded\":\"expanded\"},model:{value:(_vm.form.stage_id),callback:function ($$v) {_vm.$set(_vm.form, \"stage_id\", $$v)},expression:\"form.stage_id\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.choose_a_stage')))]),_vm._v(\" \"),_vm._l((_vm.stages),function(stage){return _c('option',{key:stage.id,domProps:{\"value\":stage.id,\"textContent\":_vm._s(_vm.trans('stages.'+stage.name))}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.sex'),\"type\":_vm.form.errors.has('sex') ? 'is-danger' : null,\"message\":_vm.form.errors.has('sex') ? _vm.form.errors.first('sex') : null}},[_c('b-select',{attrs:{\"expanded\":\"expanded\"},model:{value:(_vm.form.sex),callback:function ($$v) {_vm.$set(_vm.form, \"sex\", $$v)},expression:\"form.sex\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.literature_observations.choose_a_value')))]),_vm._v(\" \"),_vm._l((_vm.sexes),function(label,sex){return _c('option',{key:sex,domProps:{\"value\":sex,\"textContent\":_vm._s(label)}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.number'),\"type\":_vm.form.errors.has('number') ? 'is-danger' : null,\"message\":_vm.form.errors.has('number') ? _vm.form.errors.first('number') : null}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.number),callback:function ($$v) {_vm.$set(_vm.form, \"number\", $$v)},expression:\"form.number\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mt-4\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.note'),\"error\":_vm.form.errors.has('note'),\"message\":_vm.form.errors.has('note') ? _vm.form.errors.first('note') : null}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.note),callback:function ($$v) {_vm.$set(_vm.form, \"note\", $$v)},expression:\"form.note\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.habitat'),\"type\":_vm.form.errors.has('habitat') ? 'is-danger' : null,\"message\":_vm.form.errors.has('habitat') ? _vm.form.errors.first('habitat') : null}},[_c('b-input',{model:{value:(_vm.form.habitat),callback:function ($$v) {_vm.$set(_vm.form, \"habitat\", $$v)},expression:\"form.habitat\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.found_on'),\"type\":_vm.form.errors.has('found_on') ? 'is-danger' : null,\"message\":_vm.form.errors.has('found_on') ? _vm.form.errors.first('found_on') : null}},[_c('label',{staticClass:\"label\",attrs:{\"slot\":\"label\",\"for\":\"found_on\"},slot:\"label\"},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.found_on_tooltip')}),expression:\"{content: trans('labels.literature_observations.found_on_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n            \"+_vm._s(_vm.trans('labels.literature_observations.found_on'))+\"\\n          \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"found_on\",\"name\":\"found_on\"},model:{value:(_vm.form.found_on),callback:function ($$v) {_vm.$set(_vm.form, \"found_on\", $$v)},expression:\"form.found_on\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.time'),\"type\":_vm.form.errors.has('time') ? 'is-danger' : null,\"message\":_vm.form.errors.has('time') ? _vm.form.errors.first('time') : null}},[_c('b-timepicker',{attrs:{\"value\":_vm.time,\"placeholder\":_vm.trans('labels.literature_observations.click_to_select'),\"icon\":\"clock-o\",\"mobile-native\":false},on:{\"input\":_vm.onTimeInput}},[_c('button',{staticClass:\"button is-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.form.time = null}}},[_c('b-icon',{attrs:{\"icon\":\"close\"}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"project\"}},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.project_tooltip')}),expression:\"{content: trans('labels.literature_observations.project_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n                \"+_vm._s(_vm.trans('labels.literature_observations.project'))+\"\\n              \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"project\",\"name\":\"project\"},model:{value:(_vm.form.project),callback:function ($$v) {_vm.$set(_vm.form, \"project\", $$v)},expression:\"form.project\"}}),_vm._v(\" \"),(_vm.form.errors.has('project'))?_c('p',{staticClass:\"help\",class:{ 'is-danger': _vm.form.errors.has('project') },domProps:{\"innerHTML\":_vm._s(_vm.form.errors.first('project'))}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"dataset\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.trans('labels.literature_observations.dataset'))+\"\\n            \")]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"dataset\",\"name\":\"dataset\"},model:{value:(_vm.form.dataset),callback:function ($$v) {_vm.$set(_vm.form, \"dataset\", $$v)},expression:\"form.dataset\"}}),_vm._v(\" \"),(_vm.form.errors.has('dataset'))?_c('p',{staticClass:\"help\",class:{ 'is-danger': _vm.form.errors.has('dataset') },domProps:{\"innerHTML\":_vm._s(_vm.form.errors.first('dataset'))}}):_vm._e()],1)])]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.observer'),\"type\":_vm.form.errors.has('observer') ? 'is-danger' : null,\"message\":_vm.form.errors.has('observer') ? _vm.form.errors.first('observer') : null}},[_c('b-input',{attrs:{\"name\":\"observer\"},model:{value:(_vm.form.observer),callback:function ($$v) {_vm.$set(_vm.form, \"observer\", $$v)},expression:\"form.observer\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.identifier'),\"type\":_vm.form.errors.has('identifier') ? 'is-danger' : null,\"message\":_vm.form.errors.has('identifier') ? _vm.form.errors.first('identifier') : null}},[_c('b-input',{attrs:{\"name\":\"identifier\"},model:{value:(_vm.form.identifier),callback:function ($$v) {_vm.$set(_vm.form, \"identifier\", $$v)},expression:\"form.identifier\"}})],1)],1)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.literature_observations.place_where_referenced_in_publication'),\"type\":_vm.form.errors.has('place_where_referenced_in_publication') ? 'is-danger' : null,\"message\":_vm.form.errors.has('place_where_referenced_in_publication') ? _vm.form.errors.first('place_where_referenced_in_publication') : null}},[_c('b-input',{attrs:{\"placeholder\":_vm.trans('labels.literature_observations.place_where_referenced_in_publication_placeholder')},model:{value:(_vm.form.place_where_referenced_in_publication),callback:function ($$v) {_vm.$set(_vm.form, \"place_where_referenced_in_publication\", $$v)},expression:\"form.place_where_referenced_in_publication\"}})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.save_tooltip')}),expression:\"{content: trans('labels.literature_observations.save_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-loading': _vm.submittingWithRedirect\n    },attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithRedirect($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save'))+\"\\n  \")]),_vm._v(\" \"),(_vm.submitMore)?_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.save_more_tooltip')}),expression:\"{content: trans('labels.literature_observations.save_more_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-outlined': !_vm.submittingWithoutRedirect,\n      'is-loading': _vm.submittingWithoutRedirect\n    },attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithoutRedirect($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save_more'))+\"\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.submitMoreWithSameTaxon)?_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.literature_observations.save_more_same_taxon_tooltip')}),expression:\"{content: trans('labels.literature_observations.save_more_same_taxon_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-outlined': !_vm.submittingWithoutRedirectWithSameTaxon,\n      'is-loading': _vm.submittingWithoutRedirectWithSameTaxon\n    },attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithoutRedirectWithSameTaxon($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('labels.literature_observations.save_more_same_taxon'))+\"\\n  \")]):_vm._e(),_vm._v(\" \"),_c('a',{staticClass:\"button is-text\",attrs:{\"href\":_vm.cancelUrl},on:{\"click\":_vm.onCancel}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _pick from 'lodash/pick'\nimport expiringStorage from '@/expiring-storage'\n\nexport default {\n  props: {\n    cacheKey: { default: null },\n    cacheLifetime: { default: 60 * 24 }\n  },\n\n  computed: {\n    storageKey() {\n      return this.cacheKey\n        ? `nz-form.${this.cacheKey}`\n        : `nz-form.${window.location.host}${window.location.pathname}`\n    }\n  },\n\n  methods: {\n    getFormKey() {\n      return 'form'\n    },\n\n    otherPersistentKeys() {\n      return []\n    },\n\n    saveState() {\n      const data = {\n        ..._pick(this.$data, this.otherPersistentKeys()),\n        form: this[this.getFormKey()].data()\n      }\n\n      expiringStorage.set(this.storageKey, data, this.cacheLifetime)\n    },\n\n    restoreState() {\n      const previousState = expiringStorage.get(this.storageKey);\n\n      if (previousState === null) {\n        return\n      }\n\n      this[this.getFormKey()].populate(previousState.form)\n\n      this.otherPersistentKeys().forEach(key => {\n        if (previousState[key] !== undefined) {\n          this.$set(this, key, previousState[key])\n        }\n      })\n\n      this.clearPersistedState()\n    },\n\n    clearPersistedState() {\n      expiringStorage.delete(this.storageKey)\n    }\n  }\n}\n","<template>\n  <form :action=\"action\" method=\"POST\" :lang=\"locale\" class=\"literature-observation-form\">\n    <div class=\"mb-8\">\n      <nz-publication-autocomplete\n        class=\"is-required\"\n        v-model=\"publicationCitation\"\n        @select=\"onPublicationSelect\"\n        :publication=\"form.publication\"\n        :error=\"form.errors.has('publication_id')\"\n        :message=\"form.errors.has('publication_id') ? form.errors.first('publication_id') : null\"\n        autofocus=\"autofocus\"\n        ref=\"publicationAutocomplete\"\n        :label=\"trans('labels.literature_observations.publication')\"\n        :placeholder=\"trans('labels.literature_observations.search_for_publication')\"\n      >\n        <a\n          class=\"button\"\n          :title=\"trans('labels.literature_observations.add_new_publication')\"\n          :href=\"$ziggy('admin.publications.create')\"\n          @click.prevent=\"addNewPublication\"\n        >\n          <b-icon icon=\"plus\" />\n        </a>\n      </nz-publication-autocomplete>\n\n      <b-field\n        class=\"is-required\"\n        :label=\"trans('labels.literature_observations.is_original_data')\"\n        :error=\"form.errors.has('is_original_data')\"\n        :message=\"form.errors.has('is_original_data') ? form.errors.first('is_original_data') : null\"\n      >\n        <b-select :value=\"form.is_original_data\" @input=\"handleIsOriginalDataInput\" expanded>\n          <option :value=\"true\">{{ trans('labels.literature_observations.original_data') }}</option>\n          <option :value=\"false\">{{ trans('labels.literature_observations.citation') }}</option>\n        </b-select>\n      </b-field>\n\n      <nz-publication-autocomplete\n        v-show=\"!form.is_original_data\"\n        v-model=\"citedPublication\"\n        @select=\"onCitedPublicationSelect\"\n        class=\"is-required\"\n        :publication=\"form.cited_publication\"\n        :error=\"form.errors.has('cited_publication_id')\"\n        :message=\"form.errors.has('cited_publication_id') ? form.errors.first('cited_publication_id') : null\"\n        :label=\"trans('labels.literature_observations.cited_publication')\"\n        :placeholder=\"trans('labels.literature_observations.search_for_publication')\"\n      >\n        <a\n          class=\"button\"\n          :title=\"trans('labels.literature_observations.add_new_publication')\"\n          :href=\"$ziggy('admin.publications.create')\"\n          @click.prevent=\"addNewPublication\"\n        >\n          <b-icon icon=\"plus\" />\n        </a>\n      </nz-publication-autocomplete>\n\n      <nz-taxon-autocomplete\n        v-model=\"taxonName\"\n        @select=\"onTaxonSelect\"\n        class=\"is-required\"\n        :taxon=\"form.taxon\"\n        :error=\"form.errors.has('taxon_id')\"\n        :message=\"form.errors.has('taxon_id') ? form.errors.first('taxon_id') : null\"\n        autofocus=\"autofocus\"\n        ref=\"taxonAutocomplete\"\n        :label=\"trans('labels.literature_observations.taxon')\"\n        :placeholder=\"trans('labels.literature_observations.search_for_taxon')\"\n      />\n\n      <nz-date-input\n        :year.sync=\"form.year\"\n        :month.sync=\"form.month\"\n        :day.sync=\"form.day\"\n        :errors=\"form.errors\"\n        :label=\"trans('labels.literature_observations.date')\"\n        :placeholders=\"{\n            year: trans('labels.literature_observations.year'),\n            month: trans('labels.literature_observations.month'),\n            day: trans('labels.literature_observations.day')\n        }\"\n      />\n\n      <div>\n        <h2 class=\"is-size-4\">{{ trans('labels.literature_observations.verbatim_data') }}</h2>\n\n        <b-field\n          class=\"is-required\"\n          :label=\"trans('labels.literature_observations.original_identification')\"\n          :type=\"form.errors.has('original_identification') ? 'is-danger' : null\"\n          :message=\"form.errors.has('original_identification') ? form.errors.first('original_identification') : null\"\n        >\n          <b-input name=\"original_identification\" v-model=\"form.original_identification\" />\n        </b-field>\n\n        <b-field\n          class=\"is-required\"\n          :label=\"trans('labels.literature_observations.original_identification_validity')\"\n          :type=\"form.errors.has('original_identification_validity') ? 'is-danger' : null\"\n          :message=\"form.errors.has('original_identification_validity') ? form.errors.first('original_identification_validity') : null\"\n        >\n          <b-select name=\"original_identification_validity\" v-model=\"form.original_identification_validity\" expanded>\n            <option :value=\"value\" v-for=\"(label, value) in validityOptions\" :key=\"value\">{{ label }}</option>\n          </b-select>\n        </b-field>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.original_date')\"\n            :type=\"form.errors.has('original_date') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_date') ? form.errors.first('original_date') : null\"\n          >\n            <b-input name=\"original_date\" v-model=\"form.original_date\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.original_locality')\"\n            :type=\"form.errors.has('original_locality') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_locality') ? form.errors.first('original_locality') : null\"\n          >\n            <b-input v-model=\"form.original_locality\"/>\n          </b-field>\n        </div>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.original_coordinates')\"\n            :type=\"form.errors.has('original_coordinates') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_coordinates') ? form.errors.first('original_coordinates') : null\"\n          >\n            <b-input v-model=\"form.original_coordinates\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.original_elevation')\"\n            :type=\"form.errors.has('original_elevation') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_elevation') ? form.errors.first('original_elevation') : null\"\n          >\n            <b-input v-model=\"form.original_elevation\" :placeholder=\"trans('labels.literature_observations.original_elevation_placeholder')\"/>\n          </b-field>\n        </div>\n\n        <b-field\n          class=\"mb-8\"\n          :label=\"trans('labels.literature_observations.other_original_data')\"\n          :type=\"form.errors.has('other_original_data') ? 'is-danger' : null\"\n          :message=\"form.errors.has('other_original_data') ? form.errors.first('other_original_data') : null\"\n        >\n           <b-input type=\"textarea\" v-model=\"form.other_original_data\" />\n        </b-field>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.collecting_start_year')\"\n            :type=\"form.errors.has('collecting_start_year') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_start_year') ? form.errors.first('collecting_start_year') : null\"\n          >\n            <b-input v-model=\"form.collecting_start_year\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.collecting_start_month')\"\n            :type=\"form.errors.has('collecting_start_month') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_start_month') ? form.errors.first('collecting_start_month') : null\"\n          >\n            <b-input v-model=\"form.collecting_start_month\"/>\n          </b-field>\n        </div>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.collecting_end_year')\"\n            :type=\"form.errors.has('collecting_end_year') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_end_year') ? form.errors.first('collecting_end_year') : null\"\n          >\n            <b-input v-model=\"form.collecting_end_year\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.literature_observations.collecting_end_month')\"\n            :type=\"form.errors.has('collecting_end_month') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_end_month') ? form.errors.first('collecting_end_month') : null\"\n          >\n            <b-input v-model=\"form.collecting_end_month\"/>\n          </b-field>\n        </div>\n      </div>\n\n      <nz-spatial-input\n        class=\"mb-4\"\n        :latitude.sync=\"form.latitude\"\n        :longitude.sync=\"form.longitude\"\n        :location.sync=\"form.location\"\n        :accuracy.sync=\"form.accuracy\"\n        :elevation.sync=\"form.elevation\"\n        @elevation-fetched=\"handleElevationFetched\"\n        :errors=\"form.errors\"\n        :has-other-errors=\"form.errors.has('minimum_elevation') || form.errors.has('maximum_elevation')\"\n      >\n        <b-field\n          :label=\"trans('labels.literature_observations.minimum_elevation_m')\"\n          :type=\"form.errors.has('minimum_elevation') ? 'is-danger' : null\"\n          :message=\"form.errors.has('minimum_elevation') ? form.errors.first('minimum_elevation') : null\"\n          custom-class=\"is-small\"\n        >\n          <b-input type=\"number\" size=\"is-small\" v-model.number=\"form.minimum_elevation\"/>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.literature_observations.maximum_elevation_m')\"\n          :type=\"form.errors.has('maximum_elevation') ? 'is-danger' : null\"\n          :message=\"form.errors.has('maximum_elevation') ? form.errors.first('maximum_elevation') : null\"\n          custom-class=\"is-small\"\n        >\n          <b-input type=\"number\" size=\"is-small\" v-model.number=\"form.maximum_elevation\"/>\n        </b-field>\n      </nz-spatial-input>\n\n      <div class=\"columns\">\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.literature_observations.georeferenced_by')\"\n            :type=\"form.errors.has('georeferenced_by') ? 'is-danger' : null\"\n            :message=\"form.errors.has('georeferenced_by') ? form.errors.first('georeferenced_by') : null\"\n          >\n            <b-input v-model.number=\"form.georeferenced_by\"/>\n          </b-field>\n        </div>\n\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.literature_observations.georeferenced_date')\"\n            :type=\"form.errors.has('georeferenced_date') ? 'is-danger' : null\"\n            :message=\"form.errors.has('georeferenced_date') ? form.errors.first('georeferenced_date') : null\"\n          >\n            <b-datepicker\n              v-model=\"georeferencedDate\"\n              :max-date=\"new Date()\"\n              :mobile-native=\"false\"\n              :date-formatter=\"dateFormater\"\n              :first-day-of-week=\"1\"\n              placeholder=\"DD.MM.YYYY\"\n            >\n              <button type=\"button\" class=\"button is-danger\" @click=\"form.georeferenced_date = null\">\n                <b-icon icon=\"close\" />\n                <span>Clear</span>\n              </button>\n            </b-datepicker>\n          </b-field>\n        </div>\n      </div>\n\n      <b-field :label=\"trans('labels.literature_observations.stage')\" :type=\"form.errors.has('stage_id') ? 'is-danger' : null\" :message=\"form.errors.has('stage_id') ? form.errors.first('stage_id') : null\">\n        <b-select v-model=\"form.stage_id\" :disabled=\"!stages.length\" expanded=\"expanded\">\n          <option :value=\"null\">{{ trans('labels.literature_observations.choose_a_stage') }}</option>\n          <option v-for=\"stage in stages\" :value=\"stage.id\" :key=\"stage.id\" v-text=\"trans('stages.'+stage.name)\"></option>\n        </b-select>\n      </b-field>\n\n      <b-field :label=\"trans('labels.literature_observations.sex')\" :type=\"form.errors.has('sex') ? 'is-danger' : null\" :message=\"form.errors.has('sex') ? form.errors.first('sex') : null\">\n        <b-select v-model=\"form.sex\" expanded=\"expanded\">\n          <option :value=\"null\">{{ trans('labels.literature_observations.choose_a_value') }}</option>\n          <option v-for=\"(label,sex) in sexes\" :key=\"sex\" :value=\"sex\" v-text=\"label\"></option>\n        </b-select>\n      </b-field>\n\n      <b-field\n        :label=\"trans('labels.literature_observations.number')\"\n        :type=\"form.errors.has('number') ? 'is-danger' : null\"\n        :message=\"form.errors.has('number') ? form.errors.first('number') : null\"\n      >\n        <b-input type=\"number\" v-model=\"form.number\"/>\n      </b-field>\n\n      <div class=\"mt-4\">\n        <b-field :label=\"trans('labels.literature_observations.note')\" :error=\"form.errors.has('note')\" :message=\"form.errors.has('note') ? form.errors.first('note') : null\"><b-input type=\"textarea\" v-model=\"form.note\"/></b-field>\n\n        <b-field\n          :label=\"trans('labels.literature_observations.habitat')\"\n          :type=\"form.errors.has('habitat') ? 'is-danger' : null\"\n          :message=\"form.errors.has('habitat') ? form.errors.first('habitat') : null\"\n        >\n          <b-input v-model=\"form.habitat\"/>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.literature_observations.found_on')\"\n          :type=\"form.errors.has('found_on') ? 'is-danger' : null\"\n          :message=\"form.errors.has('found_on') ? form.errors.first('found_on') : null\"\n        >\n          <label for=\"found_on\" class=\"label\" slot=\"label\">\n            <span class=\"is-dashed\" v-tooltip=\"{content: trans('labels.literature_observations.found_on_tooltip')}\">\n              {{ trans('labels.literature_observations.found_on') }}\n            </span>\n          </label>\n\n          <b-input id=\"found_on\" name=\"found_on\" v-model=\"form.found_on\"/>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.literature_observations.time')\"\n          :type=\"form.errors.has('time') ? 'is-danger' : null\"\n          :message=\"form.errors.has('time') ? form.errors.first('time') : null\"\n        >\n          <b-timepicker\n            :value=\"time\"\n            @input=\"onTimeInput\"\n            :placeholder=\"trans('labels.literature_observations.click_to_select')\"\n            icon=\"clock-o\"\n            :mobile-native=\"false\"\n          >\n            <button type=\"button\" class=\"button is-danger\" @click=\"form.time = null\">\n              <b-icon icon=\"close\"></b-icon>\n            </button>\n          </b-timepicker>\n        </b-field>\n\n        <div class=\"columns\">\n          <div class=\"column\">\n            <div class=\"field\">\n              <label for=\"project\" class=\"label\">\n                <span class=\"is-dashed\" v-tooltip=\"{content: trans('labels.literature_observations.project_tooltip')}\">\n                  {{ trans('labels.literature_observations.project') }}\n                </span>\n              </label>\n\n              <b-input id=\"project\" name=\"project\" v-model=\"form.project\"/>\n\n              <p v-if=\"form.errors.has('project')\" v-html=\"form.errors.first('project')\" class=\"help\" :class=\"{ 'is-danger': form.errors.has('project') }\"/>\n            </div>\n          </div>\n\n          <div class=\"column\">\n            <div class=\"field\">\n              <label for=\"dataset\" class=\"label\">\n                {{ trans('labels.literature_observations.dataset') }}\n              </label>\n\n              <b-input id=\"dataset\" name=\"dataset\" v-model=\"form.dataset\"/>\n\n              <p v-if=\"form.errors.has('dataset')\" v-html=\"form.errors.first('dataset')\" class=\"help\" :class=\"{ 'is-danger': form.errors.has('dataset') }\"/>\n            </div>\n          </div>\n        </div>\n\n        <b-field\n          :label=\"trans('labels.literature_observations.observer')\"\n          :type=\"form.errors.has('observer') ? 'is-danger' : null\"\n          :message=\"form.errors.has('observer') ? form.errors.first('observer') : null\"\n        >\n          <b-input name=\"observer\" v-model=\"form.observer\"/>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.literature_observations.identifier')\"\n          :type=\"form.errors.has('identifier') ? 'is-danger' : null\"\n          :message=\"form.errors.has('identifier') ? form.errors.first('identifier') : null\"\n        >\n          <b-input name=\"identifier\" v-model=\"form.identifier\"/>\n        </b-field>\n      </div>\n    </div>\n\n    <b-field\n      :label=\"trans('labels.literature_observations.place_where_referenced_in_publication')\"\n      :type=\"form.errors.has('place_where_referenced_in_publication') ? 'is-danger' : null\"\n      :message=\"form.errors.has('place_where_referenced_in_publication') ? form.errors.first('place_where_referenced_in_publication') : null\"\n    >\n      <b-input v-model=\"form.place_where_referenced_in_publication\" :placeholder=\"trans('labels.literature_observations.place_where_referenced_in_publication_placeholder')\"/>\n    </b-field>\n\n    <hr>\n\n    <button\n      type=\"submit\"\n      class=\"button is-primary\"\n      :class=\"{\n        'is-loading': submittingWithRedirect\n      }\"\n      @click.prevent=\"submitWithRedirect\"\n      v-tooltip=\"{content: trans('labels.literature_observations.save_tooltip')}\"\n    >\n      {{ trans('buttons.save') }}\n    </button>\n\n    <button\n      type=\"submit\"\n      class=\"button is-primary\"\n      :class=\"{\n        'is-outlined': !submittingWithoutRedirect,\n        'is-loading': submittingWithoutRedirect\n      }\"\n      @click.prevent=\"submitWithoutRedirect\"\n      v-if=\"submitMore\"\n      v-tooltip=\"{content: trans('labels.literature_observations.save_more_tooltip')}\">\n      {{ trans('buttons.save_more') }}\n    </button>\n\n    <button\n      type=\"button\"\n      class=\"button is-primary\"\n      :class=\"{\n        'is-outlined': !submittingWithoutRedirectWithSameTaxon,\n        'is-loading': submittingWithoutRedirectWithSameTaxon\n      }\"\n      @click.prevent=\"submitWithoutRedirectWithSameTaxon\"\n      v-if=\"submitMoreWithSameTaxon\"\n      v-tooltip=\"{content: trans('labels.literature_observations.save_more_same_taxon_tooltip')}\">\n      {{ trans('labels.literature_observations.save_more_same_taxon') }}\n    </button>\n\n    <a :href=\"cancelUrl\" class=\"button is-text\" @click=\"onCancel\">{{ trans('buttons.cancel') }}</a>\n  </form>\n</template>\n\n<script>\nimport Form from 'form-backend-validation'\nimport dayjs from '@/dayjs'\nimport _get from 'lodash/get'\nimport _find from 'lodash/find'\nimport _pick from 'lodash/pick'\nimport FormMixin from '@/mixins/FormMixin'\nimport PersistentForm from '@/mixins/PersistentForm'\nimport NzDateInput from '@/components/inputs/DateInput'\nimport NzSpatialInput from '@/components/inputs/SpatialInput'\nimport NzPublicationAutocomplete from '@/components/inputs/PublicationAutocomplete'\nimport NzTaxonAutocomplete from '@/components/inputs/TaxonAutocomplete'\n\nexport default {\n  name: 'nzLiteratureObservationForm',\n\n  mixins: [PersistentForm, FormMixin],\n\n  components: {\n    NzDateInput,\n    NzSpatialInput,\n    NzPublicationAutocomplete,\n    NzTaxonAutocomplete\n  },\n\n  props: {\n    submitMoreWithSameTaxon: Boolean,\n\n    observation: {\n      type: Object,\n      default() {\n        return {\n          original_date: null,\n          original_locality: null,\n          original_elevation: null,\n          original_coordinates: null,\n          original_identification: null,\n          original_identification_validity: null,\n          other_original_data: null,\n          collecting_start_year: null,\n          collecting_start_month: null,\n          collecting_end_year: null,\n          collecting_end_month: null,\n          place_where_referenced_in_publication: null,\n          publication_id: null,\n          taxon_id: null,\n          year: dayjs().year(),\n          month: dayjs().month() + 1,\n          day: dayjs().date(),\n          is_original_data: true,\n          cited_publication_id: null,\n          latitude: null,\n          longitude: null,\n          location: null,\n          accuracy: null,\n          elevation: null,\n          minimum_elevation: null,\n          maximum_elevation: null,\n          georeferenced_by: null,\n          georeferenced_date: null,\n\n          observer: null,\n          identifier: null,\n          note: null,\n          sex: null,\n          number: null,\n          project: null,\n          found_on: null,\n          habitat: null,\n          stage_id: null,\n          time: null,\n          dataset: null,\n\n          taxon: null,\n          publication: null,\n          cited_publication: null\n        }\n      }\n    },\n\n    sexes: {\n      type: Object,\n      default: () => ({})\n    },\n\n    validityOptions: {\n      type: [Array, Object],\n      default: () => []\n    }\n  },\n\n  data() {\n    return {\n      keepAfterSubmit: this.getAttributesToKeep(),\n      submittingWithoutRedirectWithSameTaxon: false,\n      locale: window.App.locale,\n      taxonName: _get(this.observation, 'taxon.name', ''),\n      publicationCitation: _get(this.observation, 'publication.citation', ''),\n      citedPublication: _get(this.observation, 'cited_publication.citation', '')\n    }\n  },\n\n  computed: {\n    stages() {\n      return this.form.taxon\n        ? this.form.taxon.stages\n        : []\n    },\n\n    time() {\n      return this.form.time\n        ? dayjs(this.form.time, 'HH:mm').toDate()\n        : null\n    },\n\n    georeferencedDate: {\n      get() {\n        const val = dayjs(this.form.georeferenced_date)\n\n        return val.isValid() ? val.toDate() : null\n      },\n\n      set(value) {\n        this.form.georeferenced_date = dayjs(value).format('YYYY-MM-DD')\n      }\n    }\n  },\n\n  created() {\n    this.restoreState()\n  },\n\n  methods: {\n    otherPersistentKeys() {\n      return ['taxonName', 'publicationCitation', 'citedPublication']\n    },\n\n    /**\n     * Create new form instance.\n     *\n     * @return {Form}\n     */\n    newForm() {\n      return new Form({\n        ...this.observation,\n        reason: null\n      }, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Handle taxon being selected.\n     *\n     * @param {Object} value\n     */\n    onTaxonSelect(taxon) {\n      this.form.taxon = taxon || null\n      this.form.taxon_id = taxon ? taxon.id : null\n      this.taxonName = taxon ? taxon.name : null\n\n      const invalidStage = !_find(this.stages, stage => stage.id === this.form.stage_id)\n\n      if (invalidStage) {\n        this.form.stage_id = null\n      }\n    },\n\n    /**\n     * Handle publication being selected.\n     *\n     * @param {Object} value\n     */\n    onPublicationSelect(publication) {\n      this.form.publication = publication || null\n      this.form.publication_id = publication ? publication.id : null\n      this.publicationCitation = publication ? publication.citation : null\n    },\n\n    /**\n     * Handle cited publication being selected.\n     *\n     * @param {Object} value\n     */\n    onCitedPublicationSelect(publication) {\n      this.form.cited_publication = publication || null\n      this.form.cited_publication_id = publication ? publication.id : null\n      this.citedPublication = publication ? publication.citation : null\n    },\n\n    /**\n     * Set time.\n     */\n    onTimeInput(value) {\n      this.form.time = value ? dayjs(value).format('HH:mm') : null\n    },\n\n    /**\n     * Attributes to keep after submit without redirect.\n     *\n     * @return {Array}\n     */\n    getAttributesToKeep() {\n      return [\n        'location',\n        'accuracy',\n        'elevation',\n        'latitude',\n        'longitude',\n        'year',\n        'month',\n        'day',\n        'project',\n        'observer',\n        'identifier',\n        'dataset',\n        'publication',\n        'publication_id',\n        'cited_publication',\n        'cited_publication_id',\n        'is_original_data',\n        'minimum_elevation',\n        'maximum_elevation',\n        'original_locality',\n        'original_elevation',\n        'original_coordinates',\n        'georeferenced_by',\n        'georeferenced_date'\n      ]\n    },\n\n    hookAfterSubmitWithoutRedirect() {\n      this.taxonName = ''\n    },\n\n    handleIsOriginalDataInput(value) {\n      if (value) {\n        this.onCitedPublicationSelect(null)\n      }\n\n      this.form.is_original_data = value\n    },\n\n    addNewPublication() {\n      this.saveState()\n\n      window.location.href = route('admin.publications.create')\n    },\n\n    dateFormater(date) {\n      return dayjs(date).format('DD.MM.YYYY')\n    },\n\n    handleElevationFetched(elevation) {\n      this.form.minimum_elevation = elevation\n      this.form.maximum_elevation = elevation\n    },\n\n    /**\n     * Submit the form and stay to add more, with same taxon.\n     */\n    submitWithoutRedirectWithSameTaxon() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirectWithSameTaxon)\n\n      this.performSubmitWithoutRedirectWithSameTaxon()\n    },\n\n    /**\n     * Submit the form and stay to add more, with same taxon.\n     */\n    performSubmitWithoutRedirectWithSameTaxon(reason = null) {\n      this.submittingWithoutRedirectWithSameTaxon = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithoutRedirectWithSameTaxon)\n          .catch(error => {\n            this.submittingWithoutRedirectWithSameTaxon = false\n            this.onFailedSubmit(error)\n          })\n    },\n\n    /**\n     * Handle successful form submit with no redirect.\n     */\n    onSuccessfulSubmitWithoutRedirectWithSameTaxon() {\n      this.submittingWithoutRedirectWithSameTaxon = false\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // Reset the form but remember some data.\n      const keep = _pick(this.form.data(), this.keepAfterSubmit.concat([\n        'original_identification_validity', 'place_where_referenced_in_publication',\n        'taxon', 'taxon_id', 'original_identification',\n      ]))\n      this.form.reset()\n      this.form.populate(keep)\n    },\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiteratureObservationForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiteratureObservationForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LiteratureObservationForm.vue?vue&type=template&id=33a205a0&\"\nimport script from \"./LiteratureObservationForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LiteratureObservationForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-publication-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-autocomplete',{attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"citation\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.citation)+\"\\n          \")])])]}}])}),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-field :label=\"label\" class=\"nz-publication-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\n    <b-field grouped>\n      <b-autocomplete\n        :value=\"value\"\n        :data=\"data\"\n        field=\"citation\"\n        :loading=\"loading\"\n        @input=\"onInput\"\n        @select=\"onSelect\"\n        :icon=\"icon\"\n        :placeholder=\"placeholder\"\n        expanded\n        :autofocus=\"autofocus\"\n        :disabled=\"disabled\"\n      >\n        <template slot-scope=\"props\">\n          <div class=\"media\">\n            <div class=\"media-content\">\n              {{ props.option.citation }}\n            </div>\n          </div>\n        </template>\n      </b-autocomplete>\n\n      <slot />\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport axios from 'axios'\nimport _debounce from 'lodash/debounce'\nimport _get from 'lodash/get'\n\nexport default {\n  name: 'nzPublicationAutocomplete',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Publication'\n    },\n    placeholder: {\n      type: String,\n      default: 'Search for publication...'\n    },\n    publication: {\n      type: Object,\n      default: null\n    },\n    route: {\n      type: String,\n      default: 'api.autocomplete.publications.index'\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    error: Boolean,\n    message: {\n      type: String,\n      default: null\n    },\n    except: {},\n    autofocus: Boolean,\n    disabled: Boolean\n  },\n\n  data() {\n    return {\n      data: [],\n      selected: this.publication || null,\n      loading: false\n    }\n  },\n\n  computed: {\n    icon() {\n      return this.selected ? 'check' : 'search'\n    }\n  },\n\n  watch: {\n    publication(value) {\n      this.selected = value\n    }\n  },\n\n  methods: {\n    fetchData: _debounce(function() {\n      if (!this.value) return\n\n      this.data = []\n      this.loading = true\n\n      let params = {\n        citation: this.value,\n      }\n\n      if (this.except) {\n        params.except = this.except\n      }\n\n      axios.get(route(this.route), { params }).then(({ data }) => {\n        data.data.forEach((item) => this.data.push(item))\n        this.loading = false\n      }, response => {\n        this.loading = false\n      })\n    }, 500),\n\n    onSelect(user) {\n      this.selected = user\n\n      this.$emit('select', user)\n    },\n\n    onInput(value) {\n      const currentValue = this.getValue(this.selected)\n      if (currentValue && currentValue !== value) {\n          this.onSelect(null)\n      }\n\n      this.$emit('input', value)\n\n      this.fetchData()\n    },\n\n    focusOnInput() {\n      this.$el.querySelector('input').focus()\n    },\n\n    /**\n     * Return display text for the input.\n     * If object, get value from path, or else just the value.\n     */\n    getValue(option) {\n      if (!option) return\n\n      return typeof option === 'object'\n        ? _get(option, 'citation')\n        : option\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationAutocomplete.vue?vue&type=template&id=84ec607a&\"\nimport script from \"./PublicationAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","class ExpiringStorage {\n  get(key) {\n    const cached = JSON.parse(\n      localStorage.getItem(key)\n    )\n\n    if (! cached) {\n      return null\n    }\n\n    const expires = new Date(cached.expires)\n\n    if (expires < new Date()) {\n      localStorage.removeItem(key)\n      return null\n    }\n\n    return cached.value\n  }\n\n  has(key) {\n    return this.get(key) !== null\n  }\n\n  set(key, value, lifeTimeInMinutes) {\n    const currentTime = new Date().getTime()\n\n    const expires = new Date(currentTime + lifeTimeInMinutes * 60000)\n\n    localStorage.setItem(key, JSON.stringify({ value, expires }))\n  }\n\n  delete(key) {\n    const cached = this.get(key)\n\n    if (cached) {\n      localStorage.removeItem(key)\n    }\n  }\n}\n\nexport default new ExpiringStorage()\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spatial-input\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.field_observations.map')}},[_c('gmap-map',{staticStyle:{\"width\":\"100%\",\"min-height\":\"400px\"},attrs:{\"center\":_vm.centerCoordinates,\"zoom\":_vm.center.zoom,\"options\":{streetViewControl:false}},on:{\"click\":_vm.setMarker,\"zoom_changed\":_vm.onZoomChanged}},[_c('gmap-marker',{attrs:{\"position\":_vm.position,\"clickable\":true,\"draggable\":true},on:{\"dragend\":_vm.setMarker}}),_vm._v(\" \"),(_vm.position && _vm.newAccuracy)?_c('gmap-circle',{attrs:{\"center\":_vm.position,\"radius\":_vm.newAccuracy,\"editable\":true,\"options\":{ strokeWeight: .75 }},on:{\"radius_changed\":_vm.updateRadius}}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"has-text-right\"},[(_vm.mapHasErrors)?_c('span',{staticClass:\"has-text-danger is-size-7\"},[_vm._v(_vm._s(_vm.trans('Some fields have errors')))]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button is-white is-small is-text\",class:{'has-text-danger': _vm.mapHasErrors},attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showDetails = !_vm.showDetails}}},[_vm._v(_vm._s(_vm.trans('labels.field_observations.details')))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDetails),expression:\"showDetails\"}]},[_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.latitude')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('latitude')},attrs:{\"placeholder\":\"f.e. 42.5234\"},domProps:{\"value\":_vm.latitude},on:{\"input\":_vm.onLatitudeInput}})]),_vm._v(\" \"),(_vm.errors.has('latitude'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('latitude'))}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.longitude')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('longitude')},attrs:{\"placeholder\":\"f.e. 19.1234\"},domProps:{\"value\":_vm.longitude},on:{\"input\":_vm.onLongitudeInput}})]),_vm._v(\" \"),(_vm.errors.has('longitude'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('longitude'))}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.accuracy_m')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",attrs:{\"placeholder\":\"f.e. 100\"},domProps:{\"value\":_vm.accuracy},on:{\"input\":_vm.onAccuracyInput}})]),_vm._v(\" \"),(_vm.errors.has('accuracy'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('accuracy'))}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.elevation_m')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",attrs:{\"placeholder\":\"f.e. 500\"},domProps:{\"value\":_vm.elevation},on:{\"input\":_vm.onElevationInput}})]),_vm._v(\" \"),(_vm.errors.has('elevation'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('elevation'))}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.location')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('location')},attrs:{\"placeholder\":\"Location\"},domProps:{\"value\":_vm.location},on:{\"input\":_vm.onLocationInput}})]),_vm._v(\" \"),(_vm.errors.has('location'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('location'))}}):_vm._e()]),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpatialInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpatialInput.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"spatial-input\">\n    <b-field :label=\"trans('labels.field_observations.map')\" class=\"is-required\">\n      <gmap-map\n        style=\"width: 100%; min-height: 400px\"\n        :center=\"centerCoordinates\"\n        :zoom=\"center.zoom\"\n        @click=\"setMarker\"\n        @zoom_changed=\"onZoomChanged\"\n        :options=\"{streetViewControl:false}\"\n      >\n        <gmap-marker\n          :position=\"position\"\n          :clickable=\"true\"\n          :draggable=\"true\"\n          @dragend=\"setMarker\"\n        />\n\n        <gmap-circle\n          v-if=\"position && newAccuracy\"\n          :center=\"position\"\n          :radius=\"newAccuracy\"\n          :editable=\"true\"\n          @radius_changed=\"updateRadius\"\n          :options=\"{ strokeWeight: .75 }\"\n        />\n      </gmap-map>\n    </b-field>\n\n    <div class=\"has-text-right\">\n      <span v-if=\"mapHasErrors\" class=\"has-text-danger is-size-7\">{{ trans('Some fields have errors') }}</span>\n\n      <button type=\"button\" class=\"button is-white is-small is-text\" :class=\"{'has-text-danger': mapHasErrors}\" @click=\"showDetails = !showDetails\">{{ trans('labels.field_observations.details') }}</button>\n    </div>\n\n    <div v-show=\"showDetails\">\n      <div class=\"field is-grouped\">\n        <div class=\"field is-expanded is-required\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.latitude') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :class=\"{'is-danger': errors.has('latitude')}\" :value=\"latitude\" @input=\"onLatitudeInput\" placeholder=\"f.e. 42.5234\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('latitude')\" v-text=\"errors.first('latitude')\"></p>\n        </div>\n\n        <div class=\"field is-expanded is-required\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.longitude') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :class=\"{'is-danger': errors.has('longitude')}\" :value=\"longitude\" @input=\"onLongitudeInput\" placeholder=\"f.e. 19.1234\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('longitude')\" v-text=\"errors.first('longitude')\"></p>\n        </div>\n      </div>\n\n      <div class=\"field is-grouped\">\n        <div class=\"field is-expanded\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.accuracy_m') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :value=\"accuracy\" @input=\"onAccuracyInput\" placeholder=\"f.e. 100\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('accuracy')\" v-text=\"errors.first('accuracy')\"></p>\n        </div>\n\n        <div class=\"field is-expanded is-required\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.elevation_m') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :value=\"elevation\" @input=\"onElevationInput\" placeholder=\"f.e. 500\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('elevation')\" v-text=\"errors.first('elevation')\"></p>\n        </div>\n      </div>\n\n      <div class=\"field is-expanded\">\n        <label class=\"label is-small\">{{ trans('labels.field_observations.location') }}</label>\n\n        <div class=\"control is-fullwidth\">\n          <input class=\"input is-small\" :class=\"{'is-danger': errors.has('location')}\" :value=\"location\" @input=\"onLocationInput\" placeholder=\"Location\">\n        </div>\n\n        <p class=\"help is-danger\" v-if=\"errors.has('location')\" v-text=\"errors.first('location')\"></p>\n      </div>\n\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script>\nimport _debounce from 'lodash/debounce'\n\nconst ZOOM_ONE = 6144000\n\nexport default {\n  name: 'nzSpatialInput',\n\n  props: {\n    accuracy: Number,\n    elevation: {\n      type: Number,\n      default: 100\n    },\n    latitude: {\n      type: Number,\n      default: 41.0\n    },\n    longitude: {\n      type: Number,\n      default: 19.0\n    },\n    location: {\n      type: [String, Number],\n      default: ''\n    },\n    errors: {\n      type: Object,\n      default() {\n        return {}\n      }\n    },\n    hasOtherErrors: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      emptyAccuracy: this.calculateEmptyAccuracy(window.App.gmaps.center.zoom),\n      showDetails: false,\n      elevationService: null,\n      center: window.App.gmaps.center\n    }\n  },\n\n  computed: {\n    /**\n     * Position object from coordinates.\n     *\n     * @return {Object}\n     */\n    position() {\n      if (!this.coordinatesSet) {\n        return null\n      }\n\n      return {lat: this.latitude, lng: this.longitude}\n    },\n\n    /**\n     * Check if coordinate are set.\n     *\n     * @return {Boolean}\n     */\n    coordinatesSet() {\n      return !(isNaN(this.latitude)||\n        this.latitude === null ||\n        isNaN(this.longitude) ||\n        this.longitude === null\n      )\n    },\n\n    /**\n     * Check if any of the fields has an error.\n     *\n     * @return {Boolean}\n     */\n    mapHasErrors() {\n      return this.hasOtherErrors ||\n          this.errors.has('latitude') ||\n          this.errors.has('longitude') ||\n          this.errors.has('elevation') ||\n          this.errors.has('accuracy') ||\n          this.errors.has('location')\n    },\n\n    newAccuracy () {\n      return this.accuracy || this.emptyAccuracy\n    },\n\n    centerCoordinates() {\n      return this.position || {\n        lat: this.center.latitude,\n        lng: this.center.longitude\n      }\n    }\n  },\n\n  watch: {\n    /**\n     * Get elevation when coordinates change.\n     */\n    position(value) {\n      if (this.coordinatesSet) {\n        this.getElevation(value)\n      }\n    },\n  },\n\n  created() {\n    this.setCurrentLocationAsMapCenter()\n  },\n\n  methods: {\n    /**\n     * Cast to number or null.\n     *\n     * @param  {any} value\n     * @return {Number}\n     */\n    castNumber(value) {\n      return isNaN(value) || value === '' ? null : Number(value)\n    },\n\n    /**\n     * Handle location input.\n     * @param {Object} event\n     */\n    onLocationInput(event) {\n      this.updateLocation(event.target.value)\n    },\n\n    /**\n     * Sync location property.\n     *\n     * @param {String} value\n     */\n    updateLocation(value) {\n      this.$emit('update:location', value)\n    },\n\n    /**\n     * Handle longitude input.\n     * @param  {[type]} event [description]\n     * @return {[type]}       [description]\n     */\n    onLongitudeInput: _debounce(function (event) {\n      this.updateLongitude(event.target.value)\n    }, 1000),\n\n    /**\n     * Sync longitude property.\n     *\n     * @param {Number} value\n     */\n    updateLongitude(value) {\n      this.$emit('update:longitude', this.castNumber(value))\n    },\n\n    /**\n     * Handle latitude input.\n     *\n     * @param {Object} event\n     */\n    onLatitudeInput: _debounce(function (event) {\n      this.updateLatitude(event.target.value)\n    }, 1000),\n\n    /**\n     * Sync latitude property.\n     *\n     * @param {Number} value\n     */\n    updateLatitude(value) {\n      this.$emit('update:latitude', this.castNumber(value))\n    },\n\n    /**\n    * Handle accuracy input.\n    *\n    * @param {Object} event\n    */\n    onAccuracyInput: _debounce(function (event) {\n      this.updateAccuracy(event.target.value)\n    }, 1000),\n\n    /**\n     * Sync accuracy property.\n     *\n     * @param {Number} value\n     */\n    updateAccuracy(value) {\n      this.$emit('update:accuracy', this.castNumber(value))\n    },\n\n    /**\n     * Handle elevation input.\n     *\n     * @param {Object} event\n     */\n    onElevationInput(event) {\n      this.updateElevation(event.target.value)\n    },\n\n    /**\n     * Sync elevation property.\n     *\n     * @param {Number} value\n     */\n    updateElevation(value) {\n      this.$emit('update:elevation', this.castNumber(value))\n    },\n\n    /**\n     * Update coordinates from marker position.\n     *\n     * @param {Object} position\n     */\n    setMarker(position) {\n      let lat = position.latLng.lat()\n      let lng = position.latLng.lng()\n\n      this.updateLatitude(lat)\n      this.updateLongitude(lng)\n    },\n\n    /**\n     * Update accuracy from circle radius on gmaps.\n     *\n     * @param  {Number} value\n     */\n    updateRadius(value) {\n      let radius = parseInt(value)\n\n      if (this.accuracy === null && radius === this.emptyAccuracy) {\n        return\n      }\n\n      this.updateAccuracy(radius)\n    },\n\n    /**\n     * Get elevation using Google's service.\n     *\n     * @param  {Object} position\n     */\n    getElevation(position) {\n      // Do nothing if we still don't have gmaps library loaded.\n      if (!google || !google.maps || !google.maps.ElevationService) {\n        return\n      }\n\n      // We don't initialize service when component is created\n      // because Gmap library probably isn't loaded yet,\n      // so we do it on first use of this method.\n      if (!this.elevationService) {\n        this.elevationService = new google.maps.ElevationService()\n      }\n\n      this.elevationService.getElevationForLocations({\n        locations: [position]\n      }, (results, status) => {\n        if (status != google.maps.ElevationStatus.OK || !results.length) {\n          return\n        }\n\n        const elevation = parseInt(results[0].elevation)\n\n        this.$emit('elevation-fetched', elevation)\n\n        this.updateElevation(elevation)\n      })\n    },\n\n    /**\n     * Recalculate default accuracy when zoom is changed.\n     * @param  {Number} zoom\n     */\n    onZoomChanged(zoom) {\n      this.emptyAccuracy = this.calculateEmptyAccuracy(zoom)\n    },\n\n    /**\n     * Calculate accuracy based on map zoom.\n     * @param  {Number} zoom\n     * @return {Number}\n     */\n    calculateEmptyAccuracy(zoom) {\n      return parseInt(ZOOM_ONE / Math.pow(2, zoom))\n    },\n\n    /**\n     * Use browser location to set map center.\n     */\n    setCurrentLocationAsMapCenter() {\n      // We don't want to use this feature if the marker is set.\n      if (!navigator.geolocation || this.position) {\n        return\n      }\n\n      navigator.geolocation.getCurrentPosition(position => {\n        if (this.position) {\n          return\n        }\n\n        this.center.latitude = position.coords.latitude\n        this.center.longitude = position.coords.longitude\n        this.center.zoom = 10\n      })\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./SpatialInput.vue?vue&type=template&id=6d8e5d56&\"\nimport script from \"./SpatialInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SpatialInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Form from 'form-backend-validation'\nimport _pick from 'lodash/pick'\nimport _get from 'lodash/get'\nimport _isEqual from 'lodash/isEqual'\n\n\nexport default {\n  name: 'nzFieldObservationForm',\n\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n\n    method: {\n      type: String,\n      default: 'POST'\n    },\n\n    redirectUrl: String,\n    cancelUrl: String,\n\n    submitMore: Boolean,\n    shouldConfirmSubmit: Boolean,\n    confirmSubmitMessage: {\n      type: String,\n      default() {\n        return this.trans('You are about to submit')\n      }\n    },\n    shouldAskReason: Boolean,\n    shouldConfirmCancel: Boolean,\n    submitOnlyDirty: Boolean,\n    submitOnlyDirtyMessage: {\n      type: String,\n      default() {\n        return this.trans('There are no changes, the data will not be saved.')\n      }\n    }\n  },\n\n  data() {\n    return {\n      form: this.newForm(),\n      keepAfterSubmit: [],\n      submittingWithRedirect: false,\n      submittingWithoutRedirect: false,\n      confirmingSubmit: false,\n      confirmingCancel: false,\n      locale: window.App.locale\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.registerKeyListener)\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.registerKeyListener)\n  },\n\n  methods: {\n    /**\n     * Create new form instance.\n     *\n     * @param  {Object} data default form data\n     * @return {Form}\n     */\n    newForm(data = {}) {\n      return new Form(data, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Keyboard shortcuts.\n     *\n     * @param {Event} e\n     */\n    registerKeyListener(e) {\n      const enter = 13 === (e.which || e.keyCode)\n\n      if (e.ctrlKey && e.shiftKey && enter) {\n        this.submitMore && this.submitWithoutRedirect()\n      } else if (e.ctrlKey && enter) {\n        this.submitWithRedirect()\n      }\n    },\n\n    /**\n     * Confirm submit.\n     *\n     * @param {Function} onConfirm\n     */\n    confirmSubmit(onConfirm) {\n      if (this.confirmingSubmit) return\n\n      this.confirmingSubmit = true\n\n      const options = {\n        message: this.confirmSubmitMessage,\n        confirmText: this.trans('buttons.save'),\n        cancelText: this.trans('buttons.cancel'),\n        onConfirm,\n        onCancel: () => { this.confirmingSubmit = false }\n      }\n\n      if (!this.shouldAskReason) {\n        return this.$buefy.dialog.confirm(options)\n      }\n\n      return this.promptForReason(options)\n    },\n\n    /**\n     * Prompt the user for reason of change.\n     *\n     * @param  {Object} options\n     * @return {Vue}\n     */\n    promptForReason(options) {\n      const dialog = this.$buefy.dialog.prompt({\n        ...options,\n        inputAttrs: {\n            placeholder: this.trans('Reason'),\n            required: true,\n            maxlength: 255\n        }\n      })\n\n      // Custom localized validation for the prompt input.\n      dialog.$nextTick(() => {\n        dialog.$refs.input.addEventListener('invalid', (e) => {\n          e.target.setCustomValidity('')\n\n          if (!e.target.validity.valid) {\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\n          }\n        })\n\n        dialog.$refs.input.addEventListener('input', (e) => {\n          dialog.validationMessage = null\n        })\n      })\n\n      return dialog\n    },\n\n    /**\n     * Notify the user there are no changes.\n     */\n    notifyNoChanges() {\n      this.$buefy.toast.open({\n        message: this.submitOnlyDirtyMessage,\n        type: 'is-info'\n      })\n    },\n\n    /**\n     * Notify the user there are no changes and redirect.\n     */\n    notifyNoChangesAndRedirect() {\n      this.notifyNoChanges()\n\n      setTimeout(() => {\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    submitWithRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\n\n      this.performSubmitWithRedirect()\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    performSubmitWithRedirect(reason = null) {\n      this.submittingWithRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with redirect.\n     */\n    onSuccessfulSubmitWithRedirect() {\n      this.form.processing = true\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // We want to wait a bit before we send the user to redirect route\n      // so we can show the message that the action was successful.\n      setTimeout(() => {\n        this.form.processing = false\n        this.submittingWithRedirect = false\n\n        this.hookAfterSubmitWithRedirect()\n\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Perform after submit with redirect is successful.\n     */\n    hookAfterSubmitWithRedirect() {},\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    submitWithoutRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\n\n      this.performSubmitWithoutRedirect()\n    },\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    performSubmitWithoutRedirect(reason = null) {\n      this.submittingWithoutRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithoutRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with no redirect.\n     */\n    onSuccessfulSubmitWithoutRedirect() {\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // Reset the form but remember some data.\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\n      this.form.reset()\n      this.form.populate(keep)\n\n      this.hookAfterSubmitWithoutRedirect()\n    },\n\n    /**\n     * Perform after submit without redirect is successful.\n     */\n    hookAfterSubmitWithoutRedirect() {},\n\n    /**\n     * Handle failed form submit.\n     *\n     * @param {Error} error\n     */\n    onFailedSubmit(error) {\n      this.submittingWithRedirect = false\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        duration: 2500,\n        message: _get(error, 'response.data.message', error.message),\n        type: 'is-danger'\n      })\n    },\n\n    /**\n     * Check if form is changed.\n     *\n     * @return {Boolean}\n     */\n    isDirty() {\n      return ! _isEqual(this.form.data(), this.form.initial)\n    },\n\n    /**\n     * Confirmation dialog for canceling.\n     */\n    confirmCancel() {\n      if (this.confirmingCancel) return\n\n      this.confirmingCancel = true\n\n      this.$buefy.dialog.confirm({\n        message: this.trans('If you leave this page changes will not be saved.'),\n        onConfirm: () => {\n          this.confirmingCancel = false\n          window.location.href = this.cancelUrl\n        },\n        onCancel: () => { this.confirmingCancel = false },\n        cancelText: this.trans('buttons.stay_on_page'),\n        confirmText: this.trans('buttons.leave_page'),\n      })\n    },\n\n    /**\n     * Handle cancel button/link.\n     *\n     * @param {Event} event\n     */\n    onCancel(event) {\n      if (this.shouldConfirmCancel && this.isDirty()) {\n        event.preventDefault()\n\n        this.confirmCancel()\n      }\n    }\n  }\n}\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-taxon-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[(_vm.haveThumbnail)?_c('img',{attrs:{\"width\":\"32\",\"src\":this.selected.thumbnail_url}}):_vm._e(),_vm._v(\" \"),_c('b-autocomplete',{ref:\"autocomplete\",attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.enterPressed($event)}},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-left\"},[(props.option.thumbnail_url)?_c('img',{attrs:{\"width\":\"32\",\"src\":props.option.thumbnail_url}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.name)+_vm._s(props.option.native_name ? (\" (\" + (props.option.native_name) + \")\") : '')+\"\\n          \")])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-field :label=\"label\" class=\"nz-taxon-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\n    <b-field grouped>\n      <img width=\"32\" :src=\"this.selected.thumbnail_url\" v-if=\"haveThumbnail\">\n\n      <b-autocomplete\n        ref=\"autocomplete\"\n        :value=\"value\"\n        :data=\"data\"\n        field=\"name\"\n        :loading=\"loading\"\n        @input=\"onInput\"\n        @select=\"onSelect\"\n        :icon=\"icon\"\n        :placeholder=\"placeholder\"\n        expanded\n        :autofocus=\"autofocus\"\n        @keydown.native.enter=\"enterPressed\"\n      >\n        <template slot-scope=\"props\">\n          <div class=\"media\">\n            <div class=\"media-left\">\n              <img width=\"32\" :src=\"props.option.thumbnail_url\" v-if=\"props.option.thumbnail_url\">\n            </div>\n\n            <div class=\"media-content\">\n              {{ props.option.name }}{{ props.option.native_name ? ` (${props.option.native_name})` : ''}}\n            </div>\n          </div>\n        </template>\n\n      </b-autocomplete>\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport axios from 'axios'\nimport _debounce from 'lodash/debounce'\nimport _get from 'lodash/get'\n\nexport default {\n  name: 'nzTaxonAutocomplete',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Taxon'\n    },\n    placeholder: {\n      type: String,\n      default: 'Search for taxon...'\n    },\n    taxon: {\n      type: Object,\n      default: null\n    },\n    url: {\n      type: String,\n      default: () => route('api.taxa.index')\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    error: Boolean,\n    message: {\n      type: String,\n      default: null\n    },\n    except: {},\n    autofocus: Boolean\n  },\n\n  data() {\n    return {\n      data: [],\n      selected: this.taxon || null,\n      loading: false\n    }\n  },\n\n  computed: {\n    haveThumbnail() {\n      return this.selected && this.selected.thumbnail_url\n    },\n\n    icon() {\n      return this.selected ? 'check' : 'search'\n    }\n  },\n\n  watch: {\n    taxon(value) {\n      this.selected = value\n    }\n  },\n\n  methods: {\n    fetchData: _debounce(function() {\n      if (!this.value) return\n\n      this.data = []\n      this.loading = true\n\n      let params = {\n        name: this.value,\n        limit: 20,\n      }\n\n      if (this.except) {\n        params.except = this.except\n      }\n\n      axios.get(this.url, {\n        params\n      }).then(({\n        data\n      }) => {\n        data.data.forEach(item => this.data.push(item))\n        this.loading = false\n      }, response => {\n        this.loading = false\n      })\n    }, 500),\n\n    onSelect(taxon) {\n      this.selected = taxon\n\n      this.$emit('select', taxon)\n    },\n\n    onInput(value) {\n      const currentValue = this.getValue(this.selected)\n      if (currentValue && currentValue !== value) {\n        this.onSelect(null)\n      }\n\n      this.$emit('input', value)\n\n      this.fetchData()\n    },\n\n    focusOnInput() {\n      this.$el.querySelector('input').focus()\n    },\n\n    /**\n     * Return display text for the input.\n     * If object, get value from path, or else just the value.\n     */\n    getValue(option) {\n      if (!option) return\n\n      return typeof option === 'object'\n        ? _get(option, 'name')\n        : option\n    },\n\n    enterPressed() {\n      if (!this.$refs.autocomplete.isActive) {\n        this.$emit('enter')\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonAutocomplete.vue?vue&type=template&id=cedb826c&\"\nimport script from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}