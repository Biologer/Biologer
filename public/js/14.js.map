{"version":3,"sources":["webpack:///./node_modules/lodash/isSet.js","webpack:///./resources/js/components/forms/CollectionObservationForm.vue?4b82","webpack:///resources/js/components/inputs/CollectionAutocomplete.vue","webpack:///./resources/js/components/inputs/CollectionAutocomplete.vue?c54f","webpack:///./resources/js/components/inputs/CollectionAutocomplete.vue","webpack:///./resources/js/components/inputs/CollectionAutocomplete.vue?5051","webpack:///resources/js/components/forms/CollectionObservationForm.vue","webpack:///./resources/js/components/forms/CollectionObservationForm.vue?7e84","webpack:///./resources/js/components/forms/CollectionObservationForm.vue","webpack:///./node_modules/lodash/cloneDeep.js","webpack:///./node_modules/lodash/_baseAssignIn.js","webpack:///./node_modules/lodash/_copySymbolsIn.js","webpack:///./node_modules/lodash/_getAllKeysIn.js","webpack:///./node_modules/lodash/_baseIsMap.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./node_modules/lodash/_baseClone.js","webpack:///./node_modules/lodash/last.js","webpack:///./node_modules/lodash/_baseUnset.js","webpack:///./node_modules/lodash/_copySymbols.js","webpack:///./node_modules/lodash/_baseAssign.js","webpack:///./node_modules/lodash/_cloneDataView.js","webpack:///./node_modules/lodash/_cloneRegExp.js","webpack:///./node_modules/lodash/_basePullAt.js","webpack:///./node_modules/lodash/_arrayEach.js","webpack:///./node_modules/lodash/_parent.js","webpack:///./resources/js/components/inputs/PhotoUpload.vue?b649","webpack:///./resources/js/Croppr.js","webpack:///./resources/js/components/ImageCropModal.vue?7cdd","webpack:///resources/js/components/ImageCropModal.vue","webpack:///./resources/js/components/inputs/PhotoUpload.vue?7763","webpack:///resources/js/components/inputs/PhotoUpload.vue","webpack:///./resources/js/components/ImageCropModal.vue","webpack:///./resources/js/components/ImageCropModal.vue?9faf","webpack:///./resources/js/components/inputs/PhotoUpload.vue","webpack:///./node_modules/lodash/_getSymbolsIn.js","webpack:///./node_modules/lodash/_cloneSymbol.js","webpack:///./resources/js/components/ImageModal.vue?e923","webpack:///./resources/js/components/ImageModal.vue?a0e2","webpack:///resources/js/components/ImageModal.vue","webpack:///./resources/js/components/ImageModal.vue","webpack:///./node_modules/lodash/_baseIsSet.js","webpack:///./node_modules/lodash/remove.js","webpack:///./node_modules/lodash/_initCloneByTag.js","webpack:///./node_modules/lodash/_initCloneArray.js","webpack:///./node_modules/lodash/isMap.js"],"names":["baseIsSet","baseUnary","nodeUtil","nodeIsSet","isSet","module","exports","name","props","label","type","String","default","placeholder","collection","Object","route","value","error","Boolean","message","except","autofocus","disabled","data","selected","this","loading","computed","icon","watch","publication","methods","fetchData","params","forEach","onSelect","user","$emit","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","option","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","scopedSlots","_u","key","fn","_v","_s","code","_t","mixins","PersistentForm","components","NzDateInput","NzPhotoUpload","NzSpatialInput","NzCollectionAutocomplete","NzTaxonAutocomplete","submitMoreWithSameTaxon","observation","original_date","original_locality","original_elevation","original_coordinates","original_identification","original_identification_validity","verbatim_tag","collecting_start_year","collecting_start_month","collecting_end_year","collecting_end_month","collecting_method","collector","collection_id","catalogue_number","cabinet_number","box_number","disposition","type_status","preparator","preparation_method","taxon_id","year","month","day","latitude","longitude","location","accuracy","elevation","minimum_elevation","maximum_elevation","georeferenced_by","georeferenced_date","observer","identifier","note","sex","number","project","found_on","habitat","stage_id","time","dataset","taxon","photos","licenses","sexes","dispositions","validityOptions","Array","keepAfterSubmit","getAttributesToKeep","submittingWithoutRedirectWithSameTaxon","locale","window","App","taxonName","collectionName","stages","form","georeferencedDate","get","val","isValid","toDate","set","months","dayjs","created","restoreState","otherPersistentKeys","newForm","reason","resetOnSuccess","onTaxonSelect","id","onCollectionSelect","onTimeInput","hookAfterSubmitWithoutRedirect","addNewCollection","saveState","href","dateFormater","handleElevationFetched","submitWithoutRedirectWithSameTaxon","processing","submitOnlyDirty","shouldConfirmSubmit","confirmSubmit","performSubmitWithoutRedirectWithSameTaxon","confirmingSubmit","shouldAskReason","method","toLowerCase","action","onSuccessfulSubmitWithoutRedirectWithSameTaxon","$buefy","toast","open","trans","reset","populate","keep","getObservationPhotoAttribute","attribute","updated","onPhotoUploaded","push","promptToExtractExifData","image","exifExtracted","exif","dialog","confirm","extractExifMessage","replace","cancelText","confirmText","onConfirm","onCancel","extractExifData","fillFromExif","onPhotoRemoved","onPhotoCropped","photoIndex","photo","crop","croppedImage","splice","onLicenseChanged","license","errors","has","first","model","callback","$$v","expression","$ziggy","$event","preventDefault","ref","$set","_l","domProps","_n","Date","length","stage","slot","directives","rawName","content","class","_e","index","submittingWithRedirect","submitWithRedirect","submittingWithoutRedirect","submitWithoutRedirect","cancelUrl","baseClone","CLONE_DEEP_FLAG","copyObject","keysIn","object","source","getSymbolsIn","baseGetAllKeys","getTag","isObjectLike","array","start","end","result","Stack","arrayEach","assignValue","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","initCloneArray","initCloneByTag","initCloneObject","isArray","isBuffer","isMap","isObject","keys","cloneableTags","bitmask","customizer","stack","isDeep","isFlat","isFull","undefined","isArr","tag","isFunc","stacked","subValue","add","keysFunc","castPath","last","parent","toKey","path","getSymbols","cloneArrayBuffer","dataView","buffer","constructor","byteOffset","byteLength","reFlags","regexp","exec","lastIndex","baseUnset","isIndex","prototype","indexes","previous","call","iteratee","baseGet","baseSlice","Croppr","actualWidth","imageEl","naturalWidth","actualHeight","naturalHeight","factorX","offsetWidth","factorY","offsetHeight","box","Box","Math","round","x","y","width","height","redraw","BaseCroppr","canCancel","imageUrl","newCrop","preserveRatio","mounted","document","addEventListener","ctrlIsPressed","ctrlIsNotPressed","beforeDestroy","removeEventListener","isActive","handleScroll","croppr","$nextTick","onCropEnd","onInitialize","setBoxToRealPosition","savedScrollTop","body","classList","toggle","style","top","documentElement","scrollTop","cropImage","close","e","which","options","aspectRatio","NzImageCropModal","animation","maxWidth","newWidth","cancel","NzImageModal","withCrop","uploading","headers","getImageDataUrl","canvas","createElement","setAttribute","img","getContext","drawImage","toDataURL","haveImage","showModal","thumbnailUrl","openCropModal","closeCropModal","hasExisting","remove","handleLicenseChanged","showCropModal","url","progress","text","arrayPush","getPrototype","stubArray","getOwnPropertySymbols","Symbol","symbolProto","symbolValueOf","valueOf","symbol","items","Number","newValue","active","openImage","handler","registerKeyListener","next","prev","onClose","component","baseIteratee","basePullAt","predicate","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","Ctor","hasOwnProperty","input","baseIsMap","nodeIsMap"],"mappings":"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","file":"js/14.js?id=8dbea7feec39d49b333f","sourcesContent":["var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"collection-observation-form\",attrs:{\"action\":_vm.action,\"method\":\"POST\",\"lang\":_vm.locale}},[_c('div',{staticClass:\"mb-8\"},[_c('nz-collection-autocomplete',{staticClass:\"is-required\",attrs:{\"collection\":_vm.form.collection,\"error\":_vm.form.errors.has('collection_id'),\"message\":_vm.form.errors.has('collection_id') ? _vm.form.errors.first('collection_id') : null,\"autofocus\":\"autofocus\",\"label\":_vm.trans('labels.collection_observations.collection'),\"placeholder\":_vm.trans('labels.collection_observations.search_for_collection')},on:{\"select\":_vm.onCollectionSelect},model:{value:(_vm.collectionName),callback:function ($$v) {_vm.collectionName=$$v},expression:\"collectionName\"}},[_c('a',{staticClass:\"button\",attrs:{\"title\":_vm.trans('labels.collection_observations.add_new_collection'),\"href\":_vm.$ziggy('admin.specimen-collections.create')},on:{\"click\":function($event){$event.preventDefault();return _vm.addNewCollection($event)}}},[_c('b-icon',{attrs:{\"icon\":\"plus\"}})],1)]),_vm._v(\" \"),_c('nz-taxon-autocomplete',{ref:\"taxonAutocomplete\",staticClass:\"is-required\",attrs:{\"taxon\":_vm.form.taxon,\"error\":_vm.form.errors.has('taxon_id'),\"message\":_vm.form.errors.has('taxon_id') ? _vm.form.errors.first('taxon_id') : null,\"autofocus\":\"autofocus\",\"label\":_vm.trans('labels.collection_observations.taxon'),\"placeholder\":_vm.trans('labels.collection_observations.search_for_taxon')},on:{\"select\":_vm.onTaxonSelect},model:{value:(_vm.taxonName),callback:function ($$v) {_vm.taxonName=$$v},expression:\"taxonName\"}}),_vm._v(\" \"),_c('nz-date-input',{attrs:{\"year\":_vm.form.year,\"month\":_vm.form.month,\"day\":_vm.form.day,\"errors\":_vm.form.errors,\"label\":_vm.trans('labels.collection_observations.date'),\"placeholders\":{\n          year: _vm.trans('labels.collection_observations.year'),\n          month: _vm.trans('labels.collection_observations.month'),\n          day: _vm.trans('labels.collection_observations.day')\n      }},on:{\"update:year\":function($event){return _vm.$set(_vm.form, \"year\", $event)},\"update:month\":function($event){return _vm.$set(_vm.form, \"month\", $event)},\"update:day\":function($event){return _vm.$set(_vm.form, \"day\", $event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.collection_observations.original_identification'),\"type\":_vm.form.errors.has('original_identification') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_identification') ? _vm.form.errors.first('original_identification') : null}},[_c('b-input',{attrs:{\"name\":\"original_identification\"},model:{value:(_vm.form.original_identification),callback:function ($$v) {_vm.$set(_vm.form, \"original_identification\", $$v)},expression:\"form.original_identification\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.collection_observations.original_identification_validity'),\"type\":_vm.form.errors.has('original_identification_validity') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_identification_validity') ? _vm.form.errors.first('original_identification_validity') : null}},[_c('b-select',{attrs:{\"name\":\"original_identification_validity\",\"expanded\":\"\"},model:{value:(_vm.form.original_identification_validity),callback:function ($$v) {_vm.$set(_vm.form, \"original_identification_validity\", $$v)},expression:\"form.original_identification_validity\"}},_vm._l((_vm.validityOptions),function(label,value){return _c('option',{key:value,domProps:{\"value\":value}},[_vm._v(_vm._s(label))])}),0)],1)],1)]),_vm._v(\" \"),_c('nz-spatial-input',{staticClass:\"mb-4\",attrs:{\"latitude\":_vm.form.latitude,\"longitude\":_vm.form.longitude,\"location\":_vm.form.location,\"accuracy\":_vm.form.accuracy,\"elevation\":_vm.form.elevation,\"errors\":_vm.form.errors,\"has-other-errors\":_vm.form.errors.has('minimum_elevation') || _vm.form.errors.has('maximum_elevation')},on:{\"update:latitude\":function($event){return _vm.$set(_vm.form, \"latitude\", $event)},\"update:longitude\":function($event){return _vm.$set(_vm.form, \"longitude\", $event)},\"update:location\":function($event){return _vm.$set(_vm.form, \"location\", $event)},\"update:accuracy\":function($event){return _vm.$set(_vm.form, \"accuracy\", $event)},\"update:elevation\":function($event){return _vm.$set(_vm.form, \"elevation\", $event)},\"elevation-fetched\":_vm.handleElevationFetched}},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.minimum_elevation_m'),\"type\":_vm.form.errors.has('minimum_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('minimum_elevation') ? _vm.form.errors.first('minimum_elevation') : null,\"custom-class\":\"is-small\"}},[_c('b-input',{attrs:{\"type\":\"number\",\"size\":\"is-small\"},model:{value:(_vm.form.minimum_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"minimum_elevation\", _vm._n($$v))},expression:\"form.minimum_elevation\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.maximum_elevation_m'),\"type\":_vm.form.errors.has('maximum_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('maximum_elevation') ? _vm.form.errors.first('maximum_elevation') : null,\"custom-class\":\"is-small\"}},[_c('b-input',{attrs:{\"type\":\"number\",\"size\":\"is-small\"},model:{value:(_vm.form.maximum_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"maximum_elevation\", _vm._n($$v))},expression:\"form.maximum_elevation\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.georeferenced_by'),\"type\":_vm.form.errors.has('georeferenced_by') ? 'is-danger' : null,\"message\":_vm.form.errors.has('georeferenced_by') ? _vm.form.errors.first('georeferenced_by') : null}},[_c('b-input',{model:{value:(_vm.form.georeferenced_by),callback:function ($$v) {_vm.$set(_vm.form, \"georeferenced_by\", _vm._n($$v))},expression:\"form.georeferenced_by\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.georeferenced_date'),\"type\":_vm.form.errors.has('georeferenced_date') ? 'is-danger' : null,\"message\":_vm.form.errors.has('georeferenced_date') ? _vm.form.errors.first('georeferenced_date') : null}},[_c('b-datepicker',{attrs:{\"max-date\":new Date(),\"mobile-native\":false,\"date-formatter\":_vm.dateFormater,\"first-day-of-week\":1,\"placeholder\":\"DD.MM.YYYY\"},model:{value:(_vm.georeferencedDate),callback:function ($$v) {_vm.georeferencedDate=$$v},expression:\"georeferencedDate\"}},[_c('button',{staticClass:\"button is-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.form.georeferenced_date = null}}},[_c('b-icon',{attrs:{\"icon\":\"close\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Clear\")])],1)])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.stage'),\"type\":_vm.form.errors.has('stage_id') ? 'is-danger' : null,\"message\":_vm.form.errors.has('stage_id') ? _vm.form.errors.first('stage_id') : null}},[_c('b-select',{attrs:{\"disabled\":!_vm.stages.length,\"expanded\":\"expanded\"},model:{value:(_vm.form.stage_id),callback:function ($$v) {_vm.$set(_vm.form, \"stage_id\", $$v)},expression:\"form.stage_id\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.collection_observations.choose_a_stage')))]),_vm._v(\" \"),_vm._l((_vm.stages),function(stage){return _c('option',{key:stage.id,domProps:{\"value\":stage.id,\"textContent\":_vm._s(_vm.trans('stages.'+stage.name))}})})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.sex'),\"type\":_vm.form.errors.has('sex') ? 'is-danger' : null,\"message\":_vm.form.errors.has('sex') ? _vm.form.errors.first('sex') : null}},[_c('b-select',{attrs:{\"expanded\":\"expanded\"},model:{value:(_vm.form.sex),callback:function ($$v) {_vm.$set(_vm.form, \"sex\", $$v)},expression:\"form.sex\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.collection_observations.choose_a_value')))]),_vm._v(\" \"),_vm._l((_vm.sexes),function(label,sex){return _c('option',{key:sex,domProps:{\"value\":sex,\"textContent\":_vm._s(label)}})})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.number'),\"type\":_vm.form.errors.has('number') ? 'is-danger' : null,\"message\":_vm.form.errors.has('number') ? _vm.form.errors.first('number') : null}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.number),callback:function ($$v) {_vm.$set(_vm.form, \"number\", $$v)},expression:\"form.number\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"mt-4\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.habitat'),\"type\":_vm.form.errors.has('habitat') ? 'is-danger' : null,\"message\":_vm.form.errors.has('habitat') ? _vm.form.errors.first('habitat') : null}},[_c('b-input',{model:{value:(_vm.form.habitat),callback:function ($$v) {_vm.$set(_vm.form, \"habitat\", $$v)},expression:\"form.habitat\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.found_on'),\"type\":_vm.form.errors.has('found_on') ? 'is-danger' : null,\"message\":_vm.form.errors.has('found_on') ? _vm.form.errors.first('found_on') : null}},[_c('label',{staticClass:\"label\",attrs:{\"slot\":\"label\",\"for\":\"found_on\"},slot:\"label\"},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.collection_observations.found_on_tooltip')}),expression:\"{content: trans('labels.collection_observations.found_on_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n                \"+_vm._s(_vm.trans('labels.collection_observations.found_on'))+\"\\n              \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"found_on\",\"name\":\"found_on\"},model:{value:(_vm.form.found_on),callback:function ($$v) {_vm.$set(_vm.form, \"found_on\", $$v)},expression:\"form.found_on\"}})],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.time'),\"type\":_vm.form.errors.has('time') ? 'is-danger' : null,\"message\":_vm.form.errors.has('time') ? _vm.form.errors.first('time') : null}},[_c('b-timepicker',{attrs:{\"value\":_vm.time,\"placeholder\":_vm.trans('labels.collection_observations.click_to_select'),\"icon\":\"clock-o\",\"mobile-native\":false},on:{\"input\":_vm.onTimeInput}},[_c('button',{staticClass:\"button is-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.form.time = null}}},[_c('b-icon',{attrs:{\"icon\":\"close\"}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"project\"}},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.collection_observations.project_tooltip')}),expression:\"{content: trans('labels.collection_observations.project_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n                \"+_vm._s(_vm.trans('labels.collection_observations.project'))+\"\\n              \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"project\",\"name\":\"project\"},model:{value:(_vm.form.project),callback:function ($$v) {_vm.$set(_vm.form, \"project\", $$v)},expression:\"form.project\"}}),_vm._v(\" \"),(_vm.form.errors.has('project'))?_c('p',{staticClass:\"help\",class:{ 'is-danger': _vm.form.errors.has('project') },domProps:{\"innerHTML\":_vm._s(_vm.form.errors.first('project'))}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"dataset\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.trans('labels.collection_observations.dataset'))+\"\\n            \")]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"dataset\",\"name\":\"dataset\"},model:{value:(_vm.form.dataset),callback:function ($$v) {_vm.$set(_vm.form, \"dataset\", $$v)},expression:\"form.dataset\"}}),_vm._v(\" \"),(_vm.form.errors.has('dataset'))?_c('p',{staticClass:\"help\",class:{ 'is-danger': _vm.form.errors.has('dataset') },domProps:{\"innerHTML\":_vm._s(_vm.form.errors.first('dataset'))}}):_vm._e()],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.observer'),\"type\":_vm.form.errors.has('observer') ? 'is-danger' : null,\"message\":_vm.form.errors.has('observer') ? _vm.form.errors.first('observer') : null}},[_c('b-input',{attrs:{\"name\":\"observer\"},model:{value:(_vm.form.observer),callback:function ($$v) {_vm.$set(_vm.form, \"observer\", $$v)},expression:\"form.observer\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.identifier'),\"type\":_vm.form.errors.has('identifier') ? 'is-danger' : null,\"message\":_vm.form.errors.has('identifier') ? _vm.form.errors.first('identifier') : null}},[_c('b-input',{attrs:{\"name\":\"identifier\"},model:{value:(_vm.form.identifier),callback:function ($$v) {_vm.$set(_vm.form, \"identifier\", $$v)},expression:\"form.identifier\"}})],1)],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.collector'),\"type\":_vm.form.errors.has('collector') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collector') ? _vm.form.errors.first('collector') : null}},[_c('b-input',{attrs:{\"name\":\"collector\"},model:{value:(_vm.form.collector),callback:function ($$v) {_vm.$set(_vm.form, \"collector\", $$v)},expression:\"form.collector\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.preparator'),\"type\":_vm.form.errors.has('preparator') ? 'is-danger' : null,\"message\":_vm.form.errors.has('preparator') ? _vm.form.errors.first('preparator') : null}},[_c('b-input',{attrs:{\"name\":\"preparator\"},model:{value:(_vm.form.preparator),callback:function ($$v) {_vm.$set(_vm.form, \"preparator\", $$v)},expression:\"form.preparator\"}})],1)],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.catalogue_number'),\"type\":_vm.form.errors.has('catalogue_number') ? 'is-danger' : null,\"message\":_vm.form.errors.has('catalogue_number') ? _vm.form.errors.first('catalogue_number') : null}},[_c('b-input',{attrs:{\"name\":\"catalogue_number\"},model:{value:(_vm.form.catalogue_number),callback:function ($$v) {_vm.$set(_vm.form, \"catalogue_number\", $$v)},expression:\"form.catalogue_number\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.cabinet_number'),\"type\":_vm.form.errors.has('cabinet_number') ? 'is-danger' : null,\"message\":_vm.form.errors.has('cabinet_number') ? _vm.form.errors.first('cabinet_number') : null}},[_c('b-input',{attrs:{\"name\":\"cabinet_number\"},model:{value:(_vm.form.cabinet_number),callback:function ($$v) {_vm.$set(_vm.form, \"cabinet_number\", $$v)},expression:\"form.cabinet_number\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.box_number'),\"type\":_vm.form.errors.has('box_number') ? 'is-danger' : null,\"message\":_vm.form.errors.has('box_number') ? _vm.form.errors.first('box_number') : null}},[_c('b-input',{attrs:{\"name\":\"box_number\"},model:{value:(_vm.form.box_number),callback:function ($$v) {_vm.$set(_vm.form, \"box_number\", $$v)},expression:\"form.box_number\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.disposition'),\"type\":_vm.form.errors.has('disposition') ? 'is-danger' : null,\"message\":_vm.form.errors.has('disposition') ? _vm.form.errors.first('disposition') : null}},[_c('b-select',{attrs:{\"expanded\":\"expanded\"},model:{value:(_vm.form.disposition),callback:function ($$v) {_vm.$set(_vm.form, \"disposition\", $$v)},expression:\"form.disposition\"}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.collection_observations.choose_a_value')))]),_vm._v(\" \"),_vm._l((_vm.dispositions),function(label,disposition){return _c('option',{key:disposition,domProps:{\"value\":disposition,\"textContent\":_vm._s(label)}})})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.preparation_method'),\"type\":_vm.form.errors.has('preparation_method') ? 'is-danger' : null,\"message\":_vm.form.errors.has('preparation_method') ? _vm.form.errors.first('preparation_method') : null}},[_c('b-input',{attrs:{\"name\":\"preparation_method\"},model:{value:(_vm.form.preparation_method),callback:function ($$v) {_vm.$set(_vm.form, \"preparation_method\", $$v)},expression:\"form.preparation_method\"}})],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.note'),\"error\":_vm.form.errors.has('note'),\"message\":_vm.form.errors.has('note') ? _vm.form.errors.first('note') : null}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.note),callback:function ($$v) {_vm.$set(_vm.form, \"note\", $$v)},expression:\"form.note\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mt-8\"},[_c('h2',{staticClass:\"is-size-4\"},[_vm._v(_vm._s(_vm.trans('labels.collection_observations.verbatim_data')))]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.original_date'),\"type\":_vm.form.errors.has('original_date') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_date') ? _vm.form.errors.first('original_date') : null}},[_c('b-input',{attrs:{\"name\":\"original_date\"},model:{value:(_vm.form.original_date),callback:function ($$v) {_vm.$set(_vm.form, \"original_date\", $$v)},expression:\"form.original_date\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.original_locality'),\"type\":_vm.form.errors.has('original_locality') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_locality') ? _vm.form.errors.first('original_locality') : null}},[_c('b-input',{model:{value:(_vm.form.original_locality),callback:function ($$v) {_vm.$set(_vm.form, \"original_locality\", $$v)},expression:\"form.original_locality\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.original_coordinates'),\"type\":_vm.form.errors.has('original_coordinates') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_coordinates') ? _vm.form.errors.first('original_coordinates') : null}},[_c('b-input',{model:{value:(_vm.form.original_coordinates),callback:function ($$v) {_vm.$set(_vm.form, \"original_coordinates\", $$v)},expression:\"form.original_coordinates\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.original_elevation'),\"type\":_vm.form.errors.has('original_elevation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('original_elevation') ? _vm.form.errors.first('original_elevation') : null}},[_c('b-input',{attrs:{\"placeholder\":_vm.trans('labels.collection_observations.original_elevation_placeholder')},model:{value:(_vm.form.original_elevation),callback:function ($$v) {_vm.$set(_vm.form, \"original_elevation\", $$v)},expression:\"form.original_elevation\"}})],1)],1),_vm._v(\" \"),_c('b-field',{staticClass:\"mb-8\",attrs:{\"label\":_vm.trans('labels.collection_observations.verbatim_tag'),\"type\":_vm.form.errors.has('verbatim_tag') ? 'is-danger' : null,\"message\":_vm.form.errors.has('verbatim_tag') ? _vm.form.errors.first('verbatim_tag') : null}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.verbatim_tag),callback:function ($$v) {_vm.$set(_vm.form, \"verbatim_tag\", $$v)},expression:\"form.verbatim_tag\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.collecting_start_year'),\"type\":_vm.form.errors.has('collecting_start_year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_start_year') ? _vm.form.errors.first('collecting_start_year') : null}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.collecting_start_year),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_start_year\", $$v)},expression:\"form.collecting_start_year\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.collecting_start_month'),\"type\":_vm.form.errors.has('collecting_start_month') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_start_month') ? _vm.form.errors.first('collecting_start_month') : null}},[_c('b-select',{attrs:{\"expanded\":\"\"},model:{value:(_vm.form.collecting_start_month),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_start_month\", $$v)},expression:\"form.collecting_start_month\"}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.months),function(month,index){return _c('option',{key:month,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                  \"+_vm._s(month)+\"\\n              \")])})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.collecting_end_year'),\"type\":_vm.form.errors.has('collecting_end_year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_end_year') ? _vm.form.errors.first('collecting_end_year') : null}},[_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.form.collecting_end_year),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_end_year\", $$v)},expression:\"form.collecting_end_year\"}})],1),_vm._v(\" \"),_c('b-field',{staticClass:\"column\",attrs:{\"label\":_vm.trans('labels.collection_observations.collecting_end_month'),\"type\":_vm.form.errors.has('collecting_end_month') ? 'is-danger' : null,\"message\":_vm.form.errors.has('collecting_end_month') ? _vm.form.errors.first('collecting_end_month') : null}},[_c('b-select',{attrs:{\"expanded\":\"\"},model:{value:(_vm.form.collecting_end_month),callback:function ($$v) {_vm.$set(_vm.form, \"collecting_end_month\", $$v)},expression:\"form.collecting_end_month\"}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.months),function(month,index){return _c('option',{key:month,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                  \"+_vm._s(month)+\"\\n              \")])})],2)],1)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.collection_observations.photos')}},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-one-third\"},[_c('nz-photo-upload',{ref:\"photoUpload-1\",attrs:{\"image-url\":_vm.getObservationPhotoAttribute(0, 'url'),\"image-path\":_vm.getObservationPhotoAttribute(0, 'path'),\"image-license\":_vm.getObservationPhotoAttribute(0, 'license'),\"licenses\":_vm.licenses,\"text\":_vm.trans('labels.collection_observations.upload'),\"errors\":_vm.form.errors},on:{\"uploaded\":_vm.onPhotoUploaded,\"removed\":_vm.onPhotoRemoved,\"cropped\":_vm.onPhotoCropped,\"license-changed\":function($event){return _vm.onLicenseChanged(0, $event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-one-third\"},[_c('nz-photo-upload',{ref:\"photoUpload-2\",attrs:{\"image-path\":_vm.getObservationPhotoAttribute(1, 'path'),\"image-url\":_vm.getObservationPhotoAttribute(1, 'url'),\"image-license\":_vm.getObservationPhotoAttribute(1, 'license'),\"licenses\":_vm.licenses,\"text\":_vm.trans('labels.collection_observations.upload'),\"errors\":_vm.form.errors},on:{\"uploaded\":_vm.onPhotoUploaded,\"removed\":_vm.onPhotoRemoved,\"cropped\":_vm.onPhotoCropped,\"license-changed\":function($event){return _vm.onLicenseChanged(1, $event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-one-third\"},[_c('nz-photo-upload',{ref:\"photoUpload-3\",attrs:{\"image-url\":_vm.getObservationPhotoAttribute(2, 'url'),\"image-path\":_vm.getObservationPhotoAttribute(2, 'path'),\"image-license\":_vm.getObservationPhotoAttribute(2, 'license'),\"licenses\":_vm.licenses,\"text\":_vm.trans('labels.collection_observations.upload'),\"errors\":_vm.form.errors},on:{\"uploaded\":_vm.onPhotoUploaded,\"removed\":_vm.onPhotoRemoved,\"cropped\":_vm.onPhotoCropped,\"license-changed\":function($event){return _vm.onLicenseChanged(2, $event)}}})],1)])])],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.collection_observations.save_tooltip')}),expression:\"{content: trans('labels.collection_observations.save_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-loading': _vm.submittingWithRedirect\n    },attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithRedirect($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save'))+\"\\n  \")]),_vm._v(\" \"),(_vm.submitMore)?_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.collection_observations.save_more_tooltip')}),expression:\"{content: trans('labels.collection_observations.save_more_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-outlined': !_vm.submittingWithoutRedirect,\n      'is-loading': _vm.submittingWithoutRedirect\n    },attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithoutRedirect($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save_more'))+\"\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.submitMoreWithSameTaxon)?_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.collection_observations.save_more_same_taxon_tooltip')}),expression:\"{content: trans('labels.collection_observations.save_more_same_taxon_tooltip')}\"}],staticClass:\"button is-primary\",class:{\n      'is-outlined': !_vm.submittingWithoutRedirectWithSameTaxon,\n      'is-loading': _vm.submittingWithoutRedirectWithSameTaxon\n    },attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.submitWithoutRedirectWithSameTaxon($event)}}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('labels.collection_observations.save_more_same_taxon'))+\"\\n  \")]):_vm._e(),_vm._v(\" \"),_c('a',{staticClass:\"button is-text\",attrs:{\"href\":_vm.cancelUrl},on:{\"click\":_vm.onCancel}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-field :label=\"label\" class=\"nz-collection-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\n    <b-field grouped>\n      <b-autocomplete\n        :value=\"value\"\n        :data=\"data\"\n        field=\"name\"\n        :loading=\"loading\"\n        @input=\"onInput\"\n        @select=\"onSelect\"\n        :icon=\"icon\"\n        :placeholder=\"placeholder\"\n        expanded\n        :autofocus=\"autofocus\"\n        :disabled=\"disabled\"\n      >\n        <template slot-scope=\"props\">\n          <div class=\"media\">\n            <div class=\"media-content\">\n              {{ props.option.name }} ({{ props.option.code }})\n            </div>\n          </div>\n        </template>\n      </b-autocomplete>\n\n      <slot />\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport axios from 'axios'\nimport _debounce from 'lodash/debounce'\nimport _get from 'lodash/get'\n\nexport default {\n  name: 'nzCollectionAutocomplete',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Collection'\n    },\n    placeholder: {\n      type: String,\n      default: 'Search for collection...'\n    },\n    collection: {\n      type: Object,\n      default: null\n    },\n    route: {\n      type: String,\n      default: 'api.autocomplete.specimen-collections.index'\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    error: Boolean,\n    message: {\n      type: String,\n      default: null\n    },\n    except: {},\n    autofocus: Boolean,\n    disabled: Boolean\n  },\n\n  data() {\n    return {\n      data: [],\n      selected: this.collection || null,\n      loading: false\n    }\n  },\n\n  computed: {\n    icon() {\n      return this.selected ? 'check' : 'search'\n    }\n  },\n\n  watch: {\n    publication(value) {\n      this.selected = value\n    }\n  },\n\n  methods: {\n    fetchData: _debounce(function() {\n      if (!this.value) return\n\n      this.data = []\n      this.loading = true\n\n      let params = {\n        name: this.value,\n      }\n\n      if (this.except) {\n        params.except = this.except\n      }\n\n      axios.get(route(this.route), { params }).then(({ data }) => {\n        data.data.forEach((item) => this.data.push(item))\n        this.loading = false\n      }, response => {\n        this.loading = false\n      })\n    }, 500),\n\n    onSelect(user) {\n      this.selected = user\n\n      this.$emit('select', user)\n    },\n\n    onInput(value) {\n      const currentValue = this.getValue(this.selected)\n      if (currentValue && currentValue !== value) {\n          this.onSelect(null)\n      }\n\n      this.$emit('input', value)\n\n      this.fetchData()\n    },\n\n    focusOnInput() {\n      this.$el.querySelector('input').focus()\n    },\n\n    /**\n     * Return display text for the input.\n     * If object, get value from path, or else just the value.\n     */\n    getValue(option) {\n      if (!option) return\n\n      return typeof option === 'object'\n        ? _get(option, 'name')\n        : option\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionAutocomplete.vue?vue&type=template&id=dcf8d252&\"\nimport script from \"./CollectionAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-collection-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-autocomplete',{attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus,\"disabled\":_vm.disabled},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.name)+\" (\"+_vm._s(props.option.code)+\")\\n          \")])])]}}])}),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form :action=\"action\" method=\"POST\" :lang=\"locale\" class=\"collection-observation-form\">\n    <div class=\"mb-8\">\n      <nz-collection-autocomplete\n        class=\"is-required\"\n        v-model=\"collectionName\"\n        @select=\"onCollectionSelect\"\n        :collection=\"form.collection\"\n        :error=\"form.errors.has('collection_id')\"\n        :message=\"form.errors.has('collection_id') ? form.errors.first('collection_id') : null\"\n        autofocus=\"autofocus\"\n        :label=\"trans('labels.collection_observations.collection')\"\n        :placeholder=\"trans('labels.collection_observations.search_for_collection')\"\n      >\n        <a\n          class=\"button\"\n          :title=\"trans('labels.collection_observations.add_new_collection')\"\n          :href=\"$ziggy('admin.specimen-collections.create')\"\n          @click.prevent=\"addNewCollection\"\n        >\n          <b-icon icon=\"plus\" />\n        </a>\n      </nz-collection-autocomplete>\n\n      <nz-taxon-autocomplete\n        v-model=\"taxonName\"\n        @select=\"onTaxonSelect\"\n        class=\"is-required\"\n        :taxon=\"form.taxon\"\n        :error=\"form.errors.has('taxon_id')\"\n        :message=\"form.errors.has('taxon_id') ? form.errors.first('taxon_id') : null\"\n        autofocus=\"autofocus\"\n        ref=\"taxonAutocomplete\"\n        :label=\"trans('labels.collection_observations.taxon')\"\n        :placeholder=\"trans('labels.collection_observations.search_for_taxon')\"\n      />\n\n      <nz-date-input\n        :year.sync=\"form.year\"\n        :month.sync=\"form.month\"\n        :day.sync=\"form.day\"\n        :errors=\"form.errors\"\n        :label=\"trans('labels.collection_observations.date')\"\n        :placeholders=\"{\n            year: trans('labels.collection_observations.year'),\n            month: trans('labels.collection_observations.month'),\n            day: trans('labels.collection_observations.day')\n        }\"\n      />\n\n      <div class=\"columns\">\n        <div class=\"column\">\n           <b-field\n              class=\"is-required\"\n              :label=\"trans('labels.collection_observations.original_identification')\"\n              :type=\"form.errors.has('original_identification') ? 'is-danger' : null\"\n              :message=\"form.errors.has('original_identification') ? form.errors.first('original_identification') : null\"\n            >\n              <b-input name=\"original_identification\" v-model=\"form.original_identification\" />\n            </b-field>\n        </div>\n        <div class=\"column\">\n          <b-field\n            class=\"is-required\"\n            :label=\"trans('labels.collection_observations.original_identification_validity')\"\n            :type=\"form.errors.has('original_identification_validity') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_identification_validity') ? form.errors.first('original_identification_validity') : null\"\n          >\n            <b-select name=\"original_identification_validity\" v-model=\"form.original_identification_validity\" expanded>\n              <option :value=\"value\" v-for=\"(label, value) in validityOptions\" :key=\"value\">{{ label }}</option>\n            </b-select>\n          </b-field>\n        </div>\n      </div>\n\n      <nz-spatial-input\n        class=\"mb-4\"\n        :latitude.sync=\"form.latitude\"\n        :longitude.sync=\"form.longitude\"\n        :location.sync=\"form.location\"\n        :accuracy.sync=\"form.accuracy\"\n        :elevation.sync=\"form.elevation\"\n        @elevation-fetched=\"handleElevationFetched\"\n        :errors=\"form.errors\"\n        :has-other-errors=\"form.errors.has('minimum_elevation') || form.errors.has('maximum_elevation')\"\n      >\n        <b-field\n          :label=\"trans('labels.collection_observations.minimum_elevation_m')\"\n          :type=\"form.errors.has('minimum_elevation') ? 'is-danger' : null\"\n          :message=\"form.errors.has('minimum_elevation') ? form.errors.first('minimum_elevation') : null\"\n          custom-class=\"is-small\"\n        >\n          <b-input type=\"number\" size=\"is-small\" v-model.number=\"form.minimum_elevation\"/>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.collection_observations.maximum_elevation_m')\"\n          :type=\"form.errors.has('maximum_elevation') ? 'is-danger' : null\"\n          :message=\"form.errors.has('maximum_elevation') ? form.errors.first('maximum_elevation') : null\"\n          custom-class=\"is-small\"\n        >\n          <b-input type=\"number\" size=\"is-small\" v-model.number=\"form.maximum_elevation\"/>\n        </b-field>\n      </nz-spatial-input>\n\n      <div class=\"columns\">\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.georeferenced_by')\"\n            :type=\"form.errors.has('georeferenced_by') ? 'is-danger' : null\"\n            :message=\"form.errors.has('georeferenced_by') ? form.errors.first('georeferenced_by') : null\"\n          >\n            <b-input v-model.number=\"form.georeferenced_by\"/>\n          </b-field>\n        </div>\n\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.georeferenced_date')\"\n            :type=\"form.errors.has('georeferenced_date') ? 'is-danger' : null\"\n            :message=\"form.errors.has('georeferenced_date') ? form.errors.first('georeferenced_date') : null\"\n          >\n            <b-datepicker\n              v-model=\"georeferencedDate\"\n              :max-date=\"new Date()\"\n              :mobile-native=\"false\"\n              :date-formatter=\"dateFormater\"\n              :first-day-of-week=\"1\"\n              placeholder=\"DD.MM.YYYY\"\n            >\n              <button type=\"button\" class=\"button is-danger\" @click=\"form.georeferenced_date = null\">\n                <b-icon icon=\"close\" />\n                <span>Clear</span>\n              </button>\n            </b-datepicker>\n          </b-field>\n        </div>\n      </div>\n\n      <div class=\"columns\">\n        <div class=\"column\">\n          <b-field :label=\"trans('labels.collection_observations.stage')\" :type=\"form.errors.has('stage_id') ? 'is-danger' : null\" :message=\"form.errors.has('stage_id') ? form.errors.first('stage_id') : null\">\n            <b-select v-model=\"form.stage_id\" :disabled=\"!stages.length\" expanded=\"expanded\">\n              <option :value=\"null\">{{ trans('labels.collection_observations.choose_a_stage') }}</option>\n              <option v-for=\"stage in stages\" :value=\"stage.id\" :key=\"stage.id\" v-text=\"trans('stages.'+stage.name)\"></option>\n            </b-select>\n          </b-field>\n        </div>\n        <div class=\"column\">\n          <b-field :label=\"trans('labels.collection_observations.sex')\" :type=\"form.errors.has('sex') ? 'is-danger' : null\" :message=\"form.errors.has('sex') ? form.errors.first('sex') : null\">\n            <b-select v-model=\"form.sex\" expanded=\"expanded\">\n              <option :value=\"null\">{{ trans('labels.collection_observations.choose_a_value') }}</option>\n              <option v-for=\"(label,sex) in sexes\" :key=\"sex\" :value=\"sex\" v-text=\"label\"></option>\n            </b-select>\n          </b-field>\n        </div>\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.number')\"\n            :type=\"form.errors.has('number') ? 'is-danger' : null\"\n            :message=\"form.errors.has('number') ? form.errors.first('number') : null\"\n          >\n            <b-input type=\"number\" v-model=\"form.number\"/>\n          </b-field>\n        </div>\n      </div>\n\n      <div class=\"mt-4\">\n        <div class=\"columns\">\n          <div class=\"column\">\n            <b-field\n              :label=\"trans('labels.collection_observations.habitat')\"\n              :type=\"form.errors.has('habitat') ? 'is-danger' : null\"\n              :message=\"form.errors.has('habitat') ? form.errors.first('habitat') : null\"\n            >\n              <b-input v-model=\"form.habitat\"/>\n            </b-field>\n          </div>\n          <div class=\"column\">\n            <b-field\n              :label=\"trans('labels.collection_observations.found_on')\"\n              :type=\"form.errors.has('found_on') ? 'is-danger' : null\"\n              :message=\"form.errors.has('found_on') ? form.errors.first('found_on') : null\"\n            >\n              <label for=\"found_on\" class=\"label\" slot=\"label\">\n                <span class=\"is-dashed\" v-tooltip=\"{content: trans('labels.collection_observations.found_on_tooltip')}\">\n                  {{ trans('labels.collection_observations.found_on') }}\n                </span>\n              </label>\n\n              <b-input id=\"found_on\" name=\"found_on\" v-model=\"form.found_on\"/>\n            </b-field>\n          </div>\n        </div>\n\n        <b-field\n          :label=\"trans('labels.collection_observations.time')\"\n          :type=\"form.errors.has('time') ? 'is-danger' : null\"\n          :message=\"form.errors.has('time') ? form.errors.first('time') : null\"\n        >\n          <b-timepicker\n            :value=\"time\"\n            @input=\"onTimeInput\"\n            :placeholder=\"trans('labels.collection_observations.click_to_select')\"\n            icon=\"clock-o\"\n            :mobile-native=\"false\"\n          >\n            <button type=\"button\" class=\"button is-danger\" @click=\"form.time = null\">\n              <b-icon icon=\"close\"></b-icon>\n            </button>\n          </b-timepicker>\n        </b-field>\n\n        <div class=\"columns\">\n          <div class=\"column\">\n            <div class=\"field\">\n              <label for=\"project\" class=\"label\">\n                <span class=\"is-dashed\" v-tooltip=\"{content: trans('labels.collection_observations.project_tooltip')}\">\n                  {{ trans('labels.collection_observations.project') }}\n                </span>\n              </label>\n\n              <b-input id=\"project\" name=\"project\" v-model=\"form.project\"/>\n\n              <p v-if=\"form.errors.has('project')\" v-html=\"form.errors.first('project')\" class=\"help\" :class=\"{ 'is-danger': form.errors.has('project') }\"/>\n            </div>\n          </div>\n\n          <div class=\"column\">\n            <div class=\"field\">\n              <label for=\"dataset\" class=\"label\">\n                {{ trans('labels.collection_observations.dataset') }}\n              </label>\n\n              <b-input id=\"dataset\" name=\"dataset\" v-model=\"form.dataset\"/>\n\n              <p v-if=\"form.errors.has('dataset')\" v-html=\"form.errors.first('dataset')\" class=\"help\" :class=\"{ 'is-danger': form.errors.has('dataset') }\"/>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"columns\">\n          <div class=\"column\">\n            <b-field\n              :label=\"trans('labels.collection_observations.observer')\"\n              :type=\"form.errors.has('observer') ? 'is-danger' : null\"\n              :message=\"form.errors.has('observer') ? form.errors.first('observer') : null\"\n            >\n              <b-input name=\"observer\" v-model=\"form.observer\"/>\n            </b-field>\n          </div>\n\n          <div class=\"column\">\n            <b-field\n              :label=\"trans('labels.collection_observations.identifier')\"\n              :type=\"form.errors.has('identifier') ? 'is-danger' : null\"\n              :message=\"form.errors.has('identifier') ? form.errors.first('identifier') : null\"\n            >\n              <b-input name=\"identifier\" v-model=\"form.identifier\"/>\n            </b-field>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"columns\">\n          <div class=\"column\">\n            <b-field\n              :label=\"trans('labels.collection_observations.collector')\"\n              :type=\"form.errors.has('collector') ? 'is-danger' : null\"\n              :message=\"form.errors.has('collector') ? form.errors.first('collector') : null\"\n            >\n              <b-input name=\"collector\" v-model=\"form.collector\"/>\n            </b-field>\n          </div>\n\n          <div class=\"column\">\n            <b-field\n              :label=\"trans('labels.collection_observations.preparator')\"\n              :type=\"form.errors.has('preparator') ? 'is-danger' : null\"\n              :message=\"form.errors.has('preparator') ? form.errors.first('preparator') : null\"\n            >\n              <b-input name=\"preparator\" v-model=\"form.preparator\"/>\n            </b-field>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"columns\">\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.catalogue_number')\"\n            :type=\"form.errors.has('catalogue_number') ? 'is-danger' : null\"\n            :message=\"form.errors.has('catalogue_number') ? form.errors.first('catalogue_number') : null\"\n          >\n            <b-input name=\"catalogue_number\" v-model=\"form.catalogue_number\"/>\n          </b-field>\n        </div>\n\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.cabinet_number')\"\n            :type=\"form.errors.has('cabinet_number') ? 'is-danger' : null\"\n            :message=\"form.errors.has('cabinet_number') ? form.errors.first('cabinet_number') : null\"\n          >\n            <b-input name=\"cabinet_number\" v-model=\"form.cabinet_number\"/>\n          </b-field>\n        </div>\n\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.box_number')\"\n            :type=\"form.errors.has('box_number') ? 'is-danger' : null\"\n            :message=\"form.errors.has('box_number') ? form.errors.first('box_number') : null\"\n          >\n            <b-input name=\"box_number\" v-model=\"form.box_number\"/>\n          </b-field>\n        </div>\n      </div>\n\n      <div class=\"columns\">\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.disposition')\"\n            :type=\"form.errors.has('disposition') ? 'is-danger' : null\"\n            :message=\"form.errors.has('disposition') ? form.errors.first('disposition') : null\"\n          >\n            <b-select v-model=\"form.disposition\" expanded=\"expanded\">\n              <option :value=\"null\">{{ trans('labels.collection_observations.choose_a_value') }}</option>\n              <option v-for=\"(label,disposition) in dispositions\" :key=\"disposition\" :value=\"disposition\" v-text=\"label\"></option>\n            </b-select>\n          </b-field>\n        </div>\n\n        <div class=\"column\">\n          <b-field\n            :label=\"trans('labels.collection_observations.preparation_method')\"\n            :type=\"form.errors.has('preparation_method') ? 'is-danger' : null\"\n            :message=\"form.errors.has('preparation_method') ? form.errors.first('preparation_method') : null\"\n          >\n            <b-input name=\"preparation_method\" v-model=\"form.preparation_method\"/>\n          </b-field>\n        </div>\n\n      </div>\n\n      <b-field :label=\"trans('labels.collection_observations.note')\" :error=\"form.errors.has('note')\" :message=\"form.errors.has('note') ? form.errors.first('note') : null\"><b-input type=\"textarea\" v-model=\"form.note\"/></b-field>\n\n      <div class=\"mt-8\">\n        <h2 class=\"is-size-4\">{{ trans('labels.collection_observations.verbatim_data') }}</h2>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.original_date')\"\n            :type=\"form.errors.has('original_date') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_date') ? form.errors.first('original_date') : null\"\n          >\n            <b-input name=\"original_date\" v-model=\"form.original_date\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.original_locality')\"\n            :type=\"form.errors.has('original_locality') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_locality') ? form.errors.first('original_locality') : null\"\n          >\n            <b-input v-model=\"form.original_locality\"/>\n          </b-field>\n        </div>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.original_coordinates')\"\n            :type=\"form.errors.has('original_coordinates') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_coordinates') ? form.errors.first('original_coordinates') : null\"\n          >\n            <b-input v-model=\"form.original_coordinates\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.original_elevation')\"\n            :type=\"form.errors.has('original_elevation') ? 'is-danger' : null\"\n            :message=\"form.errors.has('original_elevation') ? form.errors.first('original_elevation') : null\"\n          >\n            <b-input v-model=\"form.original_elevation\" :placeholder=\"trans('labels.collection_observations.original_elevation_placeholder')\"/>\n          </b-field>\n        </div>\n\n        <b-field\n          class=\"mb-8\"\n          :label=\"trans('labels.collection_observations.verbatim_tag')\"\n          :type=\"form.errors.has('verbatim_tag') ? 'is-danger' : null\"\n          :message=\"form.errors.has('verbatim_tag') ? form.errors.first('verbatim_tag') : null\"\n        >\n           <b-input type=\"textarea\" v-model=\"form.verbatim_tag\" />\n        </b-field>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.collecting_start_year')\"\n            :type=\"form.errors.has('collecting_start_year') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_start_year') ? form.errors.first('collecting_start_year') : null\"\n          >\n            <b-input v-model=\"form.collecting_start_year\" type=\"number\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.collecting_start_month')\"\n            :type=\"form.errors.has('collecting_start_month') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_start_month') ? form.errors.first('collecting_start_month') : null\"\n          >\n            <b-select\n              v-model=\"form.collecting_start_month\"\n              expanded\n            >\n                <option :value=\"null\"></option>\n                <option\n                    v-for=\"(month, index) in months\"\n                    :value=\"index + 1\"\n                    :key=\"month\">\n                    {{ month }}\n                </option>\n            </b-select>\n          </b-field>\n        </div>\n\n        <div class=\"columns\">\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.collecting_end_year')\"\n            :type=\"form.errors.has('collecting_end_year') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_end_year') ? form.errors.first('collecting_end_year') : null\"\n          >\n            <b-input v-model=\"form.collecting_end_year\" type=\"number\"/>\n          </b-field>\n\n          <b-field\n            class=\"column\"\n            :label=\"trans('labels.collection_observations.collecting_end_month')\"\n            :type=\"form.errors.has('collecting_end_month') ? 'is-danger' : null\"\n            :message=\"form.errors.has('collecting_end_month') ? form.errors.first('collecting_end_month') : null\"\n          >\n            <b-select\n              v-model=\"form.collecting_end_month\"\n              expanded\n            >\n                <option :value=\"null\"></option>\n                <option\n                    v-for=\"(month, index) in months\"\n                    :value=\"index + 1\"\n                    :key=\"month\">\n                    {{ month }}\n                </option>\n            </b-select>\n          </b-field>\n        </div>\n\n        <b-field :label=\"trans('labels.collection_observations.photos')\">\n          <div class=\"columns\">\n            <div class=\"column is-one-third\">\n              <nz-photo-upload\n                :image-url=\"getObservationPhotoAttribute(0, 'url')\"\n                :image-path=\"getObservationPhotoAttribute(0, 'path')\"\n                :image-license=\"getObservationPhotoAttribute(0, 'license')\"\n                :licenses=\"licenses\"\n                :text=\"trans('labels.collection_observations.upload')\"\n                @uploaded=\"onPhotoUploaded\"\n                @removed=\"onPhotoRemoved\"\n                @cropped=\"onPhotoCropped\"\n                @license-changed=\"onLicenseChanged(0, $event)\"\n                :errors=\"form.errors\"\n                ref=\"photoUpload-1\"\n              />\n            </div>\n\n            <div class=\"column is-one-third\">\n              <nz-photo-upload\n                :image-path=\"getObservationPhotoAttribute(1, 'path')\"\n                :image-url=\"getObservationPhotoAttribute(1, 'url')\"\n                :image-license=\"getObservationPhotoAttribute(1, 'license')\"\n                :licenses=\"licenses\"\n                :text=\"trans('labels.collection_observations.upload')\"\n                @uploaded=\"onPhotoUploaded\"\n                @removed=\"onPhotoRemoved\"\n                @cropped=\"onPhotoCropped\"\n                @license-changed=\"onLicenseChanged(1, $event)\"\n                :errors=\"form.errors\"\n                ref=\"photoUpload-2\"\n              />\n            </div>\n\n            <div class=\"column is-one-third\">\n              <nz-photo-upload\n                :image-url=\"getObservationPhotoAttribute(2, 'url')\"\n                :image-path=\"getObservationPhotoAttribute(2, 'path')\"\n                :image-license=\"getObservationPhotoAttribute(2, 'license')\"\n                :licenses=\"licenses\"\n                :text=\"trans('labels.collection_observations.upload')\"\n                @uploaded=\"onPhotoUploaded\"\n                @removed=\"onPhotoRemoved\"\n                @cropped=\"onPhotoCropped\"\n                @license-changed=\"onLicenseChanged(2, $event)\"\n                :errors=\"form.errors\"\n                ref=\"photoUpload-3\"\n              />\n            </div>\n          </div>\n        </b-field>\n      </div>\n    </div>\n\n    <hr>\n\n    <button\n      type=\"submit\"\n      class=\"button is-primary\"\n      :class=\"{\n        'is-loading': submittingWithRedirect\n      }\"\n      @click.prevent=\"submitWithRedirect\"\n      v-tooltip=\"{content: trans('labels.collection_observations.save_tooltip')}\"\n    >\n      {{ trans('buttons.save') }}\n    </button>\n\n    <button\n      type=\"submit\"\n      class=\"button is-primary\"\n      :class=\"{\n        'is-outlined': !submittingWithoutRedirect,\n        'is-loading': submittingWithoutRedirect\n      }\"\n      @click.prevent=\"submitWithoutRedirect\"\n      v-if=\"submitMore\"\n      v-tooltip=\"{content: trans('labels.collection_observations.save_more_tooltip')}\">\n      {{ trans('buttons.save_more') }}\n    </button>\n\n    <button\n      type=\"button\"\n      class=\"button is-primary\"\n      :class=\"{\n        'is-outlined': !submittingWithoutRedirectWithSameTaxon,\n        'is-loading': submittingWithoutRedirectWithSameTaxon\n      }\"\n      @click.prevent=\"submitWithoutRedirectWithSameTaxon\"\n      v-if=\"submitMoreWithSameTaxon\"\n      v-tooltip=\"{content: trans('labels.collection_observations.save_more_same_taxon_tooltip')}\">\n      {{ trans('labels.collection_observations.save_more_same_taxon') }}\n    </button>\n\n    <a :href=\"cancelUrl\" class=\"button is-text\" @click=\"onCancel\">{{ trans('buttons.cancel') }}</a>\n  </form>\n</template>\n\n<script>\nimport Form from 'form-backend-validation'\nimport dayjs from '@/dayjs'\nimport _cloneDeep from 'lodash/cloneDeep'\nimport _get from 'lodash/get'\nimport _find from 'lodash/find'\nimport _findIndex from 'lodash/findIndex'\nimport _pick from 'lodash/pick'\nimport _remove from 'lodash/remove'\nimport FormMixin from '@/mixins/FormMixin'\nimport PersistentForm from '@/mixins/PersistentForm'\nimport NzDateInput from '@/components/inputs/DateInput'\nimport NzPhotoUpload from '@/components/inputs/PhotoUpload'\nimport NzSpatialInput from '@/components/inputs/SpatialInput'\nimport NzCollectionAutocomplete from '@/components/inputs/CollectionAutocomplete'\nimport NzTaxonAutocomplete from '@/components/inputs/TaxonAutocomplete'\n\nexport default {\n  name: 'nzCollectionObservationForm',\n\n  mixins: [PersistentForm, FormMixin],\n\n  components: {\n    NzDateInput,\n    NzPhotoUpload,\n    NzSpatialInput,\n    NzCollectionAutocomplete,\n    NzTaxonAutocomplete\n  },\n\n  props: {\n    submitMoreWithSameTaxon: Boolean,\n\n    observation: {\n      type: Object,\n      default() {\n        return {\n          original_date: null,\n          original_locality: null,\n          original_elevation: null,\n          original_coordinates: null,\n          original_identification: null,\n          original_identification_validity: null,\n          verbatim_tag: null,\n          collecting_start_year: null,\n          collecting_start_month: null,\n          collecting_end_year: null,\n          collecting_end_month: null,\n          collecting_method: null,\n          collector: null,\n          collection_id: null,\n          catalogue_number: null,\n          cabinet_number: null,\n          box_number: null,\n          disposition: null,\n          type_status: null,\n          preparator: null,\n          preparation_method: null,\n          taxon_id: null,\n          year: dayjs().year(),\n          month: dayjs().month() + 1,\n          day: dayjs().date(),\n          latitude: null,\n          longitude: null,\n          location: null,\n          accuracy: null,\n          elevation: null,\n          minimum_elevation: null,\n          maximum_elevation: null,\n          georeferenced_by: null,\n          georeferenced_date: null,\n\n          observer: null,\n          identifier: null,\n          note: null,\n          sex: null,\n          number: null,\n          project: null,\n          found_on: null,\n          habitat: null,\n          stage_id: null,\n          time: null,\n          dataset: null,\n\n          taxon: null,\n          collection: null,\n          photos: [],\n        }\n      }\n    },\n\n    licenses: {\n        type: Object,\n        default: () => ({})\n    },\n\n    sexes: {\n      type: Object,\n      default: () => ({})\n    },\n\n    dispositions: {\n      type: Object,\n      default: () => ({})\n    },\n\n    validityOptions: {\n      type: [Array, Object],\n      default: () => []\n    }\n  },\n\n  data() {\n    return {\n      keepAfterSubmit: this.getAttributesToKeep(),\n      submittingWithoutRedirectWithSameTaxon: false,\n      locale: window.App.locale,\n      taxonName: _get(this.observation, 'taxon.name', ''),\n      collectionName: _get(this.observation, 'collection.name', ''),\n    }\n  },\n\n  computed: {\n    stages() {\n      return this.form.taxon\n        ? this.form.taxon.stages\n        : []\n    },\n\n    time() {\n      return this.form.time\n        ? dayjs(this.form.time, 'HH:mm').toDate()\n        : null\n    },\n\n    georeferencedDate: {\n      get() {\n        const val = dayjs(this.form.georeferenced_date)\n\n        return val.isValid() ? val.toDate() : null\n      },\n\n      set(value) {\n        this.form.georeferenced_date = dayjs(value).format('YYYY-MM-DD')\n      }\n    },\n\n    months() {\n      return dayjs.months()\n    },\n  },\n\n  created() {\n    this.restoreState()\n  },\n\n  methods: {\n    otherPersistentKeys() {\n      return ['taxonName', 'collectionName']\n    },\n\n    /**\n     * Create new form instance.\n     *\n     * @return {Form}\n     */\n    newForm() {\n      return new Form({\n        ...this.observation,\n        reason: null\n      }, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Handle taxon being selected.\n     *\n     * @param {Object} value\n     */\n    onTaxonSelect(taxon) {\n      this.form.taxon = taxon || null\n      this.form.taxon_id = taxon ? taxon.id : null\n      this.taxonName = taxon ? taxon.name : null\n\n      const invalidStage = !_find(this.stages, stage => stage.id === this.form.stage_id)\n\n      if (invalidStage) {\n        this.form.stage_id = null\n      }\n    },\n\n    /**\n     * Handle collection being selected.\n     *\n     * @param {Object} value\n     */\n    onCollectionSelect(collection) {\n      this.form.collection = collection || null\n      this.form.collection_id = collection ? collection.id : null\n      this.collectionName = collection ? collection.name : null\n    },\n\n    /**\n     * Set time.\n     */\n    onTimeInput(value) {\n      this.form.time = value ? dayjs(value).format('HH:mm') : null\n    },\n\n    /**\n     * Attributes to keep after submit without redirect.\n     *\n     * @return {Array}\n     */\n    getAttributesToKeep() {\n      return [\n        'location',\n        'accuracy',\n        'elevation',\n        'latitude',\n        'longitude',\n        'year',\n        'month',\n        'day',\n        'project',\n        'observer',\n        'identifier',\n        'dataset',\n        'collection',\n        'collection_id',\n        'minimum_elevation',\n        'maximum_elevation',\n        'original_locality',\n        'original_elevation',\n        'original_coordinates',\n        'georeferenced_by',\n        'georeferenced_date'\n      ]\n    },\n\n    hookAfterSubmitWithoutRedirect() {\n      this.taxonName = ''\n    },\n\n    addNewCollection() {\n      this.saveState()\n\n      window.location.href = route('admin.specimen-collections.create')\n    },\n\n    dateFormater(date) {\n      return dayjs(date).format('DD.MM.YYYY')\n    },\n\n    handleElevationFetched(elevation) {\n      this.form.minimum_elevation = elevation\n      this.form.maximum_elevation = elevation\n    },\n\n    /**\n     * Submit the form and stay to add more, with same taxon.\n     */\n    submitWithoutRedirectWithSameTaxon() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirectWithSameTaxon)\n\n      this.performSubmitWithoutRedirectWithSameTaxon()\n    },\n\n    /**\n     * Submit the form and stay to add more, with same taxon.\n     */\n    performSubmitWithoutRedirectWithSameTaxon(reason = null) {\n      this.submittingWithoutRedirectWithSameTaxon = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithoutRedirectWithSameTaxon)\n          .catch(error => {\n            this.submittingWithoutRedirectWithSameTaxon = false\n            this.onFailedSubmit(error)\n          })\n    },\n\n    /**\n     * Handle successful form submit with no redirect.\n     */\n    onSuccessfulSubmitWithoutRedirectWithSameTaxon() {\n      this.submittingWithoutRedirectWithSameTaxon = false\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // Reset the form but remember some data.\n      const keep = _pick(this.form.data(), this.keepAfterSubmit.concat([\n        'original_identification_validity', 'taxon', 'taxon_id', 'original_identification',\n      ]))\n      this.form.reset()\n      this.form.populate(keep)\n    },\n    /**\n     * Get observation photo attribute.\n     *\n     * @param  {Number} [photoIndex=0]\n     * @param  {String} [attribute='url']\n     * @return {String}\n     */\n    getObservationPhotoAttribute(photoIndex = 0, attribute = 'url') {\n      let value = _get(this.observation, `photos.${photoIndex}.${attribute}`, '')\n\n      if (attribute === 'url' && value) {\n        const updated = dayjs(_get(this.observation, `photos.${photoIndex}.updated_at`, null))\n\n        value += updated.isValid() ? `?v=${updated.format('X')}` : ''\n      }\n\n      return value\n    },\n    /**\n     * Add uploaded photo's filename to array.\n     *\n     * @param {String} file name\n     */\n    onPhotoUploaded(image) {\n      this.form.photos.push({\n\t\t\t\tpath: image.path,\n\t\t\t\tcrop: image.crop,\n\t\t\t\tlicense: image.license\n      })\n\n      this.promptToExtractExifData(image)\n    },\n     /**\n     * Ask the user to use EXIF data to populate the fields.\n     *\n     * @param  {Object} image\n     */\n    promptToExtractExifData(image) {\n      if (this.exifExtracted || !image.exif) return\n\n      this.$buefy.dialog.confirm({\n        message: this.extractExifMessage(image).replace(/\\n/g, '<br>'),\n        cancelText: this.trans('No'),\n        confirmText: this.trans('Yes'),\n        onConfirm: () => { this.fillFromExif(image) },\n        onCancel: () => { this.exifExtracted = true }\n      })\n    },\n\n    /**\n     * Format message to use EXIF data from image.\n     */\n    extractExifMessage(image) {\n      const data = this.extractExifData(image)\n\n      return [\n        this.trans('Use data from photo to fill the form?') + \"\\n\",\n        ...Object.keys(data).map(key => `${this.trans('labels.collection_observations.'+key)}: ${data[key]}`)\n      ].join(\"\\n\")\n    },\n\n    /**\n     * Extract EXIF data from image.\n     */\n    extractExifData(image) {\n      const data = {}\n\n      for (let exif in image.exif) {\n        let value = image.exif[exif]\n\n        if (value) {\n         data[exif] = value\n        }\n      }\n\n      return data\n    },\n\n    /**\n     * Fill the fields with EXIF data.\n     *\n     * @param  {Object} image\n     */\n    fillFromExif(image) {\n      const data = this.extractExifData(image)\n\n      for (const exif in data) {\n        this.form[exif] = data[exif]\n      }\n\n      this.exifExtracted = true\n    },\n    /**\n     * Remove photo from form.\n     *\n     * @param {Object} image\n     */\n    onPhotoRemoved(image) {\n      _remove(this.form.photos, { path: image.path })\n    },\n    /**\n     * Add/remove cropping information.\n     *\n     * @param {Object} image\n     */\n    onPhotoCropped(croppedImage) {\n      const photoIndex = _findIndex(this.form.photos, { path: croppedImage.path })\n\n      if (photoIndex >= 0) {\n        const photo = _cloneDeep(this.form.photos[photoIndex])\n\n        photo.crop = croppedImage.crop\n\n        this.form.photos.splice(photoIndex, 1, photo)\n      }\n    },\n    /**\n     * Change photo license.\n     *\n     * @param {Number} photoIndex\n     * @param {Number} license\n     */\n    onLicenseChanged(photoIndex, license) {\n      const photo = _cloneDeep(this.form.photos[photoIndex])\n\n      photo.license = license\n\n      this.form.photos[photoIndex] = photo\n    }\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionObservationForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CollectionObservationForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionObservationForm.vue?vue&type=template&id=06930a60&\"\nimport script from \"./CollectionObservationForm.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionObservationForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var baseUnset = require('./_baseUnset'),\n    isIndex = require('./_isIndex');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAt` without support for individual\n * indexes or capturing the removed elements.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {number[]} indexes The indexes of elements to remove.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAt(array, indexes) {\n  var length = array ? indexes.length : 0,\n      lastIndex = length - 1;\n\n  while (length--) {\n    var index = indexes[length];\n    if (length == lastIndex || index !== previous) {\n      var previous = index;\n      if (isIndex(index)) {\n        splice.call(array, index, 1);\n      } else {\n        baseUnset(array, index);\n      }\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAt;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.haveImage)?_c('b-field',{attrs:{\"message\":_vm.error || null,\"type\":_vm.error ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-upload',{attrs:{\"drag-drop\":\"\",\"expanded\":\"\",\"disabled\":_vm.uploading || _vm.loading},on:{\"input\":_vm.onInput}},[_c('section',{ref:\"uploadZone\",staticClass:\"section is-relative\"},[_c('div',{staticClass:\"has-text-centered\"},[_c('div',[_c('b-icon',{attrs:{\"icon\":\"upload\",\"size\":\"is-medium\"}})],1),_vm._v(\" \"),(_vm.uploading)?_c('progress',{staticClass:\"progress is-primary is-small\",attrs:{\"max\":\"100\"},domProps:{\"value\":_vm.progress}},[_vm._v(_vm._s(_vm.progress)+\"%\")]):(_vm.loading)?_c('div',[_vm._v(_vm._s(_vm.trans('Loading...')))]):_c('div',[_vm._v(_vm._s(_vm.text))])])])])],1):_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-image\"},[_c('figure',{staticClass:\"has-magnifier has-text-centered\",on:{\"click\":function($event){_vm.showModal = true}}},[_c('img',{staticClass:\"max-h-36\",attrs:{\"src\":_vm.thumbnailUrl,\"alt\":\"Uploaded photo\"}}),_vm._v(\" \"),_c('div',{staticClass:\"image-magnifier\"},[_c('b-icon',{attrs:{\"icon\":\"expand\",\"size\":\"is-medium\"}})],1)])]),_vm._v(\" \"),(_vm.haveImage)?_c('footer',{staticClass:\"card-footer\"},[_c('div',{staticClass:\"card-footer-item flex-col\"},[_c('div',{staticClass:\"mb-4 w-full flex justify-between\"},[(_vm.withCrop)?_c('button',{staticClass:\"button is-outlined is-small mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openCropModal,\"close\":_vm.closeCropModal}},[_c('b-icon',{attrs:{\"icon\":\"crop\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.image.path || _vm.hasExisting)?_c('button',{staticClass:\"delete is-danger is-medium\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.remove}}):_vm._e()]),_vm._v(\" \"),(_vm.withLicense)?_c('div',{staticClass:\"w-full\"},[_c('b-select',{attrs:{\"value\":_vm.image.license,\"expanded\":\"\"},on:{\"input\":_vm.handleLicenseChanged}},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.trans('labels.field_observations.default')))]),_vm._v(\" \"),_vm._l((_vm.licenses),function(label,value){return _c('option',{key:value,domProps:{\"value\":value,\"textContent\":_vm._s(label)}})})],2)],1):_vm._e()])]):_vm._e(),_vm._v(\" \"),(_vm.haveImage)?_c('nz-image-crop-modal',{attrs:{\"active\":_vm.showCropModal,\"crop\":_vm.image.crop,\"image-url\":_vm.image.url},on:{\"update:active\":function($event){_vm.showCropModal=$event},\"update:crop\":function($event){return _vm.$set(_vm.image, \"crop\", $event)}}}):_vm._e(),_vm._v(\" \"),(_vm.showModal)?_c('nz-image-modal',{attrs:{\"items\":[_vm.thumbnailUrl]},on:{\"close\":function($event){_vm.showModal = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import BaseCroppr from 'croppr'\nimport Box from 'croppr/src/box'\n\nexport default class Croppr extends BaseCroppr {\n  setBoxToRealPosition(value) {\n    const actualWidth = this.imageEl.naturalWidth\n    const actualHeight = this.imageEl.naturalHeight\n    const factorX = actualWidth / this.imageEl.offsetWidth\n    const factorY = actualHeight / this.imageEl.offsetHeight\n\n    this.box = new Box(\n      Math.round(value.x / factorX),\n      Math.round(value.y / factorY),\n      Math.round((value.x + value.width) / factorX),\n      Math.round((value.y + value.height) / factorY)\n    )\n\n    this.redraw()\n  }\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageCropModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageCropModal.vue?vue&type=script&lang=js&\"","<template>\n  <transition :name=\"animation\">\n    <div v-if=\"isActive\" class=\"modal is-active\">\n      <div class=\"modal-background\"/>\n\n      <div\n        class=\"animation-content modal-content\"\n        :style=\"{ maxWidth: newWidth }\"\n      >\n        <img\n          :src=\"imageUrl\"\n          class=\"image\"\n          alt=\"Cropped image\"\n          ref=\"cropModalImage\"\n        >\n      </div>\n\n      <button\n        type=\"button\"\n        class=\"modal-close is-large\"\n        @click=\"cancel('x')\"\n      />\n\n      <button\n        type=\"button\"\n        class=\"modal-action\"\n        @click=\"cropImage\"\n      >\n        <b-icon icon=\"check\"/>\n      </button>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport Croppr from '@/Croppr'\nimport bModal from 'buefy/src/components/modal/Modal'\n\nexport default {\n  name: 'nzImageCropModal',\n\n  mixins: [bModal],\n\n  props: {\n    canCancel: {\n      type: [Array, Boolean],\n      default: () => ['escape', 'x']\n    },\n    imageUrl: String,\n    crop: Object\n  },\n\n  data() {\n    return {\n\t\t\tcroppr: null,\n      newCrop: this.crop,\n      preserveRatio: false\n    }\n  },\n\n  mounted() {\n    document.addEventListener('keydown', this.ctrlIsPressed)\n    document.addEventListener('keyup', this.ctrlIsNotPressed)\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('keydown', this.ctrlIsPressed)\n    document.removeEventListener('keyup', this.ctrlIsNotPressed)\n  },\n\n  watch: {\n    isActive(value) {\n      this.handleScroll()\n\n      this.croppr =  null\n\n      if (value) {\n        this.$nextTick(() => {\n          this.croppr = new Croppr(this.$refs.cropModalImage, {\n            onCropEnd: (value) => {\n              this.newCrop = value\n            },\n\n            onInitialize: (croppr) => {\n              if (this.newCrop) {\n                croppr.setBoxToRealPosition(this.newCrop)\n              }\n            }\n          })\n        })\n      }\n    }\n  },\n\n  methods: {\n    handleScroll() {\n      if (typeof window === 'undefined') return\n\n      this.savedScrollTop = !this.savedScrollTop\n        ? document.documentElement.scrollTop\n        : this.savedScrollTop\n\n      document.body.classList.toggle('is-noscroll', this.isActive)\n\n      if (this.isActive) {\n        document.body.style.top = `-${this.savedScrollTop}px`\n        return\n      }\n\n      document.documentElement.scrollTop = this.savedScrollTop\n      document.body.style.top = null\n      this.savedScrollTop = null\n    },\n\n    cropImage() {\n      this.$emit('update:crop', this.newCrop)\n\n      this.close()\n    },\n\n    ctrlIsPressed(e) {\n      if (e.which == 17 && this.croppr) {\n        this.croppr.options.aspectRatio = this.croppr.box.height() / this.croppr.box.width()\n      }\n    },\n\n    ctrlIsNotPressed(e) {\n      if (e.which == 17  && this.croppr) {\n        this.croppr.options.aspectRatio = null\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhotoUpload.vue?vue&type=script&lang=js&\"","<template>\n\t<b-field v-if=\"!haveImage\" :message=\"error || null\" :type=\"error ? 'is-danger' : null\" expanded>\n\t\t<b-upload @input=\"onInput\" drag-drop expanded :disabled=\"uploading || loading\">\n\t\t\t<section class=\"section is-relative\" ref=\"uploadZone\">\n\t\t\t\t<div class=\"has-text-centered\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<b-icon\n\t\t\t\t\t\t\ticon=\"upload\"\n\t\t\t\t\t\t\tsize=\"is-medium\">\n\t\t\t\t\t\t</b-icon>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<progress class=\"progress is-primary is-small\" :value=\"progress\" max=\"100\" v-if=\"uploading\">{{ progress }}%</progress>\n\n          <div v-else-if=\"loading\">{{ trans('Loading...') }}</div>\n\n\t\t\t\t\t<div v-else>{{ text }}</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</b-upload>\n\t</b-field>\n\n\t<div class=\"card\" v-else>\n\t\t<div class=\"card-image\">\n\t\t\t<figure class=\"has-magnifier has-text-centered\" @click=\"showModal = true\">\n        <img :src=\"thumbnailUrl\" alt=\"Uploaded photo\" class=\"max-h-36\" />\n        <div class=\"image-magnifier\">\n          <b-icon icon=\"expand\" size=\"is-medium\" />\n        </div>\n\t\t\t</figure>\n\t  </div>\n\n\t\t<footer class=\"card-footer\" v-if=\"haveImage\">\n\t\t\t<div class=\"card-footer-item flex-col\">\n\t\t\t\t<div class=\"mb-4 w-full flex justify-between\">\n\t\t\t\t\t<button\n            type=\"button\"\n            class=\"button is-outlined is-small mr-2\"\n            v-if=\"withCrop\"\n            @click=\"openCropModal\"\n            @close=\"closeCropModal\"\n          >\n            <b-icon icon=\"crop\" />\n          </button>\n\n\t\t\t\t\t<button type=\"button\" class=\"delete is-danger is-medium\" @click=\"remove\" v-if=\"image.path || hasExisting\"></button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"w-full\" v-if=\"withLicense\">\n\t\t\t\t\t<b-select :value=\"image.license\" @input=\"handleLicenseChanged\" expanded>\n\t\t\t\t\t\t<option :value=\"null\">{{ trans('labels.field_observations.default') }}</option>\n\t\t\t\t\t\t<option v-for=\"(label, value) in licenses\" :value=\"value\" :key=\"value\" v-text=\"label\"></option>\n\t\t\t\t\t</b-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</footer>\n\n\t\t<nz-image-crop-modal :active.sync=\"showCropModal\" :crop.sync=\"image.crop\" :image-url=\"image.url\" v-if=\"haveImage\"/>\n\n\t\t<nz-image-modal :items=\"[thumbnailUrl]\" v-if=\"showModal\" @close=\"showModal = false\"/>\n\t</div>\n</template>\n\n<script>\nimport loadImage from 'blueimp-load-image'\nimport NzImageCropModal from '@/components/ImageCropModal'\nimport NzImageModal from '@/components/ImageModal'\n\nexport default {\n\tname: 'nzPhotoUpload',\n\n  components: {\n    NzImageCropModal,\n    NzImageModal\n  },\n\n  props: {\n\t\timageUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\timagePath: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\timageLicense: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: null\n\t\t},\n\t\tlicenses: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\ttext: String,\n\t\twithLicense: {\n      type: Boolean,\n      default: true\n    },\n    withCrop: {\n      type: Boolean,\n      default: true\n    }\n\t},\n\n  data() {\n    return {\n    \timage: {\n\t\t\t\turl: this.imageUrl,\n\t\t\t\tpath: this.imagePath,\n\t\t\t\tcrop: null,\n\t\t\t\tlicense: this.imageLicense\n\t\t\t},\n\t\t\tcroppedImageUrl: null,\n\t\t\treader: null,\n      uploading: false,\n      loading: false,\n\t\t\tprogress: 0,\n\t\t\thasExisting: !!this.imageUrl,\n\t\t\terror: null,\n\t\t\tshowCropModal: false,\n\t\t\tshowModal: false\n    }\n  },\n\n\twatch: {\n\t\t'image.crop': function (value) {\n\t\t\tthis.$emit('cropped', this.image)\n\n\t\t\tif (!value) {\n\t\t\t\tthis.croppedImageUrl = null\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.cropThumbnail(value)\n    }\n\t},\n\n\tcomputed: {\n\t\thaveImage() {\n\t\t\treturn !!this.image.url\n\t\t},\n\n\t\tthumbnailUrl() {\n\t\t\treturn this.croppedImageUrl || this.image.url\n\t\t}\n\t},\n\n\tmethods: {\n\t\tselectImage() {\n\t\t\tthis.$refs.input.click()\n\t\t},\n\n\t\tonInput(file) {\n\t\t\tthis.error = null\n\n\t\t\tif (!file) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.upload(file)\n\t\t},\n\n\t\tupload(file) {\n      this.uploading = true\n\t\t\treturn axios.post(route('api.photo-uploads.store'), this.makeForm(file), {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n\t\t\t\t\tAccept: 'application/json'\n\t\t\t\t},\n\t\t\t\tonUploadProgress: progressEvent => {\n          this.progress = Math.floor((progressEvent.loaded * 100) / progressEvent.total)\n\t\t\t\t}\n\t\t\t}).then(response => {\n        this.image.path = response.data.file\n\t\t\t\tthis.image.exif = response.data.exif\n\t\t\t\tthis.image.license = null\n\t\t\t\tthis.uploading = false\n\t\t\t\tthis.progress = 0\n\n        this.$emit('uploaded', this.image)\n\n        this.loading = true\n\n        loadImage(file, img => {\n            this.image.url = this.getImageDataUrl(img)\n            this.loading = false\n        }, { orientation: true })\n\t\t\t}).catch(this.handleError)\n    },\n\n    getImageDataUrl(img) {\n      let canvas = img\n\n      if (! (canvas instanceof HTMLCanvasElement)) {\n        canvas = document.createElement('canvas')\n        canvas.setAttribute('width', img.width)\n        canvas.setAttribute('height', img.height)\n        canvas.getContext('2d').drawImage(img, 0, 0)\n      }\n\n      return canvas.toDataURL()\n    },\n\n\t\tmakeForm(file) {\n\t\t\tlet form = new FormData()\n\n\t\t\tform.append('file', file)\n\n\t\t\treturn form\n\t\t},\n\n\t\tremove() {\n\t\t\tif (this.hasExisting) {\n\t\t\t\tthis.hasExisting = false\n\t\t\t\treturn this.clearPhoto()\n\t\t\t}\n\n\t\t\taxios.delete(route('api.photo-uploads.destroy', this.image.path)).then(() => {\n\t\t\t\tthis.clearPhoto()\n\t\t\t})\n\t\t},\n\n\t\tclearPhoto() {\n\t\t\tthis.$emit('removed', this.image)\n\n\t\t\tthis.image.path = null\n\t\t\tthis.image.url = null\n\t\t\tthis.image.crop = null\n\t\t\tthis.image.license = null\n\t\t\tthis.croppedImageUrl = null\n\t\t},\n\n\t\thandleError(error) {\n\t\t\tthis.uploading = false\n\t\t\tthis.loading = false\n\t\t\tthis.progress = 0\n\t\t\tthis.image.url = null\n\t\t\t// Clear the input so we can select the same image if needed.\n\t\t\tthis.$el.querySelector('input[type=\"file\"]').value = ''\n\n\t\t\tif (!error.response) {\n\t\t\t\treturn this.$buefy.toast.open({\n\t\t\t\t\tduration: 5000,\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\tposition: 'is-top',\n\t\t\t\t\ttype: 'is-danger'\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.error = error.response.data.errors.file[0] || this.trans('Error')\n\t\t},\n\n\t\topenCropModal() {\n\t\t\tthis.showCropModal = true\n\t\t},\n\n\t\tcloseCropModal() {\n\t\t\tthis.showCropModal = false\n\t\t},\n\n\t\tcropThumbnail(crop) {\n\t\t\t// Create image\n\t\t\tconst image = document.createElement('img')\n\t\t\timage.src = this.image.url\n\n\t\t\t// Draw canvas\n\t\t\tconst canvas = document.createElement('canvas')\n\n  \t\tcanvas.setAttribute('width', crop.width)\n  \t\tcanvas.setAttribute('height', crop.height)\n\n  \t\tconst context = canvas.getContext('2d')\n  \t\tcontext.drawImage(image, -crop.x, -crop.y)\n\n\t\t\tthis.croppedImageUrl = canvas.toDataURL()\n\t\t},\n\n\t\t/**\n\t\t * Handle license change.\n\t\t *\n\t\t * @param {String|Number} license\n\t\t */\n\t\thandleLicenseChanged(license) {\n\t\t\tthis.image.license = license\n\t\t\tthis.$emit('license-changed', license)\n    }\n\t}\n}\n</script>\n","import { render, staticRenderFns } from \"./ImageCropModal.vue?vue&type=template&id=035960ca&\"\nimport script from \"./ImageCropModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageCropModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":_vm.animation}},[(_vm.isActive)?_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-background\"}),_vm._v(\" \"),_c('div',{staticClass:\"animation-content modal-content\",style:({ maxWidth: _vm.newWidth })},[_c('img',{ref:\"cropModalImage\",staticClass:\"image\",attrs:{\"src\":_vm.imageUrl,\"alt\":\"Cropped image\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"modal-close is-large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.cancel('x')}}}),_vm._v(\" \"),_c('button',{staticClass:\"modal-action\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.cropImage}},[_c('b-icon',{attrs:{\"icon\":\"check\"}})],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./PhotoUpload.vue?vue&type=template&id=58da6edb&\"\nimport script from \"./PhotoUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./PhotoUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"active\":_vm.active,\"can-cancel\":['escape', 'x']},on:{\"update:active\":function($event){_vm.active=$event},\"close\":_vm.onClose}},[_c('div',{staticClass:\"image-modal\"},[_c('img',{attrs:{\"src\":_vm.openImage}}),_vm._v(\" \"),(_vm.items.length > 1)?_c('div',{staticClass:\"image-modal-navigation\"},[_c('div',{staticClass:\"image-modal-previous\",on:{\"click\":_vm.prev}},[_c('i',{staticClass:\"fa fa-chevron-left\",attrs:{\"aria-hidden\":\"true\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"image-modal-next\",on:{\"click\":_vm.next}},[_c('i',{staticClass:\"fa fa-chevron-right\",attrs:{\"aria-hidden\":\"true\"}})])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageModal.vue?vue&type=script&lang=js&\"","<template>\n  <b-modal :active.sync=\"active\" :can-cancel=\"['escape', 'x']\" @close=\"onClose\">\n    <div class=\"image-modal\">\n      <img :src=\"openImage\">\n\n      <div class=\"image-modal-navigation\" v-if=\"items.length > 1\">\n        <div class=\"image-modal-previous\" @click=\"prev\">\n          <i class=\"fa fa-chevron-left\" aria-hidden=\"true\"></i>\n        </div>\n\n        <div class=\"image-modal-next\" @click=\"next\">\n          <i class=\"fa fa-chevron-right\" aria-hidden=\"true\"></i>\n        </div>\n      </div>\n    </div>\n  </b-modal>\n</template>\n\n<script>\nexport default {\n  name: 'nzImageModal',\n\n  props: {\n    items: {\n      type: Array,\n      default: () => []\n    },\n    value: {\n      type: Number,\n      default: 0\n    }\n  },\n\n  data() {\n    return {\n      newValue: this.value,\n      active: false\n    }\n  },\n\n  computed: {\n    openImage() {\n      return this.items[this.newValue]\n    }\n  },\n\n  watch: {\n    newValue() {\n      this.$emit('input', this.newValue)\n    },\n\n    openImage: {\n      handler(value) {\n        this.active = Boolean(value)\n      }\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.registerKeyListener)\n  },\n\n  mounted() {\n    this.active = Boolean(this.openImage)\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.registerKeyListener)\n  },\n\n  methods: {\n    next() {\n      let newValue = this.newValue + 1\n\n      if (newValue >= this.items.length) {\n        newValue = 0\n      }\n\n      this.newValue = newValue\n    },\n\n    prev() {\n      let newValue = this.newValue - 1\n\n      if (newValue < 0) {\n        newValue = this.items.length - 1\n      }\n\n      this.newValue = newValue\n    },\n\n    registerKeyListener(e) {\n      const key = e.which || e.keyCode\n\n      if (key === 37) { // left arrow\n        this.prev()\n      } else if (key === 39) { // right arrow\n        this.next()\n      }\n    },\n\n    onClose(e) {\n      this.active = false\n\n      // b-modal component adds classes that prevent scrolling on body when active\n      // so we need to wait for it to remove them before we signal it's closing\n      this.$nextTick(() => {\n        this.$emit('close', e)\n      })\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./ImageModal.vue?vue&type=template&id=0d20be8b&\"\nimport script from \"./ImageModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseIteratee = require('./_baseIteratee'),\n    basePullAt = require('./_basePullAt');\n\n/**\n * Removes all elements from `array` that `predicate` returns truthy for\n * and returns an array of the removed elements. The predicate is invoked\n * with three arguments: (value, index, array).\n *\n * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n * to pull elements from an array by value.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new array of removed elements.\n * @example\n *\n * var array = [1, 2, 3, 4];\n * var evens = _.remove(array, function(n) {\n *   return n % 2 == 0;\n * });\n *\n * console.log(array);\n * // => [1, 3]\n *\n * console.log(evens);\n * // => [2, 4]\n */\nfunction remove(array, predicate) {\n  var result = [];\n  if (!(array && array.length)) {\n    return result;\n  }\n  var index = -1,\n      indexes = [],\n      length = array.length;\n\n  predicate = baseIteratee(predicate, 3);\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result.push(value);\n      indexes.push(index);\n    }\n  }\n  basePullAt(array, indexes);\n  return result;\n}\n\nmodule.exports = remove;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n"],"sourceRoot":""}