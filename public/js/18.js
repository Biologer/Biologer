(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{BiGR:function(t,e,n){var i=n("nmnc"),s=n("03A+"),r=n("Z0cm"),o=i?i.isConcatSpreadable:void 0;t.exports=function(t){return r(t)||s(t)||!!(o&&t&&t[o])}},FZoo:function(t,e,n){var i=n("MrPd"),s=n("4uTw"),r=n("wJg7"),o=n("GoyQ"),a=n("9Nap");t.exports=function(t,e,n,l){if(!o(t))return t;for(var u=-1,c=(e=s(e,t)).length,d=c-1,f=t;null!=f&&++u<c;){var m=a(e[u]),h=n;if(u!=d){var b=f[m];void 0===(h=l?l(b,m,f):void 0)&&(h=o(b)?b:r(e[u+1])?[]:{})}i(f,m,h),f=f[m]}return t}},FfPP:function(t,e,n){var i=n("idmN"),s=n("hgQt");t.exports=function(t,e){return i(t,e,(function(e,n){return s(t,n)}))}},JZM8:function(t,e,n){var i=n("FfPP"),s=n("xs/l")((function(t,e){return null==t?{}:i(t,e)}));t.exports=s},QIyF:function(t,e,n){var i=n("Kz5y");t.exports=function(){return i.Date.now()}},TYy9:function(t,e,n){var i=n("XGnz");t.exports=function(t){return(null==t?0:t.length)?i(t,1):[]}},XGnz:function(t,e,n){var i=n("CH3K"),s=n("BiGR");t.exports=function t(e,n,r,o,a){var l=-1,u=e.length;for(r||(r=s),a||(a=[]);++l<u;){var c=e[l];n>0&&r(c)?n>1?t(c,n-1,r,o,a):i(a,c):o||(a[a.length]=c)}return a}},"Y+p1":function(t,e,n){var i=n("wF/u");t.exports=function(t,e){return i(t,e)}},idmN:function(t,e,n){var i=n("ZWtO"),s=n("FZoo"),r=n("4uTw");t.exports=function(t,e,n){for(var o=-1,a=e.length,l={};++o<a;){var u=e[o],c=i(t,u);n(c,u)&&s(l,r(u,t),c)}return l}},mk2N:function(t,e,n){"use strict";var i=n("5YJQ"),s=n.n(i),r=n("JZM8"),o=n.n(r),a=n("mwIZ"),l=n.n(a),u=n("Y+p1"),c=n.n(u);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={name:"nzFieldObservationForm",props:{action:{type:String,required:!0},method:{type:String,default:"POST"},redirectUrl:String,cancelUrl:String,submitMore:Boolean,shouldConfirmSubmit:Boolean,confirmSubmitMessage:{type:String,default:function(){return this.trans("You are about to submit")}},shouldAskReason:Boolean,shouldConfirmCancel:Boolean,submitOnlyDirty:Boolean,submitOnlyDirtyMessage:{type:String,default:function(){return this.trans("There are no changes, the data will not be saved.")}}},data:function(){return{form:this.newForm(),keepAfterSubmit:[],submittingWithRedirect:!1,submittingWithoutRedirect:!1,confirmingSubmit:!1,confirmingCancel:!1,locale:window.App.locale}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{newForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.a(t,{resetOnSuccess:!1})},registerKeyListener:function(t){var e=13===(t.which||t.keyCode);t.ctrlKey&&t.shiftKey&&e?this.submitMore&&this.submitWithoutRedirect():t.ctrlKey&&e&&this.submitWithRedirect()},confirmSubmit:function(t){var e=this;if(!this.confirmingSubmit){this.confirmingSubmit=!0;var n={message:this.confirmSubmitMessage,confirmText:this.trans("buttons.save"),cancelText:this.trans("buttons.cancel"),onConfirm:t,onCancel:function(){e.confirmingSubmit=!1}};return this.shouldAskReason?this.promptForReason(n):this.$buefy.dialog.confirm(n)}},promptForReason:function(t){var e=this,n=this.$buefy.dialog.prompt(f(f({},t),{},{inputAttrs:{placeholder:this.trans("Reason"),required:!0,maxlength:255}}));return n.$nextTick((function(){n.$refs.input.addEventListener("invalid",(function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity(e.trans("This field is required and can contain max 255 chars."))})),n.$refs.input.addEventListener("input",(function(t){n.validationMessage=null}))})),n},notifyNoChanges:function(){this.$buefy.toast.open({message:this.submitOnlyDirtyMessage,type:"is-info"})},notifyNoChangesAndRedirect:function(){var t=this;this.notifyNoChanges(),setTimeout((function(){t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},submitWithRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChangesAndRedirect():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithRedirect):void this.performSubmitWithRedirect()},performSubmitWithRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithRedirect:function(){var t=this;this.form.processing=!0,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"}),setTimeout((function(){t.form.processing=!1,t.submittingWithRedirect=!1,t.hookAfterSubmitWithRedirect(),t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},hookAfterSubmitWithRedirect:function(){},submitWithoutRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChanges():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithoutRedirect):void this.performSubmitWithoutRedirect()},performSubmitWithoutRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithoutRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithoutRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithoutRedirect:function(){this.submittingWithoutRedirect=!1,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"});var t=o()(this.form.data(),this.keepAfterSubmit);this.form.reset(),this.form.populate(t),this.hookAfterSubmitWithoutRedirect()},hookAfterSubmitWithoutRedirect:function(){},onFailedSubmit:function(t){this.submittingWithRedirect=!1,this.submittingWithoutRedirect=!1,this.$buefy.toast.open({duration:2500,message:l()(t,"response.data.message",t.message),type:"is-danger"})},isDirty:function(){return!c()(this.form.data(),this.form.initial)},confirmCancel:function(){var t=this;this.confirmingCancel||(this.confirmingCancel=!0,this.$buefy.dialog.confirm({message:this.trans("If you leave this page changes will not be saved."),onConfirm:function(){t.confirmingCancel=!1,window.location.href=t.cancelUrl},onCancel:function(){t.confirmingCancel=!1},cancelText:this.trans("buttons.stay_on_page"),confirmText:this.trans("buttons.leave_page")}))},onCancel:function(t){this.shouldConfirmCancel&&this.isDirty()&&(t.preventDefault(),this.confirmCancel())}}}},nvJa:function(t,e,n){"use strict";n.r(e);var i=n("5YJQ"),s=n.n(i),r=n("7GkX"),o=n.n(r),a=n("J2m7"),l=n.n(a),u=n("afOK"),c=n.n(u),d=n("mwIZ"),f=n.n(d),m=n("mk2N"),h=n("xWf0"),b=n("uuKk");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(){var t={};return o()(window.App.supportedLocales).forEach((function(e){t[e]=null})),t}var x={name:"nzTaxonForm",mixins:[m.a],components:{NzWysiwyg:h.a,NzTaxonAutocomplete:b.a},props:{taxon:{type:Object,default:function(){var t;return g(t={name:null,parent_id:null,rank:"species",rank_level:10,author:null,fe_id:null,fe_old_id:null,conservation_legislations:[],conservation_documents:[],red_lists:[],stages:[],restricted:!1,allochthonous:!1,invasive:!1},"restricted",!1),g(t,"uses_atlas_codes",!1),t}},ranks:Array,conservationLegislations:Array,conservationDocuments:Array,redListCategories:Array,redLists:{type:Array,default:function(){return[]}},stages:Array,nativeNames:{type:Object,default:function(){return _()}},descriptions:{type:Object,default:function(){return _()}}},data:function(){return{form:this.newForm(),parentName:f()(this.taxon,"parent.name"),selectedParent:null,chosenRedList:null}},computed:{rankOptions:function(){var t=this;return this.selectedParent?this.ranks.filter((function(e){return e.level<t.selectedParent.rank_level})):this.ranks},availableRedLists:function(){var t=this.form.red_lists_data;return this.redLists.filter((function(e){return!l()(t,(function(t){return e.id==t.red_list_id}))}))},supportedLocales:function(){return window.App.supportedLocales}},watch:{selectedParent:function(t){this.shouldResetRank(t)&&(this.form.rank=null)}},methods:{newForm:function(){return new s.a(v(v({},this.taxon),{},{stages_ids:this.taxon.stages.map((function(t){return t.id})),conservation_legislations_ids:this.taxon.conservation_legislations.map((function(t){return t.id})),conservation_documents_ids:this.taxon.conservation_documents.map((function(t){return t.id})),red_lists_data:this.taxon.red_lists.map((function(t){return{red_list_id:t.id,category:t.pivot.category}})),native_name:this.nativeNames,description:this.descriptions,reason:null,uses_atlas_codes:this.taxon.uses_atlas_codes}),{resetOnSuccess:!1})},addRedList:function(){this.chosenRedList&&(this.form.red_lists_data.push({red_list_id:this.chosenRedList.id,category:c()(this.redListCategories)}),this.chosenRedList=null)},removeRedList:function(t){this.form.red_lists_data.splice(t,1)},getRedListName:function(t){return l()(this.redLists,{id:t}).name},onTaxonSelect:function(t){this.selectedParent=t,this.form.parent_id=t?t.id:null,t&&t.stages.length&&(this.form.stages_ids=t.stages.map((function(t){return t.id})))},shouldResetRank:function(t){return t&&this.getRankLevel(this.form.rank)>=t.rank_level},getRankLevel:function(t){return f()(l()(this.ranks,{value:t}),"level")},focusOnTranslation:function(t,e){var n=this,i=o()(this.supportedLocales),s="".concat(e,"-").concat(i[t]);setTimeout((function(){c()(n.$refs[s]).focus()}),500)}}},y=n("KHd+"),k=Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{action:t.action,method:"POST"},on:{submit:function(e){return e.preventDefault(),t.submitWithRedirect(e)}}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-4"},[n("nz-taxon-autocomplete",{attrs:{label:t.trans("labels.taxa.parent"),error:t.form.errors.has("parent_id"),message:t.form.errors.first("parent_id"),taxon:t.taxon.parent||null,except:t.taxon.id,placeholder:t.trans("labels.taxa.search_for_taxon"),autofocus:""},on:{select:t.onTaxonSelect},model:{value:t.parentName,callback:function(e){t.parentName=e},expression:"parentName"}})],1),t._v(" "),n("div",{staticClass:"column is-5"},[n("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.taxa.name"),type:t.form.errors.has("name")?"is-danger":"",message:t.form.errors.has("name")?t.form.errors.first("name"):""}},[n("b-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),n("div",{staticClass:"column is-3"},[n("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.taxa.rank"),type:t.form.errors.has("rank")?"is-danger":"",message:t.form.errors.has("rank")?t.form.errors.first("rank"):""}},[n("b-select",{attrs:{expanded:""},model:{value:t.form.rank,callback:function(e){t.$set(t.form,"rank",e)},expression:"form.rank"}},t._l(t.rankOptions,(function(e,i){return n("option",{key:i,domProps:{value:e.value,textContent:t._s(e.label)}})})),0)],1)],1)]),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.taxa.author"),type:t.form.errors.has("author")?"is-danger":"",message:t.form.errors.has("author")?t.form.errors.first("author"):""}},[n("b-input",{model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),n("hr"),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.taxa.native_name")}},[n("b-tabs",{staticClass:"block",attrs:{size:"is-small"},on:{change:function(e){return t.focusOnTranslation(e,"native_name")}}},t._l(t.supportedLocales,(function(e,i){return n("b-tab-item",{key:i,attrs:{label:t.trans("languages."+e.name)}},[n("b-input",{ref:"native_name-"+i,refInFor:!0,model:{value:t.form.native_name[i],callback:function(e){t.$set(t.form.native_name,i,e)},expression:"form.native_name[locale]"}})],1)})),1)],1),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.taxa.description")}},[n("b-tabs",{staticClass:"block",attrs:{size:"is-small"},on:{change:function(e){return t.focusOnTranslation(e,"description")}}},t._l(t.supportedLocales,(function(e,i){return n("b-tab-item",{key:i,attrs:{label:t.trans("languages."+e.name)}},[n("nz-wysiwyg",{ref:"description-"+i,refInFor:!0,model:{value:t.form.description[i],callback:function(e){t.$set(t.form.description,i,e)},expression:"form.description[locale]"}})],1)})),1)],1),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half"},[n("b-field",{attrs:{label:t.trans("labels.taxa.fe_old_id"),type:t.form.errors.has("fe_old_id")?"is-danger":"",message:t.form.errors.has("fe_old_id")?t.form.errors.first("fe_old_id"):""}},[n("b-input",{model:{value:t.form.fe_old_id,callback:function(e){t.$set(t.form,"fe_old_id",e)},expression:"form.fe_old_id"}})],1)],1),t._v(" "),n("div",{staticClass:"column is-half"},[n("b-field",{attrs:{label:t.trans("labels.taxa.fe_id"),type:t.form.errors.has("fe_id")?"is-danger":"",message:t.form.errors.has("fe_id")?t.form.errors.first("fe_id"):""}},[n("b-input",{model:{value:t.form.fe_id,callback:function(e){t.$set(t.form,"fe_id",e)},expression:"form.fe_id"}})],1)],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.taxa.restricted")}},[n("div",{staticClass:"field"},[n("b-switch",{model:{value:t.form.restricted,callback:function(e){t.$set(t.form,"restricted",e)},expression:"form.restricted"}},[t._v("\n            "+t._s(t.form.restricted?t.trans("Yes"):t.trans("No"))+"\n          ")])],1)])],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.taxa.allochthonous")}},[n("b-switch",{model:{value:t.form.allochthonous,callback:function(e){t.$set(t.form,"allochthonous",e)},expression:"form.allochthonous"}},[t._v("\n          "+t._s(t.form.allochthonous?t.trans("Yes"):t.trans("No"))+"\n        ")])],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.taxa.invasive")}},[n("b-switch",{model:{value:t.form.invasive,callback:function(e){t.$set(t.form,"invasive",e)},expression:"form.invasive"}},[t._v("\n          "+t._s(t.form.invasive?t.trans("Yes"):t.trans("No"))+"\n        ")])],1)],1)]),t._v(" "),t.stages.length?n("b-field",{attrs:{label:t.trans("labels.taxa.stages")}},[n("div",{staticClass:"block"},t._l(t.stages,(function(e){return n("b-checkbox",{key:e.id,attrs:{"native-value":e.id},model:{value:t.form.stages_ids,callback:function(e){t.$set(t.form,"stages_ids",e)},expression:"form.stages_ids"}},[t._v("\n        "+t._s(t.trans("stages."+e.name))+"\n      ")])})),1)]):t._e(),t._v(" "),t.conservationLegislations.length?n("b-field",{attrs:{label:t.trans("labels.taxa.conservation_legislations")}},[n("div",{staticClass:"block"},[n("div",{staticClass:"columns is-multiline is-gapless"},t._l(t.conservationLegislations,(function(e){return n("div",{key:e.id,staticClass:"column is-half"},[n("b-tooltip",{attrs:{label:e.description,multilined:""}},[n("b-checkbox",{attrs:{"native-value":e.id},model:{value:t.form.conservation_legislations_ids,callback:function(e){t.$set(t.form,"conservation_legislations_ids",e)},expression:"form.conservation_legislations_ids"}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)],1)})),0)])]):t._e(),t._v(" "),t.conservationDocuments.length?n("b-field",{attrs:{label:t.trans("labels.taxa.conservation_documents")}},[n("div",{staticClass:"block"},[n("div",{staticClass:"columns is-multiline is-gapless"},t._l(t.conservationDocuments,(function(e){return n("div",{key:e.id,staticClass:"column is-half"},[n("b-tooltip",{attrs:{label:e.description,multilined:""}},[n("b-checkbox",{attrs:{"native-value":e.id},model:{value:t.form.conservation_documents_ids,callback:function(e){t.$set(t.form,"conservation_documents_ids",e)},expression:"form.conservation_documents_ids"}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)],1)})),0)])]):t._e(),t._v(" "),t.redLists.length?n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v(t._s(t.trans("labels.taxa.red_lists")))]),t._v(" "),t._l(t.form.red_lists_data,(function(e,i){return n("b-field",{key:i,attrs:{grouped:""}},[n("div",{staticClass:"control is-expanded"},[n("span",{domProps:{textContent:t._s(t.getRedListName(e.red_list_id))}})]),t._v(" "),n("b-select",{model:{value:e.category,callback:function(n){t.$set(e,"category",n)},expression:"addedRedList.category"}},t._l(t.redListCategories,(function(e){return n("option",{key:e,domProps:{value:e,textContent:t._s(e)}})})),0),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button has-text-danger",attrs:{type:"button"},on:{click:function(e){return t.removeRedList(i)}}},[t._v("Ã—")])])],1)})),t._v(" "),t.availableRedLists.length?n("b-field",{attrs:{grouped:""}},[n("b-select",{attrs:{expanded:""},model:{value:t.chosenRedList,callback:function(e){t.chosenRedList=e},expression:"chosenRedList"}},t._l(t.availableRedLists,(function(e){return n("option",{key:e.id,domProps:{value:e,textContent:t._s(e.name)}})})),0),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.addRedList}},[t._v(t._s(t.trans("labels.taxa.add_red_list")))])])],1):t._e()],2):t._e(),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.taxa.atlas_codes")}},[n("b-checkbox",{model:{value:t.form.uses_atlas_codes,callback:function(e){t.$set(t.form,"uses_atlas_codes",e)},expression:"form.uses_atlas_codes"}},[t._v("\n      "+t._s(t.trans("labels.taxa.uses_atlas_codes"))+"\n    ")])],1),t._v(" "),n("hr"),t._v(" "),n("button",{staticClass:"button is-primary",class:{"is-loading":t.form.processing},attrs:{type:"submit"},on:{click:t.submitWithRedirect}},[t._v("\n    "+t._s(t.trans("buttons.save"))+"\n  ")]),t._v(" "),n("a",{staticClass:"button is-text",attrs:{href:t.cancelUrl},on:{click:t.onCancel}},[t._v(t._s(t.trans("buttons.cancel")))])],1)}),[],!1,null,null,null);e.default=k.exports},sEfC:function(t,e,n){var i=n("GoyQ"),s=n("QIyF"),r=n("tLB3"),o=Math.max,a=Math.min;t.exports=function(t,e,n){var l,u,c,d,f,m,h=0,b=!1,p=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=l,i=u;return l=u=void 0,h=e,d=t.apply(i,n)}function _(t){return h=t,f=setTimeout(y,e),b?g(t):d}function x(t){var n=t-m;return void 0===m||n>=e||n<0||p&&t-h>=c}function y(){var t=s();if(x(t))return k(t);f=setTimeout(y,function(t){var n=e-(t-m);return p?a(n,c-(t-h)):n}(t))}function k(t){return f=void 0,v&&l?g(t):(l=u=void 0,d)}function C(){var t=s(),n=x(t);if(l=arguments,u=this,m=t,n){if(void 0===f)return _(m);if(p)return clearTimeout(f),f=setTimeout(y,e),g(m)}return void 0===f&&(f=setTimeout(y,e)),d}return e=r(e)||0,i(n)&&(b=!!n.leading,c=(p="maxWait"in n)?o(r(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),C.cancel=function(){void 0!==f&&clearTimeout(f),h=0,l=m=u=f=void 0},C.flush=function(){return void 0===f?d:k(s())},C}},uuKk:function(t,e,n){"use strict";var i=n("vDqi"),s=n.n(i),r=n("sEfC"),o=n.n(r),a=n("mwIZ"),l=n.n(a);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c={name:"nzTaxonAutocomplete",props:{label:{type:String,default:"Taxon"},placeholder:{type:String,default:"Search for taxon..."},taxon:{type:Object,default:null},url:{type:String,default:function(){return route("api.taxa.index")}},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean},data:function(){return{data:[],selected:this.taxon||null,loading:!1}},computed:{haveThumbnail:function(){return this.selected&&this.selected.thumbnail_url},icon:function(){return this.selected?"check":"search"}},watch:{taxon:function(t){this.selected=t}},methods:{fetchData:o()((function(){var t=this;if(this.value){this.data=[],this.loading=!0;var e={name:this.value,limit:20};this.except&&(e.except=this.except),s.a.get(this.url,{params:e}).then((function(e){e.data.data.forEach((function(e){return t.data.push(e)})),t.loading=!1}),(function(e){t.loading=!1}))}}),500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===u(t)?l()(t,"name"):t},enterPressed:function(){this.$refs.autocomplete.isActive||this.$emit("enter")}}},d=n("KHd+"),f=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{staticClass:"nz-taxon-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[n("b-field",{attrs:{grouped:""}},[t.haveThumbnail?n("img",{attrs:{width:"32",src:this.selected.thumbnail_url}}):t._e(),t._v(" "),n("b-autocomplete",{ref:"autocomplete",attrs:{value:t.value,data:t.data,field:"name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",autofocus:t.autofocus},on:{input:t.onInput,select:t.onSelect},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterPressed(e)}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"media"},[n("div",{staticClass:"media-left"},[e.option.thumbnail_url?n("img",{attrs:{width:"32",src:e.option.thumbnail_url}}):t._e()]),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n            "+t._s(e.option.name)+t._s(e.option.native_name?" ("+e.option.native_name+")":"")+"\n          ")])])]}}])})],1)],1)}),[],!1,null,null,null);e.a=f.exports},xWf0:function(t,e,n){"use strict";var i=n("XuX8"),s=n.n(i),r=n("rX62"),o=n.n(r);s.a.config.ignoredElements=["trix-editor"];var a=o.a.config.lang;function l(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}o.a.config.toolbar={getDefaultHTML:function(){return'\n    <div class="trix-button-row">\n      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="'.concat(a.bold,'" tabindex="-1">').concat(a.bold,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="').concat(a.italic,'" tabindex="-1">').concat(a.italic,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="#{lang.strike}" tabindex="-1">').concat(a.strike,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="').concat(a.link,'" tabindex="-1">').concat(a.link,'</button>\n      </span>\n      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="').concat(a.undo,'" tabindex="-1">').concat(a.undo,'</button>\n        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="').concat(a.redo,'" tabindex="-1">').concat(a.redo,'</button>\n      </span>\n    </div>\n    <div class="trix-dialogs" data-trix-dialogs>\n      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">\n        <div class="trix-dialog__link-fields">\n          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="').concat(a.urlPlaceholder,'" required data-trix-input>\n          <div class="trix-button-group">\n            <input type="button" class="trix-button trix-button--dialog" value="').concat(a.link,'" data-trix-method="setAttribute">\n            <input type="button" class="trix-button trix-button--dialog" value="').concat(a.unlink,'" data-trix-method="removeAttribute">\n          </div>\n        </div>\n      </div>\n    </div>\n  ')}};var u={name:"nzWysiwyg",props:{name:String,value:String},data:function(){return{inputId:l()}},mounted:function(){this.$refs.trix.addEventListener("trix-change",this.onInput)},beforeDestroy:function(){this.$refs.trix.removeEventListener("trix-change",this.onInput)},methods:{onInput:function(t){this.$emit("input",t.target.innerHTML)},focus:function(){this.$refs.trix.focus()}}},c=n("KHd+"),d=Object(c.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wysiwyg"},[e("input",{ref:"input",attrs:{id:this.inputId,type:"hidden",name:this.name},domProps:{value:this.value}}),this._v(" "),e("trix-editor",{ref:"trix",attrs:{input:this.inputId}})],1)}),[],!1,null,null,null);e.a=d.exports},"xs/l":function(t,e,n){var i=n("TYy9"),s=n("Ioao"),r=n("wclG");t.exports=function(t){return r(s(t,void 0,i),t+"")}}}]);
//# sourceMappingURL=18.js.map?id=84ce10d8ea158637f17c