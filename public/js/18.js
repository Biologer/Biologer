(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"0JjW":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guardAgainstReservedFieldName=function(t){if(-1!==r.indexOf(t))throw new Error("Field name "+t+" isn't allowed to be used in a Form or Errors instance.")};var r=e.reservedFieldNames=["__http","__options","__validateRequestType","clear","data","delete","errors","getError","getErrors","hasError","initial","onFail","only","onSuccess","patch","populate","post","processing","successful","put","reset","submit","withData","withErrors","withOptions"]},"4sDh":function(t,e,n){var r=n("4uTw"),o=n("03A+"),i=n("Z0cm"),a=n("wJg7"),s=n("shjB"),u=n("9Nap");t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,f=!1;++c<l;){var d=u(e[c]);if(!(f=null!=t&&n(t,d)))break;t=t[d]}return f||++c!=l?f:!!(l=null==t?0:t.length)&&s(l)&&a(d,l)&&(i(t)||o(t))}},"5YJQ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("eXgj");Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i(r).default}}),Object.defineProperty(e,"Form",{enumerable:!0,get:function(){return i(r).default}});var o=n("ukZA");function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Errors",{enumerable:!0,get:function(){return i(o).default}})},BiGR:function(t,e,n){var r=n("nmnc"),o=n("03A+"),i=n("Z0cm"),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},CH3K:function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},FZoo:function(t,e,n){var r=n("MrPd"),o=n("4uTw"),i=n("wJg7"),a=n("GoyQ"),s=n("9Nap");t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,l=(e=o(e,t)).length,f=l-1,d=t;null!=d&&++c<l;){var h=s(e[c]),p=n;if(c!=f){var v=d[h];void 0===(p=u?u(v,h,d):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}r(d,h,p),d=d[h]}return t}},FfPP:function(t,e,n){var r=n("idmN"),o=n("hgQt");t.exports=function(t,e){return r(t,e,function(e,n){return o(t,n)})}},JZM8:function(t,e,n){var r=n("FfPP"),o=n("xs/l")(function(t,e){return null==t?{}:r(t,e)});t.exports=o},Juji:function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},TYy9:function(t,e,n){var r=n("XGnz");t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},WfdN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){return t instanceof File||t instanceof FileList}function i(t){if(null===t)return null;if(o(t))return t;if(Array.isArray(t)){var e=[];for(var n in t)t.hasOwnProperty(n)&&(e[n]=i(t[n]));return e}if("object"===(void 0===t?"undefined":r(t))){var a={};for(var s in t)t.hasOwnProperty(s)&&(a[s]=i(t[s]));return a}return t}e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isFile=o,e.merge=function(t,e){for(var n in e)t[n]=i(e[n])},e.cloneDeep=i},XGnz:function(t,e,n){var r=n("CH3K"),o=n("BiGR");t.exports=function t(e,n,i,a,s){var u=-1,c=e.length;for(i||(i=o),s||(s=[]);++u<c;){var l=e[u];n>0&&i(l)?n>1?t(l,n-1,i,a,s):r(s,l):a||(s[s.length]=l)}return s}},XIG7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t||"undefined"===t||0===t.length)return e.append(n,t);for(var r in t)t.hasOwnProperty(r)&&a(e,i(n,r),t[r]);return e}function i(t,e){return t?t+"["+e+"]":e}function a(t,e,n){return n instanceof Date?t.append(e,n.toISOString()):n instanceof File?t.append(e,n,n.name):"boolean"==typeof n?t.append(e,n?"1":"0"):"object"!==(void 0===n?"undefined":r(n))?t.append(e,n):void o(n,t,e)}e.objectToFormData=o},eXgj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n("ukZA"),s=(r=a)&&r.__esModule?r:{default:r},u=n("f7hI");var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.processing=!1,this.successful=!1,this.withData(e).withOptions(n).withErrors({})}return i(t,[{key:"withData",value:function(t){for(var e in(0,u.isArray)(t)&&(t=t.reduce(function(t,e){return t[e]="",t},{})),this.setInitialValues(t),this.errors=new s.default,this.processing=!1,this.successful=!1,t)(0,u.guardAgainstReservedFieldName)(e),this[e]=t[e];return this}},{key:"withErrors",value:function(t){return this.errors=new s.default(t),this}},{key:"withOptions",value:function(t){this.__options={resetOnSuccess:!0},t.hasOwnProperty("resetOnSuccess")&&(this.__options.resetOnSuccess=t.resetOnSuccess),t.hasOwnProperty("onSuccess")&&(this.onSuccess=t.onSuccess),t.hasOwnProperty("onFail")&&(this.onFail=t.onFail);var e="undefined"!=typeof window&&window.axios;if(this.__http=t.http||e||n("vDqi"),!this.__http)throw new Error("No http library provided. Either pass an http option, or install axios.");return this}},{key:"data",value:function(){var t={};for(var e in this.initial)t[e]=this[e];return t}},{key:"only",value:function(t){var e=this;return t.reduce(function(t,n){return t[n]=e[n],t},{})}},{key:"reset",value:function(){(0,u.merge)(this,this.initial),this.errors.clear()}},{key:"setInitialValues",value:function(t){this.initial={},(0,u.merge)(this.initial,t)}},{key:"populate",value:function(t){var e=this;return Object.keys(t).forEach(function(n){(0,u.guardAgainstReservedFieldName)(n),e.hasOwnProperty(n)&&(0,u.merge)(e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,t[n]))}),this}},{key:"clear",value:function(){for(var t in this.initial)this[t]="";this.errors.clear()}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"delete",value:function(t){return this.submit("delete",t)}},{key:"submit",value:function(t,e){var n=this;return this.__validateRequestType(t),this.errors.clear(),this.processing=!0,this.successful=!1,new Promise(function(r,o){n.__http[t](e,n.hasFiles()?(0,u.objectToFormData)(n.data()):n.data()).then(function(t){n.processing=!1,n.onSuccess(t.data),r(t.data)}).catch(function(t){n.processing=!1,n.onFail(t),o(t)})})}},{key:"hasFiles",value:function(){for(var t in this.initial)if(this.hasFilesDeep(this[t]))return!0;return!1}},{key:"hasFilesDeep",value:function(t){if(null===t)return!1;if("object"===(void 0===t?"undefined":o(t)))for(var e in t)if(t.hasOwnProperty(e)&&(0,u.isFile)(t[e]))return!0;if(Array.isArray(t))for(var n in t)if(t.hasOwnProperty(n))return this.hasFilesDeep(t[n]);return(0,u.isFile)(t)}},{key:"onSuccess",value:function(t){this.successful=!0,this.__options.resetOnSuccess&&this.reset()}},{key:"onFail",value:function(t){this.successful=!1,t.response&&t.response.data.errors&&this.errors.record(t.response.data.errors)}},{key:"hasError",value:function(t){return this.errors.has(t)}},{key:"getError",value:function(t){return this.errors.first(t)}},{key:"getErrors",value:function(t){return this.errors.get(t)}},{key:"__validateRequestType",value:function(t){var e=["get","delete","head","post","put","patch"];if(-1===e.indexOf(t))throw new Error("`"+t+"` is not a valid request type, must be one of: `"+e.join("`, `")+"`.")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(new t).withData(e)}}]),t}();e.default=c},f7hI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("WfdN");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var o=n("XIG7");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=n("0JjW");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})},hgQt:function(t,e,n){var r=n("Juji"),o=n("4sDh");t.exports=function(t,e){return null!=t&&o(t,e,r)}},idmN:function(t,e,n){var r=n("ZWtO"),o=n("FZoo"),i=n("4uTw");t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var c=e[a],l=r(t,c);n(l,c)&&o(u,i(c,t),l)}return u}},sa4R:function(t,e,n){"use strict";n.r(e);var r=n("vDqi"),o=n.n(r),i=(n("3wZJ"),n("9KKN")),a=n("2qhe"),s=n("luGL"),u=n("DgLj"),c={name:"nzLiteratureObservationsTable",mixins:[i.a],components:{NzTable:s.a,NzExportModal:u.a},props:{perPageOptions:{type:Array,default:function(){return[15,30,50,100]},validator:function(t){return t.length}},listRoute:String,viewRoute:String,editRoute:String,deleteRoute:String,empty:{type:String,default:"Nothing here."},showActivityLog:Boolean,exportUrl:String,exportColumns:{type:Array,default:function(){return[]}}},data:function(){return{data:[],total:0,loading:!1,sortField:"id",sortOrder:"desc",defaultSortOrder:"desc",page:1,perPage:this.perPageOptions[0],checkedRows:[],activityLog:[],showExportModal:!1,exporting:!1}},computed:{hasActions:function(){return this.exportable},checkedIds:function(){return this.checkedRows.map(function(t){return t.id})},exportable:function(){return!(!this.exportUrl||!this.exportColumns.length)},actionRunning:function(){return this.exporting}},created:function(){this.restoreState(),this.loadAsyncData(),this.$on("filter",this.loadAsyncData)},methods:{loadAsyncData:function(){var t=this;return this.loading=!0,o.a.get(route(this.listRoute).withQuery({sort_by:"".concat(this.sortField,".").concat(this.sortOrder),page:this.page,per_page:this.perPage})).then(function(e){var n=e.data;t.data=[],t.total=n.meta.total,n.data.forEach(function(e){return t.data.push(e)}),t.loading=!1},function(e){t.data=[],t.total=0,t.loading=!1})},onPageChange:function(t){this.page=t,this.loadAsyncData()},onSort:function(t,e){this.sortField=t,this.sortOrder=e,this.saveState(),this.loadAsyncData()},onPerPageChange:function(t){t!==this.perPage&&(this.perPage=t,this.saveState(),this.loadAsyncData())},confirmRemove:function(t){var e=this;this.$buefy.dialog.confirm({message:this.trans("Are you sure you want to delete this record?"),confirmText:this.trans("buttons.delete"),cancelText:this.trans("buttons.cancel"),type:"is-danger",onConfirm:function(){e.remove(t)}})},remove:function(t){var e=this;return o.a.delete(route(this.deleteRoute,t.id)).then(function(t){e.$buefy.toast.open({message:e.trans("Record deleted"),type:"is-success"}),e.loadAsyncData()}).catch(function(t){console.error(t)})},editLink:function(t){return route(this.editRoute,t.id)},viewLink:function(t){return this.viewRoute?route(this.viewRoute,t.id):null},openActivityLogModal:function(t){this.activityLog=t.activity},openExportModal:function(){this.showExportModal=!0},onExportDone:function(t){this.showExportModal=!1,t.url?this.$buefy.modal.open({parent:this,component:a.a,canCancel:[],hasModalCard:!0,props:{url:t.url}}):this.$buefy.toast.open({duration:0,message:"Something's not good, also I'm on bottom",type:"is-danger"})}},filters:{truncate:function(t,e){return t.length>e?t.substr(0,e)+"...":t}}},l=n("KHd+"),f=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field-observations-table"},[n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"}),t._v(" "),t.hasActions?n("div",{staticClass:"level-right"},[n("div",{staticClass:"level-item"},[n("b-dropdown",{attrs:{position:"is-bottom-left"}},[n("button",{staticClass:"button is-touch-full",class:{"is-loading":t.actionRunning},attrs:{slot:"trigger"},slot:"trigger"},[n("span",[t._v(t._s(t.trans("labels.actions")))]),t._v(" "),n("span",{staticClass:"icon has-text-grey"},[n("i",{staticClass:"fa fa-angle-down"})])]),t._v(" "),t.exportable?n("b-dropdown-item",{on:{click:t.openExportModal}},[n("b-icon",{staticClass:"has-text-grey",attrs:{icon:"download"}}),t._v(" "),n("span",[t._v(t._s(t.trans("buttons.export")))])],1):t._e()],1)],1)]):t._e()]),t._v(" "),n("hr"),t._v(" "),n("nz-table",{attrs:{data:t.data,loading:t.loading,paginated:"","backend-pagination":"",total:t.total,"per-page":t.perPage,"per-page-options":t.perPageOptions,"pagination-on-top":"","backend-sorting":"","default-sort-direction":t.defaultSortOrder,"default-sort":[t.sortField,t.sortOrder],detailed:"","mobile-cards":!0,checkable:t.hasActions,"checked-rows":t.checkedRows},on:{"page-change":t.onPageChange,"per-page-change":t.onPerPageChange,sort:t.onSort,"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("b-table-column",{attrs:{field:"id",label:t.trans("labels.id"),width:"40",numeric:"",sortable:""}},[t._v("\n        "+t._s(r.id)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"taxon_name",label:t.trans("labels.literature_observations.taxon"),sortable:""}},[t._v("\n        "+t._s(r.taxon?r.taxon.name:"")+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"year",label:t.trans("labels.literature_observations.year"),numeric:"",sortable:""}},[t._v("\n        "+t._s(r.year)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"month",label:t.trans("labels.literature_observations.month"),numeric:"",sortable:""}},[t._v("\n        "+t._s(r.month)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"day",label:t.trans("labels.literature_observations.day"),numeric:"",sortable:""}},[t._v("\n        "+t._s(r.day)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{width:"150",numeric:""}},[t.showActivityLog&&r.activity?n("a",{attrs:{title:t.trans("Activity Log")},on:{click:function(e){return t.openActivityLogModal(r)}}},[n("b-icon",{attrs:{icon:"history"}})],1):t._e(),t._v(" "),t.viewRoute?n("a",{attrs:{href:t.viewLink(r),title:t.trans("buttons.view")}},[n("b-icon",{attrs:{icon:"eye"}})],1):t._e(),t._v(" "),n("a",{attrs:{href:t.editLink(r),title:t.trans("buttons.edit")}},[n("b-icon",{attrs:{icon:"edit"}})],1),t._v(" "),n("a",{attrs:{title:t.trans("buttons.delete")},on:{click:function(e){return t.confirmRemove(r)}}},[n("b-icon",{attrs:{icon:"trash"}})],1)])]}},{key:"detail",fn:function(e){var r=e.row;return[n("article",{staticClass:"media"},[n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("strong",[t._v(t._s(r.location))]),t._v(" "),n("small",[t._v(t._s(r.latitude)+", "+t._s(r.longitude))]),n("br"),t._v(" "),n("small",[t._v(t._s(t.trans("labels.literature_observations.elevation"))+": "+t._s(r.elevation)+"m")]),n("br"),t._v(" "),r.accuracy?n("small",[t._v(t._s(t.trans("labels.literature_observations.accuracy"))+": "+t._s(r.accuracy)+"m")]):t._e()])])])]}}])},[t._v(" "),n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[t._v(t._s(t.empty))])])])])],2),t._v(" "),n("b-modal",{attrs:{active:t.activityLog.length>0},on:{close:function(e){t.activityLog=[]}}},[n("div",{staticClass:"modal-card"},[n("div",{staticClass:"modal-card-head"},[n("b-icon",{attrs:{icon:"history"}}),t._v(" "),n("p",{staticClass:"modal-card-title"},[t._v(t._s(t.trans("Activity Log")))])],1),t._v(" "),n("div",{staticClass:"modal-card-body"},[n("nz-literature-observation-activity-log",{attrs:{activities:t.activityLog}})],1)])]),t._v(" "),n("b-modal",{attrs:{active:t.showExportModal,"has-modal-card":"","can-cancel":[]},on:{close:function(e){t.showExportModal=!1}}},[n("nz-export-modal",{attrs:{checked:t.checkedIds,columns:t.exportColumns,url:t.exportUrl,types:["custom","darwin_core"]},on:{cancel:function(e){t.showExportModal=!1},done:t.onExportDone}})],1)],1)},[],!1,null,null,null);e.default=f.exports},ukZA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.record(e)}return r(t,[{key:"all",value:function(){return this.errors}},{key:"has",value:function(t){var e=this.errors.hasOwnProperty(t);e||(e=Object.keys(this.errors).filter(function(e){return e.startsWith(t+".")||e.startsWith(t+"[")}).length>0);return e}},{key:"first",value:function(t){return this.get(t)[0]}},{key:"get",value:function(t){return this.errors[t]||[]}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"record",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errors=t}},{key:"clear",value:function(t){if(t){var e=Object.assign({},this.errors);Object.keys(e).filter(function(e){return e===t||e.startsWith(t+".")||e.startsWith(t+"[")}).forEach(function(t){return delete e[t]}),this.errors=e}else this.errors={}}}]),t}();e.default=o},"xs/l":function(t,e,n){var r=n("TYy9"),o=n("Ioao"),i=n("wclG");t.exports=function(t){return i(o(t,void 0,r),t+"")}}}]);
//# sourceMappingURL=18.js.map?id=c2ab3e8748c351c0191c