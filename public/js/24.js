(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{Xfb0:function(t,e,r){"use strict";r.r(e);var n=r("5YJQ"),i=r.n(n),o=r("J2m7"),s=r.n(o),a=r("mk2N"),l=r("o0o1"),u=r.n(l);function c(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,i)}var f={name:"nzPublicationAttachmentUpload",props:{attachment:Object},data:function(){return{newAttachment:this.attachment,reader:null,uploading:!1,progress:0,error:null}},computed:{hasAttachment:function(){return Boolean(this.newAttachment)}},methods:{onInput:function(t){this.error=null,t?this.upload(t):this.remove()},openUpload:function(){this.$refs.upload.$refs.input.click()},upload:function(t){var e=this;return this.uploading=!0,axios.post(route("api.publication-attachments.store"),this.makeForm(t),{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},onUploadProgress:function(t){e.progress=Math.floor(100*t.loaded/t.total)}}).then((function(t){var r=t.data.data;e.newAttachment=r,e.uploading=!1,e.progress=0,e.$emit("uploaded",r)})).catch(this.handleError)},makeForm:function(t){var e=new FormData;return e.append("attachment",t),e},remove:function(){var t,e=this;return(t=u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hasAttachment){t.next=2;break}return t.abrupt("return");case 2:e.$emit("removed",e.newAttachment),e.newAttachment=null;case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){c(o,n,i,s,a,"next",t)}function a(t){c(o,n,i,s,a,"throw",t)}s(void 0)}))})()},handleError:function(t){if(this.uploading=!1,this.progress=0,this.$el.querySelector('input[type="file"]').value="",!t.response)return this.$buefy.toast.open({duration:5e3,message:t.message,position:"is-top",type:"is-danger"});this.error=t.response.data.errors.attachment[0]||this.trans("Error")}}},h=r("KHd+"),m=Object(h.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-field",{attrs:{message:t.error||null,type:t.error?"is-danger":null,expanded:""}},[r("b-field",{staticClass:"file"},[t.uploading?r("progress",{staticClass:"progress is-primary is-small",attrs:{max:"100"},domProps:{value:t.progress}},[t._v(t._s(t.progress)+"%")]):t._e(),t._v(" "),t.hasAttachment?r("div",{staticClass:"flex items-center justify-between w-full"},[r("div",{staticClass:"mr-4"},[r("a",{attrs:{href:t.newAttachment.url,download:t.newAttachment.original_name,target:"_blank"}},[t._v(t._s(t.newAttachment.original_name))])]),t._v(" "),r("button",{staticClass:"button is-danger is-outlined",attrs:{type:"button"},on:{click:t.remove}},[r("b-icon",{attrs:{icon:"times"}})],1)]):r("b-upload",{directives:[{name:"show",rawName:"v-show",value:!t.uploading,expression:"!uploading"}],ref:"upload",attrs:{accept:".pdf,.odt,.doc,.docx"},on:{input:t.onInput}},[r("button",{staticClass:"button is-secondary",attrs:{type:"button"},on:{click:t.openUpload}},[r("b-icon",{attrs:{icon:"upload"}}),t._v(" "),r("span",[t._v("Upload Document")])],1)])],1)],1)}),[],!1,null,null,null).exports;function p(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v={name:"nzPublicationForm",components:g({},m.name,m),mixins:[a.a],props:{publication:{type:Object,default:function(){return{type:null,year:null,name:null,title:null,publisher:null,issue:null,place:null,page_count:null,page_range:null,doi:null,citation:null,authors:[],editors:[],link:null,attachment:null,attachment_id:null}}},publicationTypes:{type:Array,default:function(){return[]}}},data:function(){return{form:new i.a(y({},this.publication),{resetOnSuccess:!1})}},computed:{chosenType:function(){return s()(this.publicationTypes,{value:this.form.type})},typeHasName:function(){return!!this.chosenType&&this.chosenType.has_name},typeHasEditors:function(){return!!this.chosenType&&this.chosenType.has_editors},typeRequiresEditors:function(){return!!this.chosenType&&this.chosenType.requires_editors},typeHasPublisher:function(){return!!this.chosenType&&this.chosenType.has_publisher},typeRequiresPublisher:function(){return!!this.chosenType&&this.chosenType.requires_publisher},typeHasIssue:function(){return!!this.chosenType&&this.chosenType.has_issue},typeRequiresIssue:function(){return!!this.chosenType&&this.chosenType.requires_issue},typeHasPlace:function(){return!!this.chosenType&&this.chosenType.has_place},typeRequiresPlace:function(){return!!this.chosenType&&this.chosenType.requires_place},typeHasPageRange:function(){return!!this.chosenType&&this.chosenType.has_page_range},nameLabel:function(){var t=this.form.type;return this.trans("labels.publications.".concat(t,"_name"),{},this.trans("labels.publications.name"))},titleLabel:function(){var t=this.form.type;return this.trans("labels.publications.".concat(t,"_title"),{},this.trans("labels.publications.title"))}},methods:{addAuthor:function(){this.form.authors.push({first_name:"",last_name:""})},addEditor:function(){this.form.editors.push({first_name:"",last_name:""})},removeAuthor:function(t){this.removeItemFromField("authors",t)},removeEditor:function(t){this.removeItemFromField("editors",t)},removeItemFromField:function(t,e){this.form[t]=[].concat(p(this.form[t].slice(0,e)),p(this.form[t].slice(e+1))),this.removeErrorForItem(t,e)},removeErrorForItem:function(t,e){var r=this.form.errors.all(),n={};Object.keys(r).forEach((function(i){var o=i.match(new RegExp("^".concat(t,".(\\d+)$")));o&&o[1]>e?n["".concat(t,".").concat(o[1]-1)]=r[i]:o||(n[i]=r[i])})),this.form.errors.record(n)},handleAttachmentUploaded:function(t){this.form.attachment=t,this.form.attachment_id=t.id},handleRemovedAttachment:function(){this.form.attachment=null,this.form.attachment_id=null},authorHasError:function(t){return this.form.errors.has("authors.".concat(t))||this.form.errors.has("authors.".concat(t,".first_name"))||this.form.errors.has("authors.".concat(t,".last_name"))},getAuthorError:function(t){return this.form.errors.first("authors.".concat(t))||this.form.errors.first("authors.".concat(t,".first_name"))||this.form.errors.first("authors.".concat(t,".last_name"))},editorHasError:function(t){return this.form.errors.has("editors.".concat(t))||this.form.errors.has("editors.".concat(t,".first_name"))||this.form.errors.has("editors.".concat(t,".last_name"))},getEditorError:function(t){return this.form.errors.first("editors.".concat(t))||this.form.errors.first("editors.".concat(t,".first_name"))||this.form.errors.first("editors.".concat(t,".last_name"))}}},_=Object(h.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"publication-form",attrs:{action:t.action,method:t.method,lang:t.locale},on:{submit:function(e){return e.preventDefault(),t.submitWithRedirect(e)}}},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column"},[r("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.publications.type"),"label-for":"type",type:t.form.errors.has("type")?"is-danger":null,message:t.form.errors.has("type")?t.form.errors.first("type"):null}},[r("b-select",{attrs:{id:"type",name:"type",expanded:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.publicationTypes,(function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v("\n            "+t._s(e.label)+"\n          ")])})),0)],1),t._v(" "),r("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.publications.year"),"label-for":"year",type:t.form.errors.has("year")?"is-danger":null,message:t.form.errors.has("year")?t.form.errors.first("year"):null}},[r("b-input",{attrs:{id:"year",name:"year",type:"number",expanded:""},model:{value:t.form.year,callback:function(e){t.$set(t.form,"year",e)},expression:"form.year"}})],1),t._v(" "),t.typeHasName?r("b-field",{staticClass:"is-required",attrs:{label:t.nameLabel,"label-for":"name",type:t.form.errors.has("name")?"is-danger":null,message:t.form.errors.has("name")?t.form.errors.first("name"):null}},[r("b-input",{attrs:{id:"name",name:"name",expanded:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1):t._e(),t._v(" "),r("b-field",{staticClass:"is-required",attrs:{label:t.titleLabel,"label-for":"title",type:t.form.errors.has("title")?"is-danger":null,message:t.form.errors.has("title")?t.form.errors.first("title"):null}},[r("b-input",{attrs:{id:"title",name:"title",expanded:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),t.typeHasPublisher?r("b-field",{class:{"is-required":t.typeRequiresPublisher},attrs:{label:t.trans("labels.publications.publisher"),"label-for":"publisher",type:t.form.errors.has("publisher")?"is-danger":null,message:t.form.errors.has("publisher")?t.form.errors.first("publisher"):null}},[r("b-input",{attrs:{id:"publisher",name:"publisher",expanded:""},model:{value:t.form.publisher,callback:function(e){t.$set(t.form,"publisher",e)},expression:"form.publisher"}})],1):t._e(),t._v(" "),t.typeHasIssue?r("b-field",{class:{"is-required":t.typeRequiresIssue},attrs:{label:t.trans("labels.publications.issue"),"label-for":"issue",type:t.form.errors.has("issue")?"is-danger":null,message:t.form.errors.has("issue")?t.form.errors.first("issue"):null}},[r("b-input",{attrs:{id:"issue",name:"issue",expanded:""},model:{value:t.form.issue,callback:function(e){t.$set(t.form,"issue",e)},expression:"form.issue"}})],1):t._e(),t._v(" "),t.typeHasPlace?r("b-field",{class:{"is-required":t.typeRequiresPlace},attrs:{label:t.trans("labels.publications.place"),"label-for":"place",type:t.form.errors.has("place")?"is-danger":null,message:t.form.errors.has("place")?t.form.errors.first("place"):null}},[r("b-input",{attrs:{id:"place",name:"place",expanded:""},model:{value:t.form.place,callback:function(e){t.$set(t.form,"place",e)},expression:"form.place"}})],1):t._e(),t._v(" "),r("b-field",{attrs:{label:t.trans("labels.publications.page_count"),"label-for":"page_count",type:t.form.errors.has("page_count")?"is-danger":null,message:t.form.errors.has("page_count")?t.form.errors.first("page_count"):null}},[r("b-input",{attrs:{id:"page_count",name:"page_count",expanded:""},model:{value:t.form.page_count,callback:function(e){t.$set(t.form,"page_count",e)},expression:"form.page_count"}})],1),t._v(" "),t.typeHasPageRange?r("b-field",{attrs:{label:t.trans("labels.publications.page_range"),"label-for":"page_range",type:t.form.errors.has("page_range")?"is-danger":null,message:t.form.errors.has("page_range")?t.form.errors.first("page_range"):null}},[r("b-input",{attrs:{id:"page_range",name:"page_range",expanded:""},model:{value:t.form.page_range,callback:function(e){t.$set(t.form,"page_range",e)},expression:"form.page_range"}})],1):t._e(),t._v(" "),r("b-field",{attrs:{label:t.trans("labels.publications.doi"),"label-for":"doi",type:t.form.errors.has("doi")?"is-danger":null,message:t.form.errors.has("doi")?t.form.errors.first("doi"):null}},[r("b-input",{attrs:{id:"doi",name:"doi",expanded:""},model:{value:t.form.doi,callback:function(e){t.$set(t.form,"doi",e)},expression:"form.doi"}})],1),t._v(" "),r("b-field",{attrs:{"label-for":"citation",type:t.form.errors.has("citation")?"is-danger":null,message:t.form.errors.has("citation")?t.form.errors.first("citation"):null}},[r("label",{staticClass:"label",attrs:{slot:"label",for:"citation"},slot:"label"},[r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.trans("labels.publications.citation_tooltip")},expression:"{content: trans('labels.publications.citation_tooltip')}"}],staticClass:"is-dashed"},[t._v("\n            "+t._s(t.trans("labels.publications.citation"))+"\n          ")])]),t._v(" "),r("b-input",{attrs:{id:"citation",type:"textarea",name:"citation",expanded:""},model:{value:t.form.citation,callback:function(e){t.$set(t.form,"citation",e)},expression:"form.citation"}})],1)],1),t._v(" "),r("div",{staticClass:"column"},[r("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.publications.authors"),type:t.form.errors.has("authors")?"is-danger":null,message:t.form.errors.has("authors")?t.form.errors.first("authors"):null,addons:!1}},[t._l(t.form.authors,(function(e,n){return r("b-field",{key:n,attrs:{type:t.authorHasError(n)?"is-danger":null,message:t.authorHasError(n)?t.getAuthorError(n):null,expanded:"",addons:!1}},[r("b-field",{attrs:{type:t.authorHasError(n)?"is-danger":null,expanded:""}},[r("b-input",{attrs:{name:"authors["+n+"][first_name]",placeholder:t.trans("labels.publications.first_name"),expanded:""},model:{value:t.form.authors[n].first_name,callback:function(e){t.$set(t.form.authors[n],"first_name",e)},expression:"form.authors[i].first_name"}}),t._v(" "),r("b-input",{attrs:{name:"authors["+n+"][last_name]",placeholder:t.trans("labels.publications.last_name"),expanded:""},model:{value:t.form.authors[n].last_name,callback:function(e){t.$set(t.form.authors[n],"last_name",e)},expression:"form.authors[i].last_name"}}),t._v(" "),r("p",{staticClass:"control"},[r("button",{staticClass:"button is-danger is-outlined",attrs:{type:"button"},on:{click:function(e){return t.removeAuthor(n)}}},[r("b-icon",{attrs:{icon:"times",size:"is-small"}})],1)])],1)],1)})),t._v(" "),r("button",{staticClass:"button is-secondary is-outlined",attrs:{type:"button"},on:{click:t.addAuthor}},[t._v("\n          "+t._s(t.trans("labels.publications.add_author"))+"\n        ")])],2),t._v(" "),t.typeHasEditors?r("b-field",{class:{"is-required":t.typeRequiresEditors},attrs:{label:t.trans("labels.publications.editors"),type:t.form.errors.has("editors")?"is-danger":null,message:t.form.errors.has("editors")?t.form.errors.first("editors"):null,addons:!1}},[t._l(t.form.editors,(function(e,n){return r("b-field",{key:n,attrs:{type:t.editorHasError(n)?"is-danger":null,message:t.editorHasError(n)?t.getEditorError(n):null,expanded:"",addons:!1}},[r("b-field",{attrs:{type:t.editorHasError(n)?"is-danger":null,expanded:""}},[r("b-input",{attrs:{name:"editors["+n+"][first_name]",placeholder:t.trans("labels.publications.first_name"),expanded:""},model:{value:t.form.editors[n].first_name,callback:function(e){t.$set(t.form.editors[n],"first_name",e)},expression:"form.editors[i].first_name"}}),t._v(" "),r("b-input",{attrs:{name:"editors["+n+"][last_name]",placeholder:t.trans("labels.publications.last_name"),expanded:""},model:{value:t.form.editors[n].last_name,callback:function(e){t.$set(t.form.editors[n],"last_name",e)},expression:"form.editors[i].last_name"}}),t._v(" "),r("p",{staticClass:"control"},[r("button",{staticClass:"button is-danger is-outlined",attrs:{type:"button"},on:{click:function(e){return t.removeEditor(n)}}},[r("b-icon",{attrs:{icon:"times",size:"is-small"}})],1)])],1)],1)})),t._v(" "),r("button",{staticClass:"button is-secondary is-outlined",attrs:{type:"button"},on:{click:t.addEditor}},[t._v("\n          "+t._s(t.trans("labels.publications.add_editor"))+"\n        ")])],2):t._e(),t._v(" "),r("b-field",{attrs:{label:t.trans("labels.publications.link"),type:t.form.errors.has("link")?"is-danger":null,message:t.form.errors.has("link")?t.form.errors.first("link"):null}},[r("b-input",{attrs:{name:"link",expanded:""},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}})],1),t._v(" "),r("b-field",{attrs:{label:t.trans("labels.publications.attachment")}},[r("nz-publication-attachment-upload",{attrs:{attachment:t.form.attachment},on:{uploaded:t.handleAttachmentUploaded,removed:t.handleRemovedAttachment}})],1)],1)]),t._v(" "),r("hr"),t._v(" "),r("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[t._v(t._s(t.trans("buttons.save")))]),t._v(" "),r("a",{staticClass:"button",attrs:{href:t.cancelUrl}},[t._v(t._s(t.trans("buttons.cancel")))])])}),[],!1,null,null,null);e.default=_.exports},mLhc:function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function a(t,e,r,n){var i=e&&e.prototype instanceof c?e:c,o=Object.create(i.prototype),s=new x(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return S()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=v(s,r);if(a){if(a===u)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,s),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var u={};function c(){}function f(){}function h(){}var m={};m[i]=function(){return this};var p=Object.getPrototypeOf,d=p&&p(p(k([])));d&&d!==e&&r.call(d,i)&&(m=d);var b=h.prototype=c.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t,e){var n;this._invoke=function(i,o){function s(){return new e((function(n,s){!function n(i,o,s,a){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}(i,o,n,s)}))}return n=n?n.then(s,s):s()}}function v(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,v(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=b.constructor=h,h.constructor=f,h[s]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},y(g.prototype),g.prototype[o]=function(){return this},t.AsyncIterator=g,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new g(a(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(b),b[s]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;w(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},mk2N:function(t,e,r){"use strict";var n=r("5YJQ"),i=r.n(n),o=r("JZM8"),s=r.n(o),a=r("mwIZ"),l=r.n(a),u=r("Y+p1"),c=r.n(u);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a={name:"nzFieldObservationForm",props:{action:{type:String,required:!0},method:{type:String,default:"POST"},redirectUrl:String,cancelUrl:String,submitMore:Boolean,shouldConfirmSubmit:Boolean,confirmSubmitMessage:{type:String,default:function(){return this.trans("You are about to submit")}},shouldAskReason:Boolean,shouldConfirmCancel:Boolean,submitOnlyDirty:Boolean,submitOnlyDirtyMessage:{type:String,default:function(){return this.trans("There are no changes, the data will not be saved.")}}},data:function(){return{form:this.newForm(),keepAfterSubmit:[],submittingWithRedirect:!1,submittingWithoutRedirect:!1,confirmingSubmit:!1,confirmingCancel:!1,locale:window.App.locale}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{newForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.a(t,{resetOnSuccess:!1})},registerKeyListener:function(t){var e=13===(t.which||t.keyCode);t.ctrlKey&&t.shiftKey&&e?this.submitMore&&this.submitWithoutRedirect():t.ctrlKey&&e&&this.submitWithRedirect()},confirmSubmit:function(t){var e=this;if(!this.confirmingSubmit){this.confirmingSubmit=!0;var r={message:this.confirmSubmitMessage,confirmText:this.trans("buttons.save"),cancelText:this.trans("buttons.cancel"),onConfirm:t,onCancel:function(){e.confirmingSubmit=!1}};return this.shouldAskReason?this.promptForReason(r):this.$buefy.dialog.confirm(r)}},promptForReason:function(t){var e=this,r=this.$buefy.dialog.prompt(h(h({},t),{},{inputAttrs:{placeholder:this.trans("Reason"),required:!0,maxlength:255}}));return r.$nextTick((function(){r.$refs.input.addEventListener("invalid",(function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity(e.trans("This field is required and can contain max 255 chars."))})),r.$refs.input.addEventListener("input",(function(t){r.validationMessage=null}))})),r},notifyNoChanges:function(){this.$buefy.toast.open({message:this.submitOnlyDirtyMessage,type:"is-info"})},notifyNoChangesAndRedirect:function(){var t=this;this.notifyNoChanges(),setTimeout((function(){t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},submitWithRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChangesAndRedirect():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithRedirect):void this.performSubmitWithRedirect()},performSubmitWithRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithRedirect:function(){var t=this;this.form.processing=!0,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"}),setTimeout((function(){t.form.processing=!1,t.submittingWithRedirect=!1,t.hookAfterSubmitWithRedirect(),t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},hookAfterSubmitWithRedirect:function(){},submitWithoutRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChanges():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithoutRedirect):void this.performSubmitWithoutRedirect()},performSubmitWithoutRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithoutRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithoutRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithoutRedirect:function(){this.submittingWithoutRedirect=!1,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"});var t=s()(this.form.data(),this.keepAfterSubmit);this.form.reset(),this.form.populate(t),this.hookAfterSubmitWithoutRedirect()},hookAfterSubmitWithoutRedirect:function(){},onFailedSubmit:function(t){this.submittingWithRedirect=!1,this.submittingWithoutRedirect=!1,this.$buefy.toast.open({duration:2500,message:l()(t,"response.data.message",t.message),type:"is-danger"})},isDirty:function(){return!c()(this.form.data(),this.form.initial)},confirmCancel:function(){var t=this;this.confirmingCancel||(this.confirmingCancel=!0,this.$buefy.dialog.confirm({message:this.trans("If you leave this page changes will not be saved."),onConfirm:function(){t.confirmingCancel=!1,window.location.href=t.cancelUrl},onCancel:function(){t.confirmingCancel=!1},cancelText:this.trans("buttons.stay_on_page"),confirmText:this.trans("buttons.leave_page")}))},onCancel:function(t){this.shouldConfirmCancel&&this.isDirty()&&(t.preventDefault(),this.confirmCancel())}}}},o0o1:function(t,e,r){t.exports=r("mLhc")}}]);
//# sourceMappingURL=24.js.map?id=88383cb5e0adde0854ed