(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"3wZJ":function(t,e,n){"use strict";e.a={data:function(){return{showFilter:!1,filter:this.filterDefaults(),newFilter:this.filterDefaults(),filterIsActive:!1}},methods:{filterDefaults:function(){return{}},clearFilter:function(){this.newFilter=this.filterDefaults(),this.applyFilter(!1)},applyFilter:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!1;Object.keys(this.newFilter).forEach((function(e){t.filter[e]!==t.newFilter[e]&&(n=!0),t.filter[e]=t.newFilter[e]})),this.filterIsActive=e,n&&this.$emit("filter")}}}},"44Ds":function(t,e,n){var r=n("e4Nc");function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},"4uTw":function(t,e,n){var r=n("Z0cm"),o=n("9ggG"),a=n("GNiM"),i=n("dt0z");t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:a(i(t))}},"9Nap":function(t,e,n){var r=n("/9aa");t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},"9ggG":function(t,e,n){var r=n("Z0cm"),o=n("/9aa"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(i.test(t)||!a.test(t)||null!=e&&t in Object(e))}},GNiM:function(t,e,n){var r=n("I01J"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(a,"$1"):n||t)})),e}));t.exports=i},I01J:function(t,e,n){var r=n("44Ds");t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},KHZX:function(t,e,n){"use strict";n.r(e);var r=n("vDqi"),o=n.n(r),a=n("WjpJ"),i=n.n(a),s=n("JkKK"),c=n("3wZJ"),l=n("9KKN"),u=n("luGL");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var v={name:"nzLiteratureObservationsTable",mixins:[c.a,l.a],components:{NzTable:u.a},props:{perPageOptions:{type:Array,default:function(){return[15,30,50,100]},validator:function(t){return t.length}},listRoute:String,viewRoute:String,editRoute:String,deleteRoute:String,empty:{type:String,default:"Nothing here."},showActivityLog:Boolean,exportUrl:String,exportColumns:{type:Array,default:function(){return[]}}},data:function(){return{data:[],total:0,loading:!1,sortField:"id",sortOrder:"desc",defaultSortOrder:"asc",page:1,perPage:this.perPageOptions[0],checkedRows:[],activityLog:[],showExportModal:!1,exporting:!1}},computed:{months:function(){return s.a.months()},days:function(){return i()(1,31)},hasActions:function(){return this.exportable},checkedIds:function(){return this.checkedRows.map((function(t){return t.id}))},exportable:function(){return!(!this.exportUrl||!this.exportColumns.length)},actionRunning:function(){return this.exporting}},created:function(){var t=this;this.restoreState(),this.loadAsyncData(),this.$on("filter",(function(){t.saveState(),t.loadAsyncData()}))},methods:{loadAsyncData:function(){var t=this;this.loading=!0;var e=h({},this.filter);return o.a.get(route(this.listRoute).withQuery(d(d({},e),{},{sort_by:"".concat(this.sortField,".").concat(this.sortOrder),page:this.page,per_page:this.perPage}))).then((function(e){var n=e.data;t.data=[],t.total=n.meta.total,n.data.forEach((function(e){return t.data.push(e)})),t.loading=!1}),(function(e){t.data=[],t.total=0,t.loading=!1}))},getPersistantKeys:function(){return["sortField","sortOrder","perPage","page","newFilter","filter","filterIsActive"]},onPageChange:function(t){this.page=t,this.saveState(),this.loadAsyncData()},onSort:function(t,e){this.sortField=t,this.sortOrder=e,this.saveState(),this.loadAsyncData()},onPerPageChange:function(t){t!==this.perPage&&(this.perPage=t,this.saveState(),this.loadAsyncData())},confirmRemove:function(t){var e=this;this.$buefy.dialog.confirm({message:this.trans("Are you sure you want to delete this record?"),confirmText:this.trans("buttons.delete"),cancelText:this.trans("buttons.cancel"),type:"is-danger",onConfirm:function(){e.remove(t)}})},remove:function(t){var e=this;return o.a.delete(route(this.deleteRoute,t.id)).then((function(t){e.$buefy.toast.open({message:e.trans("Record deleted"),type:"is-success"}),e.loadAsyncData()})).catch((function(t){console.error(t)}))},editLink:function(t){return route(this.editRoute,t.id)},viewLink:function(t){return this.viewRoute?route(this.viewRoute,t.id):null},openActivityLogModal:function(t){this.activityLog=t.activity},filterDefaults:function(){return{}},openExportModal:function(){this.showExportModal=!0},onExportDone:function(t){this.showExportModal=!1,t.url?this.$buefy.modal.open({parent:this,component:ExportDownloadModal,canCancel:[],hasModalCard:!0,props:{url:t.url}}):this.$buefy.toast.open({duration:0,message:"Whoops, looks like something went wrong.",type:"is-danger"})}},filters:{truncate:function(t,e){return t.length>e?t.substr(0,e)+"...":t}}},g=n("KHd+"),b=Object(g.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collection-observations-table"},[n("nz-table",{attrs:{data:t.data,loading:t.loading,paginated:"","backend-pagination":"",total:t.total,"per-page":t.perPage,"per-page-options":t.perPageOptions,"pagination-on-top":"","backend-sorting":"","default-sort-direction":t.defaultSortOrder,"default-sort":[t.sortField,t.sortOrder],detailed:"","mobile-cards":!0,checkable:t.hasActions,"checked-rows":t.checkedRows},on:{"page-change":t.onPageChange,"per-page-change":t.onPerPageChange,sort:t.onSort,"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("b-table-column",{attrs:{field:"id",label:t.trans("labels.id"),width:"40",numeric:"",sortable:""}},[t._v("\n        "+t._s(r.id)+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"taxon_name",label:t.trans("labels.collection_observations.taxon"),sortable:""}},[t._v("\n        "+t._s(r.taxon?r.taxon.name:"")+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{field:"collection_name",label:t.trans("labels.collection_observations.collection"),sortable:""}},[t._v("\n        "+t._s(r.collection?r.collection.name:"")+"\n      ")]),t._v(" "),n("b-table-column",{attrs:{width:"150",numeric:""}},[t.viewRoute?n("a",{attrs:{href:t.viewLink(r),title:t.trans("buttons.view")}},[n("b-icon",{attrs:{icon:"eye"}})],1):t._e(),t._v(" "),n("a",{attrs:{href:t.editLink(r),title:t.trans("buttons.edit")}},[n("b-icon",{attrs:{icon:"edit"}})],1),t._v(" "),n("a",{attrs:{title:t.trans("buttons.delete")},on:{click:function(e){return t.confirmRemove(r)}}},[n("b-icon",{attrs:{icon:"trash"}})],1)])]}},{key:"detail",fn:function(e){var r=e.row;return[n("article",{staticClass:"media"},[n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("strong",[t._v(t._s(r.location))]),t._v(" "),n("small",[t._v(t._s(r.latitude)+", "+t._s(r.longitude))]),n("br"),t._v(" "),n("small",[t._v(t._s(t.trans("labels.collection_observations.elevation"))+": "+t._s(r.elevation)+"m")]),n("br"),t._v(" "),r.accuracy?n("small",[t._v(t._s(t.trans("labels.collection_observations.accuracy"))+": "+t._s(r.accuracy)+"m")]):t._e()])])])]}}])},[t._v(" "),n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[t._v(t._s(t.empty))])])])])],2)],1)}),[],!1,null,null,null);e.default=b.exports},ZWtO:function(t,e,n){var r=n("4uTw"),o=n("9Nap");t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[o(e[n++])];return n&&n==a?t:void 0}}}]);
//# sourceMappingURL=24.js.map?id=dc7a97061e3a2def99a7