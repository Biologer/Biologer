(self.webpackChunk=self.webpackChunk||[]).push([[324],{104:(t,e,n)=>{var a=n(3661);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var a=arguments,o=e?e.apply(this,a):a[0],r=n.cache;if(r.has(o))return r.get(o);var i=t.apply(this,a);return n.cache=r.set(o,i)||r,i};return n.cache=new(o.Cache||a),n}o.Cache=a,t.exports=o},124:(t,e,n)=>{var a=n(9325);t.exports=function(){return a.Date.now()}},1170:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var a=n(2505),o=n.n(a),r=n(8221),i=n.n(r),s=n(8156),u=n.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}const c={name:"nzTaxonAutocomplete",props:{label:{type:String,default:"Taxon"},placeholder:{type:String,default:"Search for taxon..."},taxon:{type:Object,default:null},url:{type:String,default:function(){return route("api.taxa.index")}},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean,disabled:Boolean},data:function(){return{data:[],selected:this.taxon||null,loading:!1,page:1,isLastPage:!1}},computed:{haveThumbnail:function(){return this.selected&&this.selected.thumbnail_url},icon:function(){return this.selected?"check":"search"}},watch:{taxon:function(t){this.selected=t}},methods:{fetchData:i()(function(){var t=this;if(this.value&&!this.isLastPage){this.loading=!0;var e={name:this.value,limit:20,page:this.page};this.except&&(e.except=this.except),o().get(this.url,{params:e}).then(function(e){var n=e.data;n.data.forEach(function(e){return t.data.push(e)}),t.isLastPage=n.meta.last_page<=t.page,t.loading=!1},function(e){t.loading=!1})}},500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.page=1,this.data=[],this.isLastPage=!1,this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===l(t)?u()(t,"name"):t},enterPressed:function(){this.$refs.autocomplete.isActive||this.$emit("name")},loadMore:function(){this.isLastPage||(this.page++,this.fetchData())}}};const f=(0,n(4486).A)(c,function(){var t=this,e=t._self._c;return e("b-field",{staticClass:"nz-taxon-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[e("b-field",{attrs:{grouped:""}},[t.haveThumbnail?e("img",{attrs:{width:"32",src:this.selected.thumbnail_url}}):t._e(),t._v(" "),e("b-autocomplete",{ref:"autocomplete",class:[t.selected?"has-icon-success":""],attrs:{value:t.value,data:t.data,field:"name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",disabled:t.disabled,autofocus:t.autofocus,"check-infinite-scroll":""},on:{input:t.onInput,select:t.onSelect,"infinite-scroll":t.loadMore},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterPressed.apply(null,arguments)}},scopedSlots:t._u([{key:"detault",fn:function(n){var a=n.option;return[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[a.thumbnail_url?e("img",{attrs:{width:"32",src:a.thumbnail_url}}):t._e()]),t._v(" "),e("div",{staticClass:"media-content"},[t._v("\n            "+t._s(a.name)+t._s(a.native_name?" (".concat(a.native_name,")"):"")+"\n          ")])])]}}])})],1)],1)},[],!1,null,null,null).exports},1324:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var a=n(1170),o=n(8200);function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw r}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}const s={name:"nzCitation",components:{NzTaxonAutocomplete:a.A,NzUserAutocomplete:o.A},props:{communityName:String,platformYear:String,platformUrl:String,isLoggedIn:{type:Boolean,required:!0}},data:function(){return{form:{taxon:null,taxon_id:null,taxon_suggestion:"",curator:null,curator_id:null},curators:[],descendantTaxa:[]}},computed:{curatorsList:function(){return this.curators.map(function(t){return t.name}).join(", ")}},methods:{getCurrentDate:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return"".concat(a.toString().padStart(2,"0"),".").concat(n.toString().padStart(2,"0"),".").concat(e.toString().padStart(2,"0"),".")},onTaxonSelect:function(t){this.form.taxon=t||null,this.form.taxon_id=t?t.id:null,this.form.taxon_suggestion=t?t.name:null,this.form.taxon?this.fetchLowerTaxaAndCurators(this.form.taxon.id):this.curators=[]},fetchLowerTaxaAndCurators:function(t){var e=this;axios.get("/taxa/".concat(t,"/descendants-curators")).then(function(t){e.descendantTaxa=t.data.taxa;var n,a={},o=r(t.data.taxa.flatMap(function(t){return t.curators}));try{for(o.s();!(n=o.n()).done;){var i=n.value;a[i.id]=i}}catch(t){o.e(t)}finally{o.f()}e.curators=Object.values(a)})}}};const u=(0,n(4486).A)(s,function(){var t=this,e=t._self._c;return e("div",{staticClass:"citation"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[t._v(t._s(t.trans("about.citation_title")))]),t._v(" "),e("p",{staticClass:"mb-3"},[t._v(t._s(t.trans("about.citation_intro_text")))]),t._v(" "),t._m(0),t._v(" "),e("h2",{staticClass:"title is-4"},[t._v(t._s(t.trans("about.citation_subtitle1")))]),t._v(" "),e("p",{staticClass:"mb-3"},[t._v(t._s(t.trans("about.citation_intro_text_2")))]),t._v(" "),e("div",{staticClass:"box has-background-white-bis",staticStyle:{padding:"20px"}},[e("p",{staticStyle:{"font-family":"monospace","font-size":"0.95em"}},[t._v("\n        "+t._s(t.communityName)+" ("+t._s(t.platformYear)+")\n        "+t._s(t.trans("about.community_desc"))+".\n        "+t._s(t.trans("about.community_url"))+": "),e("a",{attrs:{href:t.platformUrl,target:"_blank"}},[t._v(t._s(t.platformUrl))]),t._v(".\n        "+t._s(t.trans("about.community_assessed"))+":\n        "+t._s(t.getCurrentDate())+"\n      ")])]),t._v(" "),e("h2",{staticClass:"title is-4"},[t._v(t._s(t.trans("about.citation_subtitle2")))]),t._v(" "),t.isLoggedIn?e("div",[e("p",{staticClass:"mb-3"},[t._v(t._s(t.trans("about.citation_intro_text_3")))]),t._v(" "),e("nz-taxon-autocomplete",{ref:"taxonAutocomplete",attrs:{taxon:t.form.taxon,autofocus:"",label:"",placeholder:t.trans("labels.field_observations.search_for_taxon")},on:{select:t.onTaxonSelect},model:{value:t.form.taxon_suggestion,callback:function(e){t.$set(t.form,"taxon_suggestion",e)},expression:"form.taxon_suggestion"}}),t._v(" "),t.form.taxon&&t.curators.length?e("div",{staticClass:"box has-background-white-bis",staticStyle:{padding:"20px"}},[e("p",{staticStyle:{"font-family":"monospace","font-size":"0.95em"}},[t._v("\n          "+t._s(t.curatorsList)+"\n          ("+t._s(t.platformYear)+")\n          "+t._s(t.trans("about.community_desc"))+"\n          ("+t._s(t.trans("about.community_group",{SCIENTIFIC_NAME:t.form.taxon.name}))+").\n          "+t._s(t.trans("about.community_url"))+": "),e("a",{attrs:{href:t.platformUrl,target:"_blank"}},[t._v(t._s(t.platformUrl))]),t._v(".\n          "+t._s(t.trans("about.community_assessed"))+":\n          "+t._s(t.getCurrentDate())+"\n        ")])]):t.form.taxon&&!t.curators.length?e("div",{staticClass:"box has-background-white-bis",staticStyle:{padding:"20px"}},[e("p",{staticStyle:{"font-family":"monospace","font-size":"0.95em"}},[t._v("\n            "+t._s(t.communityName)+"\n            ("+t._s(t.platformYear)+")\n            "+t._s(t.trans("about.community_desc"))+"\n            ("+t._s(t.trans("about.community_group",{SCIENTIFIC_NAME:t.form.taxon.name}))+").\n            "+t._s(t.trans("about.community_url"))+": "),e("a",{attrs:{href:t.platformUrl,target:"_blank"}},[t._v(t._s(t.platformUrl))]),t._v(".\n            "+t._s(t.trans("about.community_assessed"))+":\n            "+t._s(t.getCurrentDate())+"\n          ")])]):t._e()],1):e("div",[e("p",{staticClass:"mb-3"},[t._v(" "+t._s(t.trans("about.login_required"))+" ")]),t._v(" "),e("div",{staticClass:"box has-background-white-bis",staticStyle:{padding:"20px"}},[e("p",{staticStyle:{"font-family":"monospace","font-size":"0.95em"}},[t._v("\n          "+t._s(t.trans("about.editors"))+"\n          ("+t._s(t.platformYear)+")\n          "+t._s(t.trans("about.community_desc"))+"\n          ("+t._s(t.trans("about.community_group_only"))+").\n          "+t._s(t.trans("about.community_url"))+": "),e("a",{attrs:{href:t.platformUrl,target:"_blank"}},[t._v(t._s(t.platformUrl))]),t._v(".\n          "+t._s(t.trans("about.community_assessed"))+":\n          "+t._s(t.getCurrentDate())+"\n        ")])])])])])},[function(){var t=this,e=t._self._c;return e("div",{staticClass:"box has-background-white-bis",staticStyle:{padding:"20px"}},[e("p",{staticStyle:{"font-family":"monospace","font-size":"0.95em"}},[t._v("\n        Popović M., Vasić N., Koren T., Burić I., Živanović N., Kulijer D., Golubović A. (2020)\n        Biologer: an open platform for collecting biodiversity data.\n        "),e("i",[t._v("Biodiversity Data Journal")]),t._v(" 8: e53014. DOI:\n        "),e("a",{attrs:{href:"https://doi.org/10.3897/BDJ.8.e53014"}},[t._v("10.3897/BDJ.8.e53014")]),t._v(".\n      ")])])}],!1,null,null,null).exports},1769:(t,e,n)=>{var a=n(6449),o=n(8586),r=n(1802),i=n(3222);t.exports=function(t,e){return a(t)?t:o(t,e)?[t]:r(i(t))}},1802:(t,e,n)=>{var a=n(2224),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=a(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,n,a,o){e.push(a?o.replace(r,"$1"):n||t)}),e});t.exports=i},2224:(t,e,n)=>{var a=n(104);t.exports=function(t){var e=a(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},7422:(t,e,n)=>{var a=n(1769),o=n(7797);t.exports=function(t,e){for(var n=0,r=(e=a(e,t)).length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}},7797:(t,e,n)=>{var a=n(4394);t.exports=function(t){if("string"==typeof t||a(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},8156:(t,e,n)=>{var a=n(7422);t.exports=function(t,e,n){var o=null==t?void 0:a(t,e);return void 0===o?n:o}},8200:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var a=n(2505),o=n.n(a),r=n(8221),i=n.n(r),s=n(8156),u=n.n(s);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}const c={name:"nzUserAutocomplete",props:{label:{type:String,default:"User"},placeholder:{type:String,default:"Search for user..."},user:{type:Object,default:null},route:{type:String,default:"api.autocomplete.users.index"},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean,disabled:Boolean},data:function(){return{data:[],selected:this.user||null,loading:!1}},computed:{icon:function(){return this.selected?"check":null}},watch:{user:function(t){this.selected=t}},methods:{fetchData:i()(function(){var t=this;if(this.value){this.data=[],this.loading=!0;var e={name:this.value};this.except&&(e.except=this.except),o().get(route(this.route),{params:e}).then(function(e){e.data.data.forEach(function(e){return t.data.push(e)}),t.loading=!1},function(e){t.loading=!1})}},500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===l(t)?u()(t,"full_name"):t}}};const f=(0,n(4486).A)(c,function(){var t=this,e=t._self._c;return e("b-field",{staticClass:"nz-user-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[e("b-field",{attrs:{grouped:""}},[e("b-autocomplete",{class:[t.selected?"has-icon-success":""],attrs:{value:t.value,data:t.data,field:"full_name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",autofocus:t.autofocus,disabled:t.disabled},on:{input:t.onInput,select:t.onSelect},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.option;return[e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[t._v("\n            "+t._s(a.full_name)+" "),e("small",[t._v("<"+t._s(a.email)+">")])])])]}}])})],1)],1)},[],!1,null,null,null).exports},8221:(t,e,n)=>{var a=n(3805),o=n(124),r=n(9374),i=Math.max,s=Math.min;t.exports=function(t,e,n){var u,l,c,f,d,p,m=0,h=!1,_=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=u,a=l;return u=l=void 0,m=e,f=t.apply(a,n)}function y(t){var n=t-p;return void 0===p||n>=e||n<0||_&&t-m>=c}function b(){var t=o();if(y(t))return x(t);d=setTimeout(b,function(t){var n=e-(t-p);return _?s(n,c-(t-m)):n}(t))}function x(t){return d=void 0,v&&u?g(t):(u=l=void 0,f)}function S(){var t=o(),n=y(t);if(u=arguments,l=this,p=t,n){if(void 0===d)return function(t){return m=t,d=setTimeout(b,e),h?g(t):f}(p);if(_)return clearTimeout(d),d=setTimeout(b,e),g(p)}return void 0===d&&(d=setTimeout(b,e)),f}return e=r(e)||0,a(n)&&(h=!!n.leading,c=(_="maxWait"in n)?i(r(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==d&&clearTimeout(d),m=0,u=p=l=d=void 0},S.flush=function(){return void 0===d?f:x(o())},S}},8586:(t,e,n)=>{var a=n(6449),o=n(4394),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(a(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(i.test(t)||!r.test(t)||null!=e&&t in Object(e))}}}]);
//# sourceMappingURL=0dc02262b8b98bbb.js.map