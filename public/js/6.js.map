{"version":3,"sources":["webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/pick.js","webpack:///./resources/js/components/inputs/DateInput.vue?0c44","webpack:///./resources/js/components/inputs/DateInput.vue?e061","webpack:///resources/js/components/inputs/DateInput.vue","webpack:///./resources/js/components/inputs/DateInput.vue","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/isEqual.js","webpack:///./resources/js/expiring-storage.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./resources/js/components/inputs/SpatialInput.vue?1219","webpack:///./resources/js/components/inputs/SpatialInput.vue?4894","webpack:///resources/js/components/inputs/SpatialInput.vue","webpack:///./resources/js/components/inputs/SpatialInput.vue","webpack:///./resources/js/mixins/FormMixin.js","webpack:///./resources/js/mixins/PersistentForm.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?0331","webpack:///resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?b12f","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./node_modules/lodash/_flatRest.js"],"names":["Symbol","isArguments","isArray","spreadableSymbol","isConcatSpreadable","undefined","module","exports","value","assignValue","castPath","isIndex","isObject","toKey","object","path","customizer","index","length","lastIndex","nested","key","newValue","objValue","basePickBy","hasIn","paths","basePick","pick","flatRest","name","props","label","type","String","default","year","Number","month","day","placeholders","Object","errors","computed","now","months","this","isThisYear","splice","days","isThisMonth","watch","truncateDay","methods","onYearInput","$emit","onMonthInput","onDayInput","component","_vm","_h","$createElement","_c","_self","attrs","has","first","on","_v","domProps","_l","_s","root","Date","baseFlatten","array","arrayPush","isFlattenable","depth","predicate","isStrict","result","baseIsEqual","other","ExpiringStorage","cached","JSON","parse","localStorage","getItem","expires","removeItem","get","lifeTimeInMinutes","currentTime","getTime","setItem","stringify","baseGet","baseSet","accuracy","elevation","latitude","longitude","location","hasOtherErrors","Boolean","data","emptyAccuracy","calculateEmptyAccuracy","window","App","gmaps","center","zoom","showDetails","elevationService","position","coordinatesSet","isNaN","mapHasErrors","newAccuracy","centerCoordinates","lat","lng","getElevation","created","setCurrentLocationAsMapCenter","castNumber","onLocationInput","updateLocation","event","target","onLongitudeInput","updateLongitude","onLatitudeInput","updateLatitude","onAccuracyInput","updateAccuracy","onElevationInput","updateElevation","setMarker","updateRadius","radius","google","maps","ElevationService","getElevationForLocations","locations","status","ElevationStatus","OK","results","onZoomChanged","parseInt","Math","pow","navigator","geolocation","getCurrentPosition","staticClass","trans","staticStyle","streetViewControl","strokeWeight","_e","class","$event","directives","rawName","expression","_t","action","required","method","redirectUrl","cancelUrl","submitMore","shouldConfirmSubmit","confirmSubmitMessage","shouldAskReason","shouldConfirmCancel","submitOnlyDirty","submitOnlyDirtyMessage","form","newForm","keepAfterSubmit","submittingWithRedirect","submittingWithoutRedirect","confirmingSubmit","confirmingCancel","locale","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","Form","resetOnSuccess","e","enter","which","keyCode","ctrlKey","shiftKey","submitWithoutRedirect","submitWithRedirect","confirmSubmit","onConfirm","options","message","confirmText","cancelText","onCancel","promptForReason","$buefy","dialog","confirm","prompt","inputAttrs","placeholder","maxlength","$nextTick","$refs","input","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","toast","open","notifyNoChangesAndRedirect","setTimeout","href","processing","isDirty","performSubmitWithRedirect","reason","toLowerCase","then","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","keep","_pick","reset","populate","hookAfterSubmitWithoutRedirect","error","duration","_get","_isEqual","initial","confirmCancel","preventDefault","cacheKey","cacheLifetime","storageKey","host","pathname","getFormKey","otherPersistentKeys","saveState","$data","expiringStorage","set","restoreState","previousState","forEach","$set","clearPersistedState","toNumber","nativeMax","max","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","taxon","url","except","autofocus","selected","loading","haveThumbnail","thumbnail_url","icon","fetchData","limit","params","onSelect","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","option","enterPressed","autocomplete","isActive","ref","nativeOn","indexOf","_k","scopedSlots","_u","fn","native_name","flatten","overRest","setToString"],"mappings":"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","file":"js/6.js?id=d3ef6d642bc4837a13f4","sourcesContent":["var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{attrs:{\"label\":_vm.label}},[_c('b-field',{attrs:{\"expanded\":\"\",\"grouped\":\"\"}},[_c('b-field',{attrs:{\"type\":_vm.errors.has('year') ? 'is-danger': '',\"message\":_vm.errors.has('year') ? _vm.errors.first('year'): '',\"expanded\":\"\"}},[_c('b-input',{attrs:{\"placeholder\":_vm.placeholders.year,\"value\":_vm.year},on:{\"input\":_vm.onYearInput}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"type\":_vm.errors.has('month') ? 'is-danger': '',\"message\":_vm.errors.has('month') ? _vm.errors.first('month'): '',\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.placeholders.month,\"value\":_vm.month,\"expanded\":\"\"},on:{\"input\":_vm.onMonthInput}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.months),function(month,index){return _c('option',{domProps:{\"value\":(index + 1),\"textContent\":_vm._s(month)}})})],2)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"type\":_vm.errors.has('day') ? 'is-danger': '',\"message\":_vm.errors.has('day') ? _vm.errors.first('day'): '',\"expanded\":\"\"}},[_c('b-select',{attrs:{\"placeholder\":_vm.placeholders.day,\"value\":_vm.day,\"expanded\":\"\"},on:{\"input\":_vm.onDayInput}},[_c('option',{domProps:{\"value\":null}}),_vm._v(\" \"),_vm._l((_vm.days),function(day){return _c('option',{domProps:{\"value\":day,\"textContent\":_vm._s(day)}})})],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateInput.vue?vue&type=script&lang=js&\"","<template>\n  <b-field :label=\"label\">\n    <b-field expanded grouped>\n      <b-field\n        :type=\"errors.has('year') ? 'is-danger': ''\"\n        :message=\"errors.has('year') ? errors.first('year'): ''\"\n        expanded\n      >\n        <b-input :placeholder=\"placeholders.year\" :value=\"year\" @input=\"onYearInput\" />\n      </b-field>\n\n      <b-field\n        :type=\"errors.has('month') ? 'is-danger': ''\"\n        :message=\"errors.has('month') ? errors.first('month'): ''\"\n        expanded\n      >\n        <b-select :placeholder=\"placeholders.month\" :value=\"month\" @input=\"onMonthInput\" expanded>\n          <option :value=\"null\"></option>\n          <option v-for=\"(month, index) in months\" :value=\"(index + 1)\" v-text=\"month\"></option>\n        </b-select>\n      </b-field>\n\n      <b-field\n        :type=\"errors.has('day') ? 'is-danger': ''\"\n        :message=\"errors.has('day') ? errors.first('day'): ''\"\n        expanded\n      >\n        <b-select :placeholder=\"placeholders.day\" :value=\"day\" @input=\"onDayInput\" expanded>\n          <option :value=\"null\"></option>\n          <option v-for=\"day in days\" :value=\"day\" v-text=\"day\"></option>\n        </b-select>\n      </b-field>\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport dayjs from '@/dayjs'\nimport _range from 'lodash/range'\n\nexport default {\n  name: 'nzDateInput',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Date'\n    },\n\n    year: {\n      type: Number,\n      default: dayjs().year()\n    },\n\n    month: {\n      type: Number,\n      default: dayjs().month() + 1\n    },\n\n    day: {\n      type: Number,\n      default: dayjs().date()\n    },\n\n    placeholders: {\n      type: Object,\n      default() {\n        return {\n          year: 'Year',\n          month: 'Month',\n          day: 'Day'\n        }\n      }\n    },\n\n    errors: {\n      type: Object,\n      default: () => ({ has: () => false })\n    }\n  },\n\n  computed: {\n    now() {\n      return dayjs()\n    },\n\n    months() {\n      if (!this.year || this.year > dayjs().year()) return []\n\n      const isThisYear = this.year === dayjs().year()\n\n      let months = dayjs.months()\n\n      if (isThisYear) months.splice(dayjs().month() + 1)\n\n      return months\n    },\n\n    days() {\n      const haveDate = this.year && this.month\n\n      if (!haveDate) return []\n\n      const isThisMonth = this.year === dayjs().year() && (this.month - 1) === dayjs().month()\n\n      let days = dayjs(new Date(this.year, this.month - 1, 1)).daysInMonth()\n\n      if (isThisMonth) days = dayjs().date()\n\n      return _range(1, days + 1)\n    }\n  },\n\n  watch: {\n    year() {\n      if (this.year > dayjs().year() || this.months.length < this.month -1)  {\n          this.onMonthInput(null)\n      }\n\n      this.truncateDay()\n    },\n\n    month() {\n      this.truncateDay()\n    }\n  },\n\n  methods: {\n    truncateDay() {\n      if (this.days.length < this.day)  {\n          this.onDayInput(null)\n      }\n    },\n\n    onYearInput(value) {\n      this.$emit('update:year', +value || null)\n    },\n\n    onMonthInput(value) {\n      this.$emit('update:month', value)\n    },\n\n    onDayInput(value) {\n      this.$emit('update:day', value)\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./DateInput.vue?vue&type=template&id=113a099e&\"\nimport script from \"./DateInput.vue?vue&type=script&lang=js&\"\nexport * from \"./DateInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","class ExpiringStorage {\n  get(key) {\n    const cached = JSON.parse(\n      localStorage.getItem(key)\n    )\n\n    if (! cached) {\n      return null\n    }\n\n    const expires = new Date(cached.expires)\n\n    if (expires < new Date()) {\n      localStorage.removeItem(key)\n      return null\n    }\n\n    return cached.value\n  }\n\n  has(key) {\n    return this.get(key) !== null\n  }\n\n  set(key, value, lifeTimeInMinutes) {\n    const currentTime = new Date().getTime()\n\n    const expires = new Date(currentTime + lifeTimeInMinutes * 60000)\n\n    localStorage.setItem(key, JSON.stringify({ value, expires }))\n  }\n\n  delete(key) {\n    const cached = this.get(key)\n\n    if (cached) {\n      localStorage.removeItem(key)\n    }\n  }\n}\n\nexport default new ExpiringStorage()\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spatial-input\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.field_observations.map')}},[_c('gmap-map',{staticStyle:{\"width\":\"100%\",\"min-height\":\"400px\"},attrs:{\"center\":_vm.centerCoordinates,\"zoom\":_vm.center.zoom,\"options\":{streetViewControl:false}},on:{\"click\":_vm.setMarker,\"zoom_changed\":_vm.onZoomChanged}},[_c('gmap-marker',{attrs:{\"position\":_vm.position,\"clickable\":true,\"draggable\":true},on:{\"dragend\":_vm.setMarker}}),_vm._v(\" \"),(_vm.position && _vm.newAccuracy)?_c('gmap-circle',{attrs:{\"center\":_vm.position,\"radius\":_vm.newAccuracy,\"editable\":true,\"options\":{ strokeWeight: .75 }},on:{\"radius_changed\":_vm.updateRadius}}):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"has-text-right\"},[(_vm.mapHasErrors)?_c('span',{staticClass:\"has-text-danger is-size-7\"},[_vm._v(_vm._s(_vm.trans('Some fields have errors')))]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button is-white is-small is-text\",class:{'has-text-danger': _vm.mapHasErrors},attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showDetails = !_vm.showDetails}}},[_vm._v(_vm._s(_vm.trans('labels.field_observations.details')))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDetails),expression:\"showDetails\"}]},[_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.latitude')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('latitude')},attrs:{\"placeholder\":\"f.e. 42.5234\"},domProps:{\"value\":_vm.latitude},on:{\"input\":_vm.onLatitudeInput}})]),_vm._v(\" \"),(_vm.errors.has('latitude'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('latitude'))}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.longitude')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('longitude')},attrs:{\"placeholder\":\"f.e. 19.1234\"},domProps:{\"value\":_vm.longitude},on:{\"input\":_vm.onLongitudeInput}})]),_vm._v(\" \"),(_vm.errors.has('longitude'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('longitude'))}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"field is-grouped\"},[_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.accuracy_m')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",attrs:{\"placeholder\":\"f.e. 100\"},domProps:{\"value\":_vm.accuracy},on:{\"input\":_vm.onAccuracyInput}})]),_vm._v(\" \"),(_vm.errors.has('accuracy'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('accuracy'))}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded is-required\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.elevation_m')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",attrs:{\"placeholder\":\"f.e. 500\"},domProps:{\"value\":_vm.elevation},on:{\"input\":_vm.onElevationInput}})]),_vm._v(\" \"),(_vm.errors.has('elevation'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('elevation'))}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"field is-expanded\"},[_c('label',{staticClass:\"label is-small\"},[_vm._v(_vm._s(_vm.trans('labels.field_observations.location')))]),_vm._v(\" \"),_c('div',{staticClass:\"control is-fullwidth\"},[_c('input',{staticClass:\"input is-small\",class:{'is-danger': _vm.errors.has('location')},attrs:{\"placeholder\":\"Location\"},domProps:{\"value\":_vm.location},on:{\"input\":_vm.onLocationInput}})]),_vm._v(\" \"),(_vm.errors.has('location'))?_c('p',{staticClass:\"help is-danger\",domProps:{\"textContent\":_vm._s(_vm.errors.first('location'))}}):_vm._e()]),_vm._v(\" \"),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpatialInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpatialInput.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"spatial-input\">\n    <b-field :label=\"trans('labels.field_observations.map')\" class=\"is-required\">\n      <gmap-map\n        style=\"width: 100%; min-height: 400px\"\n        :center=\"centerCoordinates\"\n        :zoom=\"center.zoom\"\n        @click=\"setMarker\"\n        @zoom_changed=\"onZoomChanged\"\n        :options=\"{streetViewControl:false}\"\n      >\n        <gmap-marker\n          :position=\"position\"\n          :clickable=\"true\"\n          :draggable=\"true\"\n          @dragend=\"setMarker\"\n        />\n\n        <gmap-circle\n          v-if=\"position && newAccuracy\"\n          :center=\"position\"\n          :radius=\"newAccuracy\"\n          :editable=\"true\"\n          @radius_changed=\"updateRadius\"\n          :options=\"{ strokeWeight: .75 }\"\n        />\n      </gmap-map>\n    </b-field>\n\n    <div class=\"has-text-right\">\n      <span v-if=\"mapHasErrors\" class=\"has-text-danger is-size-7\">{{ trans('Some fields have errors') }}</span>\n\n      <button type=\"button\" class=\"button is-white is-small is-text\" :class=\"{'has-text-danger': mapHasErrors}\" @click=\"showDetails = !showDetails\">{{ trans('labels.field_observations.details') }}</button>\n    </div>\n\n    <div v-show=\"showDetails\">\n      <div class=\"field is-grouped\">\n        <div class=\"field is-expanded is-required\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.latitude') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :class=\"{'is-danger': errors.has('latitude')}\" :value=\"latitude\" @input=\"onLatitudeInput\" placeholder=\"f.e. 42.5234\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('latitude')\" v-text=\"errors.first('latitude')\"></p>\n        </div>\n\n        <div class=\"field is-expanded is-required\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.longitude') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :class=\"{'is-danger': errors.has('longitude')}\" :value=\"longitude\" @input=\"onLongitudeInput\" placeholder=\"f.e. 19.1234\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('longitude')\" v-text=\"errors.first('longitude')\"></p>\n        </div>\n      </div>\n\n      <div class=\"field is-grouped\">\n        <div class=\"field is-expanded\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.accuracy_m') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :value=\"accuracy\" @input=\"onAccuracyInput\" placeholder=\"f.e. 100\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('accuracy')\" v-text=\"errors.first('accuracy')\"></p>\n        </div>\n\n        <div class=\"field is-expanded is-required\">\n          <label class=\"label is-small\">{{ trans('labels.field_observations.elevation_m') }}</label>\n\n          <div class=\"control is-fullwidth\">\n            <input class=\"input is-small\" :value=\"elevation\" @input=\"onElevationInput\" placeholder=\"f.e. 500\">\n          </div>\n\n          <p class=\"help is-danger\" v-if=\"errors.has('elevation')\" v-text=\"errors.first('elevation')\"></p>\n        </div>\n      </div>\n\n      <div class=\"field is-expanded\">\n        <label class=\"label is-small\">{{ trans('labels.field_observations.location') }}</label>\n\n        <div class=\"control is-fullwidth\">\n          <input class=\"input is-small\" :class=\"{'is-danger': errors.has('location')}\" :value=\"location\" @input=\"onLocationInput\" placeholder=\"Location\">\n        </div>\n\n        <p class=\"help is-danger\" v-if=\"errors.has('location')\" v-text=\"errors.first('location')\"></p>\n      </div>\n\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script>\nimport _debounce from 'lodash/debounce'\n\nconst ZOOM_ONE = 6144000\n\nexport default {\n  name: 'nzSpatialInput',\n\n  props: {\n    accuracy: Number,\n    elevation: {\n      type: Number,\n      default: 100\n    },\n    latitude: {\n      type: Number,\n      default: 41.0\n    },\n    longitude: {\n      type: Number,\n      default: 19.0\n    },\n    location: {\n      type: [String, Number],\n      default: ''\n    },\n    errors: {\n      type: Object,\n      default() {\n        return {}\n      }\n    },\n    hasOtherErrors: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      emptyAccuracy: this.calculateEmptyAccuracy(window.App.gmaps.center.zoom),\n      showDetails: false,\n      elevationService: null,\n      center: window.App.gmaps.center\n    }\n  },\n\n  computed: {\n    /**\n     * Position object from coordinates.\n     *\n     * @return {Object}\n     */\n    position() {\n      if (!this.coordinatesSet) {\n        return null\n      }\n\n      return {lat: this.latitude, lng: this.longitude}\n    },\n\n    /**\n     * Check if coordinate are set.\n     *\n     * @return {Boolean}\n     */\n    coordinatesSet() {\n      return !(isNaN(this.latitude)||\n        this.latitude === null ||\n        isNaN(this.longitude) ||\n        this.longitude === null\n      )\n    },\n\n    /**\n     * Check if any of the fields has an error.\n     *\n     * @return {Boolean}\n     */\n    mapHasErrors() {\n      return this.hasOtherErrors ||\n          this.errors.has('latitude') ||\n          this.errors.has('longitude') ||\n          this.errors.has('elevation') ||\n          this.errors.has('accuracy') ||\n          this.errors.has('location')\n    },\n\n    newAccuracy () {\n      return this.accuracy || this.emptyAccuracy\n    },\n\n    centerCoordinates() {\n      return this.position || {\n        lat: this.center.latitude,\n        lng: this.center.longitude\n      }\n    }\n  },\n\n  watch: {\n    /**\n     * Get elevation when coordinates change.\n     */\n    position(value) {\n      if (this.coordinatesSet) {\n        this.getElevation(value)\n      }\n    },\n  },\n\n  created() {\n    this.setCurrentLocationAsMapCenter()\n  },\n\n  methods: {\n    /**\n     * Cast to number or null.\n     *\n     * @param  {any} value\n     * @return {Number}\n     */\n    castNumber(value) {\n      return isNaN(value) || value === '' ? null : Number(value)\n    },\n\n    /**\n     * Handle location input.\n     * @param {Object} event\n     */\n    onLocationInput(event) {\n      this.updateLocation(event.target.value)\n    },\n\n    /**\n     * Sync location property.\n     *\n     * @param {String} value\n     */\n    updateLocation(value) {\n      this.$emit('update:location', value)\n    },\n\n    /**\n     * Handle longitude input.\n     * @param  {[type]} event [description]\n     * @return {[type]}       [description]\n     */\n    onLongitudeInput: _debounce(function (event) {\n      this.updateLongitude(event.target.value)\n    }, 1000),\n\n    /**\n     * Sync longitude property.\n     *\n     * @param {Number} value\n     */\n    updateLongitude(value) {\n      this.$emit('update:longitude', this.castNumber(value))\n    },\n\n    /**\n     * Handle latitude input.\n     *\n     * @param {Object} event\n     */\n    onLatitudeInput: _debounce(function (event) {\n      this.updateLatitude(event.target.value)\n    }, 1000),\n\n    /**\n     * Sync latitude property.\n     *\n     * @param {Number} value\n     */\n    updateLatitude(value) {\n      this.$emit('update:latitude', this.castNumber(value))\n    },\n\n    /**\n    * Handle accuracy input.\n    *\n    * @param {Object} event\n    */\n    onAccuracyInput: _debounce(function (event) {\n      this.updateAccuracy(event.target.value)\n    }, 1000),\n\n    /**\n     * Sync accuracy property.\n     *\n     * @param {Number} value\n     */\n    updateAccuracy(value) {\n      this.$emit('update:accuracy', this.castNumber(value))\n    },\n\n    /**\n     * Handle elevation input.\n     *\n     * @param {Object} event\n     */\n    onElevationInput(event) {\n      this.updateElevation(event.target.value)\n    },\n\n    /**\n     * Sync elevation property.\n     *\n     * @param {Number} value\n     */\n    updateElevation(value) {\n      this.$emit('update:elevation', this.castNumber(value))\n    },\n\n    /**\n     * Update coordinates from marker position.\n     *\n     * @param {Object} position\n     */\n    setMarker(position) {\n      let lat = position.latLng.lat()\n      let lng = position.latLng.lng()\n\n      this.updateLatitude(lat)\n      this.updateLongitude(lng)\n    },\n\n    /**\n     * Update accuracy from circle radius on gmaps.\n     *\n     * @param  {Number} value\n     */\n    updateRadius(value) {\n      let radius = parseInt(value)\n\n      if (this.accuracy === null && radius === this.emptyAccuracy) {\n        return\n      }\n\n      this.updateAccuracy(radius)\n    },\n\n    /**\n     * Get elevation using Google's service.\n     *\n     * @param  {Object} position\n     */\n    getElevation(position) {\n      // Do nothing if we still don't have gmaps library loaded.\n      if (!google || !google.maps || !google.maps.ElevationService) {\n        return\n      }\n\n      // We don't initialize service when component is created\n      // because Gmap library probably isn't loaded yet,\n      // so we do it on first use of this method.\n      if (!this.elevationService) {\n        this.elevationService = new google.maps.ElevationService()\n      }\n\n      this.elevationService.getElevationForLocations({\n        locations: [position]\n      }, (results, status) => {\n        if (status != google.maps.ElevationStatus.OK || !results.length) {\n          return\n        }\n\n        const elevation = parseInt(results[0].elevation)\n\n        this.$emit('elevation-fetched', elevation)\n\n        this.updateElevation(elevation)\n      })\n    },\n\n    /**\n     * Recalculate default accuracy when zoom is changed.\n     * @param  {Number} zoom\n     */\n    onZoomChanged(zoom) {\n      this.emptyAccuracy = this.calculateEmptyAccuracy(zoom)\n    },\n\n    /**\n     * Calculate accuracy based on map zoom.\n     * @param  {Number} zoom\n     * @return {Number}\n     */\n    calculateEmptyAccuracy(zoom) {\n      return parseInt(ZOOM_ONE / Math.pow(2, zoom))\n    },\n\n    /**\n     * Use browser location to set map center.\n     */\n    setCurrentLocationAsMapCenter() {\n      // We don't want to use this feature if the marker is set.\n      if (!navigator.geolocation || this.position) {\n        return\n      }\n\n      navigator.geolocation.getCurrentPosition(position => {\n        if (this.position) {\n          return\n        }\n\n        this.center.latitude = position.coords.latitude\n        this.center.longitude = position.coords.longitude\n        this.center.zoom = 10\n      })\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./SpatialInput.vue?vue&type=template&id=6d8e5d56&\"\nimport script from \"./SpatialInput.vue?vue&type=script&lang=js&\"\nexport * from \"./SpatialInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Form from 'form-backend-validation'\nimport _pick from 'lodash/pick'\nimport _get from 'lodash/get'\nimport _isEqual from 'lodash/isEqual'\n\n\nexport default {\n  name: 'nzFieldObservationForm',\n\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n\n    method: {\n      type: String,\n      default: 'POST'\n    },\n\n    redirectUrl: String,\n    cancelUrl: String,\n\n    submitMore: Boolean,\n    shouldConfirmSubmit: Boolean,\n    confirmSubmitMessage: {\n      type: String,\n      default() {\n        return this.trans('You are about to submit')\n      }\n    },\n    shouldAskReason: Boolean,\n    shouldConfirmCancel: Boolean,\n    submitOnlyDirty: Boolean,\n    submitOnlyDirtyMessage: {\n      type: String,\n      default() {\n        return this.trans('There are no changes, the data will not be saved.')\n      }\n    }\n  },\n\n  data() {\n    return {\n      form: this.newForm(),\n      keepAfterSubmit: [],\n      submittingWithRedirect: false,\n      submittingWithoutRedirect: false,\n      confirmingSubmit: false,\n      confirmingCancel: false,\n      locale: window.App.locale\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.registerKeyListener)\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.registerKeyListener)\n  },\n\n  methods: {\n    /**\n     * Create new form instance.\n     *\n     * @param  {Object} data default form data\n     * @return {Form}\n     */\n    newForm(data = {}) {\n      return new Form(data, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Keyboard shortcuts.\n     *\n     * @param {Event} e\n     */\n    registerKeyListener(e) {\n      const enter = 13 === (e.which || e.keyCode)\n\n      if (e.ctrlKey && e.shiftKey && enter) {\n        this.submitMore && this.submitWithoutRedirect()\n      } else if (e.ctrlKey && enter) {\n        this.submitWithRedirect()\n      }\n    },\n\n    /**\n     * Confirm submit.\n     *\n     * @param {Function} onConfirm\n     */\n    confirmSubmit(onConfirm) {\n      if (this.confirmingSubmit) return\n\n      this.confirmingSubmit = true\n\n      const options = {\n        message: this.confirmSubmitMessage,\n        confirmText: this.trans('buttons.save'),\n        cancelText: this.trans('buttons.cancel'),\n        onConfirm,\n        onCancel: () => { this.confirmingSubmit = false }\n      }\n\n      if (!this.shouldAskReason) {\n        return this.$buefy.dialog.confirm(options)\n      }\n\n      return this.promptForReason(options)\n    },\n\n    /**\n     * Prompt the user for reason of change.\n     *\n     * @param  {Object} options\n     * @return {Vue}\n     */\n    promptForReason(options) {\n      const dialog = this.$buefy.dialog.prompt({\n        ...options,\n        inputAttrs: {\n            placeholder: this.trans('Reason'),\n            required: true,\n            maxlength: 255\n        }\n      })\n\n      // Custom localized validation for the prompt input.\n      dialog.$nextTick(() => {\n        dialog.$refs.input.addEventListener('invalid', (e) => {\n          e.target.setCustomValidity('')\n\n          if (!e.target.validity.valid) {\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\n          }\n        })\n\n        dialog.$refs.input.addEventListener('input', (e) => {\n          dialog.validationMessage = null\n        })\n      })\n\n      return dialog\n    },\n\n    /**\n     * Notify the user there are no changes.\n     */\n    notifyNoChanges() {\n      this.$buefy.toast.open({\n        message: this.submitOnlyDirtyMessage,\n        type: 'is-info'\n      })\n    },\n\n    /**\n     * Notify the user there are no changes and redirect.\n     */\n    notifyNoChangesAndRedirect() {\n      this.notifyNoChanges()\n\n      setTimeout(() => {\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    submitWithRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\n\n      this.performSubmitWithRedirect()\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    performSubmitWithRedirect(reason = null) {\n      this.submittingWithRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with redirect.\n     */\n    onSuccessfulSubmitWithRedirect() {\n      this.form.processing = true\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // We want to wait a bit before we send the user to redirect route\n      // so we can show the message that the action was successful.\n      setTimeout(() => {\n        this.form.processing = false\n        this.submittingWithRedirect = false\n\n        this.hookAfterSubmitWithRedirect()\n\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Perform after submit with redirect is successful.\n     */\n    hookAfterSubmitWithRedirect() {},\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    submitWithoutRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\n\n      this.performSubmitWithoutRedirect()\n    },\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    performSubmitWithoutRedirect(reason = null) {\n      this.submittingWithoutRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithoutRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with no redirect.\n     */\n    onSuccessfulSubmitWithoutRedirect() {\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // Reset the form but remember some data.\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\n      this.form.reset()\n      this.form.populate(keep)\n\n      this.hookAfterSubmitWithoutRedirect()\n    },\n\n    /**\n     * Perform after submit without redirect is successful.\n     */\n    hookAfterSubmitWithoutRedirect() {},\n\n    /**\n     * Handle failed form submit.\n     *\n     * @param {Error} error\n     */\n    onFailedSubmit(error) {\n      this.submittingWithRedirect = false\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        duration: 2500,\n        message: _get(error, 'response.data.message', error.message),\n        type: 'is-danger'\n      })\n    },\n\n    /**\n     * Check if form is changed.\n     *\n     * @return {Boolean}\n     */\n    isDirty() {\n      return ! _isEqual(this.form.data(), this.form.initial)\n    },\n\n    /**\n     * Confirmation dialog for canceling.\n     */\n    confirmCancel() {\n      if (this.confirmingCancel) return\n\n      this.confirmingCancel = true\n\n      this.$buefy.dialog.confirm({\n        message: this.trans('If you leave this page changes will not be saved.'),\n        onConfirm: () => {\n          this.confirmingCancel = false\n          window.location.href = this.cancelUrl\n        },\n        onCancel: () => { this.confirmingCancel = false },\n        cancelText: this.trans('buttons.stay_on_page'),\n        confirmText: this.trans('buttons.leave_page'),\n      })\n    },\n\n    /**\n     * Handle cancel button/link.\n     *\n     * @param {Event} event\n     */\n    onCancel(event) {\n      if (this.shouldConfirmCancel && this.isDirty()) {\n        event.preventDefault()\n\n        this.confirmCancel()\n      }\n    }\n  }\n}\n","import _pick from 'lodash/pick'\nimport expiringStorage from '@/expiring-storage'\n\nexport default {\n  props: {\n    cacheKey: { default: null },\n    cacheLifetime: { default: 60 * 24 }\n  },\n\n  computed: {\n    storageKey() {\n      return this.cacheKey\n        ? `nz-form.${this.cacheKey}`\n        : `nz-form.${window.location.host}${window.location.pathname}`\n    }\n  },\n\n  methods: {\n    getFormKey() {\n      return 'form'\n    },\n\n    otherPersistentKeys() {\n      return []\n    },\n\n    saveState() {\n      const data = {\n        ..._pick(this.$data, this.otherPersistentKeys()),\n        form: this[this.getFormKey()].data()\n      }\n\n      expiringStorage.set(this.storageKey, data, this.cacheLifetime)\n    },\n\n    restoreState() {\n      const previousState = expiringStorage.get(this.storageKey);\n\n      if (previousState === null) {\n        return\n      }\n\n      this[this.getFormKey()].populate(previousState.form)\n\n      this.otherPersistentKeys().forEach(key => {\n        if (previousState[key] !== undefined) {\n          this.$set(this, key, previousState[key])\n        }\n      })\n\n      this.clearPersistedState()\n    },\n\n    clearPersistedState() {\n      expiringStorage.delete(this.storageKey)\n    }\n  }\n}\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-taxon-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[(_vm.haveThumbnail)?_c('img',{attrs:{\"width\":\"32\",\"src\":this.selected.thumbnail_url}}):_vm._e(),_vm._v(\" \"),_c('b-autocomplete',{ref:\"autocomplete\",attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.enterPressed($event)}},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-left\"},[(props.option.thumbnail_url)?_c('img',{attrs:{\"width\":\"32\",\"src\":props.option.thumbnail_url}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.name)+_vm._s(props.option.native_name ? (\" (\" + (props.option.native_name) + \")\") : '')+\"\\n          \")])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-field :label=\"label\" class=\"nz-taxon-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\n    <b-field grouped>\n      <img width=\"32\" :src=\"this.selected.thumbnail_url\" v-if=\"haveThumbnail\">\n\n      <b-autocomplete\n        ref=\"autocomplete\"\n        :value=\"value\"\n        :data=\"data\"\n        field=\"name\"\n        :loading=\"loading\"\n        @input=\"onInput\"\n        @select=\"onSelect\"\n        :icon=\"icon\"\n        :placeholder=\"placeholder\"\n        expanded\n        :autofocus=\"autofocus\"\n        @keydown.native.enter=\"enterPressed\"\n      >\n        <template slot-scope=\"props\">\n          <div class=\"media\">\n            <div class=\"media-left\">\n              <img width=\"32\" :src=\"props.option.thumbnail_url\" v-if=\"props.option.thumbnail_url\">\n            </div>\n\n            <div class=\"media-content\">\n              {{ props.option.name }}{{ props.option.native_name ? ` (${props.option.native_name})` : ''}}\n            </div>\n          </div>\n        </template>\n\n      </b-autocomplete>\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport axios from 'axios'\nimport _debounce from 'lodash/debounce'\nimport _get from 'lodash/get'\n\nexport default {\n  name: 'nzTaxonAutocomplete',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Taxon'\n    },\n    placeholder: {\n      type: String,\n      default: 'Search for taxon...'\n    },\n    taxon: {\n      type: Object,\n      default: null\n    },\n    url: {\n      type: String,\n      default: () => route('api.taxa.index')\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    error: Boolean,\n    message: {\n      type: String,\n      default: null\n    },\n    except: {},\n    autofocus: Boolean\n  },\n\n  data() {\n    return {\n      data: [],\n      selected: this.taxon || null,\n      loading: false\n    }\n  },\n\n  computed: {\n    haveThumbnail() {\n      return this.selected && this.selected.thumbnail_url\n    },\n\n    icon() {\n      return this.selected ? 'check' : 'search'\n    }\n  },\n\n  watch: {\n    taxon(value) {\n      this.selected = value\n    }\n  },\n\n  methods: {\n    fetchData: _debounce(function() {\n      if (!this.value) return\n\n      this.data = []\n      this.loading = true\n\n      let params = {\n        name: this.value,\n        limit: 20,\n      }\n\n      if (this.except) {\n        params.except = this.except\n      }\n\n      axios.get(this.url, {\n        params\n      }).then(({\n        data\n      }) => {\n        data.data.forEach(item => this.data.push(item))\n        this.loading = false\n      }, response => {\n        this.loading = false\n      })\n    }, 500),\n\n    onSelect(taxon) {\n      this.selected = taxon\n\n      this.$emit('select', taxon)\n    },\n\n    onInput(value) {\n      const currentValue = this.getValue(this.selected)\n      if (currentValue && currentValue !== value) {\n        this.onSelect(null)\n      }\n\n      this.$emit('input', value)\n\n      this.fetchData()\n    },\n\n    focusOnInput() {\n      this.$el.querySelector('input').focus()\n    },\n\n    /**\n     * Return display text for the input.\n     * If object, get value from path, or else just the value.\n     */\n    getValue(option) {\n      if (!option) return\n\n      return typeof option === 'object'\n        ? _get(option, 'name')\n        : option\n    },\n\n    enterPressed() {\n      if (!this.$refs.autocomplete.isActive) {\n        this.$emit('enter')\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonAutocomplete.vue?vue&type=template&id=cedb826c&\"\nimport script from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n"],"sourceRoot":""}