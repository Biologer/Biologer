{"version":3,"sources":["webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/pick.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/isEqual.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./resources/js/mixins/FormMixin.js","webpack:///./resources/js/components/forms/TaxonForm.vue?2f92","webpack:///resources/js/components/forms/TaxonForm.vue","webpack:///./resources/js/components/forms/TaxonForm.vue?1fd2","webpack:///./resources/js/components/forms/TaxonForm.vue","webpack:///./node_modules/lodash/debounce.js","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?0331","webpack:///resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue?b12f","webpack:///./resources/js/components/inputs/TaxonAutocomplete.vue","webpack:///./resources/js/components/inputs/Wysiwyg.vue?3183","webpack:///resources/js/components/inputs/Wysiwyg.vue","webpack:///./resources/js/components/inputs/Wysiwyg.vue?47c0","webpack:///./resources/js/components/inputs/Wysiwyg.vue","webpack:///./node_modules/lodash/_flatRest.js"],"names":["Symbol","isArguments","isArray","spreadableSymbol","isConcatSpreadable","undefined","module","exports","value","assignValue","castPath","isIndex","isObject","toKey","object","path","customizer","index","length","lastIndex","nested","key","newValue","objValue","basePickBy","hasIn","paths","basePick","pick","flatRest","root","Date","now","baseFlatten","array","arrayPush","isFlattenable","depth","predicate","isStrict","result","baseIsEqual","other","baseGet","baseSet","name","props","action","type","String","required","method","default","redirectUrl","cancelUrl","submitMore","Boolean","shouldConfirmSubmit","confirmSubmitMessage","this","trans","shouldAskReason","shouldConfirmCancel","submitOnlyDirty","submitOnlyDirtyMessage","data","form","newForm","keepAfterSubmit","submittingWithRedirect","submittingWithoutRedirect","confirmingSubmit","confirmingCancel","locale","window","App","created","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","methods","Form","resetOnSuccess","e","enter","which","keyCode","ctrlKey","shiftKey","submitWithoutRedirect","submitWithRedirect","confirmSubmit","onConfirm","options","message","confirmText","cancelText","onCancel","promptForReason","$buefy","dialog","confirm","prompt","inputAttrs","placeholder","maxlength","$nextTick","$refs","input","target","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","toast","open","notifyNoChangesAndRedirect","setTimeout","location","href","processing","isDirty","performSubmitWithRedirect","reason","toLowerCase","then","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","keep","_pick","reset","populate","hookAfterSubmitWithoutRedirect","error","duration","_get","_isEqual","initial","confirmCancel","event","preventDefault","defaultTranslations","mixins","FormMixin","components","NzWysiwyg","NzTaxonAutocomplete","taxon","Object","parent_id","rank","rank_level","author","fe_id","fe_old_id","conservation_legislations","conservation_documents","red_lists","stages","restricted","allochthonous","invasive","ranks","Array","conservationLegislations","conservationDocuments","redListCategories","redLists","nativeNames","descriptions","parentName","selectedParent","chosenRedList","computed","rankOptions","filter","availableRedLists","supportedLocales","watch","shouldResetRank","stages_ids","map","conservation_legislations_ids","conservation_documents_ids","red_lists_data","native_name","description","addRedList","push","red_list_id","id","category","removeRedList","getRedListName","onTaxonSelect","getRankLevel","focusOnTranslation","component","_vm","_h","$createElement","_c","_self","attrs","on","$event","staticClass","errors","has","first","parent","model","callback","$$v","expression","_v","$set","_l","domProps","_s","label","ref","refInFor","stage","_e","conservationLegislation","conservationDocument","addedRedList","option","class","toNumber","nativeMax","Math","max","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","clearTimeout","cancel","flush","url","except","autofocus","selected","loading","haveThumbnail","thumbnail_url","icon","fetchData","limit","params","forEach","onSelect","$emit","onInput","currentValue","focusOnInput","$el","querySelector","focus","getValue","enterPressed","autocomplete","isActive","nativeOn","indexOf","_k","scopedSlots","_u","fn","makeid","text","possible","charAt","floor","random","getDefaultHTML","inputId","mounted","trix","innerHTML","flatten","overRest","setToString"],"mappings":"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","file":"js/17.js?id=91a42a0ad7e0ed3a0c75","sourcesContent":["var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","import Form from 'form-backend-validation'\nimport _pick from 'lodash/pick'\nimport _get from 'lodash/get'\nimport _isEqual from 'lodash/isEqual'\n\n\nexport default {\n  name: 'nzFieldObservationForm',\n\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n\n    method: {\n      type: String,\n      default: 'POST'\n    },\n\n    redirectUrl: String,\n    cancelUrl: String,\n\n    submitMore: Boolean,\n    shouldConfirmSubmit: Boolean,\n    confirmSubmitMessage: {\n      type: String,\n      default() {\n        return this.trans('You are about to submit')\n      }\n    },\n    shouldAskReason: Boolean,\n    shouldConfirmCancel: Boolean,\n    submitOnlyDirty: Boolean,\n    submitOnlyDirtyMessage: {\n      type: String,\n      default() {\n        return this.trans('There are no changes, the data will not be saved.')\n      }\n    }\n  },\n\n  data() {\n    return {\n      form: this.newForm(),\n      keepAfterSubmit: [],\n      submittingWithRedirect: false,\n      submittingWithoutRedirect: false,\n      confirmingSubmit: false,\n      confirmingCancel: false,\n      locale: window.App.locale\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.registerKeyListener)\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.registerKeyListener)\n  },\n\n  methods: {\n    /**\n     * Create new form instance.\n     *\n     * @param  {Object} data default form data\n     * @return {Form}\n     */\n    newForm(data = {}) {\n      return new Form(data, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Keyboard shortcuts.\n     *\n     * @param {Event} e\n     */\n    registerKeyListener(e) {\n      const enter = 13 === (e.which || e.keyCode)\n\n      if (e.ctrlKey && e.shiftKey && enter) {\n        this.submitMore && this.submitWithoutRedirect()\n      } else if (e.ctrlKey && enter) {\n        this.submitWithRedirect()\n      }\n    },\n\n    /**\n     * Confirm submit.\n     *\n     * @param {Function} onConfirm\n     */\n    confirmSubmit(onConfirm) {\n      if (this.confirmingSubmit) return\n\n      this.confirmingSubmit = true\n\n      const options = {\n        message: this.confirmSubmitMessage,\n        confirmText: this.trans('buttons.save'),\n        cancelText: this.trans('buttons.cancel'),\n        onConfirm,\n        onCancel: () => { this.confirmingSubmit = false }\n      }\n\n      if (!this.shouldAskReason) {\n        return this.$buefy.dialog.confirm(options)\n      }\n\n      return this.promptForReason(options)\n    },\n\n    /**\n     * Prompt the user for reason of change.\n     *\n     * @param  {Object} options\n     * @return {Vue}\n     */\n    promptForReason(options) {\n      const dialog = this.$buefy.dialog.prompt({\n        ...options,\n        inputAttrs: {\n            placeholder: this.trans('Reason'),\n            required: true,\n            maxlength: 255\n        }\n      })\n\n      // Custom localized validation for the prompt input.\n      dialog.$nextTick(() => {\n        dialog.$refs.input.addEventListener('invalid', (e) => {\n          e.target.setCustomValidity('')\n\n          if (!e.target.validity.valid) {\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\n          }\n        })\n\n        dialog.$refs.input.addEventListener('input', (e) => {\n          dialog.validationMessage = null\n        })\n      })\n\n      return dialog\n    },\n\n    /**\n     * Notify the user there are no changes.\n     */\n    notifyNoChanges() {\n      this.$buefy.toast.open({\n        message: this.submitOnlyDirtyMessage,\n        type: 'is-info'\n      })\n    },\n\n    /**\n     * Notify the user there are no changes and redirect.\n     */\n    notifyNoChangesAndRedirect() {\n      this.notifyNoChanges()\n\n      setTimeout(() => {\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    submitWithRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\n\n      this.performSubmitWithRedirect()\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    performSubmitWithRedirect(reason = null) {\n      this.submittingWithRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with redirect.\n     */\n    onSuccessfulSubmitWithRedirect() {\n      this.form.processing = true\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // We want to wait a bit before we send the user to redirect route\n      // so we can show the message that the action was successful.\n      setTimeout(() => {\n        this.form.processing = false\n        this.submittingWithRedirect = false\n\n        this.hookAfterSubmitWithRedirect()\n\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Perform after submit with redirect is successful.\n     */\n    hookAfterSubmitWithRedirect() {},\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    submitWithoutRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\n\n      this.performSubmitWithoutRedirect()\n    },\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    performSubmitWithoutRedirect(reason = null) {\n      this.submittingWithoutRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithoutRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with no redirect.\n     */\n    onSuccessfulSubmitWithoutRedirect() {\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // Reset the form but remember some data.\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\n      this.form.reset()\n      this.form.populate(keep)\n\n      this.hookAfterSubmitWithoutRedirect()\n    },\n\n    /**\n     * Perform after submit without redirect is successful.\n     */\n    hookAfterSubmitWithoutRedirect() {},\n\n    /**\n     * Handle failed form submit.\n     *\n     * @param {Error} error\n     */\n    onFailedSubmit(error) {\n      this.submittingWithRedirect = false\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        duration: 2500,\n        message: _get(error, 'response.data.message', error.message),\n        type: 'is-danger'\n      })\n    },\n\n    /**\n     * Check if form is changed.\n     *\n     * @return {Boolean}\n     */\n    isDirty() {\n      return ! _isEqual(this.form.data(), this.form.initial)\n    },\n\n    /**\n     * Confirmation dialog for canceling.\n     */\n    confirmCancel() {\n      if (this.confirmingCancel) return\n\n      this.confirmingCancel = true\n\n      this.$buefy.dialog.confirm({\n        message: this.trans('If you leave this page changes will not be saved.'),\n        onConfirm: () => {\n          this.confirmingCancel = false\n          window.location.href = this.cancelUrl\n        },\n        onCancel: () => { this.confirmingCancel = false },\n        cancelText: this.trans('buttons.stay_on_page'),\n        confirmText: this.trans('buttons.leave_page'),\n      })\n    },\n\n    /**\n     * Handle cancel button/link.\n     *\n     * @param {Event} event\n     */\n    onCancel(event) {\n      if (this.shouldConfirmCancel && this.isDirty()) {\n        event.preventDefault()\n\n        this.confirmCancel()\n      }\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{attrs:{\"action\":_vm.action,\"method\":\"POST\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitWithRedirect($event)}}},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-4\"},[_c('nz-taxon-autocomplete',{attrs:{\"label\":_vm.trans('labels.taxa.parent'),\"error\":_vm.form.errors.has('parent_id'),\"message\":_vm.form.errors.first('parent_id'),\"taxon\":_vm.taxon.parent || null,\"except\":_vm.taxon.id,\"placeholder\":_vm.trans('labels.taxa.search_for_taxon'),\"autofocus\":\"\"},on:{\"select\":_vm.onTaxonSelect},model:{value:(_vm.parentName),callback:function ($$v) {_vm.parentName=$$v},expression:\"parentName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-5\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.taxa.name'),\"type\":_vm.form.errors.has('name') ? 'is-danger' : '',\"message\":_vm.form.errors.has('name') ? _vm.form.errors.first('name') : ''}},[_c('b-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-3\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.taxa.rank'),\"type\":_vm.form.errors.has('rank') ? 'is-danger' : '',\"message\":_vm.form.errors.has('rank') ? _vm.form.errors.first('rank') : ''}},[_c('b-select',{attrs:{\"expanded\":\"\"},model:{value:(_vm.form.rank),callback:function ($$v) {_vm.$set(_vm.form, \"rank\", $$v)},expression:\"form.rank\"}},_vm._l((_vm.rankOptions),function(rank,index){return _c('option',{key:index,domProps:{\"value\":rank.value,\"textContent\":_vm._s(rank.label)}})}),0)],1)],1)]),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.author'),\"type\":_vm.form.errors.has('author') ? 'is-danger' : '',\"message\":_vm.form.errors.has('author') ? _vm.form.errors.first('author') : ''}},[_c('b-input',{model:{value:(_vm.form.author),callback:function ($$v) {_vm.$set(_vm.form, \"author\", $$v)},expression:\"form.author\"}})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.native_name')}},[_c('b-tabs',{staticClass:\"block\",attrs:{\"size\":\"is-small\"},on:{\"change\":function (index) { return _vm.focusOnTranslation(index, 'native_name'); }}},_vm._l((_vm.supportedLocales),function(data,locale){return _c('b-tab-item',{key:locale,attrs:{\"label\":_vm.trans('languages.' + data.name)}},[_c('b-input',{ref:(\"native_name-\" + locale),refInFor:true,model:{value:(_vm.form.native_name[locale]),callback:function ($$v) {_vm.$set(_vm.form.native_name, locale, $$v)},expression:\"form.native_name[locale]\"}})],1)}),1)],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.description')}},[_c('b-tabs',{staticClass:\"block\",attrs:{\"size\":\"is-small\"},on:{\"change\":function (index) { return _vm.focusOnTranslation(index, 'description'); }}},_vm._l((_vm.supportedLocales),function(data,locale){return _c('b-tab-item',{key:locale,attrs:{\"label\":_vm.trans('languages.' + data.name)}},[_c('nz-wysiwyg',{ref:(\"description-\" + locale),refInFor:true,model:{value:(_vm.form.description[locale]),callback:function ($$v) {_vm.$set(_vm.form.description, locale, $$v)},expression:\"form.description[locale]\"}})],1)}),1)],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-half\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.fe_old_id'),\"type\":_vm.form.errors.has('fe_old_id') ? 'is-danger' : '',\"message\":_vm.form.errors.has('fe_old_id') ? _vm.form.errors.first('fe_old_id') : ''}},[_c('b-input',{model:{value:(_vm.form.fe_old_id),callback:function ($$v) {_vm.$set(_vm.form, \"fe_old_id\", $$v)},expression:\"form.fe_old_id\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column is-half\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.fe_id'),\"type\":_vm.form.errors.has('fe_id') ? 'is-danger' : '',\"message\":_vm.form.errors.has('fe_id') ? _vm.form.errors.first('fe_id') : ''}},[_c('b-input',{model:{value:(_vm.form.fe_id),callback:function ($$v) {_vm.$set(_vm.form, \"fe_id\", $$v)},expression:\"form.fe_id\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.restricted')}},[_c('div',{staticClass:\"field\"},[_c('b-switch',{model:{value:(_vm.form.restricted),callback:function ($$v) {_vm.$set(_vm.form, \"restricted\", $$v)},expression:\"form.restricted\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.form.restricted ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n          \")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.allochthonous')}},[_c('b-switch',{model:{value:(_vm.form.allochthonous),callback:function ($$v) {_vm.$set(_vm.form, \"allochthonous\", $$v)},expression:\"form.allochthonous\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.form.allochthonous ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n        \")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.invasive')}},[_c('b-switch',{model:{value:(_vm.form.invasive),callback:function ($$v) {_vm.$set(_vm.form, \"invasive\", $$v)},expression:\"form.invasive\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.form.invasive ? _vm.trans('Yes') : _vm.trans('No'))+\"\\n        \")])],1)],1)]),_vm._v(\" \"),(_vm.stages.length)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.stages')}},[_c('div',{staticClass:\"block\"},_vm._l((_vm.stages),function(stage){return _c('b-checkbox',{key:stage.id,attrs:{\"native-value\":stage.id},model:{value:(_vm.form.stages_ids),callback:function ($$v) {_vm.$set(_vm.form, \"stages_ids\", $$v)},expression:\"form.stages_ids\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.trans('stages.' + stage.name))+\"\\n      \")])}),1)]):_vm._e(),_vm._v(\" \"),(_vm.conservationLegislations.length)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.conservation_legislations')}},[_c('div',{staticClass:\"block\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},_vm._l((_vm.conservationLegislations),function(conservationLegislation){return _c('div',{key:conservationLegislation.id,staticClass:\"column is-half\"},[_c('b-tooltip',{attrs:{\"label\":conservationLegislation.description,\"multilined\":\"\"}},[_c('b-checkbox',{attrs:{\"native-value\":conservationLegislation.id},model:{value:(_vm.form.conservation_legislations_ids),callback:function ($$v) {_vm.$set(_vm.form, \"conservation_legislations_ids\", $$v)},expression:\"form.conservation_legislations_ids\"}},[_vm._v(\"\\n              \"+_vm._s(conservationLegislation.name)+\"\\n            \")])],1)],1)}),0)])]):_vm._e(),_vm._v(\" \"),(_vm.conservationDocuments.length)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.taxa.conservation_documents')}},[_c('div',{staticClass:\"block\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},_vm._l((_vm.conservationDocuments),function(conservationDocument){return _c('div',{key:conservationDocument.id,staticClass:\"column is-half\"},[_c('b-tooltip',{attrs:{\"label\":conservationDocument.description,\"multilined\":\"\"}},[_c('b-checkbox',{attrs:{\"native-value\":conservationDocument.id},model:{value:(_vm.form.conservation_documents_ids),callback:function ($$v) {_vm.$set(_vm.form, \"conservation_documents_ids\", $$v)},expression:\"form.conservation_documents_ids\"}},[_vm._v(\"\\n              \"+_vm._s(conservationDocument.name)+\"\\n            \")])],1)],1)}),0)])]):_vm._e(),_vm._v(\" \"),(_vm.redLists.length)?_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.trans('labels.taxa.red_lists')))]),_vm._v(\" \"),_vm._l((_vm.form.red_lists_data),function(addedRedList,index){return _c('b-field',{key:index,attrs:{\"grouped\":\"\"}},[_c('div',{staticClass:\"control is-expanded\"},[_c('span',{domProps:{\"textContent\":_vm._s(_vm.getRedListName(addedRedList.red_list_id))}})]),_vm._v(\" \"),_c('b-select',{model:{value:(addedRedList.category),callback:function ($$v) {_vm.$set(addedRedList, \"category\", $$v)},expression:\"addedRedList.category\"}},_vm._l((_vm.redListCategories),function(category){return _c('option',{key:category,domProps:{\"value\":category,\"textContent\":_vm._s(category)}})}),0),_vm._v(\" \"),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button has-text-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeRedList(index)}}},[_vm._v(\"×\")])])],1)}),_vm._v(\" \"),(_vm.availableRedLists.length)?_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-select',{attrs:{\"expanded\":\"\"},model:{value:(_vm.chosenRedList),callback:function ($$v) {_vm.chosenRedList=$$v},expression:\"chosenRedList\"}},_vm._l((_vm.availableRedLists),function(option){return _c('option',{key:option.id,domProps:{\"value\":option,\"textContent\":_vm._s(option.name)}})}),0),_vm._v(\" \"),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addRedList}},[_vm._v(_vm._s(_vm.trans('labels.taxa.add_red_list')))])])],1):_vm._e()],2):_vm._e(),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",class:{\n        'is-loading': _vm.form.processing\n    },attrs:{\"type\":\"submit\"},on:{\"click\":_vm.submitWithRedirect}},[_vm._v(\"\\n    \"+_vm._s(_vm.trans('buttons.save'))+\"\\n  \")]),_vm._v(\" \"),_c('a',{staticClass:\"button is-text\",attrs:{\"href\":_vm.cancelUrl},on:{\"click\":_vm.onCancel}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form :action=\"action\" method=\"POST\" @submit.prevent=\"submitWithRedirect\">\n    <div class=\"columns\">\n      <div class=\"column is-4\">\n        <nz-taxon-autocomplete\n          :label=\"trans('labels.taxa.parent')\"\n          v-model=\"parentName\"\n          @select=\"onTaxonSelect\"\n          :error=\"form.errors.has('parent_id')\"\n          :message=\"form.errors.first('parent_id')\"\n          :taxon=\"taxon.parent || null\"\n          :except=\"taxon.id\"\n          :placeholder=\"trans('labels.taxa.search_for_taxon')\"\n          autofocus\n        />\n      </div>\n\n      <div class=\"column is-5\">\n        <b-field\n          :label=\"trans('labels.taxa.name')\"\n          class=\"is-required\"\n          :type=\"form.errors.has('name') ? 'is-danger' : ''\"\n          :message=\"form.errors.has('name') ? form.errors.first('name') : ''\"\n        >\n          <b-input v-model=\"form.name\" />\n        </b-field>\n      </div>\n\n      <div class=\"column is-3\">\n        <b-field\n          :label=\"trans('labels.taxa.rank')\"\n          class=\"is-required\"\n          :type=\"form.errors.has('rank') ? 'is-danger' : ''\"\n          :message=\"form.errors.has('rank') ? form.errors.first('rank') : ''\"\n        >\n          <b-select v-model=\"form.rank\" expanded>\n            <option\n              v-for=\"(rank, index) in rankOptions\"\n              :value=\"rank.value\"\n              :key=\"index\"\n              v-text=\"rank.label\"\n            />\n          </b-select>\n        </b-field>\n      </div>\n    </div>\n\n    <b-field\n      :label=\"trans('labels.taxa.author')\"\n      :type=\"form.errors.has('author') ? 'is-danger' : ''\"\n      :message=\"form.errors.has('author') ? form.errors.first('author') : ''\"\n    >\n      <b-input v-model=\"form.author\" />\n    </b-field>\n\n    <hr>\n\n    <b-field :label=\"trans('labels.taxa.native_name')\">\n      <b-tabs size=\"is-small\" class=\"block\" @change=\"(index) => focusOnTranslation(index, 'native_name')\">\n        <b-tab-item :label=\"trans('languages.' + data.name)\" v-for=\"(data, locale) in supportedLocales\" :key=\"locale\">\n          <b-input v-model=\"form.native_name[locale]\" :ref=\"`native_name-${locale}`\" />\n        </b-tab-item>\n      </b-tabs>\n    </b-field>\n\n    <b-field :label=\"trans('labels.taxa.description')\">\n      <b-tabs size=\"is-small\" class=\"block\" @change=\"(index) => focusOnTranslation(index, 'description')\">\n        <b-tab-item :label=\"trans('languages.' + data.name)\" v-for=\"(data, locale) in supportedLocales\" :key=\"locale\">\n          <nz-wysiwyg v-model=\"form.description[locale]\" :ref=\"`description-${locale}`\" />\n        </b-tab-item>\n      </b-tabs>\n    </b-field>\n\n    <hr>\n\n    <div class=\"columns\">\n      <div class=\"column is-half\">\n        <b-field\n          :label=\"trans('labels.taxa.fe_old_id')\"\n          :type=\"form.errors.has('fe_old_id') ? 'is-danger' : ''\"\n          :message=\"form.errors.has('fe_old_id') ? form.errors.first('fe_old_id') : ''\"\n        >\n          <b-input v-model=\"form.fe_old_id\" />\n        </b-field>\n      </div>\n\n      <div class=\"column is-half\">\n        <b-field\n          :label=\"trans('labels.taxa.fe_id')\"\n          :type=\"form.errors.has('fe_id') ? 'is-danger' : ''\"\n          :message=\"form.errors.has('fe_id') ? form.errors.first('fe_id') : ''\"\n        >\n          <b-input v-model=\"form.fe_id\" />\n        </b-field>\n      </div>\n    </div>\n\n    <div class=\"columns\">\n      <div class=\"column\">\n        <b-field :label=\"trans('labels.taxa.restricted')\">\n          <div class=\"field\">\n            <b-switch v-model=\"form.restricted\">\n              {{ form.restricted ? trans('Yes') : trans('No') }}\n            </b-switch>\n          </div>\n        </b-field>\n      </div>\n      <div class=\"column\">\n        <b-field :label=\"trans('labels.taxa.allochthonous')\">\n          <b-switch v-model=\"form.allochthonous\">\n            {{ form.allochthonous ? trans('Yes') : trans('No') }}\n          </b-switch>\n        </b-field>\n      </div>\n      <div class=\"column\">\n        <b-field :label=\"trans('labels.taxa.invasive')\">\n          <b-switch v-model=\"form.invasive\">\n            {{ form.invasive ? trans('Yes') : trans('No') }}\n          </b-switch>\n        </b-field>\n      </div>\n    </div>\n\n    <b-field :label=\"trans('labels.taxa.stages')\" v-if=\"stages.length\">\n      <div class=\"block\">\n        <b-checkbox\n          v-for=\"stage in stages\"\n          :key=\"stage.id\"\n          v-model=\"form.stages_ids\"\n          :native-value=\"stage.id\"\n        >\n          {{ trans('stages.' + stage.name) }}\n        </b-checkbox>\n      </div>\n    </b-field>\n\n    <b-field :label=\"trans('labels.taxa.conservation_legislations')\" v-if=\"conservationLegislations.length\">\n      <div class=\"block\">\n        <div class=\"columns is-multiline is-gapless\">\n          <div class=\"column is-half\" v-for=\"conservationLegislation in conservationLegislations\" :key=\"conservationLegislation.id\">\n            <b-tooltip :label=\"conservationLegislation.description\" multilined>\n              <b-checkbox\n                v-model=\"form.conservation_legislations_ids\"\n                :native-value=\"conservationLegislation.id\"\n              >\n                {{ conservationLegislation.name }}\n              </b-checkbox>\n            </b-tooltip>\n          </div>\n        </div>\n      </div>\n    </b-field>\n\n    <b-field :label=\"trans('labels.taxa.conservation_documents')\" v-if=\"conservationDocuments.length\">\n      <div class=\"block\">\n        <div class=\"columns is-multiline is-gapless\">\n          <div class=\"column is-half\" v-for=\"conservationDocument in conservationDocuments\" :key=\"conservationDocument.id\">\n            <b-tooltip :label=\"conservationDocument.description\" multilined>\n              <b-checkbox\n                v-model=\"form.conservation_documents_ids\"\n                :native-value=\"conservationDocument.id\"\n              >\n                {{ conservationDocument.name }}\n              </b-checkbox>\n            </b-tooltip>\n          </div>\n        </div>\n      </div>\n    </b-field>\n\n    <div class=\"field\" v-if=\"redLists.length\">\n      <label class=\"label\">{{ trans('labels.taxa.red_lists') }}</label>\n\n      <b-field v-for=\"(addedRedList, index) in form.red_lists_data\" :key=\"index\" grouped>\n        <div class=\"control is-expanded\">\n          <span v-text=\"getRedListName(addedRedList.red_list_id)\"></span>\n        </div>\n\n        <b-select v-model=\"addedRedList.category\">\n          <option v-for=\"category in redListCategories\" :value=\"category\" :key=\"category\" v-text=\"category\">\n          </option>\n        </b-select>\n\n        <div class=\"control\">\n          <button type=\"button\" class=\"button has-text-danger\" @click=\"removeRedList(index)\">&times;</button>\n        </div>\n      </b-field>\n\n      <b-field grouped v-if=\"availableRedLists.length\">\n        <b-select v-model=\"chosenRedList\" expanded>\n          <option v-for=\"option in availableRedLists\" :value=\"option\" :key=\"option.id\" v-text=\"option.name\">\n          </option>\n        </b-select>\n\n        <div class=\"control\">\n          <button type=\"button\" class=\"button\" @click=\"addRedList\">{{ trans('labels.taxa.add_red_list') }}</button>\n        </div>\n      </b-field>\n    </div>\n\n    <hr>\n\n    <button\n      type=\"submit\"\n      class=\"button is-primary\"\n      :class=\"{\n          'is-loading': form.processing\n      }\"\n      @click=\"submitWithRedirect\"\n    >\n      {{ trans('buttons.save') }}\n    </button>\n\n    <a :href=\"cancelUrl\" class=\"button is-text\" @click=\"onCancel\">{{ trans('buttons.cancel') }}</a>\n  </form>\n</template>\n\n<script>\nimport Form from 'form-backend-validation'\nimport _keys from 'lodash/keys'\nimport _find from 'lodash/find'\nimport _first from 'lodash/first'\nimport _get from 'lodash/get'\nimport FormMixin from '@/mixins/FormMixin'\nimport NzWysiwyg from '@/components/inputs/Wysiwyg'\nimport NzTaxonAutocomplete from '@/components/inputs/TaxonAutocomplete'\n\nfunction defaultTranslations() {\n  const value = {}\n\n  _keys(window.App.supportedLocales).forEach(locale => {\n    value[locale] = null\n  })\n\n  return value\n}\n\nexport default {\n  name: 'nzTaxonForm',\n\n  mixins: [FormMixin],\n\n  components: {\n    NzWysiwyg,\n    NzTaxonAutocomplete\n  },\n\n  props: {\n    taxon: {\n      type: Object,\n      default() {\n        return {\n          name: null,\n          parent_id: null,\n          rank: 'species',\n          rank_level: 10,\n          author: null,\n          fe_id: null,\n          fe_old_id: null,\n          conservation_legislations: [],\n          conservation_documents: [],\n          red_lists: [],\n          stages: [],\n          restricted: false,\n          allochthonous: false,\n          invasive: false,\n          restricted: false\n        }\n      }\n    },\n    ranks: Array,\n    conservationLegislations: Array,\n    conservationDocuments: Array,\n    redListCategories: Array,\n    redLists: {\n      type: Array,\n      default() { return [] }\n    },\n    stages: Array,\n    nativeNames: {\n      type: Object,\n      default: () => defaultTranslations()\n    },\n    descriptions: {\n      type: Object,\n      default: () => defaultTranslations()\n    }\n  },\n\n  data() {\n    return {\n      form: this.newForm(),\n      parentName: _get(this.taxon, 'parent.name'),\n      selectedParent: null,\n      chosenRedList: null\n    }\n  },\n\n  computed: {\n    rankOptions() {\n      if (this.selectedParent) {\n        return this.ranks.filter((rank) => rank.level < this.selectedParent.rank_level)\n      }\n\n      return this.ranks\n    },\n\n    availableRedLists() {\n      const addedRedListIds = this.form.red_lists_data\n\n      return this.redLists.filter(redList => !_find(addedRedListIds, rl => redList.id == rl.red_list_id))\n    },\n\n    supportedLocales() {\n      return window.App.supportedLocales\n    }\n  },\n\n  watch: {\n    selectedParent(value) {\n      if (this.shouldResetRank(value)) {\n        this.form.rank = null\n      }\n    }\n  },\n\n  methods: {\n    newForm() {\n      return new Form({\n        ...this.taxon,\n        stages_ids: this.taxon.stages.map(stage => stage.id),\n        conservation_legislations_ids: this.taxon.conservation_legislations.map(conservationLegislation => conservationLegislation.id),\n        conservation_documents_ids: this.taxon.conservation_documents.map(conservationDocument => conservationDocument.id),\n        red_lists_data: this.taxon.red_lists.map(redList => {\n          return { red_list_id: redList.id, category: redList.pivot.category }\n        }),\n        native_name: this.nativeNames,\n        description: this.descriptions,\n        reason: null\n      }, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Add field to the form.\n     */\n    addRedList() {\n      if (!this.chosenRedList) return\n\n      this.form.red_lists_data.push({\n        red_list_id: this.chosenRedList.id,\n        category: _first(this.redListCategories)\n      })\n\n      this.chosenRedList = null\n    },\n\n    /**\n     * Don't use the field any more.\n     *\n     * @param  {Object} field\n     */\n    removeRedList(index) {\n        this.form.red_lists_data.splice(index, 1)\n    },\n\n    getRedListName(id) {\n        return _find(this.redLists, { id }).name\n    },\n\n    /**\n     * Handle taxon being selected.\n     *\n     * @param {Object} taxon\n     */\n    onTaxonSelect(taxon) {\n      this.selectedParent = taxon\n      this.form.parent_id = taxon ? taxon.id : null\n\n      // Inherit parent's stages\n      if (taxon && taxon.stages.length) {\n        this.form.stages_ids = taxon.stages.map(stage => stage.id)\n      }\n    },\n\n    shouldResetRank(selectedParent) {\n      return selectedParent && this.getRankLevel(this.form.rank) >= selectedParent.rank_level\n    },\n\n    /**\n     * Get rank level.\n     * @param {Object} rank\n     * @return {Number}\n     */\n    getRankLevel(rank) {\n      return _get(_find(this.ranks, { value: rank }), 'level')\n    },\n\n    focusOnTranslation(index, attribute) {\n      const locales = _keys(this.supportedLocales)\n      const selector = `${attribute}-${locales[index]}`\n\n      setTimeout(() => {\n        _first(this.$refs[selector]).focus()\n      }, 500)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonForm.vue?vue&type=template&id=ae3fae40&\"\nimport script from \"./TaxonForm.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{staticClass:\"nz-taxon-autocomplete\",attrs:{\"label\":_vm.label,\"type\":_vm.error ? 'is-danger' : null,\"message\":_vm.message}},[_c('b-field',{attrs:{\"grouped\":\"\"}},[(_vm.haveThumbnail)?_c('img',{attrs:{\"width\":\"32\",\"src\":this.selected.thumbnail_url}}):_vm._e(),_vm._v(\" \"),_c('b-autocomplete',{ref:\"autocomplete\",attrs:{\"value\":_vm.value,\"data\":_vm.data,\"field\":\"name\",\"loading\":_vm.loading,\"icon\":_vm.icon,\"placeholder\":_vm.placeholder,\"expanded\":\"\",\"autofocus\":_vm.autofocus},on:{\"input\":_vm.onInput,\"select\":_vm.onSelect},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.enterPressed($event)}},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-left\"},[(props.option.thumbnail_url)?_c('img',{attrs:{\"width\":\"32\",\"src\":props.option.thumbnail_url}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"media-content\"},[_vm._v(\"\\n            \"+_vm._s(props.option.name)+_vm._s(props.option.native_name ? (\" (\" + (props.option.native_name) + \")\") : '')+\"\\n          \")])])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-field :label=\"label\" class=\"nz-taxon-autocomplete\" :type=\"error ? 'is-danger' : null\" :message=\"message\">\n    <b-field grouped>\n      <img width=\"32\" :src=\"this.selected.thumbnail_url\" v-if=\"haveThumbnail\">\n\n      <b-autocomplete\n        ref=\"autocomplete\"\n        :value=\"value\"\n        :data=\"data\"\n        field=\"name\"\n        :loading=\"loading\"\n        @input=\"onInput\"\n        @select=\"onSelect\"\n        :icon=\"icon\"\n        :placeholder=\"placeholder\"\n        expanded\n        :autofocus=\"autofocus\"\n        @keydown.native.enter=\"enterPressed\"\n      >\n        <template slot-scope=\"props\">\n          <div class=\"media\">\n            <div class=\"media-left\">\n              <img width=\"32\" :src=\"props.option.thumbnail_url\" v-if=\"props.option.thumbnail_url\">\n            </div>\n\n            <div class=\"media-content\">\n              {{ props.option.name }}{{ props.option.native_name ? ` (${props.option.native_name})` : ''}}\n            </div>\n          </div>\n        </template>\n\n      </b-autocomplete>\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nimport axios from 'axios'\nimport _debounce from 'lodash/debounce'\nimport _get from 'lodash/get'\n\nexport default {\n  name: 'nzTaxonAutocomplete',\n\n  props: {\n    label: {\n      type: String,\n      default: 'Taxon'\n    },\n    placeholder: {\n      type: String,\n      default: 'Search for taxon...'\n    },\n    taxon: {\n      type: Object,\n      default: null\n    },\n    url: {\n      type: String,\n      default: () => route('api.taxa.index')\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    error: Boolean,\n    message: {\n      type: String,\n      default: null\n    },\n    except: {},\n    autofocus: Boolean\n  },\n\n  data() {\n    return {\n      data: [],\n      selected: this.taxon || null,\n      loading: false\n    }\n  },\n\n  computed: {\n    haveThumbnail() {\n      return this.selected && this.selected.thumbnail_url\n    },\n\n    icon() {\n      return this.selected ? 'check' : 'search'\n    }\n  },\n\n  watch: {\n    taxon(value) {\n      this.selected = value\n    }\n  },\n\n  methods: {\n    fetchData: _debounce(function() {\n      if (!this.value) return\n\n      this.data = []\n      this.loading = true\n\n      let params = {\n        name: this.value,\n        limit: 20,\n      }\n\n      if (this.except) {\n        params.except = this.except\n      }\n\n      axios.get(this.url, {\n        params\n      }).then(({\n        data\n      }) => {\n        data.data.forEach(item => this.data.push(item))\n        this.loading = false\n      }, response => {\n        this.loading = false\n      })\n    }, 500),\n\n    onSelect(taxon) {\n      this.selected = taxon\n\n      this.$emit('select', taxon)\n    },\n\n    onInput(value) {\n      const currentValue = this.getValue(this.selected)\n      if (currentValue && currentValue !== value) {\n        this.onSelect(null)\n      }\n\n      this.$emit('input', value)\n\n      this.fetchData()\n    },\n\n    focusOnInput() {\n      this.$el.querySelector('input').focus()\n    },\n\n    /**\n     * Return display text for the input.\n     * If object, get value from path, or else just the value.\n     */\n    getValue(option) {\n      if (!option) return\n\n      return typeof option === 'object'\n        ? _get(option, 'name')\n        : option\n    },\n\n    enterPressed() {\n      if (!this.$refs.autocomplete.isActive) {\n        this.$emit('enter')\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaxonAutocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaxonAutocomplete.vue?vue&type=template&id=cedb826c&\"\nimport script from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./TaxonAutocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wysiwyg\"},[_c('input',{ref:\"input\",attrs:{\"id\":_vm.inputId,\"type\":\"hidden\",\"name\":_vm.name},domProps:{\"value\":_vm.value}}),_vm._v(\" \"),_c('trix-editor',{ref:\"trix\",attrs:{\"input\":_vm.inputId}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wysiwyg\">\n    <input :id=\"inputId\" type=\"hidden\" :name=\"name\" :value=\"value\" ref=\"input\">\n\n    <trix-editor ref=\"trix\" :input=\"inputId\"></trix-editor>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport Trix from 'trix'\n\nVue.config.ignoredElements = ['trix-editor']\n\nlet { lang } = Trix.config\n\nTrix.config.toolbar = {\n  getDefaultHTML: () => `\n    <div class=\"trix-button-row\">\n      <span class=\"trix-button-group trix-button-group--text-tools\" data-trix-button-group=\"text-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-bold\" data-trix-attribute=\"bold\" data-trix-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-italic\" data-trix-attribute=\"italic\" data-trix-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-strike\" data-trix-attribute=\"strike\" title=\"#{lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-link\" data-trix-attribute=\"href\" data-trix-action=\"link\" data-trix-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\n      </span>\n      <span class=\"trix-button-group trix-button-group--history-tools\" data-trix-button-group=\"history-tools\">\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-undo\" data-trix-action=\"undo\" data-trix-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\n        <button type=\"button\" class=\"trix-button trix-button--icon trix-button--icon-redo\" data-trix-action=\"redo\" data-trix-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\n      </span>\n    </div>\n    <div class=\"trix-dialogs\" data-trix-dialogs>\n      <div class=\"trix-dialog trix-dialog--link\" data-trix-dialog=\"href\" data-trix-dialog-attribute=\"href\">\n        <div class=\"trix-dialog__link-fields\">\n          <input type=\"url\" name=\"href\" class=\"trix-input trix-input--dialog\" placeholder=\"${lang.urlPlaceholder}\" required data-trix-input>\n          <div class=\"trix-button-group\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.link}\" data-trix-method=\"setAttribute\">\n            <input type=\"button\" class=\"trix-button trix-button--dialog\" value=\"${lang.unlink}\" data-trix-method=\"removeAttribute\">\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n}\n\nfunction makeid() {\n  let text = \"\"\n  const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"\n\n  for (let i = 0; i < 5; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length))\n  }\n\n  return text;\n}\n\nexport default {\n  name: 'nzWysiwyg',\n\n  props: {\n    name: String,\n    value: String\n  },\n\n  data() {\n    return {\n      inputId: makeid()\n    }\n  },\n\n  mounted() {\n    this.$refs.trix.addEventListener('trix-change', this.onInput)\n  },\n\n  beforeDestroy() {\n    this.$refs.trix.removeEventListener('trix-change', this.onInput)\n  },\n\n  methods: {\n    onInput(e) {\n      this.$emit('input', e.target.innerHTML)\n    },\n\n    focus() {\n      this.$refs.trix.focus()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wysiwyg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Wysiwyg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Wysiwyg.vue?vue&type=template&id=95efe7ba&\"\nimport script from \"./Wysiwyg.vue?vue&type=script&lang=js&\"\nexport * from \"./Wysiwyg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n"],"sourceRoot":""}