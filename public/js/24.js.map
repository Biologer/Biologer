{"version":3,"sources":["webpack:///./resources/js/components/forms/PublicationForm.vue?ac7d","webpack:///./resources/js/components/inputs/PublicationAttachmentUpload.vue?1e5a","webpack:///resources/js/components/inputs/PublicationAttachmentUpload.vue","webpack:///./resources/js/components/inputs/PublicationAttachmentUpload.vue","webpack:///./resources/js/components/inputs/PublicationAttachmentUpload.vue?70d9","webpack:///resources/js/components/forms/PublicationForm.vue","webpack:///./resources/js/components/forms/PublicationForm.vue?8668","webpack:///./resources/js/components/forms/PublicationForm.vue","webpack:///./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js","webpack:///./resources/js/mixins/FormMixin.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js"],"names":["name","props","attachment","Object","data","newAttachment","this","reader","uploading","progress","error","computed","hasAttachment","Boolean","methods","onInput","file","upload","remove","openUpload","$refs","input","click","axios","post","route","makeForm","headers","Accept","onUploadProgress","form","append","handleError","$el","querySelector","value","response","$buefy","toast","open","duration","message","position","type","errors","trans","_vm","_h","$createElement","_c","_self","attrs","staticClass","domProps","_v","_s","_e","url","original_name","on","directives","rawName","expression","ref","components","mixins","FormMixin","publication","default","publicationTypes","Array","resetOnSuccess","chosenType","typeHasName","has_name","typeHasEditors","has_editors","typeRequiresEditors","requires_editors","typeHasPublisher","has_publisher","typeRequiresPublisher","requires_publisher","typeHasIssue","has_issue","typeRequiresIssue","requires_issue","typeHasPlace","has_place","typeRequiresPlace","requires_place","typeHasPageRange","has_page_range","nameLabel","titleLabel","addAuthor","authors","push","addEditor","editors","removeAuthor","removeItemFromField","index","removeEditor","field","removeErrorForItem","keys","forEach","match","newErrors","errorField","record","handleAttachmentUploaded","attachment_id","id","handleRemovedAttachment","authorHasError","has","getAuthorError","first","editorHasError","getEditorError","action","method","locale","$event","preventDefault","submitWithRedirect","model","callback","$$v","$set","_l","publicationType","key","label","class","slot","content","_","i","cancelUrl","runtime","exports","undefined","Op","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","tryCatch","done","GenStateSuspendedYield","makeInvokeMethod","fn","obj","call","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","result","__await","then","unwrapped","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","String","required","redirectUrl","submitMore","shouldConfirmSubmit","confirmSubmitMessage","shouldAskReason","shouldConfirmCancel","submitOnlyDirty","submitOnlyDirtyMessage","newForm","keepAfterSubmit","submittingWithRedirect","submittingWithoutRedirect","confirmingSubmit","confirmingCancel","window","App","created","document","addEventListener","registerKeyListener","beforeDestroy","removeEventListener","Form","e","enter","which","keyCode","ctrlKey","shiftKey","submitWithoutRedirect","confirmSubmit","onConfirm","options","confirmText","cancelText","onCancel","promptForReason","dialog","confirm","prompt","inputAttrs","placeholder","maxlength","$nextTick","target","setCustomValidity","validity","valid","validationMessage","notifyNoChanges","notifyNoChangesAndRedirect","setTimeout","location","href","processing","isDirty","performSubmitWithRedirect","reason","toLowerCase","onSuccessfulSubmitWithRedirect","onFailedSubmit","hookAfterSubmitWithRedirect","performSubmitWithoutRedirect","onSuccessfulSubmitWithoutRedirect","keep","_pick","populate","hookAfterSubmitWithoutRedirect","_get","_isEqual","initial","confirmCancel","event"],"mappings":"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","file":"js/24.js?id=c441325b03d66e8e16f0","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"publication-form\",attrs:{\"action\":_vm.action,\"method\":_vm.method,\"lang\":_vm.locale},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitWithRedirect($event)}}},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.publications.type'),\"label-for\":\"type\",\"type\":_vm.form.errors.has('type') ? 'is-danger' : null,\"message\":_vm.form.errors.has('type') ? _vm.form.errors.first('type') : null}},[_c('b-select',{attrs:{\"id\":\"type\",\"name\":\"type\",\"expanded\":\"\"},model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},_vm._l((_vm.publicationTypes),function(publicationType){return _c('option',{key:publicationType.value,domProps:{\"value\":publicationType.value}},[_vm._v(\"\\n            \"+_vm._s(publicationType.label)+\"\\n          \")])}),0)],1),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.publications.year'),\"label-for\":\"year\",\"type\":_vm.form.errors.has('year') ? 'is-danger' : null,\"message\":_vm.form.errors.has('year') ? _vm.form.errors.first('year') : null}},[_c('b-input',{attrs:{\"id\":\"year\",\"name\":\"year\",\"type\":\"number\",\"expanded\":\"\"},model:{value:(_vm.form.year),callback:function ($$v) {_vm.$set(_vm.form, \"year\", $$v)},expression:\"form.year\"}})],1),_vm._v(\" \"),(_vm.typeHasName)?_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.nameLabel,\"label-for\":\"name\",\"type\":_vm.form.errors.has('name') ? 'is-danger' : null,\"message\":_vm.form.errors.has('name') ? _vm.form.errors.first('name') : null}},[_c('b-input',{attrs:{\"id\":\"name\",\"name\":\"name\",\"expanded\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1):_vm._e(),_vm._v(\" \"),_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.titleLabel,\"label-for\":\"title\",\"type\":_vm.form.errors.has('title') ? 'is-danger' : null,\"message\":_vm.form.errors.has('title') ? _vm.form.errors.first('title') : null}},[_c('b-input',{attrs:{\"id\":\"title\",\"name\":\"title\",\"expanded\":\"\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),(_vm.typeHasPublisher)?_c('b-field',{class:{'is-required': _vm.typeRequiresPublisher},attrs:{\"label\":_vm.trans('labels.publications.publisher'),\"label-for\":\"publisher\",\"type\":_vm.form.errors.has('publisher') ? 'is-danger' : null,\"message\":_vm.form.errors.has('publisher') ? _vm.form.errors.first('publisher') : null}},[_c('b-input',{attrs:{\"id\":\"publisher\",\"name\":\"publisher\",\"expanded\":\"\"},model:{value:(_vm.form.publisher),callback:function ($$v) {_vm.$set(_vm.form, \"publisher\", $$v)},expression:\"form.publisher\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.typeHasIssue)?_c('b-field',{class:{'is-required': _vm.typeRequiresIssue},attrs:{\"label\":_vm.trans('labels.publications.issue'),\"label-for\":\"issue\",\"type\":_vm.form.errors.has('issue') ? 'is-danger' : null,\"message\":_vm.form.errors.has('issue') ? _vm.form.errors.first('issue') : null}},[_c('b-input',{attrs:{\"id\":\"issue\",\"name\":\"issue\",\"expanded\":\"\"},model:{value:(_vm.form.issue),callback:function ($$v) {_vm.$set(_vm.form, \"issue\", $$v)},expression:\"form.issue\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.typeHasPlace)?_c('b-field',{class:{'is-required': _vm.typeRequiresPlace},attrs:{\"label\":_vm.trans('labels.publications.place'),\"label-for\":\"place\",\"type\":_vm.form.errors.has('place') ? 'is-danger' : null,\"message\":_vm.form.errors.has('place') ? _vm.form.errors.first('place') : null}},[_c('b-input',{attrs:{\"id\":\"place\",\"name\":\"place\",\"expanded\":\"\"},model:{value:(_vm.form.place),callback:function ($$v) {_vm.$set(_vm.form, \"place\", $$v)},expression:\"form.place\"}})],1):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.page_count'),\"label-for\":\"page_count\",\"type\":_vm.form.errors.has('page_count') ? 'is-danger' : null,\"message\":_vm.form.errors.has('page_count') ? _vm.form.errors.first('page_count') : null}},[_c('b-input',{attrs:{\"id\":\"page_count\",\"name\":\"page_count\",\"expanded\":\"\"},model:{value:(_vm.form.page_count),callback:function ($$v) {_vm.$set(_vm.form, \"page_count\", $$v)},expression:\"form.page_count\"}})],1),_vm._v(\" \"),(_vm.typeHasPageRange)?_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.page_range'),\"label-for\":\"page_range\",\"type\":_vm.form.errors.has('page_range') ? 'is-danger' : null,\"message\":_vm.form.errors.has('page_range') ? _vm.form.errors.first('page_range') : null}},[_c('b-input',{attrs:{\"id\":\"page_range\",\"name\":\"page_range\",\"expanded\":\"\"},model:{value:(_vm.form.page_range),callback:function ($$v) {_vm.$set(_vm.form, \"page_range\", $$v)},expression:\"form.page_range\"}})],1):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.doi'),\"label-for\":\"doi\",\"type\":_vm.form.errors.has('doi') ? 'is-danger' : null,\"message\":_vm.form.errors.has('doi') ? _vm.form.errors.first('doi') : null}},[_c('b-input',{attrs:{\"id\":\"doi\",\"name\":\"doi\",\"expanded\":\"\"},model:{value:(_vm.form.doi),callback:function ($$v) {_vm.$set(_vm.form, \"doi\", $$v)},expression:\"form.doi\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label-for\":\"citation\",\"type\":_vm.form.errors.has('citation') ? 'is-danger' : null,\"message\":_vm.form.errors.has('citation') ? _vm.form.errors.first('citation') : null}},[_c('label',{staticClass:\"label\",attrs:{\"slot\":\"label\",\"for\":\"citation\"},slot:\"label\"},[_c('span',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({content: _vm.trans('labels.publications.citation_tooltip')}),expression:\"{content: trans('labels.publications.citation_tooltip')}\"}],staticClass:\"is-dashed\"},[_vm._v(\"\\n            \"+_vm._s(_vm.trans('labels.publications.citation'))+\"\\n          \")])]),_vm._v(\" \"),_c('b-input',{attrs:{\"id\":\"citation\",\"type\":\"textarea\",\"name\":\"citation\",\"expanded\":\"\"},model:{value:(_vm.form.citation),callback:function ($$v) {_vm.$set(_vm.form, \"citation\", $$v)},expression:\"form.citation\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"column\"},[_c('b-field',{staticClass:\"is-required\",attrs:{\"label\":_vm.trans('labels.publications.authors'),\"type\":_vm.form.errors.has('authors') ? 'is-danger' : null,\"message\":_vm.form.errors.has('authors') ? _vm.form.errors.first('authors') : null,\"addons\":false}},[_vm._l((_vm.form.authors),function(_,i){return _c('b-field',{key:i,attrs:{\"type\":_vm.authorHasError(i) ? 'is-danger' : null,\"message\":_vm.authorHasError(i) ? _vm.getAuthorError(i) : null,\"expanded\":\"\",\"addons\":false}},[_c('b-field',{attrs:{\"type\":_vm.authorHasError(i) ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-input',{attrs:{\"name\":(\"authors[\" + i + \"][first_name]\"),\"placeholder\":_vm.trans('labels.publications.first_name'),\"expanded\":\"\"},model:{value:(_vm.form.authors[i].first_name),callback:function ($$v) {_vm.$set(_vm.form.authors[i], \"first_name\", $$v)},expression:\"form.authors[i].first_name\"}}),_vm._v(\" \"),_c('b-input',{attrs:{\"name\":(\"authors[\" + i + \"][last_name]\"),\"placeholder\":_vm.trans('labels.publications.last_name'),\"expanded\":\"\"},model:{value:(_vm.form.authors[i].last_name),callback:function ($$v) {_vm.$set(_vm.form.authors[i], \"last_name\", $$v)},expression:\"form.authors[i].last_name\"}}),_vm._v(\" \"),_c('p',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-danger is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeAuthor(i)}}},[_c('b-icon',{attrs:{\"icon\":\"times\",\"size\":\"is-small\"}})],1)])],1)],1)}),_vm._v(\" \"),_c('button',{staticClass:\"button is-secondary is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addAuthor}},[_vm._v(\"\\n          \"+_vm._s(_vm.trans('labels.publications.add_author'))+\"\\n        \")])],2),_vm._v(\" \"),(_vm.typeHasEditors)?_c('b-field',{class:{'is-required': _vm.typeRequiresEditors},attrs:{\"label\":_vm.trans('labels.publications.editors'),\"type\":_vm.form.errors.has('editors') ? 'is-danger' : null,\"message\":_vm.form.errors.has('editors') ? _vm.form.errors.first('editors') : null,\"addons\":false}},[_vm._l((_vm.form.editors),function(_,i){return _c('b-field',{key:i,attrs:{\"type\":_vm.editorHasError(i) ? 'is-danger' : null,\"message\":_vm.editorHasError(i) ? _vm.getEditorError(i) : null,\"expanded\":\"\",\"addons\":false}},[_c('b-field',{attrs:{\"type\":_vm.editorHasError(i) ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-input',{attrs:{\"name\":(\"editors[\" + i + \"][first_name]\"),\"placeholder\":_vm.trans('labels.publications.first_name'),\"expanded\":\"\"},model:{value:(_vm.form.editors[i].first_name),callback:function ($$v) {_vm.$set(_vm.form.editors[i], \"first_name\", $$v)},expression:\"form.editors[i].first_name\"}}),_vm._v(\" \"),_c('b-input',{attrs:{\"name\":(\"editors[\" + i + \"][last_name]\"),\"placeholder\":_vm.trans('labels.publications.last_name'),\"expanded\":\"\"},model:{value:(_vm.form.editors[i].last_name),callback:function ($$v) {_vm.$set(_vm.form.editors[i], \"last_name\", $$v)},expression:\"form.editors[i].last_name\"}}),_vm._v(\" \"),_c('p',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-danger is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeEditor(i)}}},[_c('b-icon',{attrs:{\"icon\":\"times\",\"size\":\"is-small\"}})],1)])],1)],1)}),_vm._v(\" \"),_c('button',{staticClass:\"button is-secondary is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addEditor}},[_vm._v(\"\\n          \"+_vm._s(_vm.trans('labels.publications.add_editor'))+\"\\n        \")])],2):_vm._e(),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.link'),\"type\":_vm.form.errors.has('link') ? 'is-danger' : null,\"message\":_vm.form.errors.has(\"link\") ? _vm.form.errors.first(\"link\") : null}},[_c('b-input',{attrs:{\"name\":\"link\",\"expanded\":\"\"},model:{value:(_vm.form.link),callback:function ($$v) {_vm.$set(_vm.form, \"link\", $$v)},expression:\"form.link\"}})],1),_vm._v(\" \"),_c('b-field',{attrs:{\"label\":_vm.trans('labels.publications.attachment')}},[_c('nz-publication-attachment-upload',{attrs:{\"attachment\":_vm.form.attachment},on:{\"uploaded\":_vm.handleAttachmentUploaded,\"removed\":_vm.handleRemovedAttachment}})],1)],1)]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('button',{staticClass:\"button is-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.trans('buttons.save')))]),_vm._v(\" \"),_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.cancelUrl}},[_vm._v(_vm._s(_vm.trans('buttons.cancel')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"","<template>\n  <b-field :message=\"error || null\" :type=\"error ? 'is-danger' : null\" expanded>\n    <b-field class=\"file\">\n      <progress class=\"progress is-primary is-small\" :value=\"progress\" max=\"100\" v-if=\"uploading\">{{ progress }}%</progress>\n\n      <b-upload @input=\"onInput\" accept=\".pdf,.odt,.doc,.docx\" v-show=\"!uploading\" v-if=\"!hasAttachment\" ref=\"upload\">\n        <button type=\"button\" @click=\"openUpload\" class=\"button is-secondary\">\n          <b-icon icon=\"upload\"></b-icon>\n          <span>Upload Document</span>\n        </button>\n      </b-upload>\n      <div class=\"flex items-center justify-between w-full\" v-else>\n        <div class=\"mr-4\">\n          <a :href=\"newAttachment.url\" :download=\"newAttachment.original_name\" target=\"_blank\">{{ newAttachment.original_name }}</a>\n        </div>\n        <button type=\"button\" class=\"button is-danger is-outlined\" @click=\"remove\">\n          <b-icon icon=\"times\" />\n        </button>\n      </div>\n    </b-field>\n  </b-field>\n</template>\n\n<script>\nexport default {\n  name: 'nzPublicationAttachmentUpload',\n\n  props: {\n    attachment: Object\n  },\n\n  data() {\n    return {\n      newAttachment: this.attachment,\n      reader: null,\n      uploading: false,\n      progress: 0,\n      error: null,\n    }\n  },\n\n  computed: {\n    hasAttachment() {\n      return Boolean(this.newAttachment)\n    }\n  },\n\n  methods: {\n    onInput(file) {\n      this.error = null\n\n      if (!file) {\n        this.remove()\n      } else {\n        this.upload(file)\n      }\n    },\n\n    openUpload() {\n      this.$refs.upload.$refs.input.click()\n    },\n\n    upload(file) {\n      this.uploading = true\n      return axios.post(route('api.publication-attachments.store'), this.makeForm(file), {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Accept: 'application/json'\n        },\n        onUploadProgress: progressEvent => {\n           this.progress = Math.floor((progressEvent.loaded * 100) / progressEvent.total)\n        }\n      }).then(response => {\n        const attachment = response.data.data\n        this.newAttachment = attachment\n\n        this.uploading = false\n        this.progress = 0\n\n        this.$emit('uploaded', attachment)\n      }).catch(this.handleError)\n    },\n\n    makeForm(file) {\n      let form = new FormData()\n\n      form.append('attachment', file)\n\n      return form\n    },\n\n    async remove() {\n      if (!this.hasAttachment) return\n\n      this.$emit('removed', this.newAttachment)\n\n      this.newAttachment = null\n    },\n\n    handleError(error) {\n      this.uploading = false\n      this.progress = 0\n\n      // Clear the input so we can select the same file if needed.\n      this.$el.querySelector('input[type=\"file\"]').value = ''\n\n      if (!error.response) {\n        return this.$buefy.toast.open({\n          duration: 5000,\n          message: error.message,\n          position: 'is-top',\n          type: 'is-danger'\n        })\n      }\n\n      this.error = error.response.data.errors.attachment[0] || this.trans('Error')\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./PublicationAttachmentUpload.vue?vue&type=template&id=25972744&\"\nimport script from \"./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationAttachmentUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-field',{attrs:{\"message\":_vm.error || null,\"type\":_vm.error ? 'is-danger' : null,\"expanded\":\"\"}},[_c('b-field',{staticClass:\"file\"},[(_vm.uploading)?_c('progress',{staticClass:\"progress is-primary is-small\",attrs:{\"max\":\"100\"},domProps:{\"value\":_vm.progress}},[_vm._v(_vm._s(_vm.progress)+\"%\")]):_vm._e(),_vm._v(\" \"),(!_vm.hasAttachment)?_c('b-upload',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.uploading),expression:\"!uploading\"}],ref:\"upload\",attrs:{\"accept\":\".pdf,.odt,.doc,.docx\"},on:{\"input\":_vm.onInput}},[_c('button',{staticClass:\"button is-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.openUpload}},[_c('b-icon',{attrs:{\"icon\":\"upload\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Upload Document\")])],1)]):_c('div',{staticClass:\"flex items-center justify-between w-full\"},[_c('div',{staticClass:\"mr-4\"},[_c('a',{attrs:{\"href\":_vm.newAttachment.url,\"download\":_vm.newAttachment.original_name,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.newAttachment.original_name))])]),_vm._v(\" \"),_c('button',{staticClass:\"button is-danger is-outlined\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.remove}},[_c('b-icon',{attrs:{\"icon\":\"times\"}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form :action=\"action\" :method=\"method\" :lang=\"locale\" class=\"publication-form\" @submit.prevent=\"submitWithRedirect\">\n    <div class=\"columns\">\n      <div class=\"column\">\n        <b-field\n          :label=\"trans('labels.publications.type')\"\n          label-for=\"type\"\n          :type=\"form.errors.has('type') ? 'is-danger' : null\"\n          :message=\"form.errors.has('type') ? form.errors.first('type') : null\"\n          class=\"is-required\"\n        >\n          <b-select id=\"type\" name=\"type\" v-model=\"form.type\" expanded>\n            <option\n              v-for=\"publicationType in publicationTypes\"\n              :value=\"publicationType.value\"\n              :key=\"publicationType.value\"\n            >\n              {{ publicationType.label }}\n            </option>\n          </b-select>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.publications.year')\"\n          label-for=\"year\"\n          :type=\"form.errors.has('year') ? 'is-danger' : null\"\n          :message=\"form.errors.has('year') ? form.errors.first('year') : null\"\n          class=\"is-required\"\n        >\n          <b-input id=\"year\" name=\"year\" v-model=\"form.year\" type=\"number\" expanded />\n        </b-field>\n\n        <b-field\n          v-if=\"typeHasName\"\n          :label=\"nameLabel\"\n          label-for=\"name\"\n          :type=\"form.errors.has('name') ? 'is-danger' : null\"\n          :message=\"form.errors.has('name') ? form.errors.first('name') : null\"\n          class=\"is-required\"\n        >\n          <b-input id=\"name\" name=\"name\" v-model=\"form.name\" expanded />\n        </b-field>\n\n        <b-field\n          :label=\"titleLabel\"\n          label-for=\"title\"\n          :type=\"form.errors.has('title') ? 'is-danger' : null\"\n          :message=\"form.errors.has('title') ? form.errors.first('title') : null\"\n          class=\"is-required\"\n        >\n          <b-input id=\"title\" name=\"title\" v-model=\"form.title\" expanded />\n        </b-field>\n\n        <b-field\n          v-if=\"typeHasPublisher\"\n          :label=\"trans('labels.publications.publisher')\"\n          label-for=\"publisher\"\n          :class=\"{'is-required': typeRequiresPublisher}\"\n          :type=\"form.errors.has('publisher') ? 'is-danger' : null\"\n          :message=\"form.errors.has('publisher') ? form.errors.first('publisher') : null\"\n        >\n          <b-input id=\"publisher\" name=\"publisher\" v-model=\"form.publisher\" expanded />\n        </b-field>\n\n        <b-field\n          v-if=\"typeHasIssue\"\n          :label=\"trans('labels.publications.issue')\"\n          label-for=\"issue\"\n          :type=\"form.errors.has('issue') ? 'is-danger' : null\"\n          :message=\"form.errors.has('issue') ? form.errors.first('issue') : null\"\n          :class=\"{'is-required': typeRequiresIssue}\"\n        >\n          <b-input id=\"issue\" name=\"issue\" v-model=\"form.issue\" expanded />\n        </b-field>\n\n        <b-field\n          v-if=\"typeHasPlace\"\n          :label=\"trans('labels.publications.place')\"\n          label-for=\"place\"\n          :class=\"{'is-required': typeRequiresPlace}\"\n          :type=\"form.errors.has('place') ? 'is-danger' : null\"\n          :message=\"form.errors.has('place') ? form.errors.first('place') : null\"\n        >\n          <b-input id=\"place\" name=\"place\" v-model=\"form.place\" expanded />\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.publications.page_count')\"\n          label-for=\"page_count\"\n          :type=\"form.errors.has('page_count') ? 'is-danger' : null\"\n          :message=\"form.errors.has('page_count') ? form.errors.first('page_count') : null\"\n        >\n          <b-input id=\"page_count\" name=\"page_count\" v-model=\"form.page_count\" expanded />\n        </b-field>\n\n        <b-field\n          v-if=\"typeHasPageRange\"\n          :label=\"trans('labels.publications.page_range')\"\n          label-for=\"page_range\"\n          :type=\"form.errors.has('page_range') ? 'is-danger' : null\"\n          :message=\"form.errors.has('page_range') ? form.errors.first('page_range') : null\"\n        >\n          <b-input id=\"page_range\" name=\"page_range\" v-model=\"form.page_range\" expanded />\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.publications.doi')\"\n          label-for=\"doi\"\n          :type=\"form.errors.has('doi') ? 'is-danger' : null\"\n          :message=\"form.errors.has('doi') ? form.errors.first('doi') : null\"\n        >\n          <b-input id=\"doi\" name=\"doi\" v-model=\"form.doi\" expanded />\n        </b-field>\n\n        <b-field\n          label-for=\"citation\"\n          :type=\"form.errors.has('citation') ? 'is-danger' : null\"\n          :message=\"form.errors.has('citation') ? form.errors.first('citation') : null\"\n        >\n          <label for=\"citation\" class=\"label\" slot=\"label\">\n            <span\n              class=\"is-dashed\"\n              v-tooltip=\"{content: trans('labels.publications.citation_tooltip')}\"\n            >\n              {{ trans('labels.publications.citation') }}\n            </span>\n          </label>\n\n          <b-input id=\"citation\" type=\"textarea\" name=\"citation\" v-model=\"form.citation\" expanded />\n        </b-field>\n      </div>\n\n      <div class=\"column\">\n        <b-field\n          :label=\"trans('labels.publications.authors')\"\n          :type=\"form.errors.has('authors') ? 'is-danger' : null\"\n          :message=\"form.errors.has('authors') ? form.errors.first('authors') : null\"\n          class=\"is-required\"\n          :addons=\"false\"\n        >\n          <b-field\n            v-for=\"(_,i) in form.authors\"\n            :key=\"i\"\n            :type=\"authorHasError(i) ? 'is-danger' : null\"\n            :message=\"authorHasError(i) ? getAuthorError(i) : null\"\n            expanded\n            :addons=\"false\"\n          >\n            <b-field\n              :type=\"authorHasError(i) ? 'is-danger' : null\"\n              expanded\n            >\n              <b-input\n                :name=\"`authors[${i}][first_name]`\"\n                v-model=\"form.authors[i].first_name\"\n                :placeholder=\"trans('labels.publications.first_name')\"\n                expanded\n              />\n\n              <b-input\n                :name=\"`authors[${i}][last_name]`\"\n                v-model=\"form.authors[i].last_name\"\n                :placeholder=\"trans('labels.publications.last_name')\"\n                expanded\n              />\n\n              <p class=\"control\">\n                <button type=\"button\" class=\"button is-danger is-outlined\" @click=\"removeAuthor(i)\">\n                  <b-icon icon=\"times\" size=\"is-small\"/>\n                </button>\n              </p>\n\n            </b-field>\n          </b-field>\n\n          <button\n            type=\"button\"\n            class=\"button is-secondary is-outlined\"\n            @click=\"addAuthor\"\n          >\n            {{ trans('labels.publications.add_author') }}\n          </button>\n        </b-field>\n\n        <b-field\n          v-if=\"typeHasEditors\"\n          :class=\"{'is-required': typeRequiresEditors}\"\n          :label=\"trans('labels.publications.editors')\"\n          :type=\"form.errors.has('editors') ? 'is-danger' : null\"\n          :message=\"form.errors.has('editors') ? form.errors.first('editors') : null\"\n          :addons=\"false\"\n        >\n          <b-field\n            v-for=\"(_,i) in form.editors\"\n            :key=\"i\"\n            :type=\"editorHasError(i) ? 'is-danger' : null\"\n            :message=\"editorHasError(i) ? getEditorError(i) : null\"\n            expanded\n            :addons=\"false\"\n          >\n            <b-field\n              :type=\"editorHasError(i) ? 'is-danger' : null\"\n              expanded\n            >\n              <b-input\n                :name=\"`editors[${i}][first_name]`\"\n                v-model=\"form.editors[i].first_name\"\n                :placeholder=\"trans('labels.publications.first_name')\"\n                expanded\n              />\n\n              <b-input\n                :name=\"`editors[${i}][last_name]`\"\n                v-model=\"form.editors[i].last_name\"\n                :placeholder=\"trans('labels.publications.last_name')\"\n                expanded\n              />\n\n              <p class=\"control\">\n                <button type=\"button\" class=\"button is-danger is-outlined\" @click=\"removeEditor(i)\">\n                  <b-icon icon=\"times\" size=\"is-small\"/>\n                </button>\n              </p>\n\n            </b-field>\n          </b-field>\n\n          <button\n            type=\"button\"\n            class=\"button is-secondary is-outlined\"\n            @click=\"addEditor\"\n          >\n            {{ trans('labels.publications.add_editor') }}\n          </button>\n        </b-field>\n\n        <b-field\n          :label=\"trans('labels.publications.link')\"\n          :type=\"form.errors.has('link') ? 'is-danger' : null\"\n          :message=\"form.errors.has(`link`) ? form.errors.first(`link`) : null\"\n        >\n          <b-input name=\"link\" v-model=\"form.link\" expanded/>\n        </b-field>\n\n        <b-field :label=\"trans('labels.publications.attachment')\">\n          <nz-publication-attachment-upload\n            @uploaded=\"handleAttachmentUploaded\"\n            @removed=\"handleRemovedAttachment\"\n            :attachment=\"form.attachment\"\n          />\n        </b-field>\n      </div>\n    </div>\n\n    <hr>\n\n    <button type=\"submit\" class=\"button is-primary\">{{ trans('buttons.save') }}</button>\n\n    <a :href=\"cancelUrl\" class=\"button\">{{ trans('buttons.cancel') }}</a>\n  </form>\n</template>\n\n<script>\nimport Form from 'form-backend-validation'\nimport _find from 'lodash/find'\nimport FormMixin from '@/mixins/FormMixin'\nimport PublicationAttachmentUpload from '@/components/inputs/PublicationAttachmentUpload'\n\nexport default {\n  name: 'nzPublicationForm',\n\n  components: {\n    [PublicationAttachmentUpload.name]: PublicationAttachmentUpload\n  },\n\n  mixins: [FormMixin],\n\n  props: {\n    publication: {\n      type: Object,\n      default: () => ({\n        type: null,\n        year: null,\n        name: null,\n        title: null,\n        publisher: null,\n        issue: null,\n        place: null,\n        page_count: null,\n        page_range: null,\n        doi: null,\n        citation: null,\n        authors: [],\n        editors: [],\n        link: null,\n        attachment: null,\n        attachment_id: null\n      })\n    },\n\n    publicationTypes: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  data() {\n    return {\n      form: new Form({\n        ...this.publication\n      }, {\n        resetOnSuccess: false\n      })\n    }\n  },\n\n  computed: {\n    chosenType() {\n      return _find(this.publicationTypes, { value: this.form.type })\n    },\n\n    typeHasName() {\n      return this.chosenType ? this.chosenType.has_name : false\n    },\n\n    typeHasEditors() {\n      return this.chosenType ? this.chosenType.has_editors : false\n    },\n\n    typeRequiresEditors() {\n      return this.chosenType ? this.chosenType.requires_editors : false\n    },\n\n    typeHasPublisher() {\n      return this.chosenType ? this.chosenType.has_publisher : false\n    },\n\n    typeRequiresPublisher() {\n      return this.chosenType ? this.chosenType.requires_publisher : false\n    },\n\n    typeHasIssue() {\n      return this.chosenType ? this.chosenType.has_issue : false\n    },\n\n    typeRequiresIssue() {\n      return this.chosenType ? this.chosenType.requires_issue : false\n    },\n\n    typeHasPlace() {\n      return this.chosenType ? this.chosenType.has_place : false\n    },\n\n    typeRequiresPlace() {\n      return this.chosenType ? this.chosenType.requires_place : false\n    },\n\n    typeHasPageRange() {\n      return this.chosenType ? this.chosenType.has_page_range : false\n    },\n\n    nameLabel() {\n      const type = this.form.type\n\n      return this.trans(`labels.publications.${type}_name`, {}, this.trans('labels.publications.name'))\n    },\n\n    titleLabel() {\n      const type = this.form.type\n\n      return this.trans(`labels.publications.${type}_title`, {}, this.trans('labels.publications.title'))\n    }\n  },\n\n  methods: {\n    addAuthor() {\n      this.form.authors.push({ first_name: '', last_name: '' })\n    },\n\n    addEditor() {\n      this.form.editors.push({ first_name: '', last_name: '' })\n    },\n\n    removeAuthor(index) {\n      this.removeItemFromField('authors', index)\n    },\n\n    removeEditor(index) {\n      this.removeItemFromField('editors', index)\n    },\n\n    removeItemFromField(field, index) {\n      this.form[field] = [\n        ...this.form[field].slice(0, index),\n        ...this.form[field].slice(index + 1)\n      ]\n\n      // We don't want to show that error after removing the erroneous field.\n      this.removeErrorForItem(field, index)\n    },\n\n    removeErrorForItem(field, index) {\n      // One problem may occur if we delete the previous field and are left\n      // with error showing for noncorresponding field. We need to shift\n      // the key of all later errors so they match the correct field.\n      const errors = this.form.errors.all()\n      const newErrors = {}\n\n      Object.keys(errors).forEach(errorField => {\n        const match = errorField.match(new RegExp(`^${field}.\\(\\\\d+\\)$`))\n\n        if (match && match[1] > index) {\n          newErrors[`${field}.${match[1] - 1}`] = errors[errorField]\n        } else if (!match) {\n          newErrors[errorField] = errors[errorField]\n        }\n      })\n\n      this.form.errors.record(newErrors)\n    },\n\n    handleAttachmentUploaded(attachment) {\n      this.form.attachment = attachment\n      this.form.attachment_id = attachment.id\n    },\n\n    handleRemovedAttachment() {\n      this.form.attachment = null\n      this.form.attachment_id = null\n    },\n\n    authorHasError(index) {\n      return this.form.errors.has(`authors.${index}`) ||\n        this.form.errors.has(`authors.${index}.first_name`) ||\n        this.form.errors.has(`authors.${index}.last_name`)\n    },\n\n    getAuthorError(index) {\n      return this.form.errors.first(`authors.${index}`) ||\n        this.form.errors.first(`authors.${index}.first_name`) ||\n        this.form.errors.first(`authors.${index}.last_name`)\n    },\n\n    editorHasError(index) {\n      return this.form.errors.has(`editors.${index}`) ||\n        this.form.errors.has(`editors.${index}.first_name`) ||\n        this.form.errors.has(`editors.${index}.last_name`)\n    },\n\n    getEditorError(index) {\n      return this.form.errors.first(`editors.${index}`) ||\n        this.form.errors.first(`editors.${index}.first_name`) ||\n        this.form.errors.first(`editors.${index}.last_name`)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PublicationForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationForm.vue?vue&type=template&id=88d8b0ca&\"\nimport script from \"./PublicationForm.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import Form from 'form-backend-validation'\nimport _pick from 'lodash/pick'\nimport _get from 'lodash/get'\nimport _isEqual from 'lodash/isEqual'\n\n\nexport default {\n  name: 'nzFieldObservationForm',\n\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n\n    method: {\n      type: String,\n      default: 'POST'\n    },\n\n    redirectUrl: String,\n    cancelUrl: String,\n\n    submitMore: Boolean,\n    shouldConfirmSubmit: Boolean,\n    confirmSubmitMessage: {\n      type: String,\n      default() {\n        return this.trans('You are about to submit')\n      }\n    },\n    shouldAskReason: Boolean,\n    shouldConfirmCancel: Boolean,\n    submitOnlyDirty: Boolean,\n    submitOnlyDirtyMessage: {\n      type: String,\n      default() {\n        return this.trans('There are no changes, the data will not be saved.')\n      }\n    }\n  },\n\n  data() {\n    return {\n      form: this.newForm(),\n      keepAfterSubmit: [],\n      submittingWithRedirect: false,\n      submittingWithoutRedirect: false,\n      confirmingSubmit: false,\n      confirmingCancel: false,\n      locale: window.App.locale\n    }\n  },\n\n  created() {\n    document.addEventListener('keyup', this.registerKeyListener)\n  },\n\n  beforeDestroy() {\n    document.removeEventListener('keyup', this.registerKeyListener)\n  },\n\n  methods: {\n    /**\n     * Create new form instance.\n     *\n     * @param  {Object} data default form data\n     * @return {Form}\n     */\n    newForm(data = {}) {\n      return new Form(data, {\n        resetOnSuccess: false\n      })\n    },\n\n    /**\n     * Keyboard shortcuts.\n     *\n     * @param {Event} e\n     */\n    registerKeyListener(e) {\n      const enter = 13 === (e.which || e.keyCode)\n\n      if (e.ctrlKey && e.shiftKey && enter) {\n        this.submitMore && this.submitWithoutRedirect()\n      } else if (e.ctrlKey && enter) {\n        this.submitWithRedirect()\n      }\n    },\n\n    /**\n     * Confirm submit.\n     *\n     * @param {Function} onConfirm\n     */\n    confirmSubmit(onConfirm) {\n      if (this.confirmingSubmit) return\n\n      this.confirmingSubmit = true\n\n      const options = {\n        message: this.confirmSubmitMessage,\n        confirmText: this.trans('buttons.save'),\n        cancelText: this.trans('buttons.cancel'),\n        onConfirm,\n        onCancel: () => { this.confirmingSubmit = false }\n      }\n\n      if (!this.shouldAskReason) {\n        return this.$buefy.dialog.confirm(options)\n      }\n\n      return this.promptForReason(options)\n    },\n\n    /**\n     * Prompt the user for reason of change.\n     *\n     * @param  {Object} options\n     * @return {Vue}\n     */\n    promptForReason(options) {\n      const dialog = this.$buefy.dialog.prompt({\n        ...options,\n        inputAttrs: {\n            placeholder: this.trans('Reason'),\n            required: true,\n            maxlength: 255\n        }\n      })\n\n      // Custom localized validation for the prompt input.\n      dialog.$nextTick(() => {\n        dialog.$refs.input.addEventListener('invalid', (e) => {\n          e.target.setCustomValidity('')\n\n          if (!e.target.validity.valid) {\n            e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\n          }\n        })\n\n        dialog.$refs.input.addEventListener('input', (e) => {\n          dialog.validationMessage = null\n        })\n      })\n\n      return dialog\n    },\n\n    /**\n     * Notify the user there are no changes.\n     */\n    notifyNoChanges() {\n      this.$buefy.toast.open({\n        message: this.submitOnlyDirtyMessage,\n        type: 'is-info'\n      })\n    },\n\n    /**\n     * Notify the user there are no changes and redirect.\n     */\n    notifyNoChangesAndRedirect() {\n      this.notifyNoChanges()\n\n      setTimeout(() => {\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    submitWithRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty && !this.isDirty()) return this.notifyNoChangesAndRedirect()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithRedirect)\n\n      this.performSubmitWithRedirect()\n    },\n\n    /**\n     * Submit the form with redirect.\n     */\n    performSubmitWithRedirect(reason = null) {\n      this.submittingWithRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with redirect.\n     */\n    onSuccessfulSubmitWithRedirect() {\n      this.form.processing = true\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // We want to wait a bit before we send the user to redirect route\n      // so we can show the message that the action was successful.\n      setTimeout(() => {\n        this.form.processing = false\n        this.submittingWithRedirect = false\n\n        this.hookAfterSubmitWithRedirect()\n\n        if (this.redirectUrl) {\n          window.location.href = this.redirectUrl\n        }\n      }, 500)\n    },\n\n    /**\n     * Perform after submit with redirect is successful.\n     */\n    hookAfterSubmitWithRedirect() {},\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    submitWithoutRedirect() {\n      if (this.form.processing) return\n\n      if (this.submitOnlyDirty  && !this.isDirty()) return this.notifyNoChanges()\n\n      if (this.shouldConfirmSubmit) return this.confirmSubmit(this.performSubmitWithoutRedirect)\n\n      this.performSubmitWithoutRedirect()\n    },\n\n    /**\n     * Submit the form and stay to add more.\n     */\n    performSubmitWithoutRedirect(reason = null) {\n      this.submittingWithoutRedirect = true\n      this.confirmingSubmit = false\n\n      if (this.shouldAskReason) {\n        this.form.reason = reason\n      }\n\n      this.form[this.method.toLowerCase()](this.action)\n          .then(this.onSuccessfulSubmitWithoutRedirect)\n          .catch(this.onFailedSubmit)\n    },\n\n    /**\n     * Handle successful form submit with no redirect.\n     */\n    onSuccessfulSubmitWithoutRedirect() {\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        message: this.trans('Saved successfully'),\n        type: 'is-success'\n      })\n\n      // Reset the form but remember some data.\n      const keep = _pick(this.form.data(), this.keepAfterSubmit)\n      this.form.reset()\n      this.form.populate(keep)\n\n      this.hookAfterSubmitWithoutRedirect()\n    },\n\n    /**\n     * Perform after submit without redirect is successful.\n     */\n    hookAfterSubmitWithoutRedirect() {},\n\n    /**\n     * Handle failed form submit.\n     *\n     * @param {Error} error\n     */\n    onFailedSubmit(error) {\n      this.submittingWithRedirect = false\n      this.submittingWithoutRedirect = false\n\n      this.$buefy.toast.open({\n        duration: 2500,\n        message: _get(error, 'response.data.message', error.message),\n        type: 'is-danger'\n      })\n    },\n\n    /**\n     * Check if form is changed.\n     *\n     * @return {Boolean}\n     */\n    isDirty() {\n      return ! _isEqual(this.form.data(), this.form.initial)\n    },\n\n    /**\n     * Confirmation dialog for canceling.\n     */\n    confirmCancel() {\n      if (this.confirmingCancel) return\n\n      this.confirmingCancel = true\n\n      this.$buefy.dialog.confirm({\n        message: this.trans('If you leave this page changes will not be saved.'),\n        onConfirm: () => {\n          this.confirmingCancel = false\n          window.location.href = this.cancelUrl\n        },\n        onCancel: () => { this.confirmingCancel = false },\n        cancelText: this.trans('buttons.stay_on_page'),\n        confirmText: this.trans('buttons.leave_page'),\n      })\n    },\n\n    /**\n     * Handle cancel button/link.\n     *\n     * @param {Event} event\n     */\n    onCancel(event) {\n      if (this.shouldConfirmCancel && this.isDirty()) {\n        event.preventDefault()\n\n        this.confirmCancel()\n      }\n    }\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n"],"sourceRoot":""}