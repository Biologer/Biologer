(self.webpackChunk=self.webpackChunk||[]).push([[196],{4741:(t,e,n)=>{"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,{Z:()=>o});const o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"get",value:function(t){var e=JSON.parse(localStorage.getItem(t));return e?new Date(e.expires)<new Date?(localStorage.removeItem(t),null):e.value:null}},{key:"has",value:function(t){return null!==this.get(t)}},{key:"set",value:function(t,e,n){var i=(new Date).getTime(),o=new Date(i+6e4*n);localStorage.setItem(t,JSON.stringify({value:e,expires:o}))}},{key:"delete",value:function(t){this.get(t)&&localStorage.removeItem(t)}}])&&i(e.prototype,n),o&&i(e,o),t}())},2791:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var i=n(8062),o=n(8718),r=n.n(o),a=n(7361),s=n.n(a),l=n(8446),c=n.n(l);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const f={name:"nzFieldObservationForm",props:{action:{type:String,required:!0},method:{type:String,default:"POST"},redirectUrl:String,cancelUrl:String,submitMore:Boolean,shouldConfirmSubmit:Boolean,confirmSubmitMessage:{type:String,default:function(){return this.trans("You are about to submit")}},shouldAskReason:Boolean,shouldConfirmCancel:Boolean,submitOnlyDirty:Boolean,submitOnlyDirtyMessage:{type:String,default:function(){return this.trans("There are no changes, the data will not be saved.")}}},data:function(){return{form:this.newForm(),keepAfterSubmit:[],submittingWithRedirect:!1,submittingWithoutRedirect:!1,confirmingSubmit:!1,confirmingCancel:!1,locale:window.App.locale}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{newForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.ZP(t,{resetOnSuccess:!1})},registerKeyListener:function(t){var e=13===(t.which||t.keyCode);t.ctrlKey&&t.shiftKey&&e?this.submitMore&&this.submitWithoutRedirect():t.ctrlKey&&e&&this.submitWithRedirect()},confirmSubmit:function(t){var e=this;if(!this.confirmingSubmit){this.confirmingSubmit=!0;var n={message:this.confirmSubmitMessage,confirmText:this.trans("buttons.save"),cancelText:this.trans("buttons.cancel"),onConfirm:t,onCancel:function(){e.confirmingSubmit=!1}};return this.shouldAskReason?this.promptForReason(n):this.$buefy.dialog.confirm(n)}},promptForReason:function(t){var e=this,n=this.$buefy.dialog.prompt(h(h({},t),{},{inputAttrs:{placeholder:this.trans("Reason"),required:!0,maxlength:255}}));return n.$nextTick((function(){n.$refs.input.addEventListener("invalid",(function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity(e.trans("This field is required and can contain max 255 chars."))})),n.$refs.input.addEventListener("input",(function(t){n.validationMessage=null}))})),n},notifyNoChanges:function(){this.$buefy.toast.open({message:this.submitOnlyDirtyMessage,type:"is-info"})},notifyNoChangesAndRedirect:function(){var t=this;this.notifyNoChanges(),setTimeout((function(){t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},submitWithRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChangesAndRedirect():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithRedirect):void this.performSubmitWithRedirect()},performSubmitWithRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithRedirect:function(){var t=this;this.form.processing=!0,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"}),setTimeout((function(){t.form.processing=!1,t.submittingWithRedirect=!1,t.hookAfterSubmitWithRedirect(),t.redirectUrl&&(window.location.href=t.redirectUrl)}),500)},hookAfterSubmitWithRedirect:function(){},submitWithoutRedirect:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChanges():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithoutRedirect):void this.performSubmitWithoutRedirect()},performSubmitWithoutRedirect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithoutRedirect=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=t),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithoutRedirect).catch(this.onFailedSubmit)},onSuccessfulSubmitWithoutRedirect:function(){this.submittingWithoutRedirect=!1,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"});var t=r()(this.form.data(),this.keepAfterSubmit);this.form.reset(),this.form.populate(t),this.hookAfterSubmitWithoutRedirect()},hookAfterSubmitWithoutRedirect:function(){},onFailedSubmit:function(t){this.submittingWithRedirect=!1,this.submittingWithoutRedirect=!1,this.$buefy.toast.open({duration:2500,message:s()(t,"response.data.message",t.message),type:"is-danger"})},isDirty:function(){return!c()(this.form.data(),this.form.initial)},confirmCancel:function(){var t=this;this.confirmingCancel||(this.confirmingCancel=!0,this.$buefy.dialog.confirm({message:this.trans("If you leave this page changes will not be saved."),onConfirm:function(){t.confirmingCancel=!1,window.location.href=t.cancelUrl},onCancel:function(){t.confirmingCancel=!1},cancelText:this.trans("buttons.stay_on_page"),confirmText:this.trans("buttons.leave_page")}))},onCancel:function(t){this.shouldConfirmCancel&&this.isDirty()&&(t.preventDefault(),this.confirmCancel())}}}},505:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(8718),o=n.n(i),r=n(4741);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c={props:{cacheKey:{default:null},cacheLifetime:{default:1440}},computed:{storageKey:function(){return this.cacheKey?"nz-form.".concat(this.cacheKey):"nz-form.".concat(window.location.host).concat(window.location.pathname)}},methods:{getFormKey:function(){return"form"},otherPersistentKeys:function(){return[]},saveState:function(){var t=s(s({},o()(this.$data,this.otherPersistentKeys())),{},{form:this[this.getFormKey()].data()});r.Z.set(this.storageKey,t,this.cacheLifetime)},restoreState:function(){var t=this,e=r.Z.get(this.storageKey);null!==e&&(this[this.getFormKey()].populate(e.form),this.otherPersistentKeys().forEach((function(n){void 0!==e[n]&&t.$set(t,n,e[n])})),this.clearPersistedState())},clearPersistedState:function(){r.Z.delete(this.storageKey)}}}},9303:(t,e,n)=>{t.exports=n(5302),n(1200),n(5630),n(2016),n(2677),n(9635),n(5166),n(7140),n(8922)},9635:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302),n(2677)],void 0===(r="function"==typeof(i=function(t){var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.tags.ifd1=e.tags,e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,n,i={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&((e=this[t])&&e.getAll?i[this.ifds[t].name]=e.getAll():(n=this.tags[t])&&(i[n]=this.getText(n)));return i},e.getName=function(t){var e=this.tags[t];return"object"==typeof e?this.ifds[t].name:e},function(){var t,n,i,o=e.tags;for(t in o)if(Object.prototype.hasOwnProperty.call(o,t))if(n=e.ifds[t])for(t in i=o[t])Object.prototype.hasOwnProperty.call(i,t)&&(n.map[i[t]]=Number(t));else e.map[o[t]]=Number(t)}()})?i.apply(e,o):i)||(t.exports=r)}()},2677:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302),n(5630)],void 0===(r="function"==typeof(i=function(t){function e(t){t&&(Object.defineProperty(this,"map",{value:this.ifds[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}function n(e,n,i){if(i){if(!(n+i>e.byteLength))return new Blob([t.bufferSlice.call(e.buffer,n,n+i)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}e.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.ifds={ifd1:{name:"Thumbnail",map:e.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var i={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}};function o(t,e,n,o,r,a){var s,l,c,u,h,d,f=i[o];if(f){if(!((l=(s=f.size*r)>4?e+t.getUint32(n+8,a):n+8)+s>t.byteLength)){if(1===r)return f.getValue(t,l,a);for(c=[],u=0;u<r;u+=1)c[u]=f.getValue(t,l+u*f.size,a);if(f.ascii){for(h="",u=0;u<c.length&&"\0"!==(d=c[u]);u+=1)h+=d;return h}return c}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function r(t,e,n){return(!t||t[n])&&(!e||!0!==e[n])}function a(t,e,n,i,a,s,l,c){var u,h,d,f,p,m;if(n+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((h=n+2+12*(u=t.getUint16(n,i)))+4>t.byteLength)){for(d=0;d<u;d+=1)f=n+2+12*d,r(l,c,p=t.getUint16(f,i))&&(m=o(t,e,f,t.getUint16(f+2,i),t.getUint32(f+4,i),i),a[p]=m,s&&(s[p]=f));return t.getUint32(h,i)}console.log("Invalid Exif data: Invalid directory size.")}}function s(t,n,i,o,r,s,l){var c=t.exif[n];c&&(t.exif[n]=new e(n),t.exifOffsets&&(t.exifOffsets[n]=new e(n)),a(i,o,o+c,r,t.exif[n],t.exifOffsets&&t.exifOffsets[n],s&&s[n],l&&l[n]))}i[7]=i[1],t.parseExifData=function(t,i,o,l,c){if(!c.disableExif){var u,h,d,f=c.includeExifTags,p=c.excludeExifTags||{34665:{37500:!0}},m=i+10;if(1165519206===t.getUint32(i+4))if(m+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(i+8)){switch(t.getUint16(m)){case 18761:u=!0;break;case 19789:u=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(m+2,u)?(h=t.getUint32(m+4,u),l.exif=new e,c.disableExifOffsets||(l.exifOffsets=new e,l.exifTiffOffset=m,l.exifLittleEndian=u),(h=a(t,m,m+h,u,l.exif,l.exifOffsets,f,p))&&r(f,p,"ifd1")&&(l.exif.ifd1=h,l.exifOffsets&&(l.exifOffsets.ifd1=m+h)),Object.keys(l.exif.ifds).forEach((function(e){s(l,e,t,m,u,f,p)})),(d=l.exif.ifd1)&&d[513]&&(d[513]=n(t,m+d[513],d[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,n){var i=e.exifOffsets[274];return i?(new DataView(t,i+8,2).setUint16(0,n,e.exifLittleEndian),t):t}},t.writeExifData=function(e,n,i,o){return t.exifWriters[n.exif.map[i]](e,n,o)},t.ExifMap=e})?i.apply(e,o):i)||(t.exports=r)}()},2016:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302)],void 0===(r="function"==typeof(i=function(t){var e=t.global;e.fetch&&e.Request&&e.Response&&e.Response.prototype.blob?t.fetchBlob=function(t,n,i){function o(t){return t.blob()}if(e.Promise&&"function"!=typeof n)return fetch(new Request(t,n)).then(o);fetch(new Request(t,i)).then(o).then(n).catch((function(t){n(null,t)}))}:e.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(t.fetchBlob=function(t,n,i){function o(e,n){i=i||{};var o=new XMLHttpRequest;o.open(i.method||"GET",t),i.headers&&Object.keys(i.headers).forEach((function(t){o.setRequestHeader(t,i.headers[t])})),o.withCredentials="include"===i.credentials,o.responseType="blob",o.onload=function(){e(o.response)},o.onerror=o.onabort=o.ontimeout=function(t){e===n?n(null,t):n(t)},o.send(i.body)}return e.Promise&&"function"!=typeof n?(i=n,new Promise(o)):o(n,n)})})?i.apply(e,o):i)||(t.exports=r)}()},7140:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302),n(5166)],void 0===(r="function"==typeof(i=function(t){var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),n=this.map[t],i=this.stringValues[n];return i?i[e]:String(e)},e.getAll=function(){var t,e,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(n[e]=this.getText(e));return n},e.getName=function(t){return this.tags[t]},function(){var t,n=e.tags,i=e.map||{};for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(i[n[t]]=Number(t))}()})?i.apply(e,o):i)||(t.exports=r)}()},5166:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302),n(5630)],void 0===(r="function"==typeof(i=function(t){function e(){}function n(t,e,n){for(var i="",o=e+n,r=e;r<o;r+=1)i+=String.fromCharCode(t.getUint8(r));return i}function i(t,e,i,o,r){return"binary"===e.types[t]?new Blob([i.buffer.slice(o,o+r)]):"Uint16"===e.types[t]?i.getUint16(o):n(i,o,r)}function o(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function r(t,e,n,r,a,s){for(var l,c,u,h=e+n,d=e;d<h;)28===t.getUint8(d)&&2===t.getUint8(d+1)&&(u=t.getUint8(d+2),a&&!a[u]||s&&s[u]||(c=t.getInt16(d+3),l=i(u,r.iptc,t,d+5,c),r.iptc[u]=o(r.iptc[u],l),r.iptcOffsets&&(r.iptcOffsets[u]=d))),d+=1}function a(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function s(t,e){var n=t.getUint8(e+7);return n%2!=0&&(n+=1),0===n&&(n=4),n}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,n,i,o,l){if(!l.disableIptc)for(var c=n+i;n+8<c;){if(a(t,n)){var u=s(t,n),h=n+8+u;if(h>c){console.log("Invalid IPTC data: Invalid segment offset.");break}var d=t.getUint16(n+6+u);if(n+d>c){console.log("Invalid IPTC data: Invalid segment size.");break}return o.iptc=new e,l.disableIptcOffsets||(o.iptcOffsets=new e),void r(t,h,d,o,l.includeIptcTags,l.excludeIptcTags||{202:!0})}n+=1}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e})?i.apply(e,o):i)||(t.exports=r)}()},5630:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302)],void 0===(r="function"==typeof(i=function(t){var e=t.global,n=t.transform,i=e.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),o=e.ArrayBuffer&&ArrayBuffer.prototype.slice||function(t,e){e=e||this.byteLength-t;var n=new Uint8Array(this,t,e),i=new Uint8Array(e);return i.set(n),i.buffer},r={jpeg:{65505:[],65517:[]}};function a(n,a,s,l){var c=this;function u(a,u){if(!(e.DataView&&i&&n&&n.size>=12&&"image/jpeg"===n.type))return a(l);var h=s.maxMetaDataSize||262144;t.readFile(i.call(n,0,h),(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return u(new Error("Invalid JPEG file: Missing JPEG marker."));for(var n,i,h,d,f=2,p=e.byteLength-4,m=f;f<p&&((n=e.getUint16(f))>=65504&&n<=65519||65534===n);){if(f+(i=e.getUint16(f+2)+2)>e.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((h=r.jpeg[n])&&!s.disableMetaDataParsers)for(d=0;d<h.length;d+=1)h[d].call(c,e,f,i,l,s);m=f+=i}!s.disableImageHead&&m>6&&(l.imageHead=o.call(t,0,m)),a(l)}),u,"readAsArrayBuffer")||a(l)}return s=s||{},e.Promise&&"function"!=typeof a?(l=s=a||{},new Promise(u)):(l=l||{},u(a,a))}function s(t,e,n){return t&&e&&n?new Blob([n,i.call(t,e.byteLength)],{type:"image/jpeg"}):null}function l(t,n,i){var o={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!i&&e.Promise)return a(t,o).then((function(e){return s(t,e.imageHead,n)}));a(t,(function(e){i(s(t,e.imageHead,n))}),o)}t.transform=function(i,o,r,s,l){t.requiresMetaData(o)?a(s,(function(a){a!==l&&(e.console&&console.log(a),a=l),n.call(t,i,o,r,s,a)}),o,l=l||{}):n.apply(t,arguments)},t.blobSlice=i,t.bufferSlice=o,t.replaceHead=l,t.parseMetaData=a,t.metaDataParsers=r})?i.apply(e,o):i)||(t.exports=r)}()},8922:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302),n(1200),n(5630)],void 0===(r="function"==typeof(i=function(t){var e=t.transform,n=t.requiresCanvas,i=t.requiresMetaData,o=t.transformCoordinates,r=t.getTransformedOptions;function a(e,n){var i=e&&e.orientation;return!0===i&&!t.orientation||1===i&&t.orientation||(!n||t.orientation)&&i>1&&i<9}function s(t,e){return t!==e&&(1===t&&e>1&&e<9||t>1&&t<9)}function l(t,e){if(e>1&&e<9)switch(t){case 2:case 4:return e>4;case 5:case 7:return e%2==0;case 6:case 8:return 2===e||4===e||5===e||7===e}return!1}(function(t){if(t.global.document){var e="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",n=document.createElement("img");n.onload=function(){if(t.orientation=2===n.width&&3===n.height,t.orientation){var e=t.createCanvas(1,1,!0).getContext("2d");e.drawImage(n,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==e.getImageData(0,0,1,1).data.toString()}},n.src=e}})(t),t.requiresCanvas=function(e){return a(e)||n.call(t,e)},t.requiresMetaData=function(e){return a(e,!0)||i.call(t,e)},t.transform=function(n,i,o,r,a){e.call(t,n,i,(function(e,n){if(n){var i=t.orientation&&n.exif&&n.exif.get("Orientation");if(i>4&&i<9){var r=n.originalWidth,a=n.originalHeight;n.originalWidth=a,n.originalHeight=r}}o(e,n)}),r,a)},t.getTransformedOptions=function(e,n,i){var o=r.call(t,e,n),a=i.exif&&i.exif.get("Orientation"),c=o.orientation,u=t.orientation&&a;if(!0===c&&(c=a),!s(c,u))return o;var h=o.top,d=o.right,f=o.bottom,p=o.left,m={};for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&(m[v]=o[v]);if(m.orientation=c,(c>4&&!(u>4)||c<5&&u>4)&&(m.maxWidth=o.maxHeight,m.maxHeight=o.maxWidth,m.minWidth=o.minHeight,m.minHeight=o.minWidth,m.sourceWidth=o.sourceHeight,m.sourceHeight=o.sourceWidth),u>1){switch(u){case 2:d=o.left,p=o.right;break;case 3:h=o.bottom,d=o.left,f=o.top,p=o.right;break;case 4:h=o.bottom,f=o.top;break;case 5:h=o.left,d=o.bottom,f=o.right,p=o.top;break;case 6:h=o.left,d=o.top,f=o.right,p=o.bottom;break;case 7:h=o.right,d=o.top,f=o.left,p=o.bottom;break;case 8:h=o.right,d=o.bottom,f=o.left,p=o.top}if(l(c,u)){var g=h,b=d;h=f,d=p,f=g,p=b}}switch(m.top=h,m.right=d,m.bottom=f,m.left=p,c){case 2:m.right=p,m.left=d;break;case 3:m.top=f,m.right=p,m.bottom=h,m.left=d;break;case 4:m.top=f,m.bottom=h;break;case 5:m.top=p,m.right=f,m.bottom=d,m.left=h;break;case 6:m.top=d,m.right=f,m.bottom=p,m.left=h;break;case 7:m.top=d,m.right=h,m.bottom=p,m.left=f;break;case 8:m.top=p,m.right=h,m.bottom=d,m.left=f}return m},t.transformCoordinates=function(e,n,i){o.call(t,e,n,i);var r=n.orientation,a=t.orientation&&i.exif&&i.exif.get("Orientation");if(s(r,a)){var c=e.getContext("2d"),u=e.width,h=e.height,d=u,f=h;switch((r>4&&!(a>4)||r<5&&a>4)&&(e.width=h,e.height=u),r>4&&(d=h,f=u),a){case 2:c.translate(d,0),c.scale(-1,1);break;case 3:c.translate(d,f),c.rotate(Math.PI);break;case 4:c.translate(0,f),c.scale(1,-1);break;case 5:c.rotate(-.5*Math.PI),c.scale(-1,1);break;case 6:c.rotate(-.5*Math.PI),c.translate(-d,0);break;case 7:c.rotate(-.5*Math.PI),c.translate(-d,f),c.scale(1,-1);break;case 8:c.rotate(.5*Math.PI),c.translate(0,-f)}switch(l(r,a)&&(c.translate(d,f),c.rotate(Math.PI)),r){case 2:c.translate(u,0),c.scale(-1,1);break;case 3:c.translate(u,h),c.rotate(Math.PI);break;case 4:c.translate(0,h),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-h);break;case 7:c.rotate(.5*Math.PI),c.translate(u,-h),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-u,0)}}}})?i.apply(e,o):i)||(t.exports=r)}()},1200:(t,e,n)=>{var i,o,r;!function(a){"use strict";o=[n(5302)],void 0===(r="function"==typeof(i=function(t){var e=t.transform;t.createCanvas=function(e,n,i){if(i&&t.global.OffscreenCanvas)return new OffscreenCanvas(e,n);var o=document.createElement("canvas");return o.width=e,o.height=n,o},t.transform=function(n,i,o,r,a){e.call(t,t.scale(n,i,a),i,o,r,a)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var n,i,o,r,a=e.aspectRatio;if(!a)return e;for(i in n={},e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.crop=!0,(o=t.naturalWidth||t.width)/(r=t.naturalHeight||t.height)>a?(n.maxWidth=r*a,n.maxHeight=r):(n.maxWidth=o,n.maxHeight=o/a),n},t.drawImage=function(t,e,n,i,o,r,a,s,l){var c=e.getContext("2d");return!1===l.imageSmoothingEnabled?(c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1):l.imageSmoothingQuality&&(c.imageSmoothingQuality=l.imageSmoothingQuality),c.drawImage(t,n,i,o,r,0,0,a,s),c},t.requiresCanvas=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,n,i){n=n||{},i=i||{};var o,r,a,s,l,c,u,h,d,f,p,m,v=e.getContext||t.requiresCanvas(n)&&!!t.global.HTMLCanvasElement,g=e.naturalWidth||e.width,b=e.naturalHeight||e.height,y=g,_=b;function x(){var t=Math.max((a||y)/y,(s||_)/_);t>1&&(y*=t,_*=t)}function w(){var t=Math.min((o||y)/y,(r||_)/_);t<1&&(y*=t,_*=t)}if(v&&(u=(n=t.getTransformedOptions(e,n,i)).left||0,h=n.top||0,n.sourceWidth?(l=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(u=g-l-n.right)):l=g-u-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(h=b-c-n.bottom)):c=b-h-(n.bottom||0),y=l,_=c),o=n.maxWidth,r=n.maxHeight,a=n.minWidth,s=n.minHeight,v&&o&&r&&n.crop?(y=o,_=r,(p=l/c-o/r)<0?(c=r*l/o,void 0===n.top&&void 0===n.bottom&&(h=(b-c)/2)):p>0&&(l=o*c/r,void 0===n.left&&void 0===n.right&&(u=(g-l)/2))):((n.contain||n.cover)&&(a=o=o||a,s=r=r||s),n.cover?(w(),x()):(x(),w())),v){if((d=n.pixelRatio)>1&&(!e.style.width||Math.floor(parseFloat(e.style.width,10))!==Math.floor(g/d))&&(y*=d,_*=d),t.orientationCropBug&&!e.getContext&&(u||h||l!==g||c!==b)&&(p=e,e=t.createCanvas(g,b,!0),t.drawImage(p,e,0,0,g,b,g,b,n)),(f=n.downsamplingRatio)>0&&f<1&&y<l&&_<c)for(;l*f>y;)m=t.createCanvas(l*f,c*f,!0),t.drawImage(e,m,u,h,l,c,m.width,m.height,n),u=0,h=0,l=m.width,c=m.height,e=m;return m=t.createCanvas(y,_),t.transformCoordinates(m,n,i),d>1&&(m.style.width=m.width/d+"px"),t.drawImage(e,m,u,h,l,c,y,_,n).setTransform(1,0,0,1,0,0),m}return e.width=y,e.height=_,e}})?i.apply(e,o):i)||(t.exports=r)}()},5302:function(t,e,n){var i;!function(o){"use strict";var r=o.URL||o.webkitURL;function a(t){return!!r&&r.createObjectURL(t)}function s(t){return!!r&&r.revokeObjectURL(t)}function l(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||s(t)}function c(t,e,n,i){if(!o.FileReader)return!1;var r=new FileReader;r.onload=function(){e.call(r,this.result)},n&&(r.onabort=r.onerror=function(){n.call(r,this.error)});var a=r[i||"readAsDataURL"];return a?(a.call(r,t),r):void 0}function u(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}function h(t,e,n){function i(e,i){var r,s=document.createElement("img");function d(t,n){e!==i?t instanceof Error?i(t):((n=n||{}).image=t,e(n)):e&&e(t,n)}function f(e,i){i&&o.console&&console.log(i),e&&u("Blob",e)?r=a(t=e):(r=t,n&&n.crossOrigin&&(s.crossOrigin=n.crossOrigin)),s.src=r}return s.onerror=function(t){l(r,n),i&&i.call(s,t)},s.onload=function(){l(r,n);var e={originalWidth:s.naturalWidth||s.width,originalHeight:s.naturalHeight||s.height};try{h.transform(s,n,d,t,e)}catch(t){i&&i(t)}},"string"==typeof t?(h.requiresMetaData(n)?h.fetchBlob(t,f,n):f(),s):u("Blob",t)||u("File",t)?(r=a(t))?(s.src=r,s):c(t,(function(t){s.src=t}),i):void 0}return o.Promise&&"function"!=typeof e?(n=e,new Promise(i)):i(e,e)}h.requiresMetaData=function(t){return t&&t.meta},h.fetchBlob=function(t,e){e()},h.transform=function(t,e,n,i,o){n(t,o)},h.global=o,h.readFile=c,h.isInstanceOf=u,h.createObjectURL=a,h.revokeObjectURL=s,void 0===(i=function(){return h}.call(e,n,e,t))||(t.exports=i)}("undefined"!=typeof window&&window||this)},5299:function(t){t.exports=function(){"use strict";(function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),r=window.setTimeout((function(){e(i+o)}),o);return t=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})(),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(t){try{return new CustomEvent("test"),!1}catch(t){}function e(e,n){n=n||{bubbles:!1,cancelable:!1};var i=document.createEvent("MouseEvent");return i.initMouseEvent(e,n.bubbles,n.cancelable,t,0,0,0,0,0,!1,!1,!1,!1,0,null),i}e.prototype=Event.prototype,t.MouseEvent=e}(window);var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},r=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function e(n,i,o,r){t(this,e);var a=this;function s(t){t.stopPropagation(),document.addEventListener("mouseup",l),document.addEventListener("mousemove",c),a.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:a}}))}function l(t){t.stopPropagation(),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",c),a.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:a}}))}function c(t){t.stopPropagation(),a.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}this.position=n,this.constraints=i,this.cursor=o,this.eventBus=r,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=o,this.el.addEventListener("mousedown",s)},s=function(){function n(e,i,o,r){t(this,n),this.x1=e,this.y1=i,this.x2=o,this.y2=r}return e(n,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.x1=null==t?this.x1:t,this.y1=null==e?this.y1:e,this.x2=null==n?this.x2:n,this.y2=null==i?this.y2:i,this}},{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.x1+this.width()*n[0],o=this.y1+this.height()*n[1];return this.x1=i-t*n[0],this.y1=o-e*n[1],this.x2=this.x1+t,this.y2=this.y1+e,this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=this.width()*t,i=this.height()*t;return this.resize(n,i,e),this}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.width(),i=this.height();return t=null===t?this.x1:t,e=null===e?this.y1:e,this.x1=t,this.y1=e,this.x2=t+n,this.y2=e+i,this}},{key:"getRelativePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return[this.width()*t[0],this.height()*t[1]]}},{key:"getAbsolutePoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return[this.x1+this.width()*t[0],this.y1+this.height()*t[1]]}},{key:"constrainToRatio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==t){switch(this.width(),this.height(),n){case"height":this.resize(this.width(),this.width()*t,e);break;case"width":this.resize(1*this.height()/t,this.height(),e);break;default:this.resize(this.width(),this.width()*t,e)}return this}}},{key:"constrainToBoundary",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.getAbsolutePoint(n),o=r(i,2),a=o[0],s=o[1],l=a,c=s,u=t-a,h=e-s,d=-2*n[0]+1,f=-2*n[1]+1,p=null,m=null;switch(d){case-1:p=l;break;case 0:p=2*Math.min(l,u);break;case 1:p=u}switch(f){case-1:m=c;break;case 0:m=2*Math.min(c,h);break;case 1:m=h}if(this.width()>p){var v=p/this.width();this.scale(v,n)}if(this.height()>m){var g=m/this.height();this.scale(g,n)}return this}},{key:"constrainToSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(r&&(r>1?(t=1*e/r,i*=r):r<1&&(e=t*r,n=1*i/r)),t&&this.width()>t){var a=t,s=null===r?this.height():e;this.resize(a,s,o)}if(e&&this.height()>e){var l=null===r?this.width():t,c=e;this.resize(l,c,o)}if(n&&this.width()<n){var u=n,h=null===r?this.height():i;this.resize(u,h,o)}if(i&&this.height()<i){var d=null===r?this.width():n,f=i;this.resize(d,f,o)}return this}}]),n}();function l(t){t.addEventListener("touchstart",c),t.addEventListener("touchend",c),t.addEventListener("touchmove",c)}function c(t){t.preventDefault();var e=t.changedTouches[0],n={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};e.target.dispatchEvent(new MouseEvent(n[t.type],{bubbles:!0,cancelable:!0,view:window,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY}))}var u=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}];function h(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}return function(r){function a(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t(this,a),o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,n,i))}return i(a,r),e(a,[{key:"getValue",value:function(t){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getValue",this).call(this,t)}},{key:"setImage",value:function(t){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setImage",this).call(this,t)}},{key:"destroy",value:function(){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(t,e){return this.box.move(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(t,e,n),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(t,e),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}]),a}(function(){function n(e,i){var o=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t(this,n),this.options=n.parseOptions(i||{}),!e.nodeName&&null==(e=document.querySelector(e)))throw"Unable to find element.";if(!e.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:e.parentNode,element:e},r||(0===e.width||0===e.height?e.onload=function(){o.initialize(e)}:this.initialize(e))}return e(n,[{key:"initialize",value:function(t){this.createDOM(t),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(t){this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,l(this.containerEl),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",t.getAttribute("src")),this.imageEl.setAttribute("alt",t.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var e=document.createElement("div");e.className="croppr-handleContainer",this.handles=[];for(var n=0;n<u.length;n++){var i=new a(u[n].position,u[n].constraints,u[n].cursor,this.eventBus);this.handles.push(i),e.appendChild(i.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(e),this.containerEl.appendChild(this.cropperEl),t.parentElement.replaceChild(this.containerEl,t)}},{key:"setImage",value:function(t){var e=this;return this.imageEl.onload=function(){e.box=e.initializeBox(e.options),e.redraw()},this.imageEl.src=t,this.imageClippedEl.src=t,this}},{key:"destroy",value:function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)}},{key:"initializeBox",value:function(t){var e=t.startSize.width,n=t.startSize.height,i=new s(0,0,e,n);i.constrainToRatio(t.aspectRatio,[.5,.5]);var o=t.minSize,r=t.maxSize;i.constrainToSize(r.width,r.height,o.width,o.height,[.5,.5],t.aspectRatio);var a=this.cropperEl.offsetWidth,l=this.cropperEl.offsetHeight;i.constrainToBoundary(a,l,[.5,.5]);var c=this.cropperEl.offsetWidth/2-i.width()/2,u=this.cropperEl.offsetHeight/2-i.height()/2;return i.move(c,u),i}},{key:"redraw",value:function(){var t=this,e=Math.round(this.box.width()),n=Math.round(this.box.height()),i=Math.round(this.box.x1),o=Math.round(this.box.y1),r=Math.round(this.box.x2),a=Math.round(this.box.y2);window.requestAnimationFrame((function(){t.regionEl.style.transform="translate("+i+"px, "+o+"px)",t.regionEl.style.width=e+"px",t.regionEl.style.height=n+"px",t.imageClippedEl.style.clip="rect("+o+"px, "+r+"px, "+a+"px, "+i+"px)";for(var s=t.box.getAbsolutePoint([.5,.5]),l=s[0]-t.cropperEl.offsetWidth/2>>31,c=s[1]-t.cropperEl.offsetHeight/2>>31,u=-2*((l^c)+c+c+4)+8,h=0;h<t.handles.length;h++){var d=t.handles[h],f=d.el.offsetWidth,p=d.el.offsetHeight,m=i+e*d.position[0]-f/2,v=o+n*d.position[1]-p/2;d.el.style.transform="translate("+Math.round(m)+"px, "+Math.round(v)+"px)",d.el.style.zIndex=u==h?5:4}}))}},{key:"attachHandlerEvents",value:function(){var t=this.eventBus;t.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),t.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),t.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){var t=this.eventBus;function e(e){e.stopPropagation(),document.addEventListener("mouseup",i),document.addEventListener("mousemove",n),t.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function n(e){e.stopPropagation(),t.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function i(e){e.stopPropagation(),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",n),t.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}this.regionEl.addEventListener("mousedown",e),t.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),t.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),t.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){var t=4,e=this,n=null;function i(i){i.stopPropagation(),document.addEventListener("mouseup",r),document.addEventListener("mousemove",o);var a=e.cropperEl.getBoundingClientRect(),l=i.clientX-a.left,c=i.clientY-a.top;n=e.box,e.box=new s(l,c,l+1,c+1),e.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:e.handles[t]}}))}function o(t){t.stopPropagation(),e.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function r(t){t.stopPropagation(),document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",o),1!==e.box.width()||1!==e.box.height()?e.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:t.clientX,mouseY:t.clientY}})):e.box=n}this.overlayEl.addEventListener("mousedown",i)}},{key:"onHandleMoveStart",value:function(t){var e=t.detail.handle,n=[1-e.position[0],1-e.position[1]],i=this.box.getAbsolutePoint(n),o=r(i,2),a=o[0],s=o[1];this.activeHandle={handle:e,originPoint:n,originX:a,originY:s},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onHandleMoveMoving",value:function(t){var e=t.detail,n=e.mouseX,i=e.mouseY,o=this.cropperEl.getBoundingClientRect();n-=o.left,i-=o.top,n<0?n=0:n>o.width&&(n=o.width),i<0?i=0:i>o.height&&(i=o.height);var r=this.activeHandle.originPoint.slice(),a=this.activeHandle.originX,l=this.activeHandle.originY,c=this.activeHandle.handle,u=1===c.constraints[0],h=1===c.constraints[1],d=1===c.constraints[2],f=1===c.constraints[3],p=(f||h)&&(u||d),m=f||h?a:this.box.x1,v=f||h?a:this.box.x2,g=u||d?l:this.box.y1,b=u||d?l:this.box.y2;m=f?n:m,v=h?n:v,g=u?i:g,b=d?i:b;var y=!1,_=!1;if((f||h)&&(y=f?n>a:n<a),(u||d)&&(_=u?i>l:i<l),y){var x=m;m=v,v=x,r[0]=1-r[0]}if(_){var w=g;g=b,b=w,r[1]=1-r[1]}var C=new s(m,g,v,b);if(this.options.aspectRatio){var S=this.options.aspectRatio,E=!1;p?E=i>C.y1+S*C.width()||i<C.y2-S*C.width():(u||d)&&(E=!0);var A=E?"width":"height";C.constrainToRatio(S,r,A)}var P=this.options.minSize,O=this.options.maxSize;C.constrainToSize(O.width,O.height,P.width,P.height,r,this.options.aspectRatio);var k=this.cropperEl.offsetWidth,j=this.cropperEl.offsetHeight;C.constrainToBoundary(k,j,r),this.box=C,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onHandleMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(t){var e=t.detail,n=e.mouseX,i=e.mouseY,o=this.cropperEl.getBoundingClientRect();n-=o.left,i-=o.top,this.currentMove={offsetX:n-this.box.x1,offsetY:i-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(t){var e=t.detail,n=e.mouseX,i=e.mouseY,o=this.currentMove,r=o.offsetX,a=o.offsetY,s=this.cropperEl.getBoundingClientRect();n-=s.left,i-=s.top,this.box.move(n-r,i-a),this.box.x1<0&&this.box.move(0,null),this.box.x2>s.width&&this.box.move(s.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>s.height&&this.box.move(null,s.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(t){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.options.returnMode),"real"==t){var e=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,i=this.imageEl.getBoundingClientRect(),o=e/i.width,r=n/i.height;return{x:Math.round(this.box.x1*o),y:Math.round(this.box.y1*r),width:Math.round(this.box.width()*o),height:Math.round(this.box.height()*r)}}if("ratio"==t){var a=this.imageEl.getBoundingClientRect(),s=a.width,l=a.height;return{x:h(this.box.x1/s,3),y:h(this.box.y1/l,3),width:h(this.box.width()/s,3),height:h(this.box.height()/l,3)}}if("raw"==t)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}],[{key:"parseOptions",value:function(t){var e={aspectRatio:null,maxSize:{width:null,height:null},minSize:{width:null,height:null},startSize:{width:100,height:100,unit:"%"},returnMode:"real",onInitialize:null,onCropStart:null,onCropMove:null,onCropEnd:null},n=null;void 0!==t.aspectRatio&&("number"==typeof t.aspectRatio?n=t.aspectRatio:t.aspectRatio instanceof Array&&(n=t.aspectRatio[1]/t.aspectRatio[0]));var i=null;void 0!==t.maxSize&&null!==t.maxSize&&(i={width:t.maxSize[0]||null,height:t.maxSize[1]||null,unit:t.maxSize[2]||"px"});var o=null;void 0!==t.minSize&&null!==t.minSize&&(o={width:t.minSize[0]||null,height:t.minSize[1]||null,unit:t.minSize[2]||"px"});var r=null;void 0!==t.startSize&&null!==t.startSize&&(r={width:t.startSize[0]||null,height:t.startSize[1]||null,unit:t.startSize[2]||"%"});var a=null;"function"==typeof t.onInitialize&&(a=t.onInitialize);var s=null;"function"==typeof t.onCropStart&&(s=t.onCropStart);var l=null;"function"==typeof t.onCropEnd&&(l=t.onCropEnd);var c=null;"function"==typeof t.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),c=t.onUpdate),"function"==typeof t.onCropMove&&(c=t.onCropMove);var u=null;if(void 0!==t.returnMode){var h=t.returnMode.toLowerCase();if(-1===["real","ratio","raw"].indexOf(h))throw"Invalid return mode.";u=h}var d=function(t){for(var e=t.offsetWidth,n=t.offsetHeight,i=["maxSize","minSize","startSize"],o=0;o<i.length;o++){var r=i[o];null!==this[r]&&("%"==this[r].unit&&(null!==this[r].width&&(this[r].width=this[r].width/100*e),null!==this[r].height&&(this[r].height=this[r].height/100*n)),delete this[r].unit)}},f=function(t,e){return null!==t?t:e};return{aspectRatio:f(n,e.aspectRatio),maxSize:f(i,e.maxSize),minSize:f(o,e.minSize),startSize:f(r,e.startSize),returnMode:f(u,e.returnMode),onInitialize:f(a,e.onInitialize),onCropStart:f(s,e.onCropStart),onCropMove:f(c,e.onCropMove),onCropEnd:f(l,e.onCropEnd),convertToPixels:d}}}]),n}())}()},1528:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.record(e)}return n(t,[{key:"all",value:function(){return this.errors}},{key:"has",value:function(t){var e=this.errors.hasOwnProperty(t);e||(e=Object.keys(this.errors).filter((function(e){return e.startsWith(t+".")||e.startsWith(t+"[")})).length>0);return e}},{key:"first",value:function(t){return this.get(t)[0]}},{key:"get",value:function(t){return this.errors[t]||[]}},{key:"any",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return Object.keys(this.errors).length>0;var n={};return e.forEach((function(e){return n[e]=t.get(e)})),n}},{key:"record",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errors=t}},{key:"clear",value:function(t){if(t){var e=Object.assign({},this.errors);Object.keys(e).filter((function(e){return e===t||e.startsWith(t+".")||e.startsWith(t+"[")})).forEach((function(t){return delete e[t]})),this.errors=e}else this.errors={}}}]),t}();e.default=o},4365:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1528),s=(i=a)&&i.__esModule?i:{default:i},l=n(2110);function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),this.processing=!1,this.successful=!1,this.withData(e).withOptions(n).withErrors({})}return r(t,[{key:"withData",value:function(t){for(var e in(0,l.isArray)(t)&&(t=t.reduce((function(t,e){return t[e]="",t}),{})),this.setInitialValues(t),this.errors=new s.default,this.processing=!1,this.successful=!1,t)(0,l.guardAgainstReservedFieldName)(e),this[e]=t[e];return this}},{key:"withErrors",value:function(t){return this.errors=new s.default(t),this}},{key:"withOptions",value:function(t){this.__options={resetOnSuccess:!0},t.hasOwnProperty("resetOnSuccess")&&(this.__options.resetOnSuccess=t.resetOnSuccess),t.hasOwnProperty("onSuccess")&&(this.onSuccess=t.onSuccess),t.hasOwnProperty("onFail")&&(this.onFail=t.onFail);var e="undefined"!=typeof window&&window.axios;if(this.__http=t.http||e||n(9669),!this.__http)throw new Error("No http library provided. Either pass an http option, or install axios.");return this}},{key:"data",value:function(){var t={};for(var e in this.initial)t[e]=this[e];return t}},{key:"only",value:function(t){var e=this;return t.reduce((function(t,n){return t[n]=e[n],t}),{})}},{key:"reset",value:function(){(0,l.merge)(this,this.initial),this.errors.clear()}},{key:"setInitialValues",value:function(t){this.initial={},(0,l.merge)(this.initial,t)}},{key:"populate",value:function(t){var e=this;return Object.keys(t).forEach((function(n){(0,l.guardAgainstReservedFieldName)(n),e.hasOwnProperty(n)&&(0,l.merge)(e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,t[n]))})),this}},{key:"clear",value:function(){for(var t in this.initial)this[t]="";this.errors.clear()}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"delete",value:function(t){return this.submit("delete",t)}},{key:"submit",value:function(t,e){var n=this;return this.__validateRequestType(t),this.errors.clear(),this.processing=!0,this.successful=!1,new Promise((function(i,o){n.__http[t](e,n.hasFiles()?(0,l.objectToFormData)(n.data()):n.data()).then((function(t){n.processing=!1,n.onSuccess(t.data),i(t.data)})).catch((function(t){n.processing=!1,n.onFail(t),o(t)}))}))}},{key:"hasFiles",value:function(){for(var t in this.initial)if(this.hasFilesDeep(this[t]))return!0;return!1}},{key:"hasFilesDeep",value:function(t){if(null===t)return!1;if("object"===(void 0===t?"undefined":o(t)))for(var e in t)if(t.hasOwnProperty(e)&&this.hasFilesDeep(t[e]))return!0;if(Array.isArray(t))for(var n in t)if(t.hasOwnProperty(n))return this.hasFilesDeep(t[n]);return(0,l.isFile)(t)}},{key:"onSuccess",value:function(t){this.successful=!0,this.__options.resetOnSuccess&&this.reset()}},{key:"onFail",value:function(t){this.successful=!1,t.response&&t.response.data.errors&&this.errors.record(t.response.data.errors)}},{key:"hasError",value:function(t){return this.errors.has(t)}},{key:"getError",value:function(t){return this.errors.first(t)}},{key:"getErrors",value:function(t){return this.errors.get(t)}},{key:"__validateRequestType",value:function(t){var e=["get","delete","head","post","put","patch"];if(-1===e.indexOf(t))throw new Error("`"+t+"` is not a valid request type, must be one of: `"+e.join("`, `")+"`.")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(new t).withData(e)}}]),t}();e.default=u},8062:(t,e,n)=>{"use strict";var i=n(4365);Object.defineProperty(e,"ZP",{enumerable:!0,get:function(){return r(i).default}});var o=n(1528);function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"D1",{enumerable:!0,get:function(){return r(o).default}})},9924:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guardAgainstReservedFieldName=function(t){if(-1!==n.indexOf(t))throw new Error("Field name "+t+" isn't allowed to be used in a Form or Errors instance.")};var n=e.reservedFieldNames=["__http","__options","__validateRequestType","clear","data","delete","errors","getError","getErrors","hasError","initial","onFail","only","onSuccess","patch","populate","post","processing","successful","put","reset","submit","withData","withErrors","withOptions"]},7823:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t||"undefined"===t||0===t.length)return e.append(n,t);for(var i in t)t.hasOwnProperty(i)&&r(e,o(n,i),t[i]);return e}function o(t,e){return t?t+"["+e+"]":e}function r(t,e,o){return o instanceof Date?t.append(e,o.toISOString()):o instanceof File?t.append(e,o,o.name):"boolean"==typeof o?t.append(e,o?"1":"0"):null===o?t.append(e,""):"object"!==(void 0===o?"undefined":n(o))?t.append(e,o):void i(o,t,e)}e.objectToFormData=i},2110:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(933);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}));var o=n(7823);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}));var r=n(9924);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}))},933:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){return t instanceof File||t instanceof FileList}function o(t){if(null===t)return null;if(i(t))return t;if(Array.isArray(t)){var e=[];for(var r in t)t.hasOwnProperty(r)&&(e[r]=o(t[r]));return e}if("object"===(void 0===t?"undefined":n(t))){var a={};for(var s in t)t.hasOwnProperty(s)&&(a[s]=o(t[s]));return a}return t}e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isFile=i,e.merge=function(t,e){for(var n in e)t[n]=o(e[n])},e.cloneDeep=o},7412:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},4037:(t,e,n)=>{var i=n(8363),o=n(3674);t.exports=function(t,e){return t&&i(e,o(e),t)}},3886:(t,e,n)=>{var i=n(8363),o=n(1704);t.exports=function(t,e){return t&&i(e,o(e),t)}},5990:(t,e,n)=>{var i=n(6384),o=n(7412),r=n(4865),a=n(4037),s=n(3886),l=n(4626),c=n(278),u=n(8805),h=n(1911),d=n(8234),f=n(6904),p=n(4160),m=n(3824),v=n(9148),g=n(8517),b=n(1469),y=n(4144),_=n(6688),x=n(3218),w=n(2928),C=n(3674),S=n(1704),E="[object Arguments]",A="[object Function]",P="[object Object]",O={};O[E]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[P]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[A]=O["[object WeakMap]"]=!1,t.exports=function t(e,n,k,j,M,I){var D,R=1&n,T=2&n,z=4&n;if(k&&(D=M?k(e,j,M,I):k(e)),void 0!==D)return D;if(!x(e))return e;var L=b(e);if(L){if(D=m(e),!R)return c(e,D)}else{var B=p(e),F=B==A||"[object GeneratorFunction]"==B;if(y(e))return l(e,R);if(B==P||B==E||F&&!M){if(D=T||F?{}:g(e),!R)return T?h(e,s(D,e)):u(e,a(D,e))}else{if(!O[B])return M?e:{};D=v(e,B,R)}}I||(I=new i);var W=I.get(e);if(W)return W;I.set(e,D),w(e)?e.forEach((function(i){D.add(t(i,n,k,i,e,I))})):_(e)&&e.forEach((function(i,o){D.set(o,t(i,n,k,o,e,I))}));var N=L?void 0:(z?T?f:d:T?S:C)(e);return o(N||e,(function(i,o){N&&(i=e[o=i]),r(D,o,t(i,n,k,o,e,I))})),D}},1848:t=>{t.exports=function(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}},1078:(t,e,n)=>{var i=n(2488),o=n(7285);t.exports=function t(e,n,r,a,s){var l=-1,c=e.length;for(r||(r=o),s||(s=[]);++l<c;){var u=e[l];n>0&&r(u)?n>1?t(u,n-1,r,a,s):i(s,u):a||(s[s.length]=u)}return s}},7786:(t,e,n)=>{var i=n(1811),o=n(327);t.exports=function(t,e){for(var n=0,r=(e=i(e,t)).length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},5588:(t,e,n)=>{var i=n(4160),o=n(7005);t.exports=function(t){return o(t)&&"[object Map]"==i(t)}},2958:(t,e,n)=>{var i=n(6384),o=n(939);t.exports=function(t,e,n,r){var a=n.length,s=a,l=!r;if(null==t)return!s;for(t=Object(t);a--;){var c=n[a];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<s;){var u=(c=n[a])[0],h=t[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in t))return!1}else{var f=new i;if(r)var p=r(h,d,u,t,e,f);if(!(void 0===p?o(d,h,3,r,f):p))return!1}}return!0}},9221:(t,e,n)=>{var i=n(4160),o=n(7005);t.exports=function(t){return o(t)&&"[object Set]"==i(t)}},7206:(t,e,n)=>{var i=n(1573),o=n(6432),r=n(6557),a=n(1469),s=n(9601);t.exports=function(t){return"function"==typeof t?t:null==t?r:"object"==typeof t?a(t)?o(t[0],t[1]):i(t):s(t)}},1573:(t,e,n)=>{var i=n(2958),o=n(1499),r=n(2634);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?r(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},6432:(t,e,n)=>{var i=n(939),o=n(7361),r=n(9095),a=n(5403),s=n(9162),l=n(2634),c=n(327);t.exports=function(t,e){return a(t)&&s(e)?l(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?r(n,t):i(e,a,3)}}},5970:(t,e,n)=>{var i=n(3012),o=n(9095);t.exports=function(t,e){return i(t,e,(function(e,n){return o(t,n)}))}},3012:(t,e,n)=>{var i=n(7786),o=n(611),r=n(1811);t.exports=function(t,e,n){for(var a=-1,s=e.length,l={};++a<s;){var c=e[a],u=i(t,c);n(u,c)&&o(l,r(c,t),u)}return l}},371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},9152:(t,e,n)=>{var i=n(7786);t.exports=function(t){return function(e){return i(e,t)}}},5742:(t,e,n)=>{var i=n(7406),o=n(5776),r=Array.prototype.splice;t.exports=function(t,e){for(var n=t?e.length:0,a=n-1;n--;){var s=e[n];if(n==a||s!==l){var l=s;o(s)?r.call(t,s,1):i(t,s)}}return t}},611:(t,e,n)=>{var i=n(4865),o=n(1811),r=n(5776),a=n(3218),s=n(327);t.exports=function(t,e,n,l){if(!a(t))return t;for(var c=-1,u=(e=o(e,t)).length,h=u-1,d=t;null!=d&&++c<u;){var f=s(e[c]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(c!=h){var m=d[f];void 0===(p=l?l(m,f,d):void 0)&&(p=a(m)?m:r(e[c+1])?[]:{})}i(d,f,p),d=d[f]}return t}},4259:t=>{t.exports=function(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=t[i+e];return r}},7406:(t,e,n)=>{var i=n(1811),o=n(928),r=n(292),a=n(327);t.exports=function(t,e){return e=i(e,t),null==(t=r(t,e))||delete t[a(o(e))]}},1811:(t,e,n)=>{var i=n(1469),o=n(5403),r=n(5514),a=n(9833);t.exports=function(t,e){return i(t)?t:o(t,e)?[t]:r(a(t))}},7157:(t,e,n)=>{var i=n(4318);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},3147:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},419:(t,e,n)=>{var i=n(2705),o=i?i.prototype:void 0,r=o?o.valueOf:void 0;t.exports=function(t){return r?Object(r.call(t)):{}}},8805:(t,e,n)=>{var i=n(8363),o=n(9551);t.exports=function(t,e){return i(t,o(t),e)}},1911:(t,e,n)=>{var i=n(8363),o=n(1442);t.exports=function(t,e){return i(t,o(t),e)}},7740:(t,e,n)=>{var i=n(7206),o=n(8612),r=n(3674);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!o(e)){var l=i(n,3);e=r(e),n=function(t){return l(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[l?e[c]:c]:void 0}}},9021:(t,e,n)=>{var i=n(5564),o=n(5357),r=n(61);t.exports=function(t){return r(o(t,void 0,i),t+"")}},6904:(t,e,n)=>{var i=n(8866),o=n(1442),r=n(1704);t.exports=function(t){return i(t,r,o)}},1499:(t,e,n)=>{var i=n(9162),o=n(3674);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,i(a)]}return e}},1442:(t,e,n)=>{var i=n(2488),o=n(5924),r=n(9551),a=n(479),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,r(t)),t=o(t);return e}:a;t.exports=s},222:(t,e,n)=>{var i=n(1811),o=n(5694),r=n(1469),a=n(5776),s=n(1780),l=n(327);t.exports=function(t,e,n){for(var c=-1,u=(e=i(e,t)).length,h=!1;++c<u;){var d=l(e[c]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++c!=u?h:!!(u=null==t?0:t.length)&&s(u)&&a(d,u)&&(r(t)||o(t))}},3824:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,i=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(i.index=t.index,i.input=t.input),i}},9148:(t,e,n)=>{var i=n(4318),o=n(7157),r=n(3147),a=n(419),s=n(7133);t.exports=function(t,e,n){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return i(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return r(t);case"[object Set]":return new l;case"[object Symbol]":return a(t)}}},7285:(t,e,n)=>{var i=n(2705),o=n(5694),r=n(1469),a=i?i.isConcatSpreadable:void 0;t.exports=function(t){return r(t)||o(t)||!!(a&&t&&t[a])}},5403:(t,e,n)=>{var i=n(1469),o=n(3448),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(a.test(t)||!r.test(t)||null!=e&&t in Object(e))}},9162:(t,e,n)=>{var i=n(3218);t.exports=function(t){return t==t&&!i(t)}},2634:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},4523:(t,e,n)=>{var i=n(8306);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},292:(t,e,n)=>{var i=n(7786),o=n(4259);t.exports=function(t,e){return e.length<2?t:i(t,o(e,0,-1))}},5514:(t,e,n)=>{var i=n(4523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,i,o){e.push(i?o.replace(r,"$1"):n||t)})),e}));t.exports=a},327:(t,e,n)=>{var i=n(3448);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},361:(t,e,n)=>{var i=n(5990);t.exports=function(t){return i(t,5)}},3279:(t,e,n)=>{var i=n(3218),o=n(7771),r=n(4841),a=Math.max,s=Math.min;t.exports=function(t,e,n){var l,c,u,h,d,f,p=0,m=!1,v=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=l,i=c;return l=c=void 0,p=e,h=t.apply(i,n)}function y(t){return p=t,d=setTimeout(x,e),m?b(t):h}function _(t){var n=t-f;return void 0===f||n>=e||n<0||v&&t-p>=u}function x(){var t=o();if(_(t))return w(t);d=setTimeout(x,function(t){var n=e-(t-f);return v?s(n,u-(t-p)):n}(t))}function w(t){return d=void 0,g&&l?b(t):(l=c=void 0,h)}function C(){var t=o(),n=_(t);if(l=arguments,c=this,f=t,n){if(void 0===d)return y(f);if(v)return clearTimeout(d),d=setTimeout(x,e),b(f)}return void 0===d&&(d=setTimeout(x,e)),h}return e=r(e)||0,i(n)&&(m=!!n.leading,u=(v="maxWait"in n)?a(r(n.maxWait)||0,e):u,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=c=d=void 0},C.flush=function(){return void 0===d?h:w(o())},C}},3311:(t,e,n)=>{var i=n(7740)(n(998));t.exports=i},998:(t,e,n)=>{var i=n(1848),o=n(7206),r=n(554),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:r(n);return l<0&&(l=a(s+l,0)),i(t,o(e,3),l)}},5564:(t,e,n)=>{var i=n(1078);t.exports=function(t){return(null==t?0:t.length)?i(t,1):[]}},7361:(t,e,n)=>{var i=n(7786);t.exports=function(t,e,n){var o=null==t?void 0:i(t,e);return void 0===o?n:o}},9095:(t,e,n)=>{var i=n(13),o=n(222);t.exports=function(t,e){return null!=t&&o(t,e,i)}},6688:(t,e,n)=>{var i=n(5588),o=n(1717),r=n(1167),a=r&&r.isMap,s=a?o(a):i;t.exports=s},2928:(t,e,n)=>{var i=n(9221),o=n(1717),r=n(1167),a=r&&r.isSet,s=a?o(a):i;t.exports=s},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},8306:(t,e,n)=>{var i=n(3369);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=t.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(o.Cache||i),n}o.Cache=i,t.exports=o},7771:(t,e,n)=>{var i=n(5639);t.exports=function(){return i.Date.now()}},8718:(t,e,n)=>{var i=n(5970),o=n(9021)((function(t,e){return null==t?{}:i(t,e)}));t.exports=o},9601:(t,e,n)=>{var i=n(371),o=n(9152),r=n(5403),a=n(327);t.exports=function(t){return r(t)?i(a(t)):o(t)}},2729:(t,e,n)=>{var i=n(7206),o=n(5742);t.exports=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,a=[],s=t.length;for(e=i(e,3);++r<s;){var l=t[r];e(l,r,t)&&(n.push(l),a.push(r))}return o(t,a),n}},554:(t,e,n)=>{var i=n(8601);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},1417:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const i={name:"nzImageModal",props:{items:{type:Array,default:function(){return[]}},value:{type:Number,default:0}},data:function(){return{newValue:this.value,active:!1}},computed:{openImage:function(){return this.items[this.newValue]}},watch:{newValue:function(){this.$emit("input",this.newValue)},openImage:{handler:function(t){this.active=Boolean(t)}}},created:function(){document.addEventListener("keyup",this.registerKeyListener)},mounted:function(){this.active=Boolean(this.openImage)},beforeDestroy:function(){document.removeEventListener("keyup",this.registerKeyListener)},methods:{next:function(){var t=this.newValue+1;t>=this.items.length&&(t=0),this.newValue=t},prev:function(){var t=this.newValue-1;t<0&&(t=this.items.length-1),this.newValue=t},registerKeyListener:function(t){var e=t.which||t.keyCode;37===e?this.prev():39===e&&this.next()},onClose:function(t){var e=this;this.active=!1,this.$nextTick((function(){e.$emit("close",t)}))}}};const o=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{active:t.active,"can-cancel":["escape","x"]},on:{"update:active":function(e){t.active=e},close:t.onClose}},[n("div",{staticClass:"image-modal"},[n("img",{attrs:{src:t.openImage}}),t._v(" "),t.items.length>1?n("div",{staticClass:"image-modal-navigation"},[n("div",{staticClass:"image-modal-previous",on:{click:t.prev}},[n("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),t._v(" "),n("div",{staticClass:"image-modal-next",on:{click:t.next}},[n("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})])]):t._e()])])}),[],!1,null,null,null).exports},8560:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>z});var i=n(8062),o=n(6386),r=n(361),a=n.n(r),s=n(7361),l=n.n(s),c=n(3311),u=n.n(c),h=n(998),d=n.n(h),f=n(8718),p=n.n(f),m=n(2729),v=n.n(m),g=n(2791),b=n(505),y=n(7319),_=n(914),x=n(8597),w=n(9669),C=n.n(w),S=n(3279);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const A={name:"nzCollectionAutocomplete",props:{label:{type:String,default:"Collection"},placeholder:{type:String,default:"Search for collection..."},collection:{type:Object,default:null},route:{type:String,default:"api.autocomplete.specimen-collections.index"},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean,disabled:Boolean},data:function(){return{data:[],selected:this.collection||null,loading:!1}},computed:{icon:function(){return this.selected?"check":"search"}},watch:{publication:function(t){this.selected=t}},methods:{fetchData:n.n(S)()((function(){var t=this;if(this.value){this.data=[],this.loading=!0;var e={name:this.value};this.except&&(e.except=this.except),C().get(route(this.route),{params:e}).then((function(e){e.data.data.forEach((function(e){return t.data.push(e)})),t.loading=!1}),(function(e){t.loading=!1}))}}),500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===E(t)?l()(t,"name"):t}}};var P=n(1900);const O=(0,P.Z)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{staticClass:"nz-collection-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[n("b-field",{attrs:{grouped:""}},[n("b-autocomplete",{attrs:{value:t.value,data:t.data,field:"name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",autofocus:t.autofocus,disabled:t.disabled},on:{input:t.onInput,select:t.onSelect},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"media"},[n("div",{staticClass:"media-content"},[t._v("\n            "+t._s(e.option.name)+" ("+t._s(e.option.code)+")\n          ")])])]}}])}),t._v(" "),t._t("default")],2)],1)}),[],!1,null,null,null).exports;var k=n(8836);function j(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const T={name:"nzCollectionObservationForm",mixins:[b.Z,g.Z],components:{NzDateInput:y.Z,NzPhotoUpload:_.Z,NzSpatialInput:x.Z,NzCollectionAutocomplete:O,NzTaxonAutocomplete:k.Z},props:{submitMoreWithSameTaxon:Boolean,observation:{type:Object,default:function(){return{original_date:null,original_locality:null,original_elevation:null,original_coordinates:null,original_identification:null,original_identification_validity:null,verbatim_tag:null,collecting_start_year:null,collecting_start_month:null,collecting_end_year:null,collecting_end_month:null,collecting_method:null,collector:null,collection_id:null,catalogue_number:null,cabinet_number:null,box_number:null,disposition:null,type_status:null,preparator:null,preparation_method:null,taxon_id:null,year:(0,o.Z)().year(),month:(0,o.Z)().month()+1,day:(0,o.Z)().date(),latitude:null,longitude:null,location:null,accuracy:null,elevation:null,minimum_elevation:null,maximum_elevation:null,georeferenced_by:null,georeferenced_date:null,observer:null,identifier:null,note:null,sex:null,number:null,project:null,found_on:null,habitat:null,stage_id:null,time:null,dataset:null,taxon:null,collection:null,photos:[]}}},imageLicenses:{type:Object,default:function(){return{}}},sexes:{type:Object,default:function(){return{}}},dispositions:{type:Object,default:function(){return{}}},validityOptions:{type:[Array,Object],default:function(){return[]}}},data:function(){return{keepAfterSubmit:this.getAttributesToKeep(),submittingWithoutRedirectWithSameTaxon:!1,locale:window.App.locale,taxonName:l()(this.observation,"taxon.name",""),collectionName:l()(this.observation,"collection.name","")}},computed:{stages:function(){return this.form.taxon?this.form.taxon.stages:[]},time:function(){return this.form.time?(0,o.Z)(this.form.time,"HH:mm").toDate():null},georeferencedDate:{get:function(){var t=(0,o.Z)(this.form.georeferenced_date);return t.isValid()?t.toDate():null},set:function(t){this.form.georeferenced_date=(0,o.Z)(t).format("YYYY-MM-DD")}},months:function(){return o.Z.months()}},created:function(){this.restoreState()},methods:{otherPersistentKeys:function(){return["taxonName","collectionName"]},newForm:function(){return new i.ZP(D(D({},this.observation),{},{reason:null}),{resetOnSuccess:!1})},onTaxonSelect:function(t){var e=this;this.form.taxon=t||null,this.form.taxon_id=t?t.id:null,this.taxonName=t?t.name:null,!u()(this.stages,(function(t){return t.id===e.form.stage_id}))&&(this.form.stage_id=null)},onCollectionSelect:function(t){this.form.collection=t||null,this.form.collection_id=t?t.id:null,this.collectionName=t?t.name:null},onTimeInput:function(t){this.form.time=t?(0,o.Z)(t).format("HH:mm"):null},getAttributesToKeep:function(){return["location","accuracy","elevation","latitude","longitude","year","month","day","project","observer","identifier","dataset","collection","collection_id","minimum_elevation","maximum_elevation","original_locality","original_elevation","original_coordinates","georeferenced_by","georeferenced_date"]},hookAfterSubmitWithoutRedirect:function(){this.taxonName=""},addNewCollection:function(){this.saveState(),window.location.href=route("admin.specimen-collections.create")},dateFormater:function(t){return(0,o.Z)(t).format("DD.MM.YYYY")},handleElevationFetched:function(t){this.form.minimum_elevation=t,this.form.maximum_elevation=t},submitWithoutRedirectWithSameTaxon:function(){if(!this.form.processing)return this.submitOnlyDirty&&!this.isDirty()?this.notifyNoChanges():this.shouldConfirmSubmit?this.confirmSubmit(this.performSubmitWithoutRedirectWithSameTaxon):void this.performSubmitWithoutRedirectWithSameTaxon()},performSubmitWithoutRedirectWithSameTaxon:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.submittingWithoutRedirectWithSameTaxon=!0,this.confirmingSubmit=!1,this.shouldAskReason&&(this.form.reason=e),this.form[this.method.toLowerCase()](this.action).then(this.onSuccessfulSubmitWithoutRedirectWithSameTaxon).catch((function(e){t.submittingWithoutRedirectWithSameTaxon=!1,t.onFailedSubmit(e)}))},onSuccessfulSubmitWithoutRedirectWithSameTaxon:function(){this.submittingWithoutRedirectWithSameTaxon=!1,this.$buefy.toast.open({message:this.trans("Saved successfully"),type:"is-success"});var t=p()(this.form.data(),this.keepAfterSubmit.concat(["original_identification_validity","taxon","taxon_id","original_identification"]));this.form.reset(),this.form.populate(t)},getObservationPhotoAttribute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"url",n=l()(this.observation,"photos.".concat(t,".").concat(e),"");if("url"===e&&n){var i=(0,o.Z)(l()(this.observation,"photos.".concat(t,".updated_at"),null));n+=i.isValid()?"?v=".concat(i.format("X")):""}return n},onPhotoUploaded:function(t){this.form.photos.push({path:t.path,crop:t.crop,license:t.license}),this.promptToExtractExifData(t)},promptToExtractExifData:function(t){var e=this;!this.exifExtracted&&t.exif&&this.$buefy.dialog.confirm({message:this.extractExifMessage(t).replace(/\n/g,"<br>"),cancelText:this.trans("No"),confirmText:this.trans("Yes"),onConfirm:function(){e.fillFromExif(t)},onCancel:function(){e.exifExtracted=!0}})},extractExifMessage:function(t){var e=this,n=this.extractExifData(t);return[this.trans("Use data from photo to fill the form?")+"\n"].concat(j(Object.keys(n).map((function(t){return"".concat(e.trans("labels.collection_observations."+t),": ").concat(n[t])})))).join("\n")},extractExifData:function(t){var e={};for(var n in t.exif){var i=t.exif[n];i&&(e[n]=i)}return e},fillFromExif:function(t){var e=this.extractExifData(t);for(var n in e)this.form[n]=e[n];this.exifExtracted=!0},onPhotoRemoved:function(t){v()(this.form.photos,{path:t.path})},onPhotoCropped:function(t){var e=d()(this.form.photos,{path:t.path});if(e>=0){var n=a()(this.form.photos[e]);n.crop=t.crop,this.form.photos.splice(e,1,n)}},onImageLicenseChanged:function(t,e){var n=a()(this.form.photos[t]);n.license=e,this.form.photos[t]=n}}};const z=(0,P.Z)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"collection-observation-form",attrs:{action:t.action,method:"POST",lang:t.locale}},[n("div",{staticClass:"mb-8"},[n("nz-collection-autocomplete",{staticClass:"is-required",attrs:{collection:t.form.collection,error:t.form.errors.has("collection_id"),message:t.form.errors.has("collection_id")?t.form.errors.first("collection_id"):null,autofocus:"autofocus",label:t.trans("labels.collection_observations.collection"),placeholder:t.trans("labels.collection_observations.search_for_collection")},on:{select:t.onCollectionSelect},model:{value:t.collectionName,callback:function(e){t.collectionName=e},expression:"collectionName"}},[n("a",{staticClass:"button",attrs:{title:t.trans("labels.collection_observations.add_new_collection"),href:t.$ziggy("admin.specimen-collections.create")},on:{click:function(e){return e.preventDefault(),t.addNewCollection(e)}}},[n("b-icon",{attrs:{icon:"plus"}})],1)]),t._v(" "),n("nz-taxon-autocomplete",{ref:"taxonAutocomplete",staticClass:"is-required",attrs:{taxon:t.form.taxon,error:t.form.errors.has("taxon_id"),message:t.form.errors.has("taxon_id")?t.form.errors.first("taxon_id"):null,autofocus:"autofocus",label:t.trans("labels.collection_observations.taxon"),placeholder:t.trans("labels.collection_observations.search_for_taxon")},on:{select:t.onTaxonSelect},model:{value:t.taxonName,callback:function(e){t.taxonName=e},expression:"taxonName"}}),t._v(" "),n("nz-date-input",{attrs:{year:t.form.year,month:t.form.month,day:t.form.day,errors:t.form.errors,label:t.trans("labels.collection_observations.date"),placeholders:{year:t.trans("labels.collection_observations.year"),month:t.trans("labels.collection_observations.month"),day:t.trans("labels.collection_observations.day")}},on:{"update:year":function(e){return t.$set(t.form,"year",e)},"update:month":function(e){return t.$set(t.form,"month",e)},"update:day":function(e){return t.$set(t.form,"day",e)}}}),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.collection_observations.original_identification"),type:t.form.errors.has("original_identification")?"is-danger":null,message:t.form.errors.has("original_identification")?t.form.errors.first("original_identification"):null}},[n("b-input",{attrs:{name:"original_identification"},model:{value:t.form.original_identification,callback:function(e){t.$set(t.form,"original_identification",e)},expression:"form.original_identification"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.collection_observations.original_identification_validity"),type:t.form.errors.has("original_identification_validity")?"is-danger":null,message:t.form.errors.has("original_identification_validity")?t.form.errors.first("original_identification_validity"):null}},[n("b-select",{attrs:{name:"original_identification_validity",expanded:""},model:{value:t.form.original_identification_validity,callback:function(e){t.$set(t.form,"original_identification_validity",e)},expression:"form.original_identification_validity"}},t._l(t.validityOptions,(function(e,i){return n("option",{key:i,domProps:{value:i}},[t._v(t._s(e))])})),0)],1)],1)]),t._v(" "),n("nz-spatial-input",{staticClass:"mb-4",attrs:{latitude:t.form.latitude,longitude:t.form.longitude,location:t.form.location,accuracy:t.form.accuracy,elevation:t.form.elevation,errors:t.form.errors,"has-other-errors":t.form.errors.has("minimum_elevation")||t.form.errors.has("maximum_elevation")},on:{"update:latitude":function(e){return t.$set(t.form,"latitude",e)},"update:longitude":function(e){return t.$set(t.form,"longitude",e)},"update:location":function(e){return t.$set(t.form,"location",e)},"update:accuracy":function(e){return t.$set(t.form,"accuracy",e)},"update:elevation":function(e){return t.$set(t.form,"elevation",e)},"elevation-fetched":t.handleElevationFetched}},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.minimum_elevation_m"),type:t.form.errors.has("minimum_elevation")?"is-danger":null,message:t.form.errors.has("minimum_elevation")?t.form.errors.first("minimum_elevation"):null,"custom-class":"is-small"}},[n("b-input",{attrs:{type:"number",size:"is-small"},model:{value:t.form.minimum_elevation,callback:function(e){t.$set(t.form,"minimum_elevation",t._n(e))},expression:"form.minimum_elevation"}})],1),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.collection_observations.maximum_elevation_m"),type:t.form.errors.has("maximum_elevation")?"is-danger":null,message:t.form.errors.has("maximum_elevation")?t.form.errors.first("maximum_elevation"):null,"custom-class":"is-small"}},[n("b-input",{attrs:{type:"number",size:"is-small"},model:{value:t.form.maximum_elevation,callback:function(e){t.$set(t.form,"maximum_elevation",t._n(e))},expression:"form.maximum_elevation"}})],1)],1),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.georeferenced_by"),type:t.form.errors.has("georeferenced_by")?"is-danger":null,message:t.form.errors.has("georeferenced_by")?t.form.errors.first("georeferenced_by"):null}},[n("b-input",{model:{value:t.form.georeferenced_by,callback:function(e){t.$set(t.form,"georeferenced_by",t._n(e))},expression:"form.georeferenced_by"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.georeferenced_date"),type:t.form.errors.has("georeferenced_date")?"is-danger":null,message:t.form.errors.has("georeferenced_date")?t.form.errors.first("georeferenced_date"):null}},[n("b-datepicker",{attrs:{"max-date":new Date,"mobile-native":!1,"date-formatter":t.dateFormater,"first-day-of-week":1,placeholder:"DD.MM.YYYY"},model:{value:t.georeferencedDate,callback:function(e){t.georeferencedDate=e},expression:"georeferencedDate"}},[n("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:function(e){t.form.georeferenced_date=null}}},[n("b-icon",{attrs:{icon:"close"}}),t._v(" "),n("span",[t._v("Clear")])],1)])],1)],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.stage"),type:t.form.errors.has("stage_id")?"is-danger":null,message:t.form.errors.has("stage_id")?t.form.errors.first("stage_id"):null}},[n("b-select",{attrs:{disabled:!t.stages.length,expanded:"expanded"},model:{value:t.form.stage_id,callback:function(e){t.$set(t.form,"stage_id",e)},expression:"form.stage_id"}},[n("option",{domProps:{value:null}},[t._v(t._s(t.trans("labels.collection_observations.choose_a_stage")))]),t._v(" "),t._l(t.stages,(function(e){return n("option",{key:e.id,domProps:{value:e.id,textContent:t._s(t.trans("stages."+e.name))}})}))],2)],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.sex"),type:t.form.errors.has("sex")?"is-danger":null,message:t.form.errors.has("sex")?t.form.errors.first("sex"):null}},[n("b-select",{attrs:{expanded:"expanded"},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[n("option",{domProps:{value:null}},[t._v(t._s(t.trans("labels.collection_observations.choose_a_value")))]),t._v(" "),t._l(t.sexes,(function(e,i){return n("option",{key:i,domProps:{value:i,textContent:t._s(e)}})}))],2)],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.number"),type:t.form.errors.has("number")?"is-danger":null,message:t.form.errors.has("number")?t.form.errors.first("number"):null}},[n("b-input",{attrs:{type:"number"},model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}})],1)],1)]),t._v(" "),n("div",{staticClass:"mt-4"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.habitat"),type:t.form.errors.has("habitat")?"is-danger":null,message:t.form.errors.has("habitat")?t.form.errors.first("habitat"):null}},[n("b-input",{model:{value:t.form.habitat,callback:function(e){t.$set(t.form,"habitat",e)},expression:"form.habitat"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.found_on"),type:t.form.errors.has("found_on")?"is-danger":null,message:t.form.errors.has("found_on")?t.form.errors.first("found_on"):null}},[n("label",{staticClass:"label",attrs:{slot:"label",for:"found_on"},slot:"label"},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.trans("labels.collection_observations.found_on_tooltip")},expression:"{content: trans('labels.collection_observations.found_on_tooltip')}"}],staticClass:"is-dashed"},[t._v("\n                "+t._s(t.trans("labels.collection_observations.found_on"))+"\n              ")])]),t._v(" "),n("b-input",{attrs:{id:"found_on",name:"found_on"},model:{value:t.form.found_on,callback:function(e){t.$set(t.form,"found_on",e)},expression:"form.found_on"}})],1)],1)]),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.collection_observations.time"),type:t.form.errors.has("time")?"is-danger":null,message:t.form.errors.has("time")?t.form.errors.first("time"):null}},[n("b-timepicker",{attrs:{value:t.time,placeholder:t.trans("labels.collection_observations.click_to_select"),icon:"clock-o","mobile-native":!1},on:{input:t.onTimeInput}},[n("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:function(e){t.form.time=null}}},[n("b-icon",{attrs:{icon:"close"}})],1)])],1),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label",attrs:{for:"project"}},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.trans("labels.collection_observations.project_tooltip")},expression:"{content: trans('labels.collection_observations.project_tooltip')}"}],staticClass:"is-dashed"},[t._v("\n                "+t._s(t.trans("labels.collection_observations.project"))+"\n              ")])]),t._v(" "),n("b-input",{attrs:{id:"project",name:"project"},model:{value:t.form.project,callback:function(e){t.$set(t.form,"project",e)},expression:"form.project"}}),t._v(" "),t.form.errors.has("project")?n("p",{staticClass:"help",class:{"is-danger":t.form.errors.has("project")},domProps:{innerHTML:t._s(t.form.errors.first("project"))}}):t._e()],1)]),t._v(" "),n("div",{staticClass:"column"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label",attrs:{for:"dataset"}},[t._v("\n              "+t._s(t.trans("labels.collection_observations.dataset"))+"\n            ")]),t._v(" "),n("b-input",{attrs:{id:"dataset",name:"dataset"},model:{value:t.form.dataset,callback:function(e){t.$set(t.form,"dataset",e)},expression:"form.dataset"}}),t._v(" "),t.form.errors.has("dataset")?n("p",{staticClass:"help",class:{"is-danger":t.form.errors.has("dataset")},domProps:{innerHTML:t._s(t.form.errors.first("dataset"))}}):t._e()],1)])]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.observer"),type:t.form.errors.has("observer")?"is-danger":null,message:t.form.errors.has("observer")?t.form.errors.first("observer"):null}},[n("b-input",{attrs:{name:"observer"},model:{value:t.form.observer,callback:function(e){t.$set(t.form,"observer",e)},expression:"form.observer"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.identifier"),type:t.form.errors.has("identifier")?"is-danger":null,message:t.form.errors.has("identifier")?t.form.errors.first("identifier"):null}},[n("b-input",{attrs:{name:"identifier"},model:{value:t.form.identifier,callback:function(e){t.$set(t.form,"identifier",e)},expression:"form.identifier"}})],1)],1)])],1),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.collector"),type:t.form.errors.has("collector")?"is-danger":null,message:t.form.errors.has("collector")?t.form.errors.first("collector"):null}},[n("b-input",{attrs:{name:"collector"},model:{value:t.form.collector,callback:function(e){t.$set(t.form,"collector",e)},expression:"form.collector"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.preparator"),type:t.form.errors.has("preparator")?"is-danger":null,message:t.form.errors.has("preparator")?t.form.errors.first("preparator"):null}},[n("b-input",{attrs:{name:"preparator"},model:{value:t.form.preparator,callback:function(e){t.$set(t.form,"preparator",e)},expression:"form.preparator"}})],1)],1)])],1),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.catalogue_number"),type:t.form.errors.has("catalogue_number")?"is-danger":null,message:t.form.errors.has("catalogue_number")?t.form.errors.first("catalogue_number"):null}},[n("b-input",{attrs:{name:"catalogue_number"},model:{value:t.form.catalogue_number,callback:function(e){t.$set(t.form,"catalogue_number",e)},expression:"form.catalogue_number"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.cabinet_number"),type:t.form.errors.has("cabinet_number")?"is-danger":null,message:t.form.errors.has("cabinet_number")?t.form.errors.first("cabinet_number"):null}},[n("b-input",{attrs:{name:"cabinet_number"},model:{value:t.form.cabinet_number,callback:function(e){t.$set(t.form,"cabinet_number",e)},expression:"form.cabinet_number"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.box_number"),type:t.form.errors.has("box_number")?"is-danger":null,message:t.form.errors.has("box_number")?t.form.errors.first("box_number"):null}},[n("b-input",{attrs:{name:"box_number"},model:{value:t.form.box_number,callback:function(e){t.$set(t.form,"box_number",e)},expression:"form.box_number"}})],1)],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.disposition"),type:t.form.errors.has("disposition")?"is-danger":null,message:t.form.errors.has("disposition")?t.form.errors.first("disposition"):null}},[n("b-select",{attrs:{expanded:"expanded"},model:{value:t.form.disposition,callback:function(e){t.$set(t.form,"disposition",e)},expression:"form.disposition"}},[n("option",{domProps:{value:null}},[t._v(t._s(t.trans("labels.collection_observations.choose_a_value")))]),t._v(" "),t._l(t.dispositions,(function(e,i){return n("option",{key:"disposition-option-"+i,domProps:{value:i,textContent:t._s(e)}})}))],2)],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("b-field",{attrs:{label:t.trans("labels.collection_observations.preparation_method"),type:t.form.errors.has("preparation_method")?"is-danger":null,message:t.form.errors.has("preparation_method")?t.form.errors.first("preparation_method"):null}},[n("b-input",{attrs:{name:"preparation_method"},model:{value:t.form.preparation_method,callback:function(e){t.$set(t.form,"preparation_method",e)},expression:"form.preparation_method"}})],1)],1)]),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.collection_observations.note"),error:t.form.errors.has("note"),message:t.form.errors.has("note")?t.form.errors.first("note"):null}},[n("b-input",{attrs:{type:"textarea"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1),t._v(" "),n("div",{staticClass:"mt-8"},[n("h2",{staticClass:"is-size-4"},[t._v(t._s(t.trans("labels.collection_observations.verbatim_data")))]),t._v(" "),n("div",{staticClass:"columns"},[n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.original_date"),type:t.form.errors.has("original_date")?"is-danger":null,message:t.form.errors.has("original_date")?t.form.errors.first("original_date"):null}},[n("b-input",{attrs:{name:"original_date"},model:{value:t.form.original_date,callback:function(e){t.$set(t.form,"original_date",e)},expression:"form.original_date"}})],1),t._v(" "),n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.original_locality"),type:t.form.errors.has("original_locality")?"is-danger":null,message:t.form.errors.has("original_locality")?t.form.errors.first("original_locality"):null}},[n("b-input",{model:{value:t.form.original_locality,callback:function(e){t.$set(t.form,"original_locality",e)},expression:"form.original_locality"}})],1)],1),t._v(" "),n("div",{staticClass:"columns"},[n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.original_coordinates"),type:t.form.errors.has("original_coordinates")?"is-danger":null,message:t.form.errors.has("original_coordinates")?t.form.errors.first("original_coordinates"):null}},[n("b-input",{model:{value:t.form.original_coordinates,callback:function(e){t.$set(t.form,"original_coordinates",e)},expression:"form.original_coordinates"}})],1),t._v(" "),n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.original_elevation"),type:t.form.errors.has("original_elevation")?"is-danger":null,message:t.form.errors.has("original_elevation")?t.form.errors.first("original_elevation"):null}},[n("b-input",{attrs:{placeholder:t.trans("labels.collection_observations.original_elevation_placeholder")},model:{value:t.form.original_elevation,callback:function(e){t.$set(t.form,"original_elevation",e)},expression:"form.original_elevation"}})],1)],1),t._v(" "),n("b-field",{staticClass:"mb-8",attrs:{label:t.trans("labels.collection_observations.verbatim_tag"),type:t.form.errors.has("verbatim_tag")?"is-danger":null,message:t.form.errors.has("verbatim_tag")?t.form.errors.first("verbatim_tag"):null}},[n("b-input",{attrs:{type:"textarea"},model:{value:t.form.verbatim_tag,callback:function(e){t.$set(t.form,"verbatim_tag",e)},expression:"form.verbatim_tag"}})],1),t._v(" "),n("div",{staticClass:"columns"},[n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.collecting_start_year"),type:t.form.errors.has("collecting_start_year")?"is-danger":null,message:t.form.errors.has("collecting_start_year")?t.form.errors.first("collecting_start_year"):null}},[n("b-input",{attrs:{type:"number"},model:{value:t.form.collecting_start_year,callback:function(e){t.$set(t.form,"collecting_start_year",e)},expression:"form.collecting_start_year"}})],1),t._v(" "),n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.collecting_start_month"),type:t.form.errors.has("collecting_start_month")?"is-danger":null,message:t.form.errors.has("collecting_start_month")?t.form.errors.first("collecting_start_month"):null}},[n("b-select",{attrs:{expanded:""},model:{value:t.form.collecting_start_month,callback:function(e){t.$set(t.form,"collecting_start_month",e)},expression:"form.collecting_start_month"}},[n("option",{domProps:{value:null}}),t._v(" "),t._l(t.months,(function(e,i){return n("option",{key:e,domProps:{value:i+1}},[t._v("\n                  "+t._s(e)+"\n              ")])}))],2)],1)],1),t._v(" "),n("div",{staticClass:"columns"},[n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.collecting_end_year"),type:t.form.errors.has("collecting_end_year")?"is-danger":null,message:t.form.errors.has("collecting_end_year")?t.form.errors.first("collecting_end_year"):null}},[n("b-input",{attrs:{type:"number"},model:{value:t.form.collecting_end_year,callback:function(e){t.$set(t.form,"collecting_end_year",e)},expression:"form.collecting_end_year"}})],1),t._v(" "),n("b-field",{staticClass:"column",attrs:{label:t.trans("labels.collection_observations.collecting_end_month"),type:t.form.errors.has("collecting_end_month")?"is-danger":null,message:t.form.errors.has("collecting_end_month")?t.form.errors.first("collecting_end_month"):null}},[n("b-select",{attrs:{expanded:""},model:{value:t.form.collecting_end_month,callback:function(e){t.$set(t.form,"collecting_end_month",e)},expression:"form.collecting_end_month"}},[n("option",{domProps:{value:null}}),t._v(" "),t._l(t.months,(function(e,i){return n("option",{key:e,domProps:{value:i+1}},[t._v("\n                  "+t._s(e)+"\n              ")])}))],2)],1)],1),t._v(" "),n("b-field",{attrs:{label:t.trans("labels.collection_observations.photos")}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-third"},[n("nz-photo-upload",{ref:"photoUpload-1",attrs:{"image-url":t.getObservationPhotoAttribute(0,"url"),"image-path":t.getObservationPhotoAttribute(0,"path"),"image-license":t.getObservationPhotoAttribute(0,"license"),licenses:t.imageLicenses,text:t.trans("labels.collection_observations.upload"),errors:t.form.errors},on:{uploaded:t.onPhotoUploaded,removed:t.onPhotoRemoved,cropped:t.onPhotoCropped,"license-changed":function(e){return t.onImageLicenseChanged(0,e)}}})],1),t._v(" "),n("div",{staticClass:"column is-one-third"},[n("nz-photo-upload",{ref:"photoUpload-2",attrs:{"image-path":t.getObservationPhotoAttribute(1,"path"),"image-url":t.getObservationPhotoAttribute(1,"url"),"image-license":t.getObservationPhotoAttribute(1,"license"),licenses:t.imageLicenses,text:t.trans("labels.collection_observations.upload"),errors:t.form.errors},on:{uploaded:t.onPhotoUploaded,removed:t.onPhotoRemoved,cropped:t.onPhotoCropped,"license-changed":function(e){return t.onImageLicenseChanged(1,e)}}})],1),t._v(" "),n("div",{staticClass:"column is-one-third"},[n("nz-photo-upload",{ref:"photoUpload-3",attrs:{"image-url":t.getObservationPhotoAttribute(2,"url"),"image-path":t.getObservationPhotoAttribute(2,"path"),"image-license":t.getObservationPhotoAttribute(2,"license"),licenses:t.imageLicenses,text:t.trans("labels.collection_observations.upload"),errors:t.form.errors},on:{uploaded:t.onPhotoUploaded,removed:t.onPhotoRemoved,cropped:t.onPhotoCropped,"license-changed":function(e){return t.onImageLicenseChanged(2,e)}}})],1)])])],1),t._v(" "),n("hr"),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.trans("labels.collection_observations.save_tooltip")},expression:"{content: trans('labels.collection_observations.save_tooltip')}"}],staticClass:"button is-primary",class:{"is-loading":t.submittingWithRedirect},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitWithRedirect(e)}}},[t._v("\n    "+t._s(t.trans("buttons.save"))+"\n  ")]),t._v(" "),t.submitMore?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.trans("labels.collection_observations.save_more_tooltip")},expression:"{content: trans('labels.collection_observations.save_more_tooltip')}"}],staticClass:"button is-primary",class:{"is-outlined":!t.submittingWithoutRedirect,"is-loading":t.submittingWithoutRedirect},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitWithoutRedirect(e)}}},[t._v("\n    "+t._s(t.trans("buttons.save_more"))+"\n  ")]):t._e(),t._v(" "),t.submitMoreWithSameTaxon?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.trans("labels.collection_observations.save_more_same_taxon_tooltip")},expression:"{content: trans('labels.collection_observations.save_more_same_taxon_tooltip')}"}],staticClass:"button is-primary",class:{"is-outlined":!t.submittingWithoutRedirectWithSameTaxon,"is-loading":t.submittingWithoutRedirectWithSameTaxon},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.submitWithoutRedirectWithSameTaxon(e)}}},[t._v("\n    "+t._s(t.trans("labels.collection_observations.save_more_same_taxon"))+"\n  ")]):t._e(),t._v(" "),n("a",{staticClass:"button is-text",attrs:{href:t.cancelUrl},on:{click:t.onCancel}},[t._v(t._s(t.trans("buttons.cancel")))])],1)}),[],!1,null,null,null).exports},7319:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(6386),o=n(1701),r=n.n(o);const a={name:"nzDateInput",props:{label:{type:String,default:"Date"},year:{type:Number,default:(0,i.Z)().year()},month:{type:Number,default:(0,i.Z)().month()+1},day:{type:Number,default:(0,i.Z)().date()},placeholders:{type:Object,default:function(){return{year:"Year",month:"Month",day:"Day"}}},errors:{type:Object,default:function(){return{has:function(){return!1}}}}},computed:{now:function(){return(0,i.Z)()},months:function(){if(!this.year||this.year>(0,i.Z)().year())return[];var t=this.year===(0,i.Z)().year(),e=i.Z.months();return t&&e.splice((0,i.Z)().month()+1),e},days:function(){if(!(this.year&&this.month))return[];var t=this.year===(0,i.Z)().year()&&this.month-1===(0,i.Z)().month(),e=(0,i.Z)(new Date(this.year,this.month-1,1)).daysInMonth();return t&&(e=(0,i.Z)().date()),r()(1,e+1)}},watch:{year:function(){(this.year>(0,i.Z)().year()||this.months.length<this.month-1)&&this.onMonthInput(null),this.truncateDay()},month:function(){this.truncateDay()}},methods:{truncateDay:function(){this.days.length<this.day&&this.onDayInput(null)},onYearInput:function(t){this.$emit("update:year",+t||null)},onMonthInput:function(t){this.$emit("update:month",t)},onDayInput:function(t){this.$emit("update:day",t)}}};const s=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{attrs:{label:t.label}},[n("b-field",{attrs:{expanded:"",grouped:""}},[n("b-field",{attrs:{type:t.errors.has("year")?"is-danger":"",message:t.errors.has("year")?t.errors.first("year"):"",expanded:""}},[n("b-input",{attrs:{placeholder:t.placeholders.year,value:t.year},on:{input:t.onYearInput}})],1),t._v(" "),n("b-field",{attrs:{type:t.errors.has("month")?"is-danger":"",message:t.errors.has("month")?t.errors.first("month"):"",expanded:""}},[n("b-select",{attrs:{placeholder:t.placeholders.month,value:t.month,expanded:""},on:{input:t.onMonthInput}},[n("option",{domProps:{value:null}}),t._v(" "),t._l(t.months,(function(e,i){return n("option",{key:"month-select-"+i,domProps:{value:i+1,textContent:t._s(e)}})}))],2)],1),t._v(" "),n("b-field",{attrs:{type:t.errors.has("day")?"is-danger":"",message:t.errors.has("day")?t.errors.first("day"):"",expanded:""}},[n("b-select",{attrs:{placeholder:t.placeholders.day,value:t.day,expanded:""},on:{input:t.onDayInput}},[n("option",{domProps:{value:null}}),t._v(" "),t._l(t.days,(function(e){return n("option",{key:"day-select-"+e,domProps:{value:e,textContent:t._s(e)}})}))],2)],1)],1)],1)}),[],!1,null,null,null).exports},914:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var i=n(9303),o=n.n(i),r=n(5299),a=n.n(r);class s{constructor(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}set(t=null,e=null,n=null,i=null){return this.x1=null==t?this.x1:t,this.y1=null==e?this.y1:e,this.x2=null==n?this.x2:n,this.y2=null==i?this.y2:i,this}width(){return Math.abs(this.x2-this.x1)}height(){return Math.abs(this.y2-this.y1)}resize(t,e,n=[0,0]){const i=this.x1+this.width()*n[0],o=this.y1+this.height()*n[1];return this.x1=i-t*n[0],this.y1=o-e*n[1],this.x2=this.x1+t,this.y2=this.y1+e,this}scale(t,e=[0,0]){const n=this.width()*t,i=this.height()*t;return this.resize(n,i,e),this}move(t=null,e=null){let n=this.width(),i=this.height();return t=null===t?this.x1:t,e=null===e?this.y1:e,this.x1=t,this.y1=e,this.x2=t+n,this.y2=e+i,this}getRelativePoint(t=[0,0]){return[this.width()*t[0],this.height()*t[1]]}getAbsolutePoint(t=[0,0]){return[this.x1+this.width()*t[0],this.y1+this.height()*t[1]]}constrainToRatio(t,e=[0,0],n="height"){if(null===t)return;this.width(),this.height();switch(n){case"height":this.resize(this.width(),this.width()*t,e);break;case"width":this.resize(1*this.height()/t,this.height(),e);break;default:this.resize(this.width(),this.width()*t,e)}return this}constrainToBoundary(t,e,n=[0,0]){const[i,o]=this.getAbsolutePoint(n),r=i,a=o,s=t-i,l=e-o,c=-2*n[0]+1,u=-2*n[1]+1;let[h,d]=[null,null];switch(c){case-1:h=r;break;case 0:h=2*Math.min(r,s);break;case 1:h=s}switch(u){case-1:d=a;break;case 0:d=2*Math.min(a,l);break;case 1:d=l}if(this.width()>h){const t=h/this.width();this.scale(t,n)}if(this.height()>d){const t=d/this.height();this.scale(t,n)}return this}constrainToSize(t=null,e=null,n=null,i=null,o=[0,0],r=null){if(r&&(r>1?(t=1*e/r,i*=r):r<1&&(e=t*r,n=1*i/r)),t&&this.width()>t){const n=t,i=null===r?this.height():e;this.resize(n,i,o)}if(e&&this.height()>e){const n=null===r?this.width():t,i=e;this.resize(n,i,o)}if(n&&this.width()<n){const t=n,e=null===r?this.height():i;this.resize(t,e,o)}if(i&&this.height()<i){const t=null===r?this.width():n,e=i;this.resize(t,e,o)}return this}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(r,t);var e,n,i,o=d(r);function r(){return c(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"setBoxToRealPosition",value:function(t){var e=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,i=e/this.imageEl.offsetWidth,o=n/this.imageEl.offsetHeight;this.box=new s(Math.round(t.x/i),Math.round(t.y/o),Math.round((t.x+t.width)/i),Math.round((t.y+t.height)/o)),this.redraw()}}])&&u(e.prototype,n),i&&u(e,i),r}(a());const v={name:"nzImageCropModal",mixins:[n(7101).Z],props:{canCancel:{type:[Array,Boolean],default:function(){return["escape","x"]}},imageUrl:String,crop:Object},data:function(){return{croppr:null,newCrop:this.crop,preserveRatio:!1}},mounted:function(){document.addEventListener("keydown",this.ctrlIsPressed),document.addEventListener("keyup",this.ctrlIsNotPressed)},beforeDestroy:function(){document.removeEventListener("keydown",this.ctrlIsPressed),document.removeEventListener("keyup",this.ctrlIsNotPressed)},watch:{isActive:function(t){var e=this;this.handleScroll(),this.croppr=null,t&&this.$nextTick((function(){e.croppr=new m(e.$refs.cropModalImage,{onCropEnd:function(t){e.newCrop=t},onInitialize:function(t){e.newCrop&&t.setBoxToRealPosition(e.newCrop)}})}))}},methods:{handleScroll:function(){"undefined"!=typeof window&&(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,document.body.classList.toggle("is-noscroll",this.isActive),this.isActive?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null))},cropImage:function(){this.$emit("update:crop",this.newCrop),this.close()},ctrlIsPressed:function(t){17==t.which&&this.croppr&&(this.croppr.options.aspectRatio=this.croppr.box.height()/this.croppr.box.width())},ctrlIsNotPressed:function(t){17==t.which&&this.croppr&&(this.croppr.options.aspectRatio=null)}}};var g=n(1900);const b={name:"nzPhotoUpload",components:{NzImageCropModal:(0,g.Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation}},[t.isActive?n("div",{staticClass:"modal is-active"},[n("div",{staticClass:"modal-background"}),t._v(" "),n("div",{staticClass:"animation-content modal-content",style:{maxWidth:t.newWidth}},[n("img",{ref:"cropModalImage",staticClass:"image",attrs:{src:t.imageUrl,alt:"Cropped image"}})]),t._v(" "),n("button",{staticClass:"modal-close is-large",attrs:{type:"button"},on:{click:function(e){return t.cancel("x")}}}),t._v(" "),n("button",{staticClass:"modal-action",attrs:{type:"button"},on:{click:t.cropImage}},[n("b-icon",{attrs:{icon:"check"}})],1)]):t._e()])}),[],!1,null,null,null).exports,NzImageModal:n(1417).Z},props:{imageUrl:{type:String,default:null},imagePath:{type:String,default:null},imageLicense:{type:[Number,String],default:null},licenses:{type:Object,required:!0},text:String,withLicense:{type:Boolean,default:!0},withCrop:{type:Boolean,default:!0}},data:function(){return{image:{url:this.imageUrl,path:this.imagePath,crop:null,license:this.imageLicense},croppedImageUrl:null,reader:null,uploading:!1,loading:!1,progress:0,hasExisting:!!this.imageUrl,error:null,showCropModal:!1,showModal:!1}},watch:{"image.crop":function(t){this.$emit("cropped",this.image),t?this.cropThumbnail(t):this.croppedImageUrl=null}},computed:{haveImage:function(){return!!this.image.url},thumbnailUrl:function(){return this.croppedImageUrl||this.image.url}},methods:{selectImage:function(){this.$refs.input.click()},onInput:function(t){this.error=null,t&&this.upload(t)},upload:function(t){var e=this;return this.uploading=!0,axios.post(route("api.photo-uploads.store"),this.makeForm(t),{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},onUploadProgress:function(t){e.progress=Math.floor(100*t.loaded/t.total)}}).then((function(n){e.image.path=n.data.file,e.image.exif=n.data.exif,e.image.license=null,e.uploading=!1,e.progress=0,e.$emit("uploaded",e.image),e.loading=!0,o()(t,(function(t){e.image.url=e.getImageDataUrl(t),e.loading=!1}),{orientation:!0})})).catch(this.handleError)},getImageDataUrl:function(t){var e=t;return e instanceof HTMLCanvasElement||((e=document.createElement("canvas")).setAttribute("width",t.width),e.setAttribute("height",t.height),e.getContext("2d").drawImage(t,0,0)),e.toDataURL()},makeForm:function(t){var e=new FormData;return e.append("file",t),e},remove:function(){var t=this;if(this.hasExisting)return this.hasExisting=!1,this.clearPhoto();axios.delete(route("api.photo-uploads.destroy",this.image.path)).then((function(){t.clearPhoto()}))},clearPhoto:function(){this.$emit("removed",this.image),this.image.path=null,this.image.url=null,this.image.crop=null,this.image.license=null,this.croppedImageUrl=null},handleError:function(t){if(this.uploading=!1,this.loading=!1,this.progress=0,this.image.url=null,this.$el.querySelector('input[type="file"]').value="",!t.response)return this.$buefy.toast.open({duration:5e3,message:t.message,position:"is-top",type:"is-danger"});this.error=t.response.data.errors.file[0]||this.trans("Error")},openCropModal:function(){this.showCropModal=!0},closeCropModal:function(){this.showCropModal=!1},cropThumbnail:function(t){var e=document.createElement("img");e.src=this.image.url;var n=document.createElement("canvas");n.setAttribute("width",t.width),n.setAttribute("height",t.height),n.getContext("2d").drawImage(e,-t.x,-t.y),this.croppedImageUrl=n.toDataURL()},handleLicenseChanged:function(t){this.image.license=t,this.$emit("license-changed",t)}}};const y=(0,g.Z)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.haveImage?n("div",{staticClass:"card"},[n("div",{staticClass:"card-image"},[n("figure",{staticClass:"has-magnifier has-text-centered",on:{click:function(e){t.showModal=!0}}},[n("img",{staticClass:"max-h-36",attrs:{src:t.thumbnailUrl,alt:"Uploaded photo"}}),t._v(" "),n("div",{staticClass:"image-magnifier"},[n("b-icon",{attrs:{icon:"expand",size:"is-medium"}})],1)])]),t._v(" "),t.haveImage?n("footer",{staticClass:"card-footer"},[n("div",{staticClass:"card-footer-item flex-col"},[n("div",{staticClass:"mb-4 w-full flex justify-between"},[t.withCrop?n("button",{staticClass:"button is-outlined is-small mr-2",attrs:{type:"button"},on:{click:t.openCropModal,close:t.closeCropModal}},[n("b-icon",{attrs:{icon:"crop"}})],1):t._e(),t._v(" "),t.image.path||t.hasExisting?n("button",{staticClass:"delete is-danger is-medium",attrs:{type:"button"},on:{click:t.remove}}):t._e()]),t._v(" "),t.withLicense?n("div",{staticClass:"w-full"},[n("b-select",{attrs:{value:t.image.license,expanded:""},on:{input:t.handleLicenseChanged}},[n("option",{domProps:{value:null}},[t._v(t._s(t.trans("labels.field_observations.default")))]),t._v(" "),t._l(t.licenses,(function(e,i){return n("option",{key:i,domProps:{value:i,textContent:t._s(e)}})}))],2)],1):t._e()])]):t._e(),t._v(" "),t.haveImage?n("nz-image-crop-modal",{attrs:{active:t.showCropModal,crop:t.image.crop,"image-url":t.image.url},on:{"update:active":function(e){t.showCropModal=e},"update:crop":function(e){return t.$set(t.image,"crop",e)}}}):t._e(),t._v(" "),t.showModal?n("nz-image-modal",{attrs:{items:[t.thumbnailUrl]},on:{close:function(e){t.showModal=!1}}}):t._e()],1):n("b-field",{attrs:{message:t.error||null,type:t.error?"is-danger":null,expanded:""}},[n("b-upload",{attrs:{"drag-drop":"",expanded:"",disabled:t.uploading||t.loading},on:{input:t.onInput}},[n("section",{ref:"uploadZone",staticClass:"section is-relative"},[n("div",{staticClass:"has-text-centered"},[n("div",[n("b-icon",{attrs:{icon:"upload",size:"is-medium"}})],1),t._v(" "),t.uploading?n("progress",{staticClass:"progress is-primary is-small",attrs:{max:"100"},domProps:{value:t.progress}},[t._v(t._s(t.progress)+"%")]):t.loading?n("div",[t._v(t._s(t.trans("Loading...")))]):n("div",[t._v(t._s(t.text))])])])])],1)}),[],!1,null,null,null).exports},8597:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(3279),o=n.n(i);const r={name:"nzSpatialInput",props:{accuracy:Number,elevation:{type:Number,default:100},latitude:{type:Number,default:41},longitude:{type:Number,default:19},location:{type:[String,Number],default:""},errors:{type:Object,default:function(){return{}}},hasOtherErrors:{type:Boolean,default:!1}},data:function(){return{emptyAccuracy:this.calculateEmptyAccuracy(window.App.gmaps.center.zoom),showDetails:!1,elevationService:null,center:window.App.gmaps.center}},computed:{position:function(){return this.coordinatesSet?{lat:this.latitude,lng:this.longitude}:null},coordinatesSet:function(){return!(isNaN(this.latitude)||null===this.latitude||isNaN(this.longitude)||null===this.longitude)},mapHasErrors:function(){return this.hasOtherErrors||this.errors.has("latitude")||this.errors.has("longitude")||this.errors.has("elevation")||this.errors.has("accuracy")||this.errors.has("location")},newAccuracy:function(){return this.accuracy||this.emptyAccuracy},centerCoordinates:function(){return this.position||{lat:this.center.latitude,lng:this.center.longitude}}},watch:{position:function(t){this.coordinatesSet&&this.getElevation(t)}},created:function(){this.setCurrentLocationAsMapCenter()},methods:{castNumber:function(t){return isNaN(t)||""===t?null:Number(t)},onLocationInput:function(t){this.updateLocation(t.target.value)},updateLocation:function(t){this.$emit("update:location",t)},onLongitudeInput:o()((function(t){this.updateLongitude(t.target.value)}),1e3),updateLongitude:function(t){this.$emit("update:longitude",this.castNumber(t))},onLatitudeInput:o()((function(t){this.updateLatitude(t.target.value)}),1e3),updateLatitude:function(t){this.$emit("update:latitude",this.castNumber(t))},onAccuracyInput:o()((function(t){this.updateAccuracy(t.target.value)}),1e3),updateAccuracy:function(t){this.$emit("update:accuracy",this.castNumber(t))},onElevationInput:function(t){this.updateElevation(t.target.value)},updateElevation:function(t){this.$emit("update:elevation",this.castNumber(t))},setMarker:function(t){var e=t.latLng.lat(),n=t.latLng.lng();this.updateLatitude(e),this.updateLongitude(n)},updateRadius:function(t){var e=parseInt(t);null===this.accuracy&&e===this.emptyAccuracy||this.updateAccuracy(e)},getElevation:function(t){var e=this;google&&google.maps&&google.maps.ElevationService&&(this.elevationService||(this.elevationService=new google.maps.ElevationService),this.elevationService.getElevationForLocations({locations:[t]},(function(t,n){if(n==google.maps.ElevationStatus.OK&&t.length){var i=parseInt(t[0].elevation);e.$emit("elevation-fetched",i),e.updateElevation(i)}})))},onZoomChanged:function(t){this.emptyAccuracy=this.calculateEmptyAccuracy(t)},calculateEmptyAccuracy:function(t){return parseInt(6144e3/Math.pow(2,t))},setCurrentLocationAsMapCenter:function(){var t=this;navigator.geolocation&&!this.position&&navigator.geolocation.getCurrentPosition((function(e){t.position||(t.center.latitude=e.coords.latitude,t.center.longitude=e.coords.longitude,t.center.zoom=10)}))}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spatial-input"},[n("b-field",{staticClass:"is-required",attrs:{label:t.trans("labels.field_observations.map")}},[n("gmap-map",{staticStyle:{width:"100%","min-height":"400px"},attrs:{center:t.centerCoordinates,zoom:t.center.zoom,options:{streetViewControl:!1}},on:{click:t.setMarker,zoom_changed:t.onZoomChanged}},[n("gmap-marker",{attrs:{position:t.position,clickable:!0,draggable:!0},on:{dragend:t.setMarker}}),t._v(" "),t.position&&t.newAccuracy?n("gmap-circle",{attrs:{center:t.position,radius:t.newAccuracy,editable:!0,options:{strokeWeight:.75}},on:{radius_changed:t.updateRadius}}):t._e()],1)],1),t._v(" "),n("div",{staticClass:"has-text-right"},[t.mapHasErrors?n("span",{staticClass:"has-text-danger is-size-7"},[t._v(t._s(t.trans("Some fields have errors")))]):t._e(),t._v(" "),n("button",{staticClass:"button is-white is-small is-text",class:{"has-text-danger":t.mapHasErrors},attrs:{type:"button"},on:{click:function(e){t.showDetails=!t.showDetails}}},[t._v(t._s(t.trans("labels.field_observations.details")))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}]},[n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"field is-expanded is-required"},[n("label",{staticClass:"label is-small"},[t._v(t._s(t.trans("labels.field_observations.latitude")))]),t._v(" "),n("div",{staticClass:"control is-fullwidth"},[n("input",{staticClass:"input is-small",class:{"is-danger":t.errors.has("latitude")},attrs:{placeholder:"f.e. 42.5234"},domProps:{value:t.latitude},on:{input:t.onLatitudeInput}})]),t._v(" "),t.errors.has("latitude")?n("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.errors.first("latitude"))}}):t._e()]),t._v(" "),n("div",{staticClass:"field is-expanded is-required"},[n("label",{staticClass:"label is-small"},[t._v(t._s(t.trans("labels.field_observations.longitude")))]),t._v(" "),n("div",{staticClass:"control is-fullwidth"},[n("input",{staticClass:"input is-small",class:{"is-danger":t.errors.has("longitude")},attrs:{placeholder:"f.e. 19.1234"},domProps:{value:t.longitude},on:{input:t.onLongitudeInput}})]),t._v(" "),t.errors.has("longitude")?n("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.errors.first("longitude"))}}):t._e()])]),t._v(" "),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"field is-expanded"},[n("label",{staticClass:"label is-small"},[t._v(t._s(t.trans("labels.field_observations.accuracy_m")))]),t._v(" "),n("div",{staticClass:"control is-fullwidth"},[n("input",{staticClass:"input is-small",attrs:{placeholder:"f.e. 100"},domProps:{value:t.accuracy},on:{input:t.onAccuracyInput}})]),t._v(" "),t.errors.has("accuracy")?n("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.errors.first("accuracy"))}}):t._e()]),t._v(" "),n("div",{staticClass:"field is-expanded is-required"},[n("label",{staticClass:"label is-small"},[t._v(t._s(t.trans("labels.field_observations.elevation_m")))]),t._v(" "),n("div",{staticClass:"control is-fullwidth"},[n("input",{staticClass:"input is-small",attrs:{placeholder:"f.e. 500"},domProps:{value:t.elevation},on:{input:t.onElevationInput}})]),t._v(" "),t.errors.has("elevation")?n("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.errors.first("elevation"))}}):t._e()])]),t._v(" "),n("div",{staticClass:"field is-expanded"},[n("label",{staticClass:"label is-small"},[t._v(t._s(t.trans("labels.field_observations.location")))]),t._v(" "),n("div",{staticClass:"control is-fullwidth"},[n("input",{staticClass:"input is-small",class:{"is-danger":t.errors.has("location")},attrs:{placeholder:"Location"},domProps:{value:t.location},on:{input:t.onLocationInput}})]),t._v(" "),t.errors.has("location")?n("p",{staticClass:"help is-danger",domProps:{textContent:t._s(t.errors.first("location"))}}):t._e()]),t._v(" "),t._t("default")],2)],1)}),[],!1,null,null,null).exports},8836:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(9669),o=n.n(i),r=n(3279),a=n.n(r),s=n(7361),l=n.n(s);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const u={name:"nzTaxonAutocomplete",props:{label:{type:String,default:"Taxon"},placeholder:{type:String,default:"Search for taxon..."},taxon:{type:Object,default:null},url:{type:String,default:function(){return route("api.taxa.index")}},value:{type:String,default:""},error:Boolean,message:{type:String,default:null},except:{},autofocus:Boolean},data:function(){return{data:[],selected:this.taxon||null,loading:!1,page:1,isLastPage:!1}},computed:{haveThumbnail:function(){return this.selected&&this.selected.thumbnail_url},icon:function(){return this.selected?"check":"search"}},watch:{taxon:function(t){this.selected=t}},methods:{fetchData:a()((function(){var t=this;if(this.value&&!this.isLastPage){this.loading=!0;var e={name:this.value,limit:20,page:this.page};this.except&&(e.except=this.except),o().get(this.url,{params:e}).then((function(e){var n=e.data;n.data.forEach((function(e){return t.data.push(e)})),t.isLastPage=n.meta.last_page<=t.page,t.loading=!1}),(function(e){t.loading=!1}))}}),500),onSelect:function(t){this.selected=t,this.$emit("select",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e!==t&&this.onSelect(null),this.$emit("input",t),this.page=1,this.data=[],this.isLastPage=!1,this.fetchData()},focusOnInput:function(){this.$el.querySelector("input").focus()},getValue:function(t){if(t)return"object"===c(t)?l()(t,"name"):t},enterPressed:function(){this.$refs.autocomplete.isActive||this.$emit("name")},loadMore:function(){this.isLastPage||(this.page++,this.fetchData())}}};const h=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{staticClass:"nz-taxon-autocomplete",attrs:{label:t.label,type:t.error?"is-danger":null,message:t.message}},[n("b-field",{attrs:{grouped:""}},[t.haveThumbnail?n("img",{attrs:{width:"32",src:this.selected.thumbnail_url}}):t._e(),t._v(" "),n("b-autocomplete",{ref:"autocomplete",class:[t.selected?"has-icon-success":""],attrs:{value:t.value,data:t.data,field:"name",loading:t.loading,icon:t.icon,placeholder:t.placeholder,expanded:"",autofocus:t.autofocus,"check-infinite-scroll":""},on:{input:t.onInput,select:t.onSelect,"infinite-scroll":t.loadMore},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterPressed(e)}},scopedSlots:t._u([{key:"detault",fn:function(e){var i=e.option;return[n("div",{staticClass:"media"},[n("div",{staticClass:"media-left"},[i.thumbnail_url?n("img",{attrs:{width:"32",src:i.thumbnail_url}}):t._e()]),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n            "+t._s(i.name)+t._s(i.native_name?" ("+i.native_name+")":"")+"\n          ")])])]}}])})],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=03b243baa958c3be3ee1.js.map