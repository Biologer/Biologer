{"version":3,"sources":["webpack:///./node_modules/blueimp-load-image/js/index.js","webpack:///./node_modules/blueimp-load-image/js/load-image-iptc-map.js","webpack:///./node_modules/blueimp-load-image/js/load-image-meta.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/blueimp-load-image/js/load-image.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/pick.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/croppr/src/box.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/isEqual.js","webpack:///./node_modules/blueimp-load-image/js/load-image-exif.js","webpack:///./node_modules/blueimp-load-image/js/load-image-exif-map.js","webpack:///./node_modules/croppr/dist/croppr.js","webpack:///./node_modules/blueimp-load-image/js/load-image-orientation.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/blueimp-load-image/js/load-image-iptc.js","webpack:///./node_modules/blueimp-load-image/js/load-image-scale.js","webpack:///./node_modules/blueimp-load-image/js/load-image-fetch.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/_flatRest.js"],"names":["module","exports","factory","loadImage","IptcMap","prototype","tags","getText","id","value","this","get","String","iptcMapPrototype","prop","map","Object","hasOwnProperty","call","getAll","hasblobSlice","Blob","slice","webkitSlice","mozSlice","blobSlice","apply","arguments","metaDataParsers","jpeg","parseMetaData","file","callback","options","data","that","maxMetaDataSize","DataView","size","type","readFile","e","target","error","console","log","markerBytes","markerLength","parsers","i","buffer","result","dataView","offset","maxOffset","byteLength","headLength","getUint16","length","disableImageHead","imageHead","Uint8Array","subarray","hasMetaOption","meta","originalTransform","transform","img","Symbol","isArguments","isArray","spreadableSymbol","isConcatSpreadable","undefined","$","url","document","createElement","onerror","event","onload","fetchBlob","blob","isInstanceOf","createObjectURL","crossOrigin","src","_objectURL","urlAPI","URL","revokeObjectURL","webkitURL","revokeHelper","noRevoke","obj","toString","originalWidth","naturalWidth","width","originalHeight","naturalHeight","height","method","FileReader","fileReader","window","assignValue","castPath","isIndex","isObject","toKey","object","path","customizer","index","lastIndex","nested","key","newValue","objValue","basePickBy","hasIn","paths","basePick","pick","flatRest","root","Date","now","Box","x1","y1","x2","y2","Math","abs","newWidth","newHeight","origin","fromX","fromY","factor","resize","x","y","point","ratio","grow","boundaryWidth","boundaryHeight","originX","originY","getAbsolutePoint","maxIfLeft","maxIfTop","maxIfRight","maxIfBottom","directionX","directionY","maxWidth","maxHeight","min","scale","minWidth","minHeight","baseFlatten","array","arrayPush","isFlattenable","depth","predicate","isStrict","baseIsEqual","other","ExifMap","Orientation","getExifThumbnail","exifTagTypes","1","getValue","dataOffset","getUint8","2","fromCharCode","ascii","3","littleEndian","4","getUint32","5","9","getInt32","10","getExifValue","tiffOffset","tagSize","values","str","c","tagType","parseExifTag","tag","exif","parseExifTags","dirOffset","tagsNumber","dirEndOffset","parseExifData","disableExif","thumbnailData","disableExifThumbnail","Thumbnail","disableExifSub","disableExifGps","push","0","stringValues","ExposureProgram","6","7","8","MeteringMode","255","LightSource","11","12","13","14","15","17","18","19","20","21","22","23","24","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","ComponentsConfiguration","exifMapPrototype","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","element","currTime","getTime","timeToCall","max","setTimeout","clearTimeout","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","MouseEvent","eventType","mouseEvent","initMouseEvent","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","possibleConstructorReturn","self","ReferenceError","slicedToArray","arr","Array","iterator","_arr","_n","_d","_e","_s","_i","next","done","err","sliceIterator","Handle","position","constraints","cursor","eventBus","onMouseUp","stopPropagation","removeEventListener","onMouseMove","dispatchEvent","handle","mouseX","clientX","mouseY","clientY","el","className","style","addEventListener","_getAbsolutePoint","_getAbsolutePoint2","_factor","_newWidth","_newHeight","_newWidth2","_newHeight2","_newWidth3","_newHeight3","simulateMouseEvent","preventDefault","touch","changedTouches","view","screenX","screenY","HANDLES","round","decimals","Number","_CropprCore","Croppr","_deferred","__proto__","subClass","superClass","create","constructor","setPrototypeOf","inherits","mode","box","move","redraw","onCropEnd","initializeBox","CropprCore","_this","deferred","parseOptions","nodeName","querySelector","getAttribute","_initialized","_restore","parentNode","initialize","createDOM","convertToPixels","cropperEl","attachHandlerEvents","attachRegionEvents","attachOverlayEvents","onInitialize","targetEl","containerEl","imageEl","setAttribute","imageClippedEl","cloneNode","regionEl","overlayEl","handleContainerEl","handles","appendChild","parentElement","replaceChild","_this2","opts","startSize","constrainToRatio","aspectRatio","minSize","maxSize","constrainToSize","parentWidth","offsetWidth","parentHeight","offsetHeight","constrainToBoundary","_this3","clip","center","xSign","ySign","foregroundHandleIndex","handleWidth","handleHeight","left","top","zIndex","onHandleMoveStart","bind","onHandleMoveMoving","onHandleMoveEnd","onRegionMoveStart","onRegionMoveMoving","onRegionMoveEnd","tmpBox","container","getBoundingClientRect","originPoint","_box$getAbsolutePoint","_box$getAbsolutePoint2","activeHandle","onCropStart","_e$detail","TOP_MOVABLE","RIGHT_MOVABLE","BOTTOM_MOVABLE","LEFT_MOVABLE","MULTI_AXIS","isFlippedX","isFlippedY","tmp","_tmp","isVerticalMovement","ratioMode","onCropMove","_e$detail2","currentMove","offsetX","offsetY","_e$detail3","_currentMove","returnMode","actualWidth","actualHeight","_imageEl$getBoundingC","elementWidth","elementHeight","factorX","factorY","_imageEl$getBoundingC2","_elementWidth","_elementHeight","defaults$$1","unit","onUpdate","warn","s","toLowerCase","indexOf","defaultValue","v","d","sizeKeys","originalHasCanvasOption","hasCanvasOption","originalHasMetaOption","originalTransformCoordinates","transformCoordinates","originalGetTransformedOptions","getTransformedOptions","orientation","canvas","ctx","getContext","styleWidth","styleHeight","translate","rotate","PI","newOptions","right","bottom","sourceWidth","sourceHeight","baseGet","baseSet","ObjectName","parseIptcTags","startOffset","sectionLength","getStringFromDB","start","outstr","n","fieldValue","dataSize","segmentType","segmentStartPos","iptc","getInt16","parseIptcData","disableIptc","isFieldSegmentStart","nameHeaderLength","crop","renderImageToCanvas","sourceX","sourceY","destX","destY","destWidth","destHeight","drawImage","pixelRatio","downsamplingRatio","useCanvas","scaleUp","scaleDown","contain","cover","fetch","Request","then","response","catch","XMLHttpRequest","ProgressEvent","req","open","headers","keys","forEach","setRequestHeader","withCredentials","credentials","responseType","onabort","ontimeout","send","body","toNumber","nativeMax","nativeMin","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","flush","flatten","overRest","setToString"],"mappings":"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","file":"js/5.js?id=4b013c7b956ae58061c4","sourcesContent":["/* global module, require */\n\nmodule.exports = require('./load-image')\n\nrequire('./load-image-scale')\nrequire('./load-image-meta')\nrequire('./load-image-fetch')\nrequire('./load-image-exif')\nrequire('./load-image-exif-map')\nrequire('./load-image-iptc')\nrequire('./load-image-iptc-map')\nrequire('./load-image-orientation')\n","/*\n * JavaScript Load Image IPTC Map\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * Copyright 2018, Dave Bevan\n *\n * IPTC tags mapping based on\n * https://github.com/jseidelin/exif-js\n * https://iptc.org/standards/photo-metadata\n * http://www.iptc.org/std/IIM/4.1/specification/IIMV4.1.pdf\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-iptc'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-iptc'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  loadImage.IptcMap.prototype.tags = {\n    // ==========\n    // IPTC tags:\n    // ==========\n    0x03: 'ObjectType',\n    0x04: 'ObjectAttribute',\n    0x05: 'ObjectName',\n    0x07: 'EditStatus',\n    0x08: 'EditorialUpdate',\n    0x0a: 'Urgency',\n    0x0c: 'SubjectRef',\n    0x0f: 'Category',\n    0x14: 'SupplCategory',\n    0x16: 'FixtureID',\n    0x19: 'Keywords',\n    0x1a: 'ContentLocCode',\n    0x1b: 'ContentLocName',\n    0x1e: 'ReleaseDate',\n    0x23: 'ReleaseTime',\n    0x25: 'ExpirationDate',\n    0x26: 'ExpirationTime',\n    0x28: 'SpecialInstructions',\n    0x2a: 'ActionAdvised',\n    0x2d: 'RefService',\n    0x2f: 'RefDate',\n    0x32: 'RefNumber',\n    0x37: 'DateCreated',\n    0x3c: 'TimeCreated',\n    0x3e: 'DigitalCreationDate',\n    0x3f: 'DigitalCreationTime',\n    0x41: 'OriginatingProgram',\n    0x46: 'ProgramVersion',\n    0x4b: 'ObjectCycle',\n    0x50: 'Byline',\n    0x55: 'BylineTitle',\n    0x5a: 'City',\n    0x5c: 'Sublocation',\n    0x5f: 'State',\n    0x64: 'CountryCode',\n    0x65: 'CountryName',\n    0x67: 'OrigTransRef',\n    0x69: 'Headline',\n    0x6e: 'Credit',\n    0x73: 'Source',\n    0x74: 'CopyrightNotice',\n    0x76: 'Contact',\n    0x78: 'Caption',\n    0x7a: 'WriterEditor',\n    0x82: 'ImageType',\n    0x83: 'ImageOrientation',\n    0x87: 'LanguageID'\n\n    // We don't record these tags:\n    //\n    // 0x00: 'RecordVersion',\n    // 0x7d: 'RasterizedCaption',\n    // 0x96: 'AudioType',\n    // 0x97: 'AudioSamplingRate',\n    // 0x98: 'AudioSamplingRes',\n    // 0x99: 'AudioDuration',\n    // 0x9a: 'AudioOutcue',\n    // 0xc8: 'PreviewFileFormat',\n    // 0xc9: 'PreviewFileFormatVer',\n    // 0xca: 'PreviewData'\n  }\n\n  loadImage.IptcMap.prototype.getText = function(id) {\n    var value = this.get(id)\n    return String(value)\n  }\n  ;(function(iptcMapPrototype) {\n    var tags = iptcMapPrototype.tags\n    var map = iptcMapPrototype.map || {}\n    var prop\n    // Map the tag names to tags:\n    for (prop in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, prop)) {\n        map[tags[prop]] = prop\n      }\n    }\n  })(loadImage.IptcMap.prototype)\n\n  loadImage.IptcMap.prototype.getAll = function() {\n    var map = {}\n    var prop\n    var id\n    for (prop in this) {\n      if (Object.prototype.hasOwnProperty.call(this, prop)) {\n        id = this.tags[prop]\n        if (id) {\n          map[id] = this.getText(id)\n        }\n      }\n    }\n    return map\n  }\n})\n","/*\n * JavaScript Load Image Meta\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Image meta data handling implementation\n * based on the help and contribution of\n * Achim Stöhr.\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, DataView, Uint8Array */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  var hasblobSlice =\n    typeof Blob !== 'undefined' &&\n    (Blob.prototype.slice ||\n      Blob.prototype.webkitSlice ||\n      Blob.prototype.mozSlice)\n\n  loadImage.blobSlice =\n    hasblobSlice &&\n    function() {\n      var slice = this.slice || this.webkitSlice || this.mozSlice\n      return slice.apply(this, arguments)\n    }\n\n  loadImage.metaDataParsers = {\n    jpeg: {\n      0xffe1: [], // APP1 marker\n      0xffed: [] // APP13 marker\n    }\n  }\n\n  // Parses image meta data and calls the callback with an object argument\n  // with the following properties:\n  // * imageHead: The complete image head as ArrayBuffer (Uint8Array for IE10)\n  // The options argument accepts an object and supports the following\n  // properties:\n  // * maxMetaDataSize: Defines the maximum number of bytes to parse.\n  // * disableImageHead: Disables creating the imageHead property.\n  loadImage.parseMetaData = function(file, callback, options, data) {\n    // eslint-disable-next-line no-param-reassign\n    options = options || {}\n    // eslint-disable-next-line no-param-reassign\n    data = data || {}\n    var that = this\n    // 256 KiB should contain all EXIF/ICC/IPTC segments:\n    var maxMetaDataSize = options.maxMetaDataSize || 262144\n    var noMetaData = !(\n      typeof DataView !== 'undefined' &&\n      file &&\n      file.size >= 12 &&\n      file.type === 'image/jpeg' &&\n      loadImage.blobSlice\n    )\n    if (\n      noMetaData ||\n      !loadImage.readFile(\n        loadImage.blobSlice.call(file, 0, maxMetaDataSize),\n        function(e) {\n          if (e.target.error) {\n            // FileReader error\n            // eslint-disable-next-line no-console\n            console.log(e.target.error)\n            callback(data)\n            return\n          }\n          // Note on endianness:\n          // Since the marker and length bytes in JPEG files are always\n          // stored in big endian order, we can leave the endian parameter\n          // of the DataView methods undefined, defaulting to big endian.\n          var buffer = e.target.result\n          var dataView = new DataView(buffer)\n          var offset = 2\n          var maxOffset = dataView.byteLength - 4\n          var headLength = offset\n          var markerBytes\n          var markerLength\n          var parsers\n          var i\n          // Check for the JPEG marker (0xffd8):\n          if (dataView.getUint16(0) === 0xffd8) {\n            while (offset < maxOffset) {\n              markerBytes = dataView.getUint16(offset)\n              // Search for APPn (0xffeN) and COM (0xfffe) markers,\n              // which contain application-specific meta-data like\n              // Exif, ICC and IPTC data and text comments:\n              if (\n                (markerBytes >= 0xffe0 && markerBytes <= 0xffef) ||\n                markerBytes === 0xfffe\n              ) {\n                // The marker bytes (2) are always followed by\n                // the length bytes (2), indicating the length of the\n                // marker segment, which includes the length bytes,\n                // but not the marker bytes, so we add 2:\n                markerLength = dataView.getUint16(offset + 2) + 2\n                if (offset + markerLength > dataView.byteLength) {\n                  // eslint-disable-next-line no-console\n                  console.log('Invalid meta data: Invalid segment size.')\n                  break\n                }\n                parsers = loadImage.metaDataParsers.jpeg[markerBytes]\n                if (parsers) {\n                  for (i = 0; i < parsers.length; i += 1) {\n                    parsers[i].call(\n                      that,\n                      dataView,\n                      offset,\n                      markerLength,\n                      data,\n                      options\n                    )\n                  }\n                }\n                offset += markerLength\n                headLength = offset\n              } else {\n                // Not an APPn or COM marker, probably safe to\n                // assume that this is the end of the meta data\n                break\n              }\n            }\n            // Meta length must be longer than JPEG marker (2)\n            // plus APPn marker (2), followed by length bytes (2):\n            if (!options.disableImageHead && headLength > 6) {\n              if (buffer.slice) {\n                data.imageHead = buffer.slice(0, headLength)\n              } else {\n                // Workaround for IE10, which does not yet\n                // support ArrayBuffer.slice:\n                data.imageHead = new Uint8Array(buffer).subarray(0, headLength)\n              }\n            }\n          } else {\n            // eslint-disable-next-line no-console\n            console.log('Invalid JPEG file: Missing JPEG marker.')\n          }\n          callback(data)\n        },\n        'readAsArrayBuffer'\n      )\n    ) {\n      callback(data)\n    }\n  }\n\n  // Determines if meta data should be loaded automatically:\n  loadImage.hasMetaOption = function(options) {\n    return options && options.meta\n  }\n\n  var originalTransform = loadImage.transform\n  loadImage.transform = function(img, options, callback, file, data) {\n    if (loadImage.hasMetaOption(options)) {\n      loadImage.parseMetaData(\n        file,\n        function(data) {\n          originalTransform.call(loadImage, img, options, callback, file, data)\n        },\n        options,\n        data\n      )\n    } else {\n      originalTransform.apply(loadImage, arguments)\n    }\n  }\n})\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","/*\n * JavaScript Load Image\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, webkitURL, module */\n\n;(function($) {\n  'use strict'\n\n  /**\n   * Loads an image for a given File object.\n   * Invokes the callback with an img or optional canvas element\n   * (if supported by the browser) as parameter:.\n   *\n   * @param {File|Blob|string} file File or Blob object or image URL\n   * @param {Function} [callback] Image load event callback\n   * @param {object} [options] Options object\n   * @returns {HTMLImageElement|HTMLCanvasElement|FileReader} image object\n   */\n  function loadImage(file, callback, options) {\n    var img = document.createElement('img')\n    var url\n    img.onerror = function(event) {\n      return loadImage.onerror(img, event, file, callback, options)\n    }\n    img.onload = function(event) {\n      return loadImage.onload(img, event, file, callback, options)\n    }\n    if (typeof file === 'string') {\n      loadImage.fetchBlob(\n        file,\n        function(blob) {\n          if (blob && loadImage.isInstanceOf('Blob', blob)) {\n            // eslint-disable-next-line no-param-reassign\n            file = blob\n            url = loadImage.createObjectURL(file)\n          } else {\n            url = file\n            if (options && options.crossOrigin) {\n              img.crossOrigin = options.crossOrigin\n            }\n          }\n          img.src = url\n        },\n        options\n      )\n      return img\n    } else if (\n      loadImage.isInstanceOf('Blob', file) ||\n      // Files are also Blob instances, but some browsers\n      // (Firefox 3.6) support the File API but not Blobs:\n      loadImage.isInstanceOf('File', file)\n    ) {\n      url = img._objectURL = loadImage.createObjectURL(file)\n      if (url) {\n        img.src = url\n        return img\n      }\n      return loadImage.readFile(file, function(e) {\n        var target = e.target\n        if (target && target.result) {\n          img.src = target.result\n        } else if (callback) {\n          callback(e)\n        }\n      })\n    }\n  }\n  // The check for URL.revokeObjectURL fixes an issue with Opera 12,\n  // which provides URL.createObjectURL but doesn't properly implement it:\n  var urlAPI =\n    ($.createObjectURL && $) ||\n    ($.URL && URL.revokeObjectURL && URL) ||\n    ($.webkitURL && webkitURL)\n\n  /**\n   * Helper function to revoke an object URL\n   *\n   * @param {HTMLImageElement} img Image element\n   * @param {object} [options] Options object\n   */\n  function revokeHelper(img, options) {\n    if (img._objectURL && !(options && options.noRevoke)) {\n      loadImage.revokeObjectURL(img._objectURL)\n      delete img._objectURL\n    }\n  }\n\n  // If the callback given to this function returns a blob, it is used as image\n  // source instead of the original url and overrides the file argument used in\n  // the onload and onerror event callbacks:\n  loadImage.fetchBlob = function(url, callback) {\n    callback()\n  }\n\n  loadImage.isInstanceOf = function(type, obj) {\n    // Cross-frame instanceof check\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']'\n  }\n\n  loadImage.transform = function(img, options, callback, file, data) {\n    callback(img, data)\n  }\n\n  loadImage.onerror = function(img, event, file, callback, options) {\n    revokeHelper(img, options)\n    if (callback) {\n      callback.call(img, event)\n    }\n  }\n\n  loadImage.onload = function(img, event, file, callback, options) {\n    revokeHelper(img, options)\n    if (callback) {\n      loadImage.transform(img, options, callback, file, {\n        originalWidth: img.naturalWidth || img.width,\n        originalHeight: img.naturalHeight || img.height\n      })\n    }\n  }\n\n  loadImage.createObjectURL = function(file) {\n    return urlAPI ? urlAPI.createObjectURL(file) : false\n  }\n\n  loadImage.revokeObjectURL = function(url) {\n    return urlAPI ? urlAPI.revokeObjectURL(url) : false\n  }\n\n  // Loads a given File object via FileReader interface,\n  // invokes the callback with the event object (load or error).\n  // The result can be read via event.target.result:\n  loadImage.readFile = function(file, callback, method) {\n    if ($.FileReader) {\n      var fileReader = new FileReader()\n      fileReader.onload = fileReader.onerror = callback\n      // eslint-disable-next-line no-param-reassign\n      method = method || 'readAsDataURL'\n      if (fileReader[method]) {\n        fileReader[method](file)\n        return fileReader\n      }\n    }\n    return false\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return loadImage\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = loadImage\n  } else {\n    $.loadImage = loadImage\n  }\n})((typeof window !== 'undefined' && window) || this)\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/**\n * Box component\n */\nexport default class Box {\n  /**\n   * Creates a new Box instance.\n   * @constructor\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  constructor(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n\n  /** \n   * Sets the new dimensions of the box.\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  set(x1 = null, y1 = null, x2 = null, y2 = null) {\n    this.x1 = x1 == null ? this.x1 : x1;\n    this.y1 = y1 == null ? this.y1 : y1;\n    this.x2 = x2 == null ? this.x2 : x2;\n    this.y2 = y2 == null ? this.y2 : y2;\n    return this;\n  }\n\n  /**\n   * Calculates the width of the box.\n   * @returns {Number}\n   */\n  width() {\n    return Math.abs(this.x2 - this.x1);\n  }\n\n  /**\n   * Calculates the height of the box.\n   * @returns {Number}\n   */\n  height() {\n    return Math.abs(this.y2 - this.y1);\n  }\n\n  /**\n   * Resizes the box to a new size.\n   * @param {Number} newWidth\n   * @param {Number} newHeight\n   * @param {Array} [origin] The origin point to resize from.\n   *      Defaults to [0, 0] (top left).\n   */\n  resize(newWidth, newHeight, origin = [0, 0]) {\n    const fromX = this.x1 + (this.width() * origin[0]);\n    const fromY = this.y1 + (this.height() * origin[1]);\n\n    this.x1 = fromX - (newWidth * origin[0]);\n    this.y1 = fromY - (newHeight * origin[1]);\n    this.x2 = this.x1 + newWidth;\n    this.y2 = this.y1 + newHeight;\n\n    return this;\n  }\n\n  /**\n   * Scale the box by a factor.\n   * @param {Number} factor\n   * @param {Array} [origin] The origin point to resize from.\n   *      Defaults to [0, 0] (top left).\n   */\n  scale(factor, origin = [0, 0]) {\n    const newWidth = this.width() * factor;\n    const newHeight = this.height() * factor;\n    this.resize(newWidth, newHeight, origin);\n    return this;\n  }\n\n  /**\n   * Move the box to the specified coordinates.\n   */\n  move(x = null, y = null) {\n    let width = this.width();\n    let height = this.height();\n    x = x === null ? this.x1 : x;\n    y = y === null ? this.y1 : y;\n\n    this.x1 = x;\n    this.y1 = y;\n    this.x2 = x + width;\n    this.y2 = y + height;\n    return this;\n  }\n\n  /**\n   * Get relative x and y coordinates of a given point within the box.\n   * @param {Array} point The x and y ratio position within the box.\n   * @returns {Array} The x and y coordinates [x, y].\n   */\n  getRelativePoint(point = [0, 0]) {\n    const x = this.width() * point[0];\n    const y = this.height() * point[1];\n    return [x, y];\n  }\n\n  /**\n   * Get absolute x and y coordinates of a given point within the box.\n   * @param {Array} point The x and y ratio position within the box.\n   * @returns {Array} The x and y coordinates [x, y].\n   */\n  getAbsolutePoint(point = [0, 0]) {\n    const x = this.x1 + this.width() * point[0];\n    const y = this.y1 + this.height() * point[1];\n    return [x, y];\n  }\n\n  /**\n   * Constrain the box to a fixed ratio.\n   * @param {Number} ratio\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   * @param {String} [grow] The axis to grow to maintain the ratio.\n   *     Defaults to 'height'.\n   */\n  constrainToRatio(ratio, origin = [0, 0], grow = 'height') {\n    if (ratio === null) { return; }\n    const width = this.width();\n    const height = this.height();\n    switch (grow) {\n      case 'height': // Grow height only\n        this.resize(this.width(), this.width() * ratio, origin);\n        break;\n      case 'width': // Grow width only\n        this.resize(this.height() * 1 / ratio, this.height(), origin);\n        break;\n      default: // Default: Grow height only\n        this.resize(this.width(), this.width() * ratio, origin);\n    }\n\n    return this;\n  }\n\n  /**\n   * Constrain the box within a boundary.\n   * @param {Number} boundaryWidth\n   * @param {Number} boundaryHeight\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   */\n  constrainToBoundary(boundaryWidth, boundaryHeight, origin = [0, 0]) {\n\n    // Calculate the maximum sizes for each direction of growth\n    const [originX, originY] = this.getAbsolutePoint(origin);\n    const maxIfLeft = originX\n    const maxIfTop = originY\n    const maxIfRight = boundaryWidth - originX\n    const maxIfBottom = boundaryHeight - originY\n\n    // Express the direction of growth in terms of left, both,\n    // and right as -1, 0, and 1 respectively. Ditto for top/both/down.\n    const directionX = -2 * origin[0] + 1;\n    const directionY = -2 * origin[1] + 1;\n\n    // Determine the max size to use according to the direction of growth.\n    let [maxWidth, maxHeight] = [null, null];\n    switch (directionX) {\n      case -1: maxWidth = maxIfLeft; break;\n      case 0: maxWidth = Math.min(maxIfLeft, maxIfRight) * 2; break;\n      case +1: maxWidth = maxIfRight; break;\n    }\n    switch (directionY) {\n      case -1: maxHeight = maxIfTop; break;\n      case 0: maxHeight = Math.min(maxIfTop, maxIfBottom) * 2; break;\n      case +1: maxHeight = maxIfBottom; break;\n    }\n\n    // Resize if the box exceeds the calculated max width/height.\n    if (this.width() > maxWidth) {\n      const factor = maxWidth / this.width();\n      this.scale(factor, origin);\n    }\n    if (this.height() > maxHeight) {\n      const factor = maxHeight / this.height();\n      this.scale(factor, origin);\n    }\n\n    return this;\n  }\n\n  /**\n   * Constrain the box to a maximum/minimum size.\n   * @param {Number} [maxWidth]\n   * @param {Number} [maxHeight]\n   * @param {Number} [minWidth]\n   * @param {Number} [minHeight]\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   * @param {Number} [ratio] Ratio to maintain.\n   */\n  constrainToSize(maxWidth = null, maxHeight = null,\n    minWidth = null, minHeight = null,\n    origin = [0, 0], ratio = null) {\n\n    // Calculate new max/min widths & heights that constrains to the ratio\n    if (ratio) {\n      if (ratio > 1) {\n        maxWidth = maxHeight * 1 / ratio;\n        minHeight = minHeight * ratio;\n      } else if (ratio < 1) {\n        maxHeight = maxWidth * ratio;\n        minWidth = minHeight * 1 / ratio;\n      }\n    }\n\n    if (maxWidth && this.width() > maxWidth) {\n      const newWidth = maxWidth,\n        newHeight = ratio === null ? this.height() : maxHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    if (maxHeight && this.height() > maxHeight) {\n      const newWidth = ratio === null ? this.width() : maxWidth,\n        newHeight = maxHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    if (minWidth && this.width() < minWidth) {\n      const newWidth = minWidth,\n        newHeight = ratio === null ? this.height() : minHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    if (minHeight && this.height() < minHeight) {\n      const newWidth = ratio === null ? this.width() : minWidth,\n        newHeight = minHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    return this;\n  }\n}\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","/*\n * JavaScript Load Image Exif Parser\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n/* eslint-disable no-console */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  loadImage.ExifMap = function() {\n    return this\n  }\n\n  loadImage.ExifMap.prototype.map = {\n    Orientation: 0x0112\n  }\n\n  loadImage.ExifMap.prototype.get = function(id) {\n    return this[id] || this[this.map[id]]\n  }\n\n  loadImage.getExifThumbnail = function(dataView, offset, length) {\n    if (!length || offset + length > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid thumbnail data.')\n      return\n    }\n    return loadImage.createObjectURL(\n      new Blob([dataView.buffer.slice(offset, offset + length)])\n    )\n  }\n\n  loadImage.exifTagTypes = {\n    // byte, 8-bit unsigned int:\n    1: {\n      getValue: function(dataView, dataOffset) {\n        return dataView.getUint8(dataOffset)\n      },\n      size: 1\n    },\n    // ascii, 8-bit byte:\n    2: {\n      getValue: function(dataView, dataOffset) {\n        return String.fromCharCode(dataView.getUint8(dataOffset))\n      },\n      size: 1,\n      ascii: true\n    },\n    // short, 16 bit int:\n    3: {\n      getValue: function(dataView, dataOffset, littleEndian) {\n        return dataView.getUint16(dataOffset, littleEndian)\n      },\n      size: 2\n    },\n    // long, 32 bit int:\n    4: {\n      getValue: function(dataView, dataOffset, littleEndian) {\n        return dataView.getUint32(dataOffset, littleEndian)\n      },\n      size: 4\n    },\n    // rational = two long values, first is numerator, second is denominator:\n    5: {\n      getValue: function(dataView, dataOffset, littleEndian) {\n        return (\n          dataView.getUint32(dataOffset, littleEndian) /\n          dataView.getUint32(dataOffset + 4, littleEndian)\n        )\n      },\n      size: 8\n    },\n    // slong, 32 bit signed int:\n    9: {\n      getValue: function(dataView, dataOffset, littleEndian) {\n        return dataView.getInt32(dataOffset, littleEndian)\n      },\n      size: 4\n    },\n    // srational, two slongs, first is numerator, second is denominator:\n    10: {\n      getValue: function(dataView, dataOffset, littleEndian) {\n        return (\n          dataView.getInt32(dataOffset, littleEndian) /\n          dataView.getInt32(dataOffset + 4, littleEndian)\n        )\n      },\n      size: 8\n    }\n  }\n  // undefined, 8-bit byte, value depending on field:\n  loadImage.exifTagTypes[7] = loadImage.exifTagTypes[1]\n\n  loadImage.getExifValue = function(\n    dataView,\n    tiffOffset,\n    offset,\n    type,\n    length,\n    littleEndian\n  ) {\n    var tagType = loadImage.exifTagTypes[type]\n    var tagSize\n    var dataOffset\n    var values\n    var i\n    var str\n    var c\n    if (!tagType) {\n      console.log('Invalid Exif data: Invalid tag type.')\n      return\n    }\n    tagSize = tagType.size * length\n    // Determine if the value is contained in the dataOffset bytes,\n    // or if the value at the dataOffset is a pointer to the actual data:\n    dataOffset =\n      tagSize > 4\n        ? tiffOffset + dataView.getUint32(offset + 8, littleEndian)\n        : offset + 8\n    if (dataOffset + tagSize > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid data offset.')\n      return\n    }\n    if (length === 1) {\n      return tagType.getValue(dataView, dataOffset, littleEndian)\n    }\n    values = []\n    for (i = 0; i < length; i += 1) {\n      values[i] = tagType.getValue(\n        dataView,\n        dataOffset + i * tagType.size,\n        littleEndian\n      )\n    }\n    if (tagType.ascii) {\n      str = ''\n      // Concatenate the chars:\n      for (i = 0; i < values.length; i += 1) {\n        c = values[i]\n        // Ignore the terminating NULL byte(s):\n        if (c === '\\u0000') {\n          break\n        }\n        str += c\n      }\n      return str\n    }\n    return values\n  }\n\n  loadImage.parseExifTag = function(\n    dataView,\n    tiffOffset,\n    offset,\n    littleEndian,\n    data\n  ) {\n    var tag = dataView.getUint16(offset, littleEndian)\n    data.exif[tag] = loadImage.getExifValue(\n      dataView,\n      tiffOffset,\n      offset,\n      dataView.getUint16(offset + 2, littleEndian), // tag type\n      dataView.getUint32(offset + 4, littleEndian), // tag length\n      littleEndian\n    )\n  }\n\n  loadImage.parseExifTags = function(\n    dataView,\n    tiffOffset,\n    dirOffset,\n    littleEndian,\n    data\n  ) {\n    var tagsNumber, dirEndOffset, i\n    if (dirOffset + 6 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid directory offset.')\n      return\n    }\n    tagsNumber = dataView.getUint16(dirOffset, littleEndian)\n    dirEndOffset = dirOffset + 2 + 12 * tagsNumber\n    if (dirEndOffset + 4 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid directory size.')\n      return\n    }\n    for (i = 0; i < tagsNumber; i += 1) {\n      this.parseExifTag(\n        dataView,\n        tiffOffset,\n        dirOffset + 2 + 12 * i, // tag offset\n        littleEndian,\n        data\n      )\n    }\n    // Return the offset to the next directory:\n    return dataView.getUint32(dirEndOffset, littleEndian)\n  }\n\n  loadImage.parseExifData = function(dataView, offset, length, data, options) {\n    if (options.disableExif) {\n      return\n    }\n    var tiffOffset = offset + 10\n    var littleEndian\n    var dirOffset\n    var thumbnailData\n    // Check for the ASCII code for \"Exif\" (0x45786966):\n    if (dataView.getUint32(offset + 4) !== 0x45786966) {\n      // No Exif data, might be XMP data instead\n      return\n    }\n    if (tiffOffset + 8 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid segment size.')\n      return\n    }\n    // Check for the two null bytes:\n    if (dataView.getUint16(offset + 8) !== 0x0000) {\n      console.log('Invalid Exif data: Missing byte alignment offset.')\n      return\n    }\n    // Check the byte alignment:\n    switch (dataView.getUint16(tiffOffset)) {\n      case 0x4949:\n        littleEndian = true\n        break\n      case 0x4d4d:\n        littleEndian = false\n        break\n      default:\n        console.log('Invalid Exif data: Invalid byte alignment marker.')\n        return\n    }\n    // Check for the TIFF tag marker (0x002A):\n    if (dataView.getUint16(tiffOffset + 2, littleEndian) !== 0x002a) {\n      console.log('Invalid Exif data: Missing TIFF marker.')\n      return\n    }\n    // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\n    dirOffset = dataView.getUint32(tiffOffset + 4, littleEndian)\n    // Create the exif object to store the tags:\n    data.exif = new loadImage.ExifMap()\n    // Parse the tags of the main image directory and retrieve the\n    // offset to the next directory, usually the thumbnail directory:\n    dirOffset = loadImage.parseExifTags(\n      dataView,\n      tiffOffset,\n      tiffOffset + dirOffset,\n      littleEndian,\n      data\n    )\n    if (dirOffset && !options.disableExifThumbnail) {\n      thumbnailData = { exif: {} }\n      dirOffset = loadImage.parseExifTags(\n        dataView,\n        tiffOffset,\n        tiffOffset + dirOffset,\n        littleEndian,\n        thumbnailData\n      )\n      // Check for JPEG Thumbnail offset:\n      if (thumbnailData.exif[0x0201]) {\n        data.exif.Thumbnail = loadImage.getExifThumbnail(\n          dataView,\n          tiffOffset + thumbnailData.exif[0x0201],\n          thumbnailData.exif[0x0202] // Thumbnail data length\n        )\n      }\n    }\n    // Check for Exif Sub IFD Pointer:\n    if (data.exif[0x8769] && !options.disableExifSub) {\n      loadImage.parseExifTags(\n        dataView,\n        tiffOffset,\n        tiffOffset + data.exif[0x8769], // directory offset\n        littleEndian,\n        data\n      )\n    }\n    // Check for GPS Info IFD Pointer:\n    if (data.exif[0x8825] && !options.disableExifGps) {\n      loadImage.parseExifTags(\n        dataView,\n        tiffOffset,\n        tiffOffset + data.exif[0x8825], // directory offset\n        littleEndian,\n        data\n      )\n    }\n  }\n\n  // Registers the Exif parser for the APP1 JPEG meta data segment:\n  loadImage.metaDataParsers.jpeg[0xffe1].push(loadImage.parseExifData)\n\n  // Adds the following properties to the parseMetaData callback data:\n  // * exif: The exif tags, parsed by the parseExifData method\n\n  // Adds the following options to the parseMetaData method:\n  // * disableExif: Disables Exif parsing.\n  // * disableExifThumbnail: Disables parsing of the Exif Thumbnail.\n  // * disableExifSub: Disables parsing of the Exif Sub IFD.\n  // * disableExifGps: Disables parsing of the Exif GPS Info IFD.\n})\n","/*\n * JavaScript Load Image Exif Map\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Exif tags mapping based on\n * https://github.com/jseidelin/exif-js\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-exif'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-exif'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  loadImage.ExifMap.prototype.tags = {\n    // =================\n    // TIFF tags (IFD0):\n    // =================\n    0x0100: 'ImageWidth',\n    0x0101: 'ImageHeight',\n    0x8769: 'ExifIFDPointer',\n    0x8825: 'GPSInfoIFDPointer',\n    0xa005: 'InteroperabilityIFDPointer',\n    0x0102: 'BitsPerSample',\n    0x0103: 'Compression',\n    0x0106: 'PhotometricInterpretation',\n    0x0112: 'Orientation',\n    0x0115: 'SamplesPerPixel',\n    0x011c: 'PlanarConfiguration',\n    0x0212: 'YCbCrSubSampling',\n    0x0213: 'YCbCrPositioning',\n    0x011a: 'XResolution',\n    0x011b: 'YResolution',\n    0x0128: 'ResolutionUnit',\n    0x0111: 'StripOffsets',\n    0x0116: 'RowsPerStrip',\n    0x0117: 'StripByteCounts',\n    0x0201: 'JPEGInterchangeFormat',\n    0x0202: 'JPEGInterchangeFormatLength',\n    0x012d: 'TransferFunction',\n    0x013e: 'WhitePoint',\n    0x013f: 'PrimaryChromaticities',\n    0x0211: 'YCbCrCoefficients',\n    0x0214: 'ReferenceBlackWhite',\n    0x0132: 'DateTime',\n    0x010e: 'ImageDescription',\n    0x010f: 'Make',\n    0x0110: 'Model',\n    0x0131: 'Software',\n    0x013b: 'Artist',\n    0x8298: 'Copyright',\n    // ==================\n    // Exif Sub IFD tags:\n    // ==================\n    0x9000: 'ExifVersion', // EXIF version\n    0xa000: 'FlashpixVersion', // Flashpix format version\n    0xa001: 'ColorSpace', // Color space information tag\n    0xa002: 'PixelXDimension', // Valid width of meaningful image\n    0xa003: 'PixelYDimension', // Valid height of meaningful image\n    0xa500: 'Gamma',\n    0x9101: 'ComponentsConfiguration', // Information about channels\n    0x9102: 'CompressedBitsPerPixel', // Compressed bits per pixel\n    0x927c: 'MakerNote', // Any desired information written by the manufacturer\n    0x9286: 'UserComment', // Comments by user\n    0xa004: 'RelatedSoundFile', // Name of related sound file\n    0x9003: 'DateTimeOriginal', // Date and time when the original image was generated\n    0x9004: 'DateTimeDigitized', // Date and time when the image was stored digitally\n    0x9290: 'SubSecTime', // Fractions of seconds for DateTime\n    0x9291: 'SubSecTimeOriginal', // Fractions of seconds for DateTimeOriginal\n    0x9292: 'SubSecTimeDigitized', // Fractions of seconds for DateTimeDigitized\n    0x829a: 'ExposureTime', // Exposure time (in seconds)\n    0x829d: 'FNumber',\n    0x8822: 'ExposureProgram', // Exposure program\n    0x8824: 'SpectralSensitivity', // Spectral sensitivity\n    0x8827: 'PhotographicSensitivity', // EXIF 2.3, ISOSpeedRatings in EXIF 2.2\n    0x8828: 'OECF', // Optoelectric conversion factor\n    0x8830: 'SensitivityType',\n    0x8831: 'StandardOutputSensitivity',\n    0x8832: 'RecommendedExposureIndex',\n    0x8833: 'ISOSpeed',\n    0x8834: 'ISOSpeedLatitudeyyy',\n    0x8835: 'ISOSpeedLatitudezzz',\n    0x9201: 'ShutterSpeedValue', // Shutter speed\n    0x9202: 'ApertureValue', // Lens aperture\n    0x9203: 'BrightnessValue', // Value of brightness\n    0x9204: 'ExposureBias', // Exposure bias\n    0x9205: 'MaxApertureValue', // Smallest F number of lens\n    0x9206: 'SubjectDistance', // Distance to subject in meters\n    0x9207: 'MeteringMode', // Metering mode\n    0x9208: 'LightSource', // Kind of light source\n    0x9209: 'Flash', // Flash status\n    0x9214: 'SubjectArea', // Location and area of main subject\n    0x920a: 'FocalLength', // Focal length of the lens in mm\n    0xa20b: 'FlashEnergy', // Strobe energy in BCPS\n    0xa20c: 'SpatialFrequencyResponse',\n    0xa20e: 'FocalPlaneXResolution', // Number of pixels in width direction per FPRUnit\n    0xa20f: 'FocalPlaneYResolution', // Number of pixels in height direction per FPRUnit\n    0xa210: 'FocalPlaneResolutionUnit', // Unit for measuring the focal plane resolution\n    0xa214: 'SubjectLocation', // Location of subject in image\n    0xa215: 'ExposureIndex', // Exposure index selected on camera\n    0xa217: 'SensingMethod', // Image sensor type\n    0xa300: 'FileSource', // Image source (3 == DSC)\n    0xa301: 'SceneType', // Scene type (1 == directly photographed)\n    0xa302: 'CFAPattern', // Color filter array geometric pattern\n    0xa401: 'CustomRendered', // Special processing\n    0xa402: 'ExposureMode', // Exposure mode\n    0xa403: 'WhiteBalance', // 1 = auto white balance, 2 = manual\n    0xa404: 'DigitalZoomRatio', // Digital zoom ratio\n    0xa405: 'FocalLengthIn35mmFilm',\n    0xa406: 'SceneCaptureType', // Type of scene\n    0xa407: 'GainControl', // Degree of overall image gain adjustment\n    0xa408: 'Contrast', // Direction of contrast processing applied by camera\n    0xa409: 'Saturation', // Direction of saturation processing applied by camera\n    0xa40a: 'Sharpness', // Direction of sharpness processing applied by camera\n    0xa40b: 'DeviceSettingDescription',\n    0xa40c: 'SubjectDistanceRange', // Distance to subject\n    0xa420: 'ImageUniqueID', // Identifier assigned uniquely to each image\n    0xa430: 'CameraOwnerName',\n    0xa431: 'BodySerialNumber',\n    0xa432: 'LensSpecification',\n    0xa433: 'LensMake',\n    0xa434: 'LensModel',\n    0xa435: 'LensSerialNumber',\n    // ==============\n    // GPS Info tags:\n    // ==============\n    0x0000: 'GPSVersionID',\n    0x0001: 'GPSLatitudeRef',\n    0x0002: 'GPSLatitude',\n    0x0003: 'GPSLongitudeRef',\n    0x0004: 'GPSLongitude',\n    0x0005: 'GPSAltitudeRef',\n    0x0006: 'GPSAltitude',\n    0x0007: 'GPSTimeStamp',\n    0x0008: 'GPSSatellites',\n    0x0009: 'GPSStatus',\n    0x000a: 'GPSMeasureMode',\n    0x000b: 'GPSDOP',\n    0x000c: 'GPSSpeedRef',\n    0x000d: 'GPSSpeed',\n    0x000e: 'GPSTrackRef',\n    0x000f: 'GPSTrack',\n    0x0010: 'GPSImgDirectionRef',\n    0x0011: 'GPSImgDirection',\n    0x0012: 'GPSMapDatum',\n    0x0013: 'GPSDestLatitudeRef',\n    0x0014: 'GPSDestLatitude',\n    0x0015: 'GPSDestLongitudeRef',\n    0x0016: 'GPSDestLongitude',\n    0x0017: 'GPSDestBearingRef',\n    0x0018: 'GPSDestBearing',\n    0x0019: 'GPSDestDistanceRef',\n    0x001a: 'GPSDestDistance',\n    0x001b: 'GPSProcessingMethod',\n    0x001c: 'GPSAreaInformation',\n    0x001d: 'GPSDateStamp',\n    0x001e: 'GPSDifferential',\n    0x001f: 'GPSHPositioningError'\n  }\n\n  loadImage.ExifMap.prototype.stringValues = {\n    ExposureProgram: {\n      0: 'Undefined',\n      1: 'Manual',\n      2: 'Normal program',\n      3: 'Aperture priority',\n      4: 'Shutter priority',\n      5: 'Creative program',\n      6: 'Action program',\n      7: 'Portrait mode',\n      8: 'Landscape mode'\n    },\n    MeteringMode: {\n      0: 'Unknown',\n      1: 'Average',\n      2: 'CenterWeightedAverage',\n      3: 'Spot',\n      4: 'MultiSpot',\n      5: 'Pattern',\n      6: 'Partial',\n      255: 'Other'\n    },\n    LightSource: {\n      0: 'Unknown',\n      1: 'Daylight',\n      2: 'Fluorescent',\n      3: 'Tungsten (incandescent light)',\n      4: 'Flash',\n      9: 'Fine weather',\n      10: 'Cloudy weather',\n      11: 'Shade',\n      12: 'Daylight fluorescent (D 5700 - 7100K)',\n      13: 'Day white fluorescent (N 4600 - 5400K)',\n      14: 'Cool white fluorescent (W 3900 - 4500K)',\n      15: 'White fluorescent (WW 3200 - 3700K)',\n      17: 'Standard light A',\n      18: 'Standard light B',\n      19: 'Standard light C',\n      20: 'D55',\n      21: 'D65',\n      22: 'D75',\n      23: 'D50',\n      24: 'ISO studio tungsten',\n      255: 'Other'\n    },\n    Flash: {\n      0x0000: 'Flash did not fire',\n      0x0001: 'Flash fired',\n      0x0005: 'Strobe return light not detected',\n      0x0007: 'Strobe return light detected',\n      0x0009: 'Flash fired, compulsory flash mode',\n      0x000d: 'Flash fired, compulsory flash mode, return light not detected',\n      0x000f: 'Flash fired, compulsory flash mode, return light detected',\n      0x0010: 'Flash did not fire, compulsory flash mode',\n      0x0018: 'Flash did not fire, auto mode',\n      0x0019: 'Flash fired, auto mode',\n      0x001d: 'Flash fired, auto mode, return light not detected',\n      0x001f: 'Flash fired, auto mode, return light detected',\n      0x0020: 'No flash function',\n      0x0041: 'Flash fired, red-eye reduction mode',\n      0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\n      0x0047: 'Flash fired, red-eye reduction mode, return light detected',\n      0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\n      0x004d: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\n      0x004f: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\n      0x0059: 'Flash fired, auto mode, red-eye reduction mode',\n      0x005d: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\n      0x005f: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\n    },\n    SensingMethod: {\n      1: 'Undefined',\n      2: 'One-chip color area sensor',\n      3: 'Two-chip color area sensor',\n      4: 'Three-chip color area sensor',\n      5: 'Color sequential area sensor',\n      7: 'Trilinear sensor',\n      8: 'Color sequential linear sensor'\n    },\n    SceneCaptureType: {\n      0: 'Standard',\n      1: 'Landscape',\n      2: 'Portrait',\n      3: 'Night scene'\n    },\n    SceneType: {\n      1: 'Directly photographed'\n    },\n    CustomRendered: {\n      0: 'Normal process',\n      1: 'Custom process'\n    },\n    WhiteBalance: {\n      0: 'Auto white balance',\n      1: 'Manual white balance'\n    },\n    GainControl: {\n      0: 'None',\n      1: 'Low gain up',\n      2: 'High gain up',\n      3: 'Low gain down',\n      4: 'High gain down'\n    },\n    Contrast: {\n      0: 'Normal',\n      1: 'Soft',\n      2: 'Hard'\n    },\n    Saturation: {\n      0: 'Normal',\n      1: 'Low saturation',\n      2: 'High saturation'\n    },\n    Sharpness: {\n      0: 'Normal',\n      1: 'Soft',\n      2: 'Hard'\n    },\n    SubjectDistanceRange: {\n      0: 'Unknown',\n      1: 'Macro',\n      2: 'Close view',\n      3: 'Distant view'\n    },\n    FileSource: {\n      3: 'DSC'\n    },\n    ComponentsConfiguration: {\n      0: '',\n      1: 'Y',\n      2: 'Cb',\n      3: 'Cr',\n      4: 'R',\n      5: 'G',\n      6: 'B'\n    },\n    Orientation: {\n      1: 'top-left',\n      2: 'top-right',\n      3: 'bottom-right',\n      4: 'bottom-left',\n      5: 'left-top',\n      6: 'right-top',\n      7: 'right-bottom',\n      8: 'left-bottom'\n    }\n  }\n\n  loadImage.ExifMap.prototype.getText = function(id) {\n    var value = this.get(id)\n    switch (id) {\n      case 'LightSource':\n      case 'Flash':\n      case 'MeteringMode':\n      case 'ExposureProgram':\n      case 'SensingMethod':\n      case 'SceneCaptureType':\n      case 'SceneType':\n      case 'CustomRendered':\n      case 'WhiteBalance':\n      case 'GainControl':\n      case 'Contrast':\n      case 'Saturation':\n      case 'Sharpness':\n      case 'SubjectDistanceRange':\n      case 'FileSource':\n      case 'Orientation':\n        return this.stringValues[id][value]\n      case 'ExifVersion':\n      case 'FlashpixVersion':\n        if (!value) return\n        return String.fromCharCode(value[0], value[1], value[2], value[3])\n      case 'ComponentsConfiguration':\n        if (!value) return\n        return (\n          this.stringValues[id][value[0]] +\n          this.stringValues[id][value[1]] +\n          this.stringValues[id][value[2]] +\n          this.stringValues[id][value[3]]\n        )\n      case 'GPSVersionID':\n        if (!value) return\n        return value[0] + '.' + value[1] + '.' + value[2] + '.' + value[3]\n    }\n    return String(value)\n  }\n  ;(function(exifMapPrototype) {\n    var tags = exifMapPrototype.tags\n    var map = exifMapPrototype.map\n    var prop\n    // Map the tag names to tags:\n    for (prop in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, prop)) {\n        map[tags[prop]] = prop\n      }\n    }\n  })(loadImage.ExifMap.prototype)\n\n  loadImage.ExifMap.prototype.getAll = function() {\n    var map = {}\n    var prop\n    var id\n    for (prop in this) {\n      if (Object.prototype.hasOwnProperty.call(this, prop)) {\n        id = this.tags[prop]\n        if (id) {\n          map[id] = this.getText(id)\n        }\n      }\n    }\n    return map\n  }\n})\n","/**\n * Croppr.js\n * https://github.com/jamesssooi/Croppr.js\n * \n * A JavaScript image cropper that's lightweight, awesome, and has\n * zero dependencies.\n * \n * (C) 2017 James Ooi. Released under the MIT License.\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Croppr = factory());\n}(this, (function () { 'use strict';\n\n(function () {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n  if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = window.setTimeout(function () {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n  if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n    clearTimeout(id);\n  };\n})();\n(function () {\n  if (typeof window.CustomEvent === \"function\") return false;\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n(function (window) {\n  try {\n    new CustomEvent('test');\n    return false;\n  } catch (e) {}\n  function MouseEvent(eventType, params) {\n    params = params || { bubbles: false, cancelable: false };\n    var mouseEvent = document.createEvent('MouseEvent');\n    mouseEvent.initMouseEvent(eventType, params.bubbles, params.cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    return mouseEvent;\n  }\n  MouseEvent.prototype = Event.prototype;\n  window.MouseEvent = MouseEvent;\n})(window);\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar Handle =\n/**\n * Creates a new Handle instance.\n * @constructor\n * @param {Array} position The x and y ratio position of the handle\n *      within the crop region. Accepts a value between 0 to 1 in the order\n *      of [X, Y].\n * @param {Array} constraints Define the side of the crop region that\n *      is to be affected by this handle. Accepts a value of 0 or 1 in the\n *      order of [TOP, RIGHT, BOTTOM, LEFT].\n * @param {String} cursor The CSS cursor of this handle.\n * @param {Element} eventBus The element to dispatch events to.\n */\nfunction Handle(position, constraints, cursor, eventBus) {\n  classCallCheck(this, Handle);\n  var self = this;\n  this.position = position;\n  this.constraints = constraints;\n  this.cursor = cursor;\n  this.eventBus = eventBus;\n  this.el = document.createElement('div');\n  this.el.className = 'croppr-handle';\n  this.el.style.cursor = cursor;\n  this.el.addEventListener('mousedown', onMouseDown);\n  function onMouseDown(e) {\n    e.stopPropagation();\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n      detail: { handle: self }\n    }));\n  }\n  function onMouseUp(e) {\n    e.stopPropagation();\n    document.removeEventListener('mouseup', onMouseUp);\n    document.removeEventListener('mousemove', onMouseMove);\n    self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n      detail: { handle: self }\n    }));\n  }\n  function onMouseMove(e) {\n    e.stopPropagation();\n    self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n      detail: { mouseX: e.clientX, mouseY: e.clientY }\n    }));\n  }\n};\n\nvar Box = function () {\n  /**\n   * Creates a new Box instance.\n   * @constructor\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  function Box(x1, y1, x2, y2) {\n    classCallCheck(this, Box);\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n  /**\n   * Sets the new dimensions of the box.\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  createClass(Box, [{\n    key: 'set',\n    value: function set$$1() {\n      var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      this.x1 = x1 == null ? this.x1 : x1;\n      this.y1 = y1 == null ? this.y1 : y1;\n      this.x2 = x2 == null ? this.x2 : x2;\n      this.y2 = y2 == null ? this.y2 : y2;\n      return this;\n    }\n    /**\n     * Calculates the width of the box.\n     * @returns {Number}\n     */\n  }, {\n    key: 'width',\n    value: function width() {\n      return Math.abs(this.x2 - this.x1);\n    }\n    /**\n     * Calculates the height of the box.\n     * @returns {Number}\n     */\n  }, {\n    key: 'height',\n    value: function height() {\n      return Math.abs(this.y2 - this.y1);\n    }\n    /**\n     * Resizes the box to a new size.\n     * @param {Number} newWidth\n     * @param {Number} newHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'resize',\n    value: function resize(newWidth, newHeight) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];\n      var fromX = this.x1 + this.width() * origin[0];\n      var fromY = this.y1 + this.height() * origin[1];\n      this.x1 = fromX - newWidth * origin[0];\n      this.y1 = fromY - newHeight * origin[1];\n      this.x2 = this.x1 + newWidth;\n      this.y2 = this.y1 + newHeight;\n      return this;\n    }\n    /**\n     * Scale the box by a factor.\n     * @param {Number} factor\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'scale',\n    value: function scale(factor) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];\n      var newWidth = this.width() * factor;\n      var newHeight = this.height() * factor;\n      this.resize(newWidth, newHeight, origin);\n      return this;\n    }\n  }, {\n    key: 'move',\n    value: function move() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var width = this.width();\n      var height = this.height();\n      x = x === null ? this.x1 : x;\n      y = y === null ? this.y1 : y;\n      this.x1 = x;\n      this.y1 = y;\n      this.x2 = x + width;\n      this.y2 = y + height;\n      return this;\n    }\n    /**\n     * Get relative x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n  }, {\n    key: 'getRelativePoint',\n    value: function getRelativePoint() {\n      var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0];\n      var x = this.width() * point[0];\n      var y = this.height() * point[1];\n      return [x, y];\n    }\n    /**\n     * Get absolute x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n  }, {\n    key: 'getAbsolutePoint',\n    value: function getAbsolutePoint() {\n      var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0];\n      var x = this.x1 + this.width() * point[0];\n      var y = this.y1 + this.height() * point[1];\n      return [x, y];\n    }\n    /**\n     * Constrain the box to a fixed ratio.\n     * @param {Number} ratio\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {String} [grow] The axis to grow to maintain the ratio.\n     *     Defaults to 'height'.\n     */\n  }, {\n    key: 'constrainToRatio',\n    value: function constrainToRatio(ratio) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];\n      var grow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'height';\n      if (ratio === null) {\n        return;\n      }\n      var width = this.width();\n      var height = this.height();\n      switch (grow) {\n        case 'height':\n          this.resize(this.width(), this.width() * ratio, origin);\n          break;\n        case 'width':\n          this.resize(this.height() * 1 / ratio, this.height(), origin);\n          break;\n        default:\n          this.resize(this.width(), this.width() * ratio, origin);\n      }\n      return this;\n    }\n    /**\n     * Constrain the box within a boundary.\n     * @param {Number} boundaryWidth\n     * @param {Number} boundaryHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'constrainToBoundary',\n    value: function constrainToBoundary(boundaryWidth, boundaryHeight) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];\n      var _getAbsolutePoint = this.getAbsolutePoint(origin),\n          _getAbsolutePoint2 = slicedToArray(_getAbsolutePoint, 2),\n          originX = _getAbsolutePoint2[0],\n          originY = _getAbsolutePoint2[1];\n      var maxIfLeft = originX;\n      var maxIfTop = originY;\n      var maxIfRight = boundaryWidth - originX;\n      var maxIfBottom = boundaryHeight - originY;\n      var directionX = -2 * origin[0] + 1;\n      var directionY = -2 * origin[1] + 1;\n      var maxWidth = null,\n          maxHeight = null;\n      switch (directionX) {\n        case -1:\n          maxWidth = maxIfLeft;break;\n        case 0:\n          maxWidth = Math.min(maxIfLeft, maxIfRight) * 2;break;\n        case +1:\n          maxWidth = maxIfRight;break;\n      }\n      switch (directionY) {\n        case -1:\n          maxHeight = maxIfTop;break;\n        case 0:\n          maxHeight = Math.min(maxIfTop, maxIfBottom) * 2;break;\n        case +1:\n          maxHeight = maxIfBottom;break;\n      }\n      if (this.width() > maxWidth) {\n        var factor = maxWidth / this.width();\n        this.scale(factor, origin);\n      }\n      if (this.height() > maxHeight) {\n        var _factor = maxHeight / this.height();\n        this.scale(_factor, origin);\n      }\n      return this;\n    }\n    /**\n     * Constrain the box to a maximum/minimum size.\n     * @param {Number} [maxWidth]\n     * @param {Number} [maxHeight]\n     * @param {Number} [minWidth]\n     * @param {Number} [minHeight]\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {Number} [ratio] Ratio to maintain.\n     */\n  }, {\n    key: 'constrainToSize',\n    value: function constrainToSize() {\n      var maxWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var maxHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var minWidth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var minHeight = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var origin = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [0, 0];\n      var ratio = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      if (ratio) {\n        if (ratio > 1) {\n          maxWidth = maxHeight * 1 / ratio;\n          minHeight = minHeight * ratio;\n        } else if (ratio < 1) {\n          maxHeight = maxWidth * ratio;\n          minWidth = minHeight * 1 / ratio;\n        }\n      }\n      if (maxWidth && this.width() > maxWidth) {\n        var newWidth = maxWidth,\n            newHeight = ratio === null ? this.height() : maxHeight;\n        this.resize(newWidth, newHeight, origin);\n      }\n      if (maxHeight && this.height() > maxHeight) {\n        var _newWidth = ratio === null ? this.width() : maxWidth,\n            _newHeight = maxHeight;\n        this.resize(_newWidth, _newHeight, origin);\n      }\n      if (minWidth && this.width() < minWidth) {\n        var _newWidth2 = minWidth,\n            _newHeight2 = ratio === null ? this.height() : minHeight;\n        this.resize(_newWidth2, _newHeight2, origin);\n      }\n      if (minHeight && this.height() < minHeight) {\n        var _newWidth3 = ratio === null ? this.width() : minWidth,\n            _newHeight3 = minHeight;\n        this.resize(_newWidth3, _newHeight3, origin);\n      }\n      return this;\n    }\n  }]);\n  return Box;\n}();\n\n/**\n * Binds an element's touch events to be simulated as mouse events.\n * @param {Element} element\n */\nfunction enableTouch(element) {\n  element.addEventListener('touchstart', simulateMouseEvent);\n  element.addEventListener('touchend', simulateMouseEvent);\n  element.addEventListener('touchmove', simulateMouseEvent);\n}\n/**\n * Translates a touch event to a mouse event.\n * @param {Event} e\n */\nfunction simulateMouseEvent(e) {\n  e.preventDefault();\n  var touch = e.changedTouches[0];\n  var eventMap = {\n    'touchstart': 'mousedown',\n    'touchmove': 'mousemove',\n    'touchend': 'mouseup'\n  };\n  touch.target.dispatchEvent(new MouseEvent(eventMap[e.type], {\n    bubbles: true,\n    cancelable: true,\n    view: window,\n    clientX: touch.clientX,\n    clientY: touch.clientY,\n    screenX: touch.screenX,\n    screenY: touch.screenY\n  }));\n}\n\n/**\n * Define a list of handles to create.\n *\n * @property {Array} position - The x and y ratio position of the handle within\n *      the crop region. Accepts a value between 0 to 1 in the order of [X, Y].\n * @property {Array} constraints - Define the side of the crop region that is to\n *      be affected by this handle. Accepts a value of 0 or 1 in the order of\n *      [TOP, RIGHT, BOTTOM, LEFT].\n * @property {String} cursor - The CSS cursor of this handle.\n */\nvar HANDLES = [{ position: [0.0, 0.0], constraints: [1, 0, 0, 1], cursor: 'nw-resize' }, { position: [0.5, 0.0], constraints: [1, 0, 0, 0], cursor: 'n-resize' }, { position: [1.0, 0.0], constraints: [1, 1, 0, 0], cursor: 'ne-resize' }, { position: [1.0, 0.5], constraints: [0, 1, 0, 0], cursor: 'e-resize' }, { position: [1.0, 1.0], constraints: [0, 1, 1, 0], cursor: 'se-resize' }, { position: [0.5, 1.0], constraints: [0, 0, 1, 0], cursor: 's-resize' }, { position: [0.0, 1.0], constraints: [0, 0, 1, 1], cursor: 'sw-resize' }, { position: [0.0, 0.5], constraints: [0, 0, 0, 1], cursor: 'w-resize' }];\nvar CropprCore = function () {\n  function CropprCore(element, options) {\n    var _this = this;\n    var deferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    classCallCheck(this, CropprCore);\n    this.options = CropprCore.parseOptions(options || {});\n    if (!element.nodeName) {\n      element = document.querySelector(element);\n      if (element == null) {\n        throw 'Unable to find element.';\n      }\n    }\n    if (!element.getAttribute('src')) {\n      throw 'Image src not provided.';\n    }\n    this._initialized = false;\n    this._restore = {\n      parent: element.parentNode,\n      element: element\n    };\n    if (!deferred) {\n      if (element.width === 0 || element.height === 0) {\n        element.onload = function () {\n          _this.initialize(element);\n        };\n      } else {\n        this.initialize(element);\n      }\n    }\n  }\n  createClass(CropprCore, [{\n    key: 'initialize',\n    value: function initialize(element) {\n      this.createDOM(element);\n      this.options.convertToPixels(this.cropperEl);\n      this.attachHandlerEvents();\n      this.attachRegionEvents();\n      this.attachOverlayEvents();\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n      this._initialized = true;\n      if (this.options.onInitialize !== null) {\n        this.options.onInitialize(this);\n      }\n    }\n  }, {\n    key: 'createDOM',\n    value: function createDOM(targetEl) {\n      this.containerEl = document.createElement('div');\n      this.containerEl.className = 'croppr-container';\n      this.eventBus = this.containerEl;\n      enableTouch(this.containerEl);\n      this.cropperEl = document.createElement('div');\n      this.cropperEl.className = 'croppr';\n      this.imageEl = document.createElement('img');\n      this.imageEl.setAttribute('src', targetEl.getAttribute('src'));\n      this.imageEl.setAttribute('alt', targetEl.getAttribute('alt'));\n      this.imageEl.className = 'croppr-image';\n      this.imageClippedEl = this.imageEl.cloneNode();\n      this.imageClippedEl.className = 'croppr-imageClipped';\n      this.regionEl = document.createElement('div');\n      this.regionEl.className = 'croppr-region';\n      this.overlayEl = document.createElement('div');\n      this.overlayEl.className = 'croppr-overlay';\n      var handleContainerEl = document.createElement('div');\n      handleContainerEl.className = 'croppr-handleContainer';\n      this.handles = [];\n      for (var i = 0; i < HANDLES.length; i++) {\n        var handle = new Handle(HANDLES[i].position, HANDLES[i].constraints, HANDLES[i].cursor, this.eventBus);\n        this.handles.push(handle);\n        handleContainerEl.appendChild(handle.el);\n      }\n      this.cropperEl.appendChild(this.imageEl);\n      this.cropperEl.appendChild(this.imageClippedEl);\n      this.cropperEl.appendChild(this.regionEl);\n      this.cropperEl.appendChild(this.overlayEl);\n      this.cropperEl.appendChild(handleContainerEl);\n      this.containerEl.appendChild(this.cropperEl);\n      targetEl.parentElement.replaceChild(this.containerEl, targetEl);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      var _this2 = this;\n      this.imageEl.onload = function () {\n        _this2.box = _this2.initializeBox(_this2.options);\n        _this2.redraw();\n      };\n      this.imageEl.src = src;\n      this.imageClippedEl.src = src;\n      return this;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._restore.parent.replaceChild(this._restore.element, this.containerEl);\n    }\n    /**\n     * Create a new box region with a set of options.\n     * @param {Object} opts The options.\n     * @returns {Box}\n     */\n  }, {\n    key: 'initializeBox',\n    value: function initializeBox(opts) {\n      var width = opts.startSize.width;\n      var height = opts.startSize.height;\n      var box = new Box(0, 0, width, height);\n      box.constrainToRatio(opts.aspectRatio, [0.5, 0.5]);\n      var min = opts.minSize;\n      var max = opts.maxSize;\n      box.constrainToSize(max.width, max.height, min.width, min.height, [0.5, 0.5], opts.aspectRatio);\n      var parentWidth = this.cropperEl.offsetWidth;\n      var parentHeight = this.cropperEl.offsetHeight;\n      box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n      var x = this.cropperEl.offsetWidth / 2 - box.width() / 2;\n      var y = this.cropperEl.offsetHeight / 2 - box.height() / 2;\n      box.move(x, y);\n      return box;\n    }\n  }, {\n    key: 'redraw',\n    value: function redraw() {\n      var _this3 = this;\n      var width = Math.round(this.box.width()),\n          height = Math.round(this.box.height()),\n          x1 = Math.round(this.box.x1),\n          y1 = Math.round(this.box.y1),\n          x2 = Math.round(this.box.x2),\n          y2 = Math.round(this.box.y2);\n      window.requestAnimationFrame(function () {\n        _this3.regionEl.style.transform = 'translate(' + x1 + 'px, ' + y1 + 'px)';\n        _this3.regionEl.style.width = width + 'px';\n        _this3.regionEl.style.height = height + 'px';\n        _this3.imageClippedEl.style.clip = 'rect(' + y1 + 'px, ' + x2 + 'px, ' + y2 + 'px, ' + x1 + 'px)';\n        var center = _this3.box.getAbsolutePoint([.5, .5]);\n        var xSign = center[0] - _this3.cropperEl.offsetWidth / 2 >> 31;\n        var ySign = center[1] - _this3.cropperEl.offsetHeight / 2 >> 31;\n        var quadrant = (xSign ^ ySign) + ySign + ySign + 4;\n        var foregroundHandleIndex = -2 * quadrant + 8;\n        for (var i = 0; i < _this3.handles.length; i++) {\n          var handle = _this3.handles[i];\n          var handleWidth = handle.el.offsetWidth;\n          var handleHeight = handle.el.offsetHeight;\n          var left = x1 + width * handle.position[0] - handleWidth / 2;\n          var top = y1 + height * handle.position[1] - handleHeight / 2;\n          handle.el.style.transform = 'translate(' + Math.round(left) + 'px, ' + Math.round(top) + 'px)';\n          handle.el.style.zIndex = foregroundHandleIndex == i ? 5 : 4;\n        }\n      });\n    }\n  }, {\n    key: 'attachHandlerEvents',\n    value: function attachHandlerEvents() {\n      var eventBus = this.eventBus;\n      eventBus.addEventListener('handlestart', this.onHandleMoveStart.bind(this));\n      eventBus.addEventListener('handlemove', this.onHandleMoveMoving.bind(this));\n      eventBus.addEventListener('handleend', this.onHandleMoveEnd.bind(this));\n    }\n  }, {\n    key: 'attachRegionEvents',\n    value: function attachRegionEvents() {\n      var eventBus = this.eventBus;\n      var self = this;\n      this.regionEl.addEventListener('mousedown', onMouseDown);\n      eventBus.addEventListener('regionstart', this.onRegionMoveStart.bind(this));\n      eventBus.addEventListener('regionmove', this.onRegionMoveMoving.bind(this));\n      eventBus.addEventListener('regionend', this.onRegionMoveEnd.bind(this));\n      function onMouseDown(e) {\n        e.stopPropagation();\n        document.addEventListener('mouseup', onMouseUp);\n        document.addEventListener('mousemove', onMouseMove);\n        eventBus.dispatchEvent(new CustomEvent('regionstart', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseMove(e) {\n        e.stopPropagation();\n        eventBus.dispatchEvent(new CustomEvent('regionmove', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseUp(e) {\n        e.stopPropagation();\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        eventBus.dispatchEvent(new CustomEvent('regionend', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n    }\n  }, {\n    key: 'attachOverlayEvents',\n    value: function attachOverlayEvents() {\n      var SOUTHEAST_HANDLE_IDX = 4;\n      var self = this;\n      var tmpBox = null;\n      this.overlayEl.addEventListener('mousedown', onMouseDown);\n      function onMouseDown(e) {\n        e.stopPropagation();\n        document.addEventListener('mouseup', onMouseUp);\n        document.addEventListener('mousemove', onMouseMove);\n        var container = self.cropperEl.getBoundingClientRect();\n        var mouseX = e.clientX - container.left;\n        var mouseY = e.clientY - container.top;\n        tmpBox = self.box;\n        self.box = new Box(mouseX, mouseY, mouseX + 1, mouseY + 1);\n        self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n          detail: { handle: self.handles[SOUTHEAST_HANDLE_IDX] }\n        }));\n      }\n      function onMouseMove(e) {\n        e.stopPropagation();\n        self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseUp(e) {\n        e.stopPropagation();\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        if (self.box.width() === 1 && self.box.height() === 1) {\n          self.box = tmpBox;\n          return;\n        }\n        self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n    }\n  }, {\n    key: 'onHandleMoveStart',\n    value: function onHandleMoveStart(e) {\n      var handle = e.detail.handle;\n      var originPoint = [1 - handle.position[0], 1 - handle.position[1]];\n      var _box$getAbsolutePoint = this.box.getAbsolutePoint(originPoint),\n          _box$getAbsolutePoint2 = slicedToArray(_box$getAbsolutePoint, 2),\n          originX = _box$getAbsolutePoint2[0],\n          originY = _box$getAbsolutePoint2[1];\n      this.activeHandle = { handle: handle, originPoint: originPoint, originX: originX, originY: originY };\n      if (this.options.onCropStart !== null) {\n        this.options.onCropStart(this.getValue());\n      }\n    }\n  }, {\n    key: 'onHandleMoveMoving',\n    value: function onHandleMoveMoving(e) {\n      var _e$detail = e.detail,\n          mouseX = _e$detail.mouseX,\n          mouseY = _e$detail.mouseY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      if (mouseX < 0) {\n        mouseX = 0;\n      } else if (mouseX > container.width) {\n        mouseX = container.width;\n      }\n      if (mouseY < 0) {\n        mouseY = 0;\n      } else if (mouseY > container.height) {\n        mouseY = container.height;\n      }\n      var origin = this.activeHandle.originPoint.slice();\n      var originX = this.activeHandle.originX;\n      var originY = this.activeHandle.originY;\n      var handle = this.activeHandle.handle;\n      var TOP_MOVABLE = handle.constraints[0] === 1;\n      var RIGHT_MOVABLE = handle.constraints[1] === 1;\n      var BOTTOM_MOVABLE = handle.constraints[2] === 1;\n      var LEFT_MOVABLE = handle.constraints[3] === 1;\n      var MULTI_AXIS = (LEFT_MOVABLE || RIGHT_MOVABLE) && (TOP_MOVABLE || BOTTOM_MOVABLE);\n      var x1 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x1;\n      var x2 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x2;\n      var y1 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y1;\n      var y2 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y2;\n      x1 = LEFT_MOVABLE ? mouseX : x1;\n      x2 = RIGHT_MOVABLE ? mouseX : x2;\n      y1 = TOP_MOVABLE ? mouseY : y1;\n      y2 = BOTTOM_MOVABLE ? mouseY : y2;\n      var isFlippedX = false,\n          isFlippedY = false;\n      if (LEFT_MOVABLE || RIGHT_MOVABLE) {\n        isFlippedX = LEFT_MOVABLE ? mouseX > originX : mouseX < originX;\n      }\n      if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n        isFlippedY = TOP_MOVABLE ? mouseY > originY : mouseY < originY;\n      }\n      if (isFlippedX) {\n        var tmp = x1;x1 = x2;x2 = tmp;\n        origin[0] = 1 - origin[0];\n      }\n      if (isFlippedY) {\n        var _tmp = y1;y1 = y2;y2 = _tmp;\n        origin[1] = 1 - origin[1];\n      }\n      var box = new Box(x1, y1, x2, y2);\n      if (this.options.aspectRatio) {\n        var ratio = this.options.aspectRatio;\n        var isVerticalMovement = false;\n        if (MULTI_AXIS) {\n          isVerticalMovement = mouseY > box.y1 + ratio * box.width() || mouseY < box.y2 - ratio * box.width();\n        } else if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n          isVerticalMovement = true;\n        }\n        var ratioMode = isVerticalMovement ? 'width' : 'height';\n        box.constrainToRatio(ratio, origin, ratioMode);\n      }\n      var min = this.options.minSize;\n      var max = this.options.maxSize;\n      box.constrainToSize(max.width, max.height, min.width, min.height, origin, this.options.aspectRatio);\n      var parentWidth = this.cropperEl.offsetWidth;\n      var parentHeight = this.cropperEl.offsetHeight;\n      box.constrainToBoundary(parentWidth, parentHeight, origin);\n      this.box = box;\n      this.redraw();\n      if (this.options.onCropMove !== null) {\n        this.options.onCropMove(this.getValue());\n      }\n    }\n  }, {\n    key: 'onHandleMoveEnd',\n    value: function onHandleMoveEnd(e) {\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveStart',\n    value: function onRegionMoveStart(e) {\n      var _e$detail2 = e.detail,\n          mouseX = _e$detail2.mouseX,\n          mouseY = _e$detail2.mouseY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      this.currentMove = {\n        offsetX: mouseX - this.box.x1,\n        offsetY: mouseY - this.box.y1\n      };\n      if (this.options.onCropStart !== null) {\n        this.options.onCropStart(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveMoving',\n    value: function onRegionMoveMoving(e) {\n      var _e$detail3 = e.detail,\n          mouseX = _e$detail3.mouseX,\n          mouseY = _e$detail3.mouseY;\n      var _currentMove = this.currentMove,\n          offsetX = _currentMove.offsetX,\n          offsetY = _currentMove.offsetY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      this.box.move(mouseX - offsetX, mouseY - offsetY);\n      if (this.box.x1 < 0) {\n        this.box.move(0, null);\n      }\n      if (this.box.x2 > container.width) {\n        this.box.move(container.width - this.box.width(), null);\n      }\n      if (this.box.y1 < 0) {\n        this.box.move(null, 0);\n      }\n      if (this.box.y2 > container.height) {\n        this.box.move(null, container.height - this.box.height());\n      }\n      this.redraw();\n      if (this.options.onCropMove !== null) {\n        this.options.onCropMove(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveEnd',\n    value: function onRegionMoveEnd(e) {\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (mode === null) {\n        mode = this.options.returnMode;\n      }\n      if (mode == 'real') {\n        var actualWidth = this.imageEl.naturalWidth;\n        var actualHeight = this.imageEl.naturalHeight;\n        var _imageEl$getBoundingC = this.imageEl.getBoundingClientRect(),\n            elementWidth = _imageEl$getBoundingC.width,\n            elementHeight = _imageEl$getBoundingC.height;\n        var factorX = actualWidth / elementWidth;\n        var factorY = actualHeight / elementHeight;\n        return {\n          x: Math.round(this.box.x1 * factorX),\n          y: Math.round(this.box.y1 * factorY),\n          width: Math.round(this.box.width() * factorX),\n          height: Math.round(this.box.height() * factorY)\n        };\n      } else if (mode == 'ratio') {\n        var _imageEl$getBoundingC2 = this.imageEl.getBoundingClientRect(),\n            _elementWidth = _imageEl$getBoundingC2.width,\n            _elementHeight = _imageEl$getBoundingC2.height;\n        return {\n          x: round(this.box.x1 / _elementWidth, 3),\n          y: round(this.box.y1 / _elementHeight, 3),\n          width: round(this.box.width() / _elementWidth, 3),\n          height: round(this.box.height() / _elementHeight, 3)\n        };\n      } else if (mode == 'raw') {\n        return {\n          x: Math.round(this.box.x1),\n          y: Math.round(this.box.y1),\n          width: Math.round(this.box.width()),\n          height: Math.round(this.box.height())\n        };\n      }\n    }\n  }], [{\n    key: 'parseOptions',\n    value: function parseOptions(opts) {\n      var defaults$$1 = {\n        aspectRatio: null,\n        maxSize: { width: null, height: null },\n        minSize: { width: null, height: null },\n        startSize: { width: 100, height: 100, unit: '%' },\n        returnMode: 'real',\n        onInitialize: null,\n        onCropStart: null,\n        onCropMove: null,\n        onCropEnd: null\n      };\n      var aspectRatio = null;\n      if (opts.aspectRatio !== undefined) {\n        if (typeof opts.aspectRatio === 'number') {\n          aspectRatio = opts.aspectRatio;\n        } else if (opts.aspectRatio instanceof Array) {\n          aspectRatio = opts.aspectRatio[1] / opts.aspectRatio[0];\n        }\n      }\n      var maxSize = null;\n      if (opts.maxSize !== undefined && opts.maxSize !== null) {\n        maxSize = {\n          width: opts.maxSize[0] || null,\n          height: opts.maxSize[1] || null,\n          unit: opts.maxSize[2] || 'px'\n        };\n      }\n      var minSize = null;\n      if (opts.minSize !== undefined && opts.minSize !== null) {\n        minSize = {\n          width: opts.minSize[0] || null,\n          height: opts.minSize[1] || null,\n          unit: opts.minSize[2] || 'px'\n        };\n      }\n      var startSize = null;\n      if (opts.startSize !== undefined && opts.startSize !== null) {\n        startSize = {\n          width: opts.startSize[0] || null,\n          height: opts.startSize[1] || null,\n          unit: opts.startSize[2] || '%'\n        };\n      }\n      var onInitialize = null;\n      if (typeof opts.onInitialize === 'function') {\n        onInitialize = opts.onInitialize;\n      }\n      var onCropStart = null;\n      if (typeof opts.onCropStart === 'function') {\n        onCropStart = opts.onCropStart;\n      }\n      var onCropEnd = null;\n      if (typeof opts.onCropEnd === 'function') {\n        onCropEnd = opts.onCropEnd;\n      }\n      var onCropMove = null;\n      if (typeof opts.onUpdate === 'function') {\n        console.warn('Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead.');\n        onCropMove = opts.onUpdate;\n      }\n      if (typeof opts.onCropMove === 'function') {\n        onCropMove = opts.onCropMove;\n      }\n      var returnMode = null;\n      if (opts.returnMode !== undefined) {\n        var s = opts.returnMode.toLowerCase();\n        if (['real', 'ratio', 'raw'].indexOf(s) === -1) {\n          throw \"Invalid return mode.\";\n        }\n        returnMode = s;\n      }\n      var convertToPixels = function convertToPixels(container) {\n        var width = container.offsetWidth;\n        var height = container.offsetHeight;\n        var sizeKeys = ['maxSize', 'minSize', 'startSize'];\n        for (var i = 0; i < sizeKeys.length; i++) {\n          var key = sizeKeys[i];\n          if (this[key] !== null) {\n            if (this[key].unit == '%') {\n              if (this[key].width !== null) {\n                this[key].width = this[key].width / 100 * width;\n              }\n              if (this[key].height !== null) {\n                this[key].height = this[key].height / 100 * height;\n              }\n            }\n            delete this[key].unit;\n          }\n        }\n      };\n      var defaultValue = function defaultValue(v, d) {\n        return v !== null ? v : d;\n      };\n      return {\n        aspectRatio: defaultValue(aspectRatio, defaults$$1.aspectRatio),\n        maxSize: defaultValue(maxSize, defaults$$1.maxSize),\n        minSize: defaultValue(minSize, defaults$$1.minSize),\n        startSize: defaultValue(startSize, defaults$$1.startSize),\n        returnMode: defaultValue(returnMode, defaults$$1.returnMode),\n        onInitialize: defaultValue(onInitialize, defaults$$1.onInitialize),\n        onCropStart: defaultValue(onCropStart, defaults$$1.onCropStart),\n        onCropMove: defaultValue(onCropMove, defaults$$1.onCropMove),\n        onCropEnd: defaultValue(onCropEnd, defaults$$1.onCropEnd),\n        convertToPixels: convertToPixels\n      };\n    }\n  }]);\n  return CropprCore;\n}();\nfunction round(value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nvar Croppr$1 = function (_CropprCore) {\n  inherits(Croppr, _CropprCore);\n  /**\n   * @constructor\n   * Calls the CropprCore's constructor.\n   */\n  function Croppr(element, options) {\n    var _deferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    classCallCheck(this, Croppr);\n    return possibleConstructorReturn(this, (Croppr.__proto__ || Object.getPrototypeOf(Croppr)).call(this, element, options, _deferred));\n  }\n  /**\n   * Gets the value of the crop region.\n   * @param {String} [mode] Which mode of calculation to use: 'real', 'ratio' or\n   *      'raw'.\n   */\n  createClass(Croppr, [{\n    key: 'getValue',\n    value: function getValue(mode) {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'getValue', this).call(this, mode);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'setImage', this).call(this, src);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'destroy', this).call(this);\n    }\n    /**\n     * Moves the crop region to a specified coordinate.\n     * @param {Number} x\n     * @param {Number} y\n     */\n  }, {\n    key: 'moveTo',\n    value: function moveTo(x, y) {\n      this.box.move(x, y);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n    /**\n     * Resizes the crop region to a specified width and height.\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n  }, {\n    key: 'resizeTo',\n    value: function resizeTo(width, height) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [.5, .5];\n      this.box.resize(width, height, origin);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n    /**\n     * Scale the crop region by a factor.\n     * @param {Number} factor\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n  }, {\n    key: 'scaleBy',\n    value: function scaleBy(factor) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [.5, .5];\n      this.box.scale(factor, origin);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n  }]);\n  return Croppr;\n}(CropprCore);\n\nreturn Croppr$1;\n\n})));\n","/*\n * JavaScript Load Image Orientation\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-scale', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(\n      require('./load-image'),\n      require('./load-image-scale'),\n      require('./load-image-meta')\n    )\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  var originalHasCanvasOption = loadImage.hasCanvasOption\n  var originalHasMetaOption = loadImage.hasMetaOption\n  var originalTransformCoordinates = loadImage.transformCoordinates\n  var originalGetTransformedOptions = loadImage.getTransformedOptions\n\n  // Determines if the target image should be a canvas element:\n  loadImage.hasCanvasOption = function(options) {\n    return (\n      !!options.orientation || originalHasCanvasOption.call(loadImage, options)\n    )\n  }\n\n  // Determines if meta data should be loaded automatically:\n  loadImage.hasMetaOption = function(options) {\n    return (\n      (options && options.orientation === true) ||\n      originalHasMetaOption.call(loadImage, options)\n    )\n  }\n\n  // Transform image orientation based on\n  // the given EXIF orientation option:\n  loadImage.transformCoordinates = function(canvas, options) {\n    originalTransformCoordinates.call(loadImage, canvas, options)\n    var ctx = canvas.getContext('2d')\n    var width = canvas.width\n    var height = canvas.height\n    var styleWidth = canvas.style.width\n    var styleHeight = canvas.style.height\n    var orientation = options.orientation\n    if (!orientation || orientation > 8) {\n      return\n    }\n    if (orientation > 4) {\n      canvas.width = height\n      canvas.height = width\n      canvas.style.width = styleHeight\n      canvas.style.height = styleWidth\n    }\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        ctx.translate(width, 0)\n        ctx.scale(-1, 1)\n        break\n      case 3:\n        // 180° rotate left\n        ctx.translate(width, height)\n        ctx.rotate(Math.PI)\n        break\n      case 4:\n        // vertical flip\n        ctx.translate(0, height)\n        ctx.scale(1, -1)\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        ctx.rotate(0.5 * Math.PI)\n        ctx.scale(1, -1)\n        break\n      case 6:\n        // 90° rotate right\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(0, -height)\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(width, -height)\n        ctx.scale(-1, 1)\n        break\n      case 8:\n        // 90° rotate left\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-width, 0)\n        break\n    }\n  }\n\n  // Transforms coordinate and dimension options\n  // based on the given orientation option:\n  loadImage.getTransformedOptions = function(img, opts, data) {\n    var options = originalGetTransformedOptions.call(loadImage, img, opts)\n    var orientation = options.orientation\n    var newOptions\n    var i\n    if (orientation === true && data && data.exif) {\n      orientation = data.exif.get('Orientation')\n    }\n    if (!orientation || orientation > 8 || orientation === 1) {\n      return options\n    }\n    newOptions = {}\n    for (i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.orientation = orientation\n    switch (orientation) {\n      case 2:\n        // horizontal flip\n        newOptions.left = options.right\n        newOptions.right = options.left\n        break\n      case 3:\n        // 180° rotate left\n        newOptions.left = options.right\n        newOptions.top = options.bottom\n        newOptions.right = options.left\n        newOptions.bottom = options.top\n        break\n      case 4:\n        // vertical flip\n        newOptions.top = options.bottom\n        newOptions.bottom = options.top\n        break\n      case 5:\n        // vertical flip + 90 rotate right\n        newOptions.left = options.top\n        newOptions.top = options.left\n        newOptions.right = options.bottom\n        newOptions.bottom = options.right\n        break\n      case 6:\n        // 90° rotate right\n        newOptions.left = options.top\n        newOptions.top = options.right\n        newOptions.right = options.bottom\n        newOptions.bottom = options.left\n        break\n      case 7:\n        // horizontal flip + 90 rotate right\n        newOptions.left = options.bottom\n        newOptions.top = options.right\n        newOptions.right = options.top\n        newOptions.bottom = options.left\n        break\n      case 8:\n        // 90° rotate left\n        newOptions.left = options.bottom\n        newOptions.top = options.left\n        newOptions.right = options.top\n        newOptions.bottom = options.right\n        break\n    }\n    if (newOptions.orientation > 4) {\n      newOptions.maxWidth = options.maxHeight\n      newOptions.maxHeight = options.maxWidth\n      newOptions.minWidth = options.minHeight\n      newOptions.minHeight = options.minWidth\n      newOptions.sourceWidth = options.sourceHeight\n      newOptions.sourceHeight = options.sourceWidth\n    }\n    return newOptions\n  }\n})\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/*\n * JavaScript Load Image IPTC Parser\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * Copyright 2018, Dave Bevan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, Buffer */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  loadImage.IptcMap = function() {\n    return this\n  }\n\n  loadImage.IptcMap.prototype.map = {\n    ObjectName: 0x5\n  }\n\n  loadImage.IptcMap.prototype.get = function(id) {\n    return this[id] || this[this.map[id]]\n  }\n\n  loadImage.parseIptcTags = function(\n    dataView,\n    startOffset,\n    sectionLength,\n    data\n  ) {\n    /**\n     * Retrieves string for the given Buffer and range\n     *\n     * @param {Buffer} buffer IPTC buffer\n     * @param {number} start Range start\n     * @param {number} length Range length\n     * @returns {string} String value\n     */\n    function getStringFromDB(buffer, start, length) {\n      var outstr = ''\n      for (var n = start; n < start + length; n++) {\n        outstr += String.fromCharCode(buffer.getUint8(n))\n      }\n      return outstr\n    }\n    var fieldValue, dataSize, segmentType\n    var segmentStartPos = startOffset\n    while (segmentStartPos < startOffset + sectionLength) {\n      // we currently handle the 2: class of iptc tag\n      if (\n        dataView.getUint8(segmentStartPos) === 0x1c &&\n        dataView.getUint8(segmentStartPos + 1) === 0x02\n      ) {\n        segmentType = dataView.getUint8(segmentStartPos + 2)\n        // only store data for known tags\n        if (segmentType in data.iptc.tags) {\n          dataSize = dataView.getInt16(segmentStartPos + 3)\n          fieldValue = getStringFromDB(dataView, segmentStartPos + 5, dataSize)\n          // Check if we already stored a value with this name\n          if (Object.prototype.hasOwnProperty.call(data.iptc, segmentType)) {\n            // Value already stored with this name, create multivalue field\n            if (data.iptc[segmentType] instanceof Array) {\n              data.iptc[segmentType].push(fieldValue)\n            } else {\n              data.iptc[segmentType] = [data.iptc[segmentType], fieldValue]\n            }\n          } else {\n            data.iptc[segmentType] = fieldValue\n          }\n        }\n      }\n      segmentStartPos++\n    }\n  }\n\n  loadImage.parseIptcData = function(dataView, offset, length, data, options) {\n    if (options.disableIptc) {\n      return\n    }\n    var markerLength = offset + length\n    // Found '8BIM<EOT><EOT>' ?\n    var isFieldSegmentStart = function(dataView, offset) {\n      return (\n        dataView.getUint32(offset) === 0x3842494d &&\n        dataView.getUint16(offset + 4) === 0x0404\n      )\n    }\n    // Hunt forward, looking for the correct IPTC block signature:\n    // Reference: https://metacpan.org/pod/distribution/Image-MetaData-JPEG/lib/Image/MetaData/JPEG/Structures.pod#Structure-of-a-Photoshop-style-APP13-segment\n    // From https://github.com/exif-js/exif-js/blob/master/exif.js ~ line 474 on\n    while (offset + 8 < markerLength) {\n      if (isFieldSegmentStart(dataView, offset)) {\n        var nameHeaderLength = dataView.getUint8(offset + 7)\n        if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1\n        // Check for pre photoshop 6 format\n        if (nameHeaderLength === 0) {\n          // Always 4\n          nameHeaderLength = 4\n        }\n        var startOffset = offset + 8 + nameHeaderLength\n        if (startOffset > markerLength) {\n          // eslint-disable-next-line no-console\n          console.log('Invalid IPTC data: Invalid segment offset.')\n          break\n        }\n        var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength)\n        if (offset + sectionLength > markerLength) {\n          // eslint-disable-next-line no-console\n          console.log('Invalid IPTC data: Invalid segment size.')\n          break\n        }\n        // Create the iptc object to store the tags:\n        data.iptc = new loadImage.IptcMap()\n        // Parse the tags\n        return loadImage.parseIptcTags(\n          dataView,\n          startOffset,\n          sectionLength,\n          data\n        )\n      }\n      // eslint-disable-next-line no-param-reassign\n      offset++\n    }\n    // eslint-disable-next-line no-console\n    console.log('No IPTC data at this offset - could be XMP')\n  }\n\n  // Registers this IPTC parser for the APP13 JPEG meta data segment:\n  loadImage.metaDataParsers.jpeg[0xffed].push(loadImage.parseIptcData)\n\n  // Adds the following properties to the parseMetaData callback data:\n  // * iptc: The iptc tags, parsed by the parseIptcData method\n\n  // Adds the following options to the parseMetaData method:\n  // * disableIptc: Disables IPTC parsing.\n})\n","/*\n * JavaScript Load Image Scaling\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  var originalTransform = loadImage.transform\n\n  loadImage.transform = function(img, options, callback, file, data) {\n    originalTransform.call(\n      loadImage,\n      loadImage.scale(img, options, data),\n      options,\n      callback,\n      file,\n      data\n    )\n  }\n\n  // Transform image coordinates, allows to override e.g.\n  // the canvas orientation based on the orientation option,\n  // gets canvas, options passed as arguments:\n  loadImage.transformCoordinates = function() {}\n\n  // Returns transformed options, allows to override e.g.\n  // maxWidth, maxHeight and crop options based on the aspectRatio.\n  // gets img, options passed as arguments:\n  loadImage.getTransformedOptions = function(img, options) {\n    var aspectRatio = options.aspectRatio\n    var newOptions\n    var i\n    var width\n    var height\n    if (!aspectRatio) {\n      return options\n    }\n    newOptions = {}\n    for (i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.crop = true\n    width = img.naturalWidth || img.width\n    height = img.naturalHeight || img.height\n    if (width / height > aspectRatio) {\n      newOptions.maxWidth = height * aspectRatio\n      newOptions.maxHeight = height\n    } else {\n      newOptions.maxWidth = width\n      newOptions.maxHeight = width / aspectRatio\n    }\n    return newOptions\n  }\n\n  // Canvas render method, allows to implement a different rendering algorithm:\n  loadImage.renderImageToCanvas = function(\n    canvas,\n    img,\n    sourceX,\n    sourceY,\n    sourceWidth,\n    sourceHeight,\n    destX,\n    destY,\n    destWidth,\n    destHeight\n  ) {\n    canvas\n      .getContext('2d')\n      .drawImage(\n        img,\n        sourceX,\n        sourceY,\n        sourceWidth,\n        sourceHeight,\n        destX,\n        destY,\n        destWidth,\n        destHeight\n      )\n    return canvas\n  }\n\n  // Determines if the target image should be a canvas element:\n  loadImage.hasCanvasOption = function(options) {\n    return options.canvas || options.crop || !!options.aspectRatio\n  }\n\n  // Scales and/or crops the given image (img or canvas HTML element)\n  // using the given options.\n  // Returns a canvas object if the browser supports canvas\n  // and the hasCanvasOption method returns true or a canvas\n  // object is passed as image, else the scaled image:\n  loadImage.scale = function(img, options, data) {\n    // eslint-disable-next-line no-param-reassign\n    options = options || {}\n    var canvas = document.createElement('canvas')\n    var useCanvas =\n      img.getContext ||\n      (loadImage.hasCanvasOption(options) && canvas.getContext)\n    var width = img.naturalWidth || img.width\n    var height = img.naturalHeight || img.height\n    var destWidth = width\n    var destHeight = height\n    var maxWidth\n    var maxHeight\n    var minWidth\n    var minHeight\n    var sourceWidth\n    var sourceHeight\n    var sourceX\n    var sourceY\n    var pixelRatio\n    var downsamplingRatio\n    var tmp\n    /**\n     * Scales up image dimensions\n     */\n    function scaleUp() {\n      var scale = Math.max(\n        (minWidth || destWidth) / destWidth,\n        (minHeight || destHeight) / destHeight\n      )\n      if (scale > 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    /**\n     * Scales down image dimensions\n     */\n    function scaleDown() {\n      var scale = Math.min(\n        (maxWidth || destWidth) / destWidth,\n        (maxHeight || destHeight) / destHeight\n      )\n      if (scale < 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    if (useCanvas) {\n      // eslint-disable-next-line no-param-reassign\n      options = loadImage.getTransformedOptions(img, options, data)\n      sourceX = options.left || 0\n      sourceY = options.top || 0\n      if (options.sourceWidth) {\n        sourceWidth = options.sourceWidth\n        if (options.right !== undefined && options.left === undefined) {\n          sourceX = width - sourceWidth - options.right\n        }\n      } else {\n        sourceWidth = width - sourceX - (options.right || 0)\n      }\n      if (options.sourceHeight) {\n        sourceHeight = options.sourceHeight\n        if (options.bottom !== undefined && options.top === undefined) {\n          sourceY = height - sourceHeight - options.bottom\n        }\n      } else {\n        sourceHeight = height - sourceY - (options.bottom || 0)\n      }\n      destWidth = sourceWidth\n      destHeight = sourceHeight\n    }\n    maxWidth = options.maxWidth\n    maxHeight = options.maxHeight\n    minWidth = options.minWidth\n    minHeight = options.minHeight\n    if (useCanvas && maxWidth && maxHeight && options.crop) {\n      destWidth = maxWidth\n      destHeight = maxHeight\n      tmp = sourceWidth / sourceHeight - maxWidth / maxHeight\n      if (tmp < 0) {\n        sourceHeight = (maxHeight * sourceWidth) / maxWidth\n        if (options.top === undefined && options.bottom === undefined) {\n          sourceY = (height - sourceHeight) / 2\n        }\n      } else if (tmp > 0) {\n        sourceWidth = (maxWidth * sourceHeight) / maxHeight\n        if (options.left === undefined && options.right === undefined) {\n          sourceX = (width - sourceWidth) / 2\n        }\n      }\n    } else {\n      if (options.contain || options.cover) {\n        minWidth = maxWidth = maxWidth || minWidth\n        minHeight = maxHeight = maxHeight || minHeight\n      }\n      if (options.cover) {\n        scaleDown()\n        scaleUp()\n      } else {\n        scaleUp()\n        scaleDown()\n      }\n    }\n    if (useCanvas) {\n      pixelRatio = options.pixelRatio\n      if (pixelRatio > 1) {\n        canvas.style.width = destWidth + 'px'\n        canvas.style.height = destHeight + 'px'\n        destWidth *= pixelRatio\n        destHeight *= pixelRatio\n        canvas.getContext('2d').scale(pixelRatio, pixelRatio)\n      }\n      downsamplingRatio = options.downsamplingRatio\n      if (\n        downsamplingRatio > 0 &&\n        downsamplingRatio < 1 &&\n        destWidth < sourceWidth &&\n        destHeight < sourceHeight\n      ) {\n        while (sourceWidth * downsamplingRatio > destWidth) {\n          canvas.width = sourceWidth * downsamplingRatio\n          canvas.height = sourceHeight * downsamplingRatio\n          loadImage.renderImageToCanvas(\n            canvas,\n            img,\n            sourceX,\n            sourceY,\n            sourceWidth,\n            sourceHeight,\n            0,\n            0,\n            canvas.width,\n            canvas.height\n          )\n          sourceX = 0\n          sourceY = 0\n          sourceWidth = canvas.width\n          sourceHeight = canvas.height\n          // eslint-disable-next-line no-param-reassign\n          img = document.createElement('canvas')\n          img.width = sourceWidth\n          img.height = sourceHeight\n          loadImage.renderImageToCanvas(\n            img,\n            canvas,\n            0,\n            0,\n            sourceWidth,\n            sourceHeight,\n            0,\n            0,\n            sourceWidth,\n            sourceHeight\n          )\n        }\n      }\n      canvas.width = destWidth\n      canvas.height = destHeight\n      loadImage.transformCoordinates(canvas, options)\n      return loadImage.renderImageToCanvas(\n        canvas,\n        img,\n        sourceX,\n        sourceY,\n        sourceWidth,\n        sourceHeight,\n        0,\n        0,\n        destWidth,\n        destHeight\n      )\n    }\n    img.width = destWidth\n    img.height = destHeight\n    return img\n  }\n})\n","/*\n * JavaScript Load Image Fetch\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2017, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function(factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function(loadImage) {\n  'use strict'\n\n  if (typeof fetch !== 'undefined' && typeof Request !== 'undefined') {\n    loadImage.fetchBlob = function(url, callback, options) {\n      if (loadImage.hasMetaOption(options)) {\n        fetch(new Request(url, options))\n          .then(function(response) {\n            return response.blob()\n          })\n          .then(callback)\n          .catch(function(err) {\n            console.log(err) // eslint-disable-line no-console\n            callback()\n          })\n      } else {\n        callback()\n      }\n    }\n  } else if (\n    // Check for XHR2 support:\n    typeof XMLHttpRequest !== 'undefined' &&\n    typeof ProgressEvent !== 'undefined'\n  ) {\n    loadImage.fetchBlob = function(url, callback, options) {\n      if (loadImage.hasMetaOption(options)) {\n        // eslint-disable-next-line no-param-reassign\n        options = options || {}\n        var req = new XMLHttpRequest()\n        req.open(options.method || 'GET', url)\n        if (options.headers) {\n          Object.keys(options.headers).forEach(function(key) {\n            req.setRequestHeader(key, options.headers[key])\n          })\n        }\n        req.withCredentials = options.credentials === 'include'\n        req.responseType = 'blob'\n        req.onload = function() {\n          callback(req.response)\n        }\n        req.onerror = req.onabort = req.ontimeout = function(e) {\n          console.log(e) // eslint-disable-line no-console\n          callback()\n        }\n        req.send(options.body)\n      } else {\n        callback()\n      }\n    }\n  }\n})\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n"],"sourceRoot":""}