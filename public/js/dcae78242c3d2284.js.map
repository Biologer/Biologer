{"version":3,"file":"js/dcae78242c3d2284.js","mappings":"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","sources":["webpack:///resources/js/components/FieldObservationApproval.vue","webpack:///./resources/js/components/FieldObservationApproval.vue?49d2","webpack:///./resources/js/components/FieldObservationApproval.vue?7304","webpack:///./resources/js/components/FieldObservationApproval.vue"],"sourcesContent":["<template>\r\n  <div class=\"level-right\">\r\n    <div class=\"level-item\" v-if=\"approveUrl\">\r\n      <button\r\n        type=\"button\"\r\n        class=\"button\"\r\n        :class=\"{'is-loading': approving}\"\r\n        @click=\"confirmApprove\"\r\n        :disabled=\"busy\"\r\n      >\r\n        <b-icon icon=\"check\" class=\"has-text-success\" />\r\n\r\n        <span>{{ trans('buttons.approve') }}</span>\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"level-item\" v-if=\"markAsUnidentifiableUrl\">\r\n      <button\r\n        type=\"button\"\r\n        class=\"button\"\r\n        :class=\"{'is-loading': markingAsUnidentifiable}\"\r\n        @click=\"confirmMarkingAsUnidentifiable\"\r\n        :disabled=\"busy\"\r\n      >\r\n        <b-icon icon=\"times\" class=\"has-text-danger\" />\r\n\r\n        <span>{{ trans('buttons.unidentifiable') }}</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'nzFieldObservationApproval',\r\n\r\n  props: {\r\n    approveUrl: String,\r\n    markAsUnidentifiableUrl: String,\r\n\r\n    redirectUrl: {\r\n      type: String,\r\n      required: true\r\n    },\r\n\r\n    fieldObservation: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      approving: false,\r\n      markingAsUnidentifiable: false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    busy() {\r\n      return this.approving || this.markingAsUnidentifiable\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    confirmApprove() {\r\n      this.$buefy.dialog.confirm({\r\n        message: this.trans('You are about to approve this field observation'),\r\n        confirmText: this.trans('buttons.approve'),\r\n        cancelText: this.trans('buttons.cancel'),\r\n        type: 'is-primary',\r\n        onConfirm: this.approve.bind(this)\r\n      })\r\n    },\r\n\r\n    approve() {\r\n      this.approving = true;\r\n\r\n      axios.post(this.approveUrl, {\r\n        field_observation_ids: [this.fieldObservation.id]\r\n      }).then(this.successfullyApproved).catch(this.failedToApprove)\r\n    },\r\n\r\n    successfullyApproved() {\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Observation has been approved'),\r\n        type: 'is-success'\r\n      });\r\n\r\n      setTimeout(() => {\r\n        this.approving = false;\r\n\r\n        window.location.href = this.redirectUrl\r\n      }, 1000)\r\n    },\r\n\r\n    failedToApprove(error) {\r\n      this.approving = false\r\n\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Observation cannot be approved'),\r\n        type: 'is-danger',\r\n        duration: 5000\r\n      })\r\n    },\r\n\r\n    confirmMarkingAsUnidentifiable() {\r\n      const dialog = this.$buefy.dialog.prompt({\r\n        message: this.trans('You are about to mark observation as unidentifiable. What\\'s the reason?'),\r\n        confirmText: this.trans('buttons.mark_unidentifiable'),\r\n        cancelText: this.trans('buttons.cancel'),\r\n        type: 'is-warning',\r\n        inputAttrs: {\r\n            placeholder: this.trans('Reason'),\r\n            required: true,\r\n            maxlength: 255\r\n        },\r\n        onConfirm: this.markAsUnidentifiable.bind(this)\r\n      })\r\n\r\n      dialog.$nextTick(() => {\r\n        this.validateReason(dialog);\r\n      })\r\n    },\r\n\r\n    markAsUnidentifiable(reason) {\r\n      this.markingAsUnidentifiable = true\r\n\r\n      axios.post(this.markAsUnidentifiableUrl, {\r\n        field_observation_ids: [this.fieldObservation.id],\r\n        reason\r\n      }).then(this.successfullyMarkedAsUnidentifiable)\r\n      .catch(this.failedToMarkAsUnidentifiable)\r\n    },\r\n\r\n    successfullyMarkedAsUnidentifiable() {\r\n      this.$buefy.toast.open({\r\n        message: this.trans('Observation has been marked as unidentifiable'),\r\n        type: 'is-success'\r\n      })\r\n\r\n      setTimeout(() => {\r\n        this.markingAsUnidentifiable = false\r\n\r\n        window.location.href = this.redirectUrl\r\n      }, 1000)\r\n    },\r\n\r\n    failedToMarkAsUnidentifiable(error) {\r\n      this.markingAsUnidentifiable = false\r\n      this.$buefy.toast.open({\r\n        message: this.trans('This observation cannot be marked as unidentifiable'),\r\n        type: 'is-danger',\r\n        duration: 5000\r\n      })\r\n    },\r\n\r\n    validateReason(dialog) {\r\n      dialog.$refs.input.addEventListener('invalid', (e) => {\r\n        e.target.setCustomValidity('')\r\n\r\n        if (!e.target.validity.valid) {\r\n          e.target.setCustomValidity(this.trans('This field is required and can contain max 255 chars.'))\r\n        }\r\n      });\r\n\r\n      dialog.$refs.input.addEventListener('input', (e) => {\r\n        dialog.validationMessage = null\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationApproval.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldObservationApproval.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FieldObservationApproval.vue?vue&type=template&id=7a72b818\"\nimport script from \"./FieldObservationApproval.vue?vue&type=script&lang=js\"\nexport * from \"./FieldObservationApproval.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"level-right\"},[(_vm.approveUrl)?_c('div',{staticClass:\"level-item\"},[_c('button',{staticClass:\"button\",class:{'is-loading': _vm.approving},attrs:{\"type\":\"button\",\"disabled\":_vm.busy},on:{\"click\":_vm.confirmApprove}},[_c('b-icon',{staticClass:\"has-text-success\",attrs:{\"icon\":\"check\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans('buttons.approve')))])],1)]):_vm._e(),_vm._v(\" \"),(_vm.markAsUnidentifiableUrl)?_c('div',{staticClass:\"level-item\"},[_c('button',{staticClass:\"button\",class:{'is-loading': _vm.markingAsUnidentifiable},attrs:{\"type\":\"button\",\"disabled\":_vm.busy},on:{\"click\":_vm.confirmMarkingAsUnidentifiable}},[_c('b-icon',{staticClass:\"has-text-danger\",attrs:{\"icon\":\"times\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.trans('buttons.unidentifiable')))])],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"names":["name","props","approveUrl","String","markAsUnidentifiableUrl","redirectUrl","type","required","fieldObservation","Object","data","approving","markingAsUnidentifiable","computed","busy","methods","confirmApprove","$buefy","dialog","confirm","message","trans","confirmText","cancelText","onConfirm","approve","bind","axios","post","field_observation_ids","id","then","successfullyApproved","failedToApprove","_this","toast","open","setTimeout","window","location","href","error","duration","confirmMarkingAsUnidentifiable","_this2","prompt","inputAttrs","placeholder","maxlength","markAsUnidentifiable","$nextTick","validateReason","reason","successfullyMarkedAsUnidentifiable","failedToMarkAsUnidentifiable","_this3","_this4","$refs","input","addEventListener","e","target","setCustomValidity","validity","valid","validationMessage","_vm","this","_c","_self","staticClass","class","attrs","on","_v","_s","_e"],"sourceRoot":""}