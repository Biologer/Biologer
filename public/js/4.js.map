{"version":3,"sources":["webpack:///./node_modules/blueimp-load-image/js/index.js","webpack:///./node_modules/blueimp-load-image/js/load-image-iptc-map.js","webpack:///./node_modules/blueimp-load-image/js/load-image-meta.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/blueimp-load-image/js/load-image.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_basePick.js","webpack:///./node_modules/lodash/pick.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/croppr/src/box.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/isEqual.js","webpack:///./node_modules/blueimp-load-image/js/load-image-exif.js","webpack:///./node_modules/blueimp-load-image/js/load-image-exif-map.js","webpack:///./node_modules/croppr/dist/croppr.js","webpack:///./node_modules/blueimp-load-image/js/load-image-orientation.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/blueimp-load-image/js/load-image-iptc.js","webpack:///./node_modules/blueimp-load-image/js/load-image-scale.js","webpack:///./node_modules/blueimp-load-image/js/load-image-fetch.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/_flatRest.js"],"names":["module","exports","factory","loadImage","IptcMapProto","IptcMap","prototype","tags","0","3","4","5","7","8","10","12","15","20","22","25","26","27","30","35","37","38","40","42","45","47","50","55","60","62","63","65","70","75","80","85","90","92","95","100","101","103","105","110","115","116","118","120","121","122","125","130","131","135","150","151","152","153","154","184","185","186","187","188","200","201","202","221","225","228","230","231","232","255","stringValues","1","2","6","9","a","b","p","L","P","S","getText","id","value","this","get","tagCode","map","stringValue","String","getAll","prop","name","Object","hasOwnProperty","call","getName","Number","global","originalTransform","transform","blobSlice","Blob","slice","webkitSlice","mozSlice","bufferSlice","ArrayBuffer","begin","end","byteLength","arr1","Uint8Array","arr2","set","buffer","metaDataParsers","jpeg","parseMetaData","file","callback","options","data","that","executor","resolve","reject","DataView","size","type","maxMetaDataSize","readFile","dataView","getUint16","Error","markerBytes","markerLength","parsers","i","offset","maxOffset","headLength","console","log","disableMetaDataParsers","length","disableImageHead","imageHead","Promise","replaceJPEGHead","blob","oldHead","newHead","img","requiresMetaData","result","apply","arguments","replaceHead","head","then","Symbol","isArguments","isArray","spreadableSymbol","isConcatSpreadable","undefined","$","urlAPI","URL","webkitURL","createObjectURL","revokeObjectURL","url","revokeHelper","noRevoke","onload","onerror","method","FileReader","reader","onabort","error","readerMethod","isInstanceOf","obj","toString","document","createElement","resolveWrapper","image","fetchBlobCallback","err","crossOrigin","src","event","originalWidth","naturalWidth","width","originalHeight","naturalHeight","height","fetchBlob","meta","window","assignValue","castPath","isIndex","isObject","toKey","object","path","customizer","index","lastIndex","nested","key","newValue","objValue","basePickBy","hasIn","paths","basePick","pick","flatRest","root","Date","now","Box","x1","y1","x2","y2","Math","abs","newWidth","newHeight","origin","fromX","fromY","factor","resize","x","y","point","ratio","grow","boundaryWidth","boundaryHeight","originX","originY","getAbsolutePoint","maxIfLeft","maxIfTop","maxIfRight","maxIfBottom","directionX","directionY","maxWidth","maxHeight","min","scale","minWidth","minHeight","baseFlatten","array","arrayPush","isFlattenable","depth","predicate","isStrict","baseIsEqual","other","ExifMap","defineProperty","ifds","Orientation","Thumbnail","Exif","GPSInfo","Interoperability","ifd1","ExifTagTypes","getValue","dataOffset","getUint8","fromCharCode","ascii","littleEndian","getUint32","getInt32","getExifValue","tiffOffset","tagSize","values","str","c","tagType","shouldIncludeTag","includeTags","excludeTags","parseExifTags","dirOffset","tagOffsets","tagsNumber","dirEndOffset","tagOffset","tagNumber","tagValue","parseExifData","disableExif","thumbnailIFD","includeExifTags","excludeExifTags","exif","disableExifOffsets","exifOffsets","exifTiffOffset","exifLittleEndian","keys","forEach","parseExifIFD","getExifThumbnail","push","exifWriters","orientationOffset","setUint16","writeExifData","ExifMapProto","ExposureProgram","MeteringMode","LightSource","11","13","14","17","18","19","21","23","24","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","ComponentsConfiguration","ifd","subTags","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","element","currTime","getTime","timeToCall","max","setTimeout","clearTimeout","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","e","MouseEvent","eventType","mouseEvent","initMouseEvent","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","possibleConstructorReturn","self","ReferenceError","slicedToArray","arr","Array","iterator","_arr","_n","_d","_e","_s","_i","next","done","sliceIterator","Handle","position","constraints","cursor","eventBus","onMouseUp","stopPropagation","removeEventListener","onMouseMove","dispatchEvent","handle","mouseX","clientX","mouseY","clientY","el","className","style","addEventListener","_getAbsolutePoint","_getAbsolutePoint2","_factor","_newWidth","_newHeight","_newWidth2","_newHeight2","_newWidth3","_newHeight3","simulateMouseEvent","preventDefault","touch","changedTouches","view","screenX","screenY","HANDLES","round","decimals","_CropprCore","Croppr","_deferred","__proto__","subClass","superClass","create","constructor","setPrototypeOf","inherits","mode","box","move","redraw","onCropEnd","initializeBox","CropprCore","_this","deferred","parseOptions","nodeName","querySelector","getAttribute","_initialized","_restore","parentNode","initialize","createDOM","convertToPixels","cropperEl","attachHandlerEvents","attachRegionEvents","attachOverlayEvents","onInitialize","targetEl","containerEl","imageEl","setAttribute","imageClippedEl","cloneNode","regionEl","overlayEl","handleContainerEl","handles","appendChild","parentElement","replaceChild","_this2","opts","startSize","constrainToRatio","aspectRatio","minSize","maxSize","constrainToSize","parentWidth","offsetWidth","parentHeight","offsetHeight","constrainToBoundary","_this3","clip","center","xSign","ySign","foregroundHandleIndex","handleWidth","handleHeight","left","top","zIndex","onHandleMoveStart","bind","onHandleMoveMoving","onHandleMoveEnd","onRegionMoveStart","onRegionMoveMoving","onRegionMoveEnd","tmpBox","container","getBoundingClientRect","originPoint","_box$getAbsolutePoint","_box$getAbsolutePoint2","activeHandle","onCropStart","_e$detail","TOP_MOVABLE","RIGHT_MOVABLE","BOTTOM_MOVABLE","LEFT_MOVABLE","MULTI_AXIS","isFlippedX","isFlippedY","tmp","_tmp","isVerticalMovement","ratioMode","onCropMove","_e$detail2","currentMove","offsetX","offsetY","_e$detail3","_currentMove","returnMode","actualWidth","actualHeight","_imageEl$getBoundingC","elementWidth","elementHeight","factorX","factorY","_imageEl$getBoundingC2","_elementWidth","_elementHeight","defaults$$1","unit","onUpdate","warn","s","toLowerCase","indexOf","defaultValue","v","d","sizeKeys","originalRequiresCanvas","requiresCanvas","originalRequiresMetaData","originalTransformCoordinates","transformCoordinates","originalGetTransformedOptions","getTransformedOptions","requiresCanvasOrientation","withMetaData","orientation","requiresOrientationChange","autoOrientation","requiresRot180","ctx","createCanvas","getContext","drawImage","orientationCropBug","getImageData","exifOrientation","right","bottom","newOptions","sourceWidth","sourceHeight","tmpTop","tmpRight","canvas","translate","rotate","PI","baseGet","baseSet","getTagValue","types","outstr","n","getStringValue","combineTagValues","parseIptcTags","segmentOffset","segmentLength","segmentEnd","getInt16","iptc","iptcOffsets","isSegmentStart","getHeaderLength","ObjectName","parseIptcData","disableIptc","headerLength","disableIptcOffsets","includeIptcTags","excludeIptcTags","offscreen","OffscreenCanvas","crop","sourceX","sourceY","destWidth","destHeight","imageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingQuality","pixelRatio","downsamplingRatio","useCanvas","HTMLCanvasElement","scaleUp","scaleDown","contain","cover","floor","parseFloat","setTransform","fetch","Request","Response","responseHandler","response","XMLHttpRequest","responseType","req","open","headers","setRequestHeader","withCredentials","credentials","ontimeout","send","body","toNumber","nativeMax","nativeMin","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","flush","flatten","overRest","setToString"],"mappings":"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","file":"js/4.js?id=ae5bddbeb59efcfc1208","sourcesContent":["/* global module, require */\n\nmodule.exports = require('./load-image')\n\nrequire('./load-image-scale')\nrequire('./load-image-meta')\nrequire('./load-image-fetch')\nrequire('./load-image-exif')\nrequire('./load-image-exif-map')\nrequire('./load-image-iptc')\nrequire('./load-image-iptc-map')\nrequire('./load-image-orientation')\n","/*\n * JavaScript Load Image IPTC Map\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * Copyright 2018, Dave Bevan\n *\n * IPTC tags mapping based on\n * https://iptc.org/standards/photo-metadata\n * https://exiftool.org/TagNames/IPTC.html\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-iptc'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-iptc'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var IptcMapProto = loadImage.IptcMap.prototype\n\n  IptcMapProto.tags = {\n    0: 'ApplicationRecordVersion',\n    3: 'ObjectTypeReference',\n    4: 'ObjectAttributeReference',\n    5: 'ObjectName',\n    7: 'EditStatus',\n    8: 'EditorialUpdate',\n    10: 'Urgency',\n    12: 'SubjectReference',\n    15: 'Category',\n    20: 'SupplementalCategories',\n    22: 'FixtureIdentifier',\n    25: 'Keywords',\n    26: 'ContentLocationCode',\n    27: 'ContentLocationName',\n    30: 'ReleaseDate',\n    35: 'ReleaseTime',\n    37: 'ExpirationDate',\n    38: 'ExpirationTime',\n    40: 'SpecialInstructions',\n    42: 'ActionAdvised',\n    45: 'ReferenceService',\n    47: 'ReferenceDate',\n    50: 'ReferenceNumber',\n    55: 'DateCreated',\n    60: 'TimeCreated',\n    62: 'DigitalCreationDate',\n    63: 'DigitalCreationTime',\n    65: 'OriginatingProgram',\n    70: 'ProgramVersion',\n    75: 'ObjectCycle',\n    80: 'Byline',\n    85: 'BylineTitle',\n    90: 'City',\n    92: 'Sublocation',\n    95: 'State',\n    100: 'CountryCode',\n    101: 'Country',\n    103: 'OriginalTransmissionReference',\n    105: 'Headline',\n    110: 'Credit',\n    115: 'Source',\n    116: 'CopyrightNotice',\n    118: 'Contact',\n    120: 'Caption',\n    121: 'LocalCaption',\n    122: 'Writer',\n    125: 'RasterizedCaption',\n    130: 'ImageType',\n    131: 'ImageOrientation',\n    135: 'LanguageIdentifier',\n    150: 'AudioType',\n    151: 'AudioSamplingRate',\n    152: 'AudioSamplingResolution',\n    153: 'AudioDuration',\n    154: 'AudioOutcue',\n    184: 'JobID',\n    185: 'MasterDocumentID',\n    186: 'ShortDocumentID',\n    187: 'UniqueDocumentID',\n    188: 'OwnerID',\n    200: 'ObjectPreviewFileFormat',\n    201: 'ObjectPreviewFileVersion',\n    202: 'ObjectPreviewData',\n    221: 'Prefs',\n    225: 'ClassifyState',\n    228: 'SimilarityIndex',\n    230: 'DocumentNotes',\n    231: 'DocumentHistory',\n    232: 'ExifCameraInfo',\n    255: 'CatalogSets'\n  }\n\n  IptcMapProto.stringValues = {\n    10: {\n      0: '0 (reserved)',\n      1: '1 (most urgent)',\n      2: '2',\n      3: '3',\n      4: '4',\n      5: '5 (normal urgency)',\n      6: '6',\n      7: '7',\n      8: '8 (least urgent)',\n      9: '9 (user-defined priority)'\n    },\n    75: {\n      a: 'Morning',\n      b: 'Both Morning and Evening',\n      p: 'Evening'\n    },\n    131: {\n      L: 'Landscape',\n      P: 'Portrait',\n      S: 'Square'\n    }\n  }\n\n  IptcMapProto.getText = function (id) {\n    var value = this.get(id)\n    var tagCode = this.map[id]\n    var stringValue = this.stringValues[tagCode]\n    if (stringValue) return stringValue[value]\n    return String(value)\n  }\n\n  IptcMapProto.getAll = function () {\n    var map = {}\n    var prop\n    var name\n    for (prop in this) {\n      if (Object.prototype.hasOwnProperty.call(this, prop)) {\n        name = this.tags[prop]\n        if (name) map[name] = this.getText(name)\n      }\n    }\n    return map\n  }\n\n  IptcMapProto.getName = function (tagCode) {\n    return this.tags[tagCode]\n  }\n\n  // Extend the map of tag names to tag codes:\n  ;(function () {\n    var tags = IptcMapProto.tags\n    var map = IptcMapProto.map || {}\n    var prop\n    // Map the tag names to tags:\n    for (prop in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, prop)) {\n        map[tags[prop]] = Number(prop)\n      }\n    }\n  })()\n})\n","/*\n * JavaScript Load Image Meta\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Image metadata handling implementation\n * based on the help and contribution of\n * Achim Stöhr.\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, Promise, DataView, Uint8Array, ArrayBuffer */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var global = loadImage.global\n  var originalTransform = loadImage.transform\n\n  var blobSlice =\n    global.Blob &&\n    (Blob.prototype.slice ||\n      Blob.prototype.webkitSlice ||\n      Blob.prototype.mozSlice)\n\n  var bufferSlice =\n    (global.ArrayBuffer && ArrayBuffer.prototype.slice) ||\n    function (begin, end) {\n      // Polyfill for IE10, which does not support ArrayBuffer.slice\n      // eslint-disable-next-line no-param-reassign\n      end = end || this.byteLength - begin\n      var arr1 = new Uint8Array(this, begin, end)\n      var arr2 = new Uint8Array(end)\n      arr2.set(arr1)\n      return arr2.buffer\n    }\n\n  var metaDataParsers = {\n    jpeg: {\n      0xffe1: [], // APP1 marker\n      0xffed: [] // APP13 marker\n    }\n  }\n\n  /**\n   * Parses image metadata and calls the callback with an object argument\n   * with the following property:\n   * - imageHead: The complete image head as ArrayBuffer\n   * The options argument accepts an object and supports the following\n   * properties:\n   * - maxMetaDataSize: Defines the maximum number of bytes to parse.\n   * - disableImageHead: Disables creating the imageHead property.\n   *\n   * @param {Blob} file Blob object\n   * @param {Function} [callback] Callback function\n   * @param {object} [options] Parsing options\n   * @param {object} [data] Result data object\n   * @returns {Promise<object>|undefined} Returns Promise if no callback given.\n   */\n  function parseMetaData(file, callback, options, data) {\n    var that = this\n    /**\n     * Promise executor\n     *\n     * @param {Function} resolve Resolution function\n     * @param {Function} reject Rejection function\n     * @returns {undefined} Undefined\n     */\n    function executor(resolve, reject) {\n      if (\n        !(\n          global.DataView &&\n          blobSlice &&\n          file &&\n          file.size >= 12 &&\n          file.type === 'image/jpeg'\n        )\n      ) {\n        // Nothing to parse\n        return resolve(data)\n      }\n      // 256 KiB should contain all EXIF/ICC/IPTC segments:\n      var maxMetaDataSize = options.maxMetaDataSize || 262144\n      if (\n        !loadImage.readFile(\n          blobSlice.call(file, 0, maxMetaDataSize),\n          function (buffer) {\n            // Note on endianness:\n            // Since the marker and length bytes in JPEG files are always\n            // stored in big endian order, we can leave the endian parameter\n            // of the DataView methods undefined, defaulting to big endian.\n            var dataView = new DataView(buffer)\n            // Check for the JPEG marker (0xffd8):\n            if (dataView.getUint16(0) !== 0xffd8) {\n              return reject(\n                new Error('Invalid JPEG file: Missing JPEG marker.')\n              )\n            }\n            var offset = 2\n            var maxOffset = dataView.byteLength - 4\n            var headLength = offset\n            var markerBytes\n            var markerLength\n            var parsers\n            var i\n            while (offset < maxOffset) {\n              markerBytes = dataView.getUint16(offset)\n              // Search for APPn (0xffeN) and COM (0xfffe) markers,\n              // which contain application-specific metadata like\n              // Exif, ICC and IPTC data and text comments:\n              if (\n                (markerBytes >= 0xffe0 && markerBytes <= 0xffef) ||\n                markerBytes === 0xfffe\n              ) {\n                // The marker bytes (2) are always followed by\n                // the length bytes (2), indicating the length of the\n                // marker segment, which includes the length bytes,\n                // but not the marker bytes, so we add 2:\n                markerLength = dataView.getUint16(offset + 2) + 2\n                if (offset + markerLength > dataView.byteLength) {\n                  // eslint-disable-next-line no-console\n                  console.log('Invalid JPEG metadata: Invalid segment size.')\n                  break\n                }\n                parsers = metaDataParsers.jpeg[markerBytes]\n                if (parsers && !options.disableMetaDataParsers) {\n                  for (i = 0; i < parsers.length; i += 1) {\n                    parsers[i].call(\n                      that,\n                      dataView,\n                      offset,\n                      markerLength,\n                      data,\n                      options\n                    )\n                  }\n                }\n                offset += markerLength\n                headLength = offset\n              } else {\n                // Not an APPn or COM marker, probably safe to\n                // assume that this is the end of the metadata\n                break\n              }\n            }\n            // Meta length must be longer than JPEG marker (2)\n            // plus APPn marker (2), followed by length bytes (2):\n            if (!options.disableImageHead && headLength > 6) {\n              data.imageHead = bufferSlice.call(buffer, 0, headLength)\n            }\n            resolve(data)\n          },\n          reject,\n          'readAsArrayBuffer'\n        )\n      ) {\n        // No support for the FileReader interface, nothing to parse\n        resolve(data)\n      }\n    }\n    options = options || {} // eslint-disable-line no-param-reassign\n    if (global.Promise && typeof callback !== 'function') {\n      options = callback || {} // eslint-disable-line no-param-reassign\n      data = options // eslint-disable-line no-param-reassign\n      return new Promise(executor)\n    }\n    data = data || {} // eslint-disable-line no-param-reassign\n    return executor(callback, callback)\n  }\n\n  /**\n   * Replaces the head of a JPEG Blob\n   *\n   * @param {Blob} blob Blob object\n   * @param {ArrayBuffer} oldHead Old JPEG head\n   * @param {ArrayBuffer} newHead New JPEG head\n   * @returns {Blob} Combined Blob\n   */\n  function replaceJPEGHead(blob, oldHead, newHead) {\n    if (!blob || !oldHead || !newHead) return null\n    return new Blob([newHead, blobSlice.call(blob, oldHead.byteLength)], {\n      type: 'image/jpeg'\n    })\n  }\n\n  /**\n   * Replaces the image head of a JPEG blob with the given one.\n   * Returns a Promise or calls the callback with the new Blob.\n   *\n   * @param {Blob} blob Blob object\n   * @param {ArrayBuffer} head New JPEG head\n   * @param {Function} [callback] Callback function\n   * @returns {Promise<Blob|null>|undefined} Combined Blob\n   */\n  function replaceHead(blob, head, callback) {\n    var options = { maxMetaDataSize: 256, disableMetaDataParsers: true }\n    if (!callback && global.Promise) {\n      return parseMetaData(blob, options).then(function (data) {\n        return replaceJPEGHead(blob, data.imageHead, head)\n      })\n    }\n    parseMetaData(\n      blob,\n      function (data) {\n        callback(replaceJPEGHead(blob, data.imageHead, head))\n      },\n      options\n    )\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    if (loadImage.requiresMetaData(options)) {\n      data = data || {} // eslint-disable-line no-param-reassign\n      parseMetaData(\n        file,\n        function (result) {\n          if (result !== data) {\n            // eslint-disable-next-line no-console\n            if (global.console) console.log(result)\n            result = data // eslint-disable-line no-param-reassign\n          }\n          originalTransform.call(\n            loadImage,\n            img,\n            options,\n            callback,\n            file,\n            result\n          )\n        },\n        options,\n        data\n      )\n    } else {\n      originalTransform.apply(loadImage, arguments)\n    }\n  }\n\n  loadImage.blobSlice = blobSlice\n  loadImage.bufferSlice = bufferSlice\n  loadImage.replaceHead = replaceHead\n  loadImage.parseMetaData = parseMetaData\n  loadImage.metaDataParsers = metaDataParsers\n})\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","/*\n * JavaScript Load Image\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, Promise */\n\n;(function ($) {\n  'use strict'\n\n  var urlAPI = $.URL || $.webkitURL\n\n  /**\n   * Creates an object URL for a given File object.\n   *\n   * @param {Blob} blob Blob object\n   * @returns {string|boolean} Returns object URL if API exists, else false.\n   */\n  function createObjectURL(blob) {\n    return urlAPI ? urlAPI.createObjectURL(blob) : false\n  }\n\n  /**\n   * Revokes a given object URL.\n   *\n   * @param {string} url Blob object URL\n   * @returns {undefined|boolean} Returns undefined if API exists, else false.\n   */\n  function revokeObjectURL(url) {\n    return urlAPI ? urlAPI.revokeObjectURL(url) : false\n  }\n\n  /**\n   * Helper function to revoke an object URL\n   *\n   * @param {string} url Blob Object URL\n   * @param {object} [options] Options object\n   */\n  function revokeHelper(url, options) {\n    if (url && url.slice(0, 5) === 'blob:' && !(options && options.noRevoke)) {\n      revokeObjectURL(url)\n    }\n  }\n\n  /**\n   * Loads a given File object via FileReader interface.\n   *\n   * @param {Blob} file Blob object\n   * @param {Function} onload Load event callback\n   * @param {Function} [onerror] Error/Abort event callback\n   * @param {string} [method=readAsDataURL] FileReader method\n   * @returns {FileReader|boolean} Returns FileReader if API exists, else false.\n   */\n  function readFile(file, onload, onerror, method) {\n    if (!$.FileReader) return false\n    var reader = new FileReader()\n    reader.onload = function () {\n      onload.call(reader, this.result)\n    }\n    if (onerror) {\n      reader.onabort = reader.onerror = function () {\n        onerror.call(reader, this.error)\n      }\n    }\n    var readerMethod = reader[method || 'readAsDataURL']\n    if (readerMethod) {\n      readerMethod.call(reader, file)\n      return reader\n    }\n  }\n\n  /**\n   * Cross-frame instanceof check.\n   *\n   * @param {string} type Instance type\n   * @param {object} obj Object instance\n   * @returns {boolean} Returns true if the object is of the given instance.\n   */\n  function isInstanceOf(type, obj) {\n    // Cross-frame instanceof check\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']'\n  }\n\n  /**\n   * @typedef { HTMLImageElement|HTMLCanvasElement } Result\n   */\n\n  /**\n   * Loads an image for a given File object.\n   *\n   * @param {Blob|string} file Blob object or image URL\n   * @param {Function|object} [callback] Image load event callback or options\n   * @param {object} [options] Options object\n   * @returns {HTMLImageElement|FileReader|Promise<Result>} Object\n   */\n  function loadImage(file, callback, options) {\n    /**\n     * Promise executor\n     *\n     * @param {Function} resolve Resolution function\n     * @param {Function} reject Rejection function\n     * @returns {HTMLImageElement|FileReader} Object\n     */\n    function executor(resolve, reject) {\n      var img = document.createElement('img')\n      var url\n      /**\n       * Callback for the fetchBlob call.\n       *\n       * @param {HTMLImageElement|HTMLCanvasElement} img Error object\n       * @param {object} data Data object\n       * @returns {undefined} Undefined\n       */\n      function resolveWrapper(img, data) {\n        if (resolve === reject) {\n          // Not using Promises\n          if (resolve) resolve(img, data)\n          return\n        } else if (img instanceof Error) {\n          reject(img)\n          return\n        }\n        data = data || {} // eslint-disable-line no-param-reassign\n        data.image = img\n        resolve(data)\n      }\n      /**\n       * Callback for the fetchBlob call.\n       *\n       * @param {Blob} blob Blob object\n       * @param {Error} err Error object\n       */\n      function fetchBlobCallback(blob, err) {\n        if (err && $.console) console.log(err) // eslint-disable-line no-console\n        if (blob && isInstanceOf('Blob', blob)) {\n          file = blob // eslint-disable-line no-param-reassign\n          url = createObjectURL(file)\n        } else {\n          url = file\n          if (options && options.crossOrigin) {\n            img.crossOrigin = options.crossOrigin\n          }\n        }\n        img.src = url\n      }\n      img.onerror = function (event) {\n        revokeHelper(url, options)\n        if (reject) reject.call(img, event)\n      }\n      img.onload = function () {\n        revokeHelper(url, options)\n        var data = {\n          originalWidth: img.naturalWidth || img.width,\n          originalHeight: img.naturalHeight || img.height\n        }\n        try {\n          loadImage.transform(img, options, resolveWrapper, file, data)\n        } catch (error) {\n          if (reject) reject(error)\n        }\n      }\n      if (typeof file === 'string') {\n        if (loadImage.requiresMetaData(options)) {\n          loadImage.fetchBlob(file, fetchBlobCallback, options)\n        } else {\n          fetchBlobCallback()\n        }\n        return img\n      } else if (isInstanceOf('Blob', file) || isInstanceOf('File', file)) {\n        url = createObjectURL(file)\n        if (url) {\n          img.src = url\n          return img\n        }\n        return readFile(\n          file,\n          function (url) {\n            img.src = url\n          },\n          reject\n        )\n      }\n    }\n    if ($.Promise && typeof callback !== 'function') {\n      options = callback // eslint-disable-line no-param-reassign\n      return new Promise(executor)\n    }\n    return executor(callback, callback)\n  }\n\n  // Determines if metadata should be loaded automatically.\n  // Requires the load image meta extension to load metadata.\n  loadImage.requiresMetaData = function (options) {\n    return options && options.meta\n  }\n\n  // If the callback given to this function returns a blob, it is used as image\n  // source instead of the original url and overrides the file argument used in\n  // the onload and onerror event callbacks:\n  loadImage.fetchBlob = function (url, callback) {\n    callback()\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    callback(img, data)\n  }\n\n  loadImage.global = $\n  loadImage.readFile = readFile\n  loadImage.isInstanceOf = isInstanceOf\n  loadImage.createObjectURL = createObjectURL\n  loadImage.revokeObjectURL = revokeObjectURL\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return loadImage\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = loadImage\n  } else {\n    $.loadImage = loadImage\n  }\n})((typeof window !== 'undefined' && window) || this)\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/**\n * Box component\n */\nexport default class Box {\n  /**\n   * Creates a new Box instance.\n   * @constructor\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  constructor(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n\n  /** \n   * Sets the new dimensions of the box.\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  set(x1 = null, y1 = null, x2 = null, y2 = null) {\n    this.x1 = x1 == null ? this.x1 : x1;\n    this.y1 = y1 == null ? this.y1 : y1;\n    this.x2 = x2 == null ? this.x2 : x2;\n    this.y2 = y2 == null ? this.y2 : y2;\n    return this;\n  }\n\n  /**\n   * Calculates the width of the box.\n   * @returns {Number}\n   */\n  width() {\n    return Math.abs(this.x2 - this.x1);\n  }\n\n  /**\n   * Calculates the height of the box.\n   * @returns {Number}\n   */\n  height() {\n    return Math.abs(this.y2 - this.y1);\n  }\n\n  /**\n   * Resizes the box to a new size.\n   * @param {Number} newWidth\n   * @param {Number} newHeight\n   * @param {Array} [origin] The origin point to resize from.\n   *      Defaults to [0, 0] (top left).\n   */\n  resize(newWidth, newHeight, origin = [0, 0]) {\n    const fromX = this.x1 + (this.width() * origin[0]);\n    const fromY = this.y1 + (this.height() * origin[1]);\n\n    this.x1 = fromX - (newWidth * origin[0]);\n    this.y1 = fromY - (newHeight * origin[1]);\n    this.x2 = this.x1 + newWidth;\n    this.y2 = this.y1 + newHeight;\n\n    return this;\n  }\n\n  /**\n   * Scale the box by a factor.\n   * @param {Number} factor\n   * @param {Array} [origin] The origin point to resize from.\n   *      Defaults to [0, 0] (top left).\n   */\n  scale(factor, origin = [0, 0]) {\n    const newWidth = this.width() * factor;\n    const newHeight = this.height() * factor;\n    this.resize(newWidth, newHeight, origin);\n    return this;\n  }\n\n  /**\n   * Move the box to the specified coordinates.\n   */\n  move(x = null, y = null) {\n    let width = this.width();\n    let height = this.height();\n    x = x === null ? this.x1 : x;\n    y = y === null ? this.y1 : y;\n\n    this.x1 = x;\n    this.y1 = y;\n    this.x2 = x + width;\n    this.y2 = y + height;\n    return this;\n  }\n\n  /**\n   * Get relative x and y coordinates of a given point within the box.\n   * @param {Array} point The x and y ratio position within the box.\n   * @returns {Array} The x and y coordinates [x, y].\n   */\n  getRelativePoint(point = [0, 0]) {\n    const x = this.width() * point[0];\n    const y = this.height() * point[1];\n    return [x, y];\n  }\n\n  /**\n   * Get absolute x and y coordinates of a given point within the box.\n   * @param {Array} point The x and y ratio position within the box.\n   * @returns {Array} The x and y coordinates [x, y].\n   */\n  getAbsolutePoint(point = [0, 0]) {\n    const x = this.x1 + this.width() * point[0];\n    const y = this.y1 + this.height() * point[1];\n    return [x, y];\n  }\n\n  /**\n   * Constrain the box to a fixed ratio.\n   * @param {Number} ratio\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   * @param {String} [grow] The axis to grow to maintain the ratio.\n   *     Defaults to 'height'.\n   */\n  constrainToRatio(ratio, origin = [0, 0], grow = 'height') {\n    if (ratio === null) { return; }\n    const width = this.width();\n    const height = this.height();\n    switch (grow) {\n      case 'height': // Grow height only\n        this.resize(this.width(), this.width() * ratio, origin);\n        break;\n      case 'width': // Grow width only\n        this.resize(this.height() * 1 / ratio, this.height(), origin);\n        break;\n      default: // Default: Grow height only\n        this.resize(this.width(), this.width() * ratio, origin);\n    }\n\n    return this;\n  }\n\n  /**\n   * Constrain the box within a boundary.\n   * @param {Number} boundaryWidth\n   * @param {Number} boundaryHeight\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   */\n  constrainToBoundary(boundaryWidth, boundaryHeight, origin = [0, 0]) {\n\n    // Calculate the maximum sizes for each direction of growth\n    const [originX, originY] = this.getAbsolutePoint(origin);\n    const maxIfLeft = originX\n    const maxIfTop = originY\n    const maxIfRight = boundaryWidth - originX\n    const maxIfBottom = boundaryHeight - originY\n\n    // Express the direction of growth in terms of left, both,\n    // and right as -1, 0, and 1 respectively. Ditto for top/both/down.\n    const directionX = -2 * origin[0] + 1;\n    const directionY = -2 * origin[1] + 1;\n\n    // Determine the max size to use according to the direction of growth.\n    let [maxWidth, maxHeight] = [null, null];\n    switch (directionX) {\n      case -1: maxWidth = maxIfLeft; break;\n      case 0: maxWidth = Math.min(maxIfLeft, maxIfRight) * 2; break;\n      case +1: maxWidth = maxIfRight; break;\n    }\n    switch (directionY) {\n      case -1: maxHeight = maxIfTop; break;\n      case 0: maxHeight = Math.min(maxIfTop, maxIfBottom) * 2; break;\n      case +1: maxHeight = maxIfBottom; break;\n    }\n\n    // Resize if the box exceeds the calculated max width/height.\n    if (this.width() > maxWidth) {\n      const factor = maxWidth / this.width();\n      this.scale(factor, origin);\n    }\n    if (this.height() > maxHeight) {\n      const factor = maxHeight / this.height();\n      this.scale(factor, origin);\n    }\n\n    return this;\n  }\n\n  /**\n   * Constrain the box to a maximum/minimum size.\n   * @param {Number} [maxWidth]\n   * @param {Number} [maxHeight]\n   * @param {Number} [minWidth]\n   * @param {Number} [minHeight]\n   * @param {Array} [origin] The origin point to resize from.\n   *     Defaults to [0, 0] (top left).\n   * @param {Number} [ratio] Ratio to maintain.\n   */\n  constrainToSize(maxWidth = null, maxHeight = null,\n    minWidth = null, minHeight = null,\n    origin = [0, 0], ratio = null) {\n\n    // Calculate new max/min widths & heights that constrains to the ratio\n    if (ratio) {\n      if (ratio > 1) {\n        maxWidth = maxHeight * 1 / ratio;\n        minHeight = minHeight * ratio;\n      } else if (ratio < 1) {\n        maxHeight = maxWidth * ratio;\n        minWidth = minHeight * 1 / ratio;\n      }\n    }\n\n    if (maxWidth && this.width() > maxWidth) {\n      const newWidth = maxWidth,\n        newHeight = ratio === null ? this.height() : maxHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    if (maxHeight && this.height() > maxHeight) {\n      const newWidth = ratio === null ? this.width() : maxWidth,\n        newHeight = maxHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    if (minWidth && this.width() < minWidth) {\n      const newWidth = minWidth,\n        newHeight = ratio === null ? this.height() : minHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    if (minHeight && this.height() < minHeight) {\n      const newWidth = ratio === null ? this.width() : minWidth,\n        newHeight = minHeight;\n      this.resize(newWidth, newHeight, origin);\n    }\n\n    return this;\n  }\n}\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","/*\n * JavaScript Load Image Exif Parser\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, DataView */\n\n/* eslint-disable no-console */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  /**\n   * Exif tag map\n   *\n   * @name ExifMap\n   * @class\n   * @param {number|string} tagCode IFD tag code\n   */\n  function ExifMap(tagCode) {\n    if (tagCode) {\n      Object.defineProperty(this, 'map', {\n        value: this.ifds[tagCode].map\n      })\n      Object.defineProperty(this, 'tags', {\n        value: (this.tags && this.tags[tagCode]) || {}\n      })\n    }\n  }\n\n  ExifMap.prototype.map = {\n    Orientation: 0x0112,\n    Thumbnail: 'ifd1',\n    Blob: 0x0201, // Alias for JPEGInterchangeFormat\n    Exif: 0x8769,\n    GPSInfo: 0x8825,\n    Interoperability: 0xa005\n  }\n\n  ExifMap.prototype.ifds = {\n    ifd1: { name: 'Thumbnail', map: ExifMap.prototype.map },\n    0x8769: { name: 'Exif', map: {} },\n    0x8825: { name: 'GPSInfo', map: {} },\n    0xa005: { name: 'Interoperability', map: {} }\n  }\n\n  /**\n   * Retrieves exif tag value\n   *\n   * @param {number|string} id Exif tag code or name\n   * @returns {object} Exif tag value\n   */\n  ExifMap.prototype.get = function (id) {\n    return this[id] || this[this.map[id]]\n  }\n\n  /**\n   * Returns the Exif Thumbnail data as Blob.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Thumbnail data offset\n   * @param {number} length Thumbnail data length\n   * @returns {undefined|Blob} Returns the Thumbnail Blob or undefined\n   */\n  function getExifThumbnail(dataView, offset, length) {\n    if (!length) return\n    if (offset + length > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid thumbnail data.')\n      return\n    }\n    return new Blob(\n      [loadImage.bufferSlice.call(dataView.buffer, offset, offset + length)],\n      {\n        type: 'image/jpeg'\n      }\n    )\n  }\n\n  var ExifTagTypes = {\n    // byte, 8-bit unsigned int:\n    1: {\n      getValue: function (dataView, dataOffset) {\n        return dataView.getUint8(dataOffset)\n      },\n      size: 1\n    },\n    // ascii, 8-bit byte:\n    2: {\n      getValue: function (dataView, dataOffset) {\n        return String.fromCharCode(dataView.getUint8(dataOffset))\n      },\n      size: 1,\n      ascii: true\n    },\n    // short, 16 bit int:\n    3: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return dataView.getUint16(dataOffset, littleEndian)\n      },\n      size: 2\n    },\n    // long, 32 bit int:\n    4: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return dataView.getUint32(dataOffset, littleEndian)\n      },\n      size: 4\n    },\n    // rational = two long values, first is numerator, second is denominator:\n    5: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return (\n          dataView.getUint32(dataOffset, littleEndian) /\n          dataView.getUint32(dataOffset + 4, littleEndian)\n        )\n      },\n      size: 8\n    },\n    // slong, 32 bit signed int:\n    9: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return dataView.getInt32(dataOffset, littleEndian)\n      },\n      size: 4\n    },\n    // srational, two slongs, first is numerator, second is denominator:\n    10: {\n      getValue: function (dataView, dataOffset, littleEndian) {\n        return (\n          dataView.getInt32(dataOffset, littleEndian) /\n          dataView.getInt32(dataOffset + 4, littleEndian)\n        )\n      },\n      size: 8\n    }\n  }\n  // undefined, 8-bit byte, value depending on field:\n  ExifTagTypes[7] = ExifTagTypes[1]\n\n  /**\n   * Returns Exif tag value.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} tiffOffset TIFF offset\n   * @param {number} offset Tag offset\n   * @param {number} type Tag type\n   * @param {number} length Tag length\n   * @param {boolean} littleEndian Little endian encoding\n   * @returns {object} Tag value\n   */\n  function getExifValue(\n    dataView,\n    tiffOffset,\n    offset,\n    type,\n    length,\n    littleEndian\n  ) {\n    var tagType = ExifTagTypes[type]\n    var tagSize\n    var dataOffset\n    var values\n    var i\n    var str\n    var c\n    if (!tagType) {\n      console.log('Invalid Exif data: Invalid tag type.')\n      return\n    }\n    tagSize = tagType.size * length\n    // Determine if the value is contained in the dataOffset bytes,\n    // or if the value at the dataOffset is a pointer to the actual data:\n    dataOffset =\n      tagSize > 4\n        ? tiffOffset + dataView.getUint32(offset + 8, littleEndian)\n        : offset + 8\n    if (dataOffset + tagSize > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid data offset.')\n      return\n    }\n    if (length === 1) {\n      return tagType.getValue(dataView, dataOffset, littleEndian)\n    }\n    values = []\n    for (i = 0; i < length; i += 1) {\n      values[i] = tagType.getValue(\n        dataView,\n        dataOffset + i * tagType.size,\n        littleEndian\n      )\n    }\n    if (tagType.ascii) {\n      str = ''\n      // Concatenate the chars:\n      for (i = 0; i < values.length; i += 1) {\n        c = values[i]\n        // Ignore the terminating NULL byte(s):\n        if (c === '\\u0000') {\n          break\n        }\n        str += c\n      }\n      return str\n    }\n    return values\n  }\n\n  /**\n   * Determines if the given tag should be included.\n   *\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   * @param {number|string} tagCode Tag code to check\n   * @returns {boolean} True if the tag should be included\n   */\n  function shouldIncludeTag(includeTags, excludeTags, tagCode) {\n    return (\n      (!includeTags || includeTags[tagCode]) &&\n      (!excludeTags || excludeTags[tagCode] !== true)\n    )\n  }\n\n  /**\n   * Parses Exif tags.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} tiffOffset TIFF offset\n   * @param {number} dirOffset Directory offset\n   * @param {boolean} littleEndian Little endian encoding\n   * @param {ExifMap} tags Map to store parsed exif tags\n   * @param {ExifMap} tagOffsets Map to store parsed exif tag offsets\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   * @returns {number} Next directory offset\n   */\n  function parseExifTags(\n    dataView,\n    tiffOffset,\n    dirOffset,\n    littleEndian,\n    tags,\n    tagOffsets,\n    includeTags,\n    excludeTags\n  ) {\n    var tagsNumber, dirEndOffset, i, tagOffset, tagNumber, tagValue\n    if (dirOffset + 6 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid directory offset.')\n      return\n    }\n    tagsNumber = dataView.getUint16(dirOffset, littleEndian)\n    dirEndOffset = dirOffset + 2 + 12 * tagsNumber\n    if (dirEndOffset + 4 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid directory size.')\n      return\n    }\n    for (i = 0; i < tagsNumber; i += 1) {\n      tagOffset = dirOffset + 2 + 12 * i\n      tagNumber = dataView.getUint16(tagOffset, littleEndian)\n      if (!shouldIncludeTag(includeTags, excludeTags, tagNumber)) continue\n      tagValue = getExifValue(\n        dataView,\n        tiffOffset,\n        tagOffset,\n        dataView.getUint16(tagOffset + 2, littleEndian), // tag type\n        dataView.getUint32(tagOffset + 4, littleEndian), // tag length\n        littleEndian\n      )\n      tags[tagNumber] = tagValue\n      if (tagOffsets) {\n        tagOffsets[tagNumber] = tagOffset\n      }\n    }\n    // Return the offset to the next directory:\n    return dataView.getUint32(dirEndOffset, littleEndian)\n  }\n\n  /**\n   * Parses tags in a given IFD (Image File Directory).\n   *\n   * @param {object} data Data object to store exif tags and offsets\n   * @param {number|string} tagCode IFD tag code\n   * @param {DataView} dataView Data view interface\n   * @param {number} tiffOffset TIFF offset\n   * @param {boolean} littleEndian Little endian encoding\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   */\n  function parseExifIFD(\n    data,\n    tagCode,\n    dataView,\n    tiffOffset,\n    littleEndian,\n    includeTags,\n    excludeTags\n  ) {\n    var dirOffset = data.exif[tagCode]\n    if (dirOffset) {\n      data.exif[tagCode] = new ExifMap(tagCode)\n      if (data.exifOffsets) {\n        data.exifOffsets[tagCode] = new ExifMap(tagCode)\n      }\n      parseExifTags(\n        dataView,\n        tiffOffset,\n        tiffOffset + dirOffset,\n        littleEndian,\n        data.exif[tagCode],\n        data.exifOffsets && data.exifOffsets[tagCode],\n        includeTags && includeTags[tagCode],\n        excludeTags && excludeTags[tagCode]\n      )\n    }\n  }\n\n  loadImage.parseExifData = function (dataView, offset, length, data, options) {\n    if (options.disableExif) {\n      return\n    }\n    var includeTags = options.includeExifTags\n    var excludeTags = options.excludeExifTags || {\n      0x8769: {\n        // ExifIFDPointer\n        0x927c: true // MakerNote\n      }\n    }\n    var tiffOffset = offset + 10\n    var littleEndian\n    var dirOffset\n    var thumbnailIFD\n    // Check for the ASCII code for \"Exif\" (0x45786966):\n    if (dataView.getUint32(offset + 4) !== 0x45786966) {\n      // No Exif data, might be XMP data instead\n      return\n    }\n    if (tiffOffset + 8 > dataView.byteLength) {\n      console.log('Invalid Exif data: Invalid segment size.')\n      return\n    }\n    // Check for the two null bytes:\n    if (dataView.getUint16(offset + 8) !== 0x0000) {\n      console.log('Invalid Exif data: Missing byte alignment offset.')\n      return\n    }\n    // Check the byte alignment:\n    switch (dataView.getUint16(tiffOffset)) {\n      case 0x4949:\n        littleEndian = true\n        break\n      case 0x4d4d:\n        littleEndian = false\n        break\n      default:\n        console.log('Invalid Exif data: Invalid byte alignment marker.')\n        return\n    }\n    // Check for the TIFF tag marker (0x002A):\n    if (dataView.getUint16(tiffOffset + 2, littleEndian) !== 0x002a) {\n      console.log('Invalid Exif data: Missing TIFF marker.')\n      return\n    }\n    // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\n    dirOffset = dataView.getUint32(tiffOffset + 4, littleEndian)\n    // Create the exif object to store the tags:\n    data.exif = new ExifMap()\n    if (!options.disableExifOffsets) {\n      data.exifOffsets = new ExifMap()\n      data.exifTiffOffset = tiffOffset\n      data.exifLittleEndian = littleEndian\n    }\n    // Parse the tags of the main image directory (IFD0) and retrieve the\n    // offset to the next directory (IFD1), usually the thumbnail directory:\n    dirOffset = parseExifTags(\n      dataView,\n      tiffOffset,\n      tiffOffset + dirOffset,\n      littleEndian,\n      data.exif,\n      data.exifOffsets,\n      includeTags,\n      excludeTags\n    )\n    if (dirOffset && shouldIncludeTag(includeTags, excludeTags, 'ifd1')) {\n      data.exif.ifd1 = dirOffset\n      if (data.exifOffsets) {\n        data.exifOffsets.ifd1 = tiffOffset + dirOffset\n      }\n    }\n    Object.keys(data.exif.ifds).forEach(function (tagCode) {\n      parseExifIFD(\n        data,\n        tagCode,\n        dataView,\n        tiffOffset,\n        littleEndian,\n        includeTags,\n        excludeTags\n      )\n    })\n    thumbnailIFD = data.exif.ifd1\n    // Check for JPEG Thumbnail offset and data length:\n    if (thumbnailIFD && thumbnailIFD[0x0201]) {\n      thumbnailIFD[0x0201] = getExifThumbnail(\n        dataView,\n        tiffOffset + thumbnailIFD[0x0201],\n        thumbnailIFD[0x0202] // Thumbnail data length\n      )\n    }\n  }\n\n  // Registers the Exif parser for the APP1 JPEG metadata segment:\n  loadImage.metaDataParsers.jpeg[0xffe1].push(loadImage.parseExifData)\n\n  loadImage.exifWriters = {\n    // Orientation writer:\n    0x0112: function (buffer, data, value) {\n      var orientationOffset = data.exifOffsets[0x0112]\n      if (!orientationOffset) return buffer\n      var view = new DataView(buffer, orientationOffset + 8, 2)\n      view.setUint16(0, value, data.exifLittleEndian)\n      return buffer\n    }\n  }\n\n  loadImage.writeExifData = function (buffer, data, id, value) {\n    return loadImage.exifWriters[data.exif.map[id]](buffer, data, value)\n  }\n\n  loadImage.ExifMap = ExifMap\n\n  // Adds the following properties to the parseMetaData callback data:\n  // - exif: The parsed Exif tags\n  // - exifOffsets: The parsed Exif tag offsets\n  // - exifTiffOffset: TIFF header offset (used for offset pointers)\n  // - exifLittleEndian: little endian order if true, big endian if false\n\n  // Adds the following options to the parseMetaData method:\n  // - disableExif: Disables Exif parsing when true.\n  // - disableExifOffsets: Disables storing Exif tag offsets when true.\n  // - includeExifTags: A map of Exif tags to include for parsing.\n  // - excludeExifTags: A map of Exif tags to exclude from parsing.\n})\n","/*\n * JavaScript Load Image Exif Map\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Exif tags mapping based on\n * https://github.com/jseidelin/exif-js\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-exif'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-exif'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var ExifMapProto = loadImage.ExifMap.prototype\n\n  ExifMapProto.tags = {\n    // =================\n    // TIFF tags (IFD0):\n    // =================\n    0x0100: 'ImageWidth',\n    0x0101: 'ImageHeight',\n    0x0102: 'BitsPerSample',\n    0x0103: 'Compression',\n    0x0106: 'PhotometricInterpretation',\n    0x0112: 'Orientation',\n    0x0115: 'SamplesPerPixel',\n    0x011c: 'PlanarConfiguration',\n    0x0212: 'YCbCrSubSampling',\n    0x0213: 'YCbCrPositioning',\n    0x011a: 'XResolution',\n    0x011b: 'YResolution',\n    0x0128: 'ResolutionUnit',\n    0x0111: 'StripOffsets',\n    0x0116: 'RowsPerStrip',\n    0x0117: 'StripByteCounts',\n    0x0201: 'JPEGInterchangeFormat',\n    0x0202: 'JPEGInterchangeFormatLength',\n    0x012d: 'TransferFunction',\n    0x013e: 'WhitePoint',\n    0x013f: 'PrimaryChromaticities',\n    0x0211: 'YCbCrCoefficients',\n    0x0214: 'ReferenceBlackWhite',\n    0x0132: 'DateTime',\n    0x010e: 'ImageDescription',\n    0x010f: 'Make',\n    0x0110: 'Model',\n    0x0131: 'Software',\n    0x013b: 'Artist',\n    0x8298: 'Copyright',\n    0x8769: {\n      // ExifIFDPointer\n      0x9000: 'ExifVersion', // EXIF version\n      0xa000: 'FlashpixVersion', // Flashpix format version\n      0xa001: 'ColorSpace', // Color space information tag\n      0xa002: 'PixelXDimension', // Valid width of meaningful image\n      0xa003: 'PixelYDimension', // Valid height of meaningful image\n      0xa500: 'Gamma',\n      0x9101: 'ComponentsConfiguration', // Information about channels\n      0x9102: 'CompressedBitsPerPixel', // Compressed bits per pixel\n      0x927c: 'MakerNote', // Any desired information written by the manufacturer\n      0x9286: 'UserComment', // Comments by user\n      0xa004: 'RelatedSoundFile', // Name of related sound file\n      0x9003: 'DateTimeOriginal', // Date and time when the original image was generated\n      0x9004: 'DateTimeDigitized', // Date and time when the image was stored digitally\n      0x9010: 'OffsetTime', // Time zone when the image file was last changed\n      0x9011: 'OffsetTimeOriginal', // Time zone when the image was stored digitally\n      0x9012: 'OffsetTimeDigitized', // Time zone when the image was stored digitally\n      0x9290: 'SubSecTime', // Fractions of seconds for DateTime\n      0x9291: 'SubSecTimeOriginal', // Fractions of seconds for DateTimeOriginal\n      0x9292: 'SubSecTimeDigitized', // Fractions of seconds for DateTimeDigitized\n      0x829a: 'ExposureTime', // Exposure time (in seconds)\n      0x829d: 'FNumber',\n      0x8822: 'ExposureProgram', // Exposure program\n      0x8824: 'SpectralSensitivity', // Spectral sensitivity\n      0x8827: 'PhotographicSensitivity', // EXIF 2.3, ISOSpeedRatings in EXIF 2.2\n      0x8828: 'OECF', // Optoelectric conversion factor\n      0x8830: 'SensitivityType',\n      0x8831: 'StandardOutputSensitivity',\n      0x8832: 'RecommendedExposureIndex',\n      0x8833: 'ISOSpeed',\n      0x8834: 'ISOSpeedLatitudeyyy',\n      0x8835: 'ISOSpeedLatitudezzz',\n      0x9201: 'ShutterSpeedValue', // Shutter speed\n      0x9202: 'ApertureValue', // Lens aperture\n      0x9203: 'BrightnessValue', // Value of brightness\n      0x9204: 'ExposureBias', // Exposure bias\n      0x9205: 'MaxApertureValue', // Smallest F number of lens\n      0x9206: 'SubjectDistance', // Distance to subject in meters\n      0x9207: 'MeteringMode', // Metering mode\n      0x9208: 'LightSource', // Kind of light source\n      0x9209: 'Flash', // Flash status\n      0x9214: 'SubjectArea', // Location and area of main subject\n      0x920a: 'FocalLength', // Focal length of the lens in mm\n      0xa20b: 'FlashEnergy', // Strobe energy in BCPS\n      0xa20c: 'SpatialFrequencyResponse',\n      0xa20e: 'FocalPlaneXResolution', // Number of pixels in width direction per FPRUnit\n      0xa20f: 'FocalPlaneYResolution', // Number of pixels in height direction per FPRUnit\n      0xa210: 'FocalPlaneResolutionUnit', // Unit for measuring the focal plane resolution\n      0xa214: 'SubjectLocation', // Location of subject in image\n      0xa215: 'ExposureIndex', // Exposure index selected on camera\n      0xa217: 'SensingMethod', // Image sensor type\n      0xa300: 'FileSource', // Image source (3 == DSC)\n      0xa301: 'SceneType', // Scene type (1 == directly photographed)\n      0xa302: 'CFAPattern', // Color filter array geometric pattern\n      0xa401: 'CustomRendered', // Special processing\n      0xa402: 'ExposureMode', // Exposure mode\n      0xa403: 'WhiteBalance', // 1 = auto white balance, 2 = manual\n      0xa404: 'DigitalZoomRatio', // Digital zoom ratio\n      0xa405: 'FocalLengthIn35mmFilm',\n      0xa406: 'SceneCaptureType', // Type of scene\n      0xa407: 'GainControl', // Degree of overall image gain adjustment\n      0xa408: 'Contrast', // Direction of contrast processing applied by camera\n      0xa409: 'Saturation', // Direction of saturation processing applied by camera\n      0xa40a: 'Sharpness', // Direction of sharpness processing applied by camera\n      0xa40b: 'DeviceSettingDescription',\n      0xa40c: 'SubjectDistanceRange', // Distance to subject\n      0xa420: 'ImageUniqueID', // Identifier assigned uniquely to each image\n      0xa430: 'CameraOwnerName',\n      0xa431: 'BodySerialNumber',\n      0xa432: 'LensSpecification',\n      0xa433: 'LensMake',\n      0xa434: 'LensModel',\n      0xa435: 'LensSerialNumber'\n    },\n    0x8825: {\n      // GPSInfoIFDPointer\n      0x0000: 'GPSVersionID',\n      0x0001: 'GPSLatitudeRef',\n      0x0002: 'GPSLatitude',\n      0x0003: 'GPSLongitudeRef',\n      0x0004: 'GPSLongitude',\n      0x0005: 'GPSAltitudeRef',\n      0x0006: 'GPSAltitude',\n      0x0007: 'GPSTimeStamp',\n      0x0008: 'GPSSatellites',\n      0x0009: 'GPSStatus',\n      0x000a: 'GPSMeasureMode',\n      0x000b: 'GPSDOP',\n      0x000c: 'GPSSpeedRef',\n      0x000d: 'GPSSpeed',\n      0x000e: 'GPSTrackRef',\n      0x000f: 'GPSTrack',\n      0x0010: 'GPSImgDirectionRef',\n      0x0011: 'GPSImgDirection',\n      0x0012: 'GPSMapDatum',\n      0x0013: 'GPSDestLatitudeRef',\n      0x0014: 'GPSDestLatitude',\n      0x0015: 'GPSDestLongitudeRef',\n      0x0016: 'GPSDestLongitude',\n      0x0017: 'GPSDestBearingRef',\n      0x0018: 'GPSDestBearing',\n      0x0019: 'GPSDestDistanceRef',\n      0x001a: 'GPSDestDistance',\n      0x001b: 'GPSProcessingMethod',\n      0x001c: 'GPSAreaInformation',\n      0x001d: 'GPSDateStamp',\n      0x001e: 'GPSDifferential',\n      0x001f: 'GPSHPositioningError'\n    },\n    0xa005: {\n      // InteroperabilityIFDPointer\n      0x0001: 'InteroperabilityIndex'\n    }\n  }\n\n  // IFD1 directory can contain any IFD0 tags:\n  ExifMapProto.tags.ifd1 = ExifMapProto.tags\n\n  ExifMapProto.stringValues = {\n    ExposureProgram: {\n      0: 'Undefined',\n      1: 'Manual',\n      2: 'Normal program',\n      3: 'Aperture priority',\n      4: 'Shutter priority',\n      5: 'Creative program',\n      6: 'Action program',\n      7: 'Portrait mode',\n      8: 'Landscape mode'\n    },\n    MeteringMode: {\n      0: 'Unknown',\n      1: 'Average',\n      2: 'CenterWeightedAverage',\n      3: 'Spot',\n      4: 'MultiSpot',\n      5: 'Pattern',\n      6: 'Partial',\n      255: 'Other'\n    },\n    LightSource: {\n      0: 'Unknown',\n      1: 'Daylight',\n      2: 'Fluorescent',\n      3: 'Tungsten (incandescent light)',\n      4: 'Flash',\n      9: 'Fine weather',\n      10: 'Cloudy weather',\n      11: 'Shade',\n      12: 'Daylight fluorescent (D 5700 - 7100K)',\n      13: 'Day white fluorescent (N 4600 - 5400K)',\n      14: 'Cool white fluorescent (W 3900 - 4500K)',\n      15: 'White fluorescent (WW 3200 - 3700K)',\n      17: 'Standard light A',\n      18: 'Standard light B',\n      19: 'Standard light C',\n      20: 'D55',\n      21: 'D65',\n      22: 'D75',\n      23: 'D50',\n      24: 'ISO studio tungsten',\n      255: 'Other'\n    },\n    Flash: {\n      0x0000: 'Flash did not fire',\n      0x0001: 'Flash fired',\n      0x0005: 'Strobe return light not detected',\n      0x0007: 'Strobe return light detected',\n      0x0009: 'Flash fired, compulsory flash mode',\n      0x000d: 'Flash fired, compulsory flash mode, return light not detected',\n      0x000f: 'Flash fired, compulsory flash mode, return light detected',\n      0x0010: 'Flash did not fire, compulsory flash mode',\n      0x0018: 'Flash did not fire, auto mode',\n      0x0019: 'Flash fired, auto mode',\n      0x001d: 'Flash fired, auto mode, return light not detected',\n      0x001f: 'Flash fired, auto mode, return light detected',\n      0x0020: 'No flash function',\n      0x0041: 'Flash fired, red-eye reduction mode',\n      0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\n      0x0047: 'Flash fired, red-eye reduction mode, return light detected',\n      0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\n      0x004d: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\n      0x004f: 'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\n      0x0059: 'Flash fired, auto mode, red-eye reduction mode',\n      0x005d: 'Flash fired, auto mode, return light not detected, red-eye reduction mode',\n      0x005f: 'Flash fired, auto mode, return light detected, red-eye reduction mode'\n    },\n    SensingMethod: {\n      1: 'Undefined',\n      2: 'One-chip color area sensor',\n      3: 'Two-chip color area sensor',\n      4: 'Three-chip color area sensor',\n      5: 'Color sequential area sensor',\n      7: 'Trilinear sensor',\n      8: 'Color sequential linear sensor'\n    },\n    SceneCaptureType: {\n      0: 'Standard',\n      1: 'Landscape',\n      2: 'Portrait',\n      3: 'Night scene'\n    },\n    SceneType: {\n      1: 'Directly photographed'\n    },\n    CustomRendered: {\n      0: 'Normal process',\n      1: 'Custom process'\n    },\n    WhiteBalance: {\n      0: 'Auto white balance',\n      1: 'Manual white balance'\n    },\n    GainControl: {\n      0: 'None',\n      1: 'Low gain up',\n      2: 'High gain up',\n      3: 'Low gain down',\n      4: 'High gain down'\n    },\n    Contrast: {\n      0: 'Normal',\n      1: 'Soft',\n      2: 'Hard'\n    },\n    Saturation: {\n      0: 'Normal',\n      1: 'Low saturation',\n      2: 'High saturation'\n    },\n    Sharpness: {\n      0: 'Normal',\n      1: 'Soft',\n      2: 'Hard'\n    },\n    SubjectDistanceRange: {\n      0: 'Unknown',\n      1: 'Macro',\n      2: 'Close view',\n      3: 'Distant view'\n    },\n    FileSource: {\n      3: 'DSC'\n    },\n    ComponentsConfiguration: {\n      0: '',\n      1: 'Y',\n      2: 'Cb',\n      3: 'Cr',\n      4: 'R',\n      5: 'G',\n      6: 'B'\n    },\n    Orientation: {\n      1: 'Original',\n      2: 'Horizontal flip',\n      3: 'Rotate 180° CCW',\n      4: 'Vertical flip',\n      5: 'Vertical flip + Rotate 90° CW',\n      6: 'Rotate 90° CW',\n      7: 'Horizontal flip + Rotate 90° CW',\n      8: 'Rotate 90° CCW'\n    }\n  }\n\n  ExifMapProto.getText = function (name) {\n    var value = this.get(name)\n    switch (name) {\n      case 'LightSource':\n      case 'Flash':\n      case 'MeteringMode':\n      case 'ExposureProgram':\n      case 'SensingMethod':\n      case 'SceneCaptureType':\n      case 'SceneType':\n      case 'CustomRendered':\n      case 'WhiteBalance':\n      case 'GainControl':\n      case 'Contrast':\n      case 'Saturation':\n      case 'Sharpness':\n      case 'SubjectDistanceRange':\n      case 'FileSource':\n      case 'Orientation':\n        return this.stringValues[name][value]\n      case 'ExifVersion':\n      case 'FlashpixVersion':\n        if (!value) return\n        return String.fromCharCode(value[0], value[1], value[2], value[3])\n      case 'ComponentsConfiguration':\n        if (!value) return\n        return (\n          this.stringValues[name][value[0]] +\n          this.stringValues[name][value[1]] +\n          this.stringValues[name][value[2]] +\n          this.stringValues[name][value[3]]\n        )\n      case 'GPSVersionID':\n        if (!value) return\n        return value[0] + '.' + value[1] + '.' + value[2] + '.' + value[3]\n    }\n    return String(value)\n  }\n\n  ExifMapProto.getAll = function () {\n    var map = {}\n    var prop\n    var obj\n    var name\n    for (prop in this) {\n      if (Object.prototype.hasOwnProperty.call(this, prop)) {\n        obj = this[prop]\n        if (obj && obj.getAll) {\n          map[this.ifds[prop].name] = obj.getAll()\n        } else {\n          name = this.tags[prop]\n          if (name) map[name] = this.getText(name)\n        }\n      }\n    }\n    return map\n  }\n\n  ExifMapProto.getName = function (tagCode) {\n    var name = this.tags[tagCode]\n    if (typeof name === 'object') return this.ifds[tagCode].name\n    return name\n  }\n\n  // Extend the map of tag names to tag codes:\n  ;(function () {\n    var tags = ExifMapProto.tags\n    var prop\n    var ifd\n    var subTags\n    // Map the tag names to tags:\n    for (prop in tags) {\n      if (Object.prototype.hasOwnProperty.call(tags, prop)) {\n        ifd = ExifMapProto.ifds[prop]\n        if (ifd) {\n          subTags = tags[prop]\n          for (prop in subTags) {\n            if (Object.prototype.hasOwnProperty.call(subTags, prop)) {\n              ifd.map[subTags[prop]] = Number(prop)\n            }\n          }\n        } else {\n          ExifMapProto.map[tags[prop]] = Number(prop)\n        }\n      }\n    }\n  })()\n})\n","/**\n * Croppr.js\n * https://github.com/jamesssooi/Croppr.js\n * \n * A JavaScript image cropper that's lightweight, awesome, and has\n * zero dependencies.\n * \n * (C) 2017 James Ooi. Released under the MIT License.\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Croppr = factory());\n}(this, (function () { 'use strict';\n\n(function () {\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n  if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = window.setTimeout(function () {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n  if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n    clearTimeout(id);\n  };\n})();\n(function () {\n  if (typeof window.CustomEvent === \"function\") return false;\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n(function (window) {\n  try {\n    new CustomEvent('test');\n    return false;\n  } catch (e) {}\n  function MouseEvent(eventType, params) {\n    params = params || { bubbles: false, cancelable: false };\n    var mouseEvent = document.createEvent('MouseEvent');\n    mouseEvent.initMouseEvent(eventType, params.bubbles, params.cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    return mouseEvent;\n  }\n  MouseEvent.prototype = Event.prototype;\n  window.MouseEvent = MouseEvent;\n})(window);\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar Handle =\n/**\n * Creates a new Handle instance.\n * @constructor\n * @param {Array} position The x and y ratio position of the handle\n *      within the crop region. Accepts a value between 0 to 1 in the order\n *      of [X, Y].\n * @param {Array} constraints Define the side of the crop region that\n *      is to be affected by this handle. Accepts a value of 0 or 1 in the\n *      order of [TOP, RIGHT, BOTTOM, LEFT].\n * @param {String} cursor The CSS cursor of this handle.\n * @param {Element} eventBus The element to dispatch events to.\n */\nfunction Handle(position, constraints, cursor, eventBus) {\n  classCallCheck(this, Handle);\n  var self = this;\n  this.position = position;\n  this.constraints = constraints;\n  this.cursor = cursor;\n  this.eventBus = eventBus;\n  this.el = document.createElement('div');\n  this.el.className = 'croppr-handle';\n  this.el.style.cursor = cursor;\n  this.el.addEventListener('mousedown', onMouseDown);\n  function onMouseDown(e) {\n    e.stopPropagation();\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n      detail: { handle: self }\n    }));\n  }\n  function onMouseUp(e) {\n    e.stopPropagation();\n    document.removeEventListener('mouseup', onMouseUp);\n    document.removeEventListener('mousemove', onMouseMove);\n    self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n      detail: { handle: self }\n    }));\n  }\n  function onMouseMove(e) {\n    e.stopPropagation();\n    self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n      detail: { mouseX: e.clientX, mouseY: e.clientY }\n    }));\n  }\n};\n\nvar Box = function () {\n  /**\n   * Creates a new Box instance.\n   * @constructor\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  function Box(x1, y1, x2, y2) {\n    classCallCheck(this, Box);\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n  /**\n   * Sets the new dimensions of the box.\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   */\n  createClass(Box, [{\n    key: 'set',\n    value: function set$$1() {\n      var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      this.x1 = x1 == null ? this.x1 : x1;\n      this.y1 = y1 == null ? this.y1 : y1;\n      this.x2 = x2 == null ? this.x2 : x2;\n      this.y2 = y2 == null ? this.y2 : y2;\n      return this;\n    }\n    /**\n     * Calculates the width of the box.\n     * @returns {Number}\n     */\n  }, {\n    key: 'width',\n    value: function width() {\n      return Math.abs(this.x2 - this.x1);\n    }\n    /**\n     * Calculates the height of the box.\n     * @returns {Number}\n     */\n  }, {\n    key: 'height',\n    value: function height() {\n      return Math.abs(this.y2 - this.y1);\n    }\n    /**\n     * Resizes the box to a new size.\n     * @param {Number} newWidth\n     * @param {Number} newHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'resize',\n    value: function resize(newWidth, newHeight) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];\n      var fromX = this.x1 + this.width() * origin[0];\n      var fromY = this.y1 + this.height() * origin[1];\n      this.x1 = fromX - newWidth * origin[0];\n      this.y1 = fromY - newHeight * origin[1];\n      this.x2 = this.x1 + newWidth;\n      this.y2 = this.y1 + newHeight;\n      return this;\n    }\n    /**\n     * Scale the box by a factor.\n     * @param {Number} factor\n     * @param {Array} [origin] The origin point to resize from.\n     *      Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'scale',\n    value: function scale(factor) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];\n      var newWidth = this.width() * factor;\n      var newHeight = this.height() * factor;\n      this.resize(newWidth, newHeight, origin);\n      return this;\n    }\n  }, {\n    key: 'move',\n    value: function move() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var width = this.width();\n      var height = this.height();\n      x = x === null ? this.x1 : x;\n      y = y === null ? this.y1 : y;\n      this.x1 = x;\n      this.y1 = y;\n      this.x2 = x + width;\n      this.y2 = y + height;\n      return this;\n    }\n    /**\n     * Get relative x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n  }, {\n    key: 'getRelativePoint',\n    value: function getRelativePoint() {\n      var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0];\n      var x = this.width() * point[0];\n      var y = this.height() * point[1];\n      return [x, y];\n    }\n    /**\n     * Get absolute x and y coordinates of a given point within the box.\n     * @param {Array} point The x and y ratio position within the box.\n     * @returns {Array} The x and y coordinates [x, y].\n     */\n  }, {\n    key: 'getAbsolutePoint',\n    value: function getAbsolutePoint() {\n      var point = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [0, 0];\n      var x = this.x1 + this.width() * point[0];\n      var y = this.y1 + this.height() * point[1];\n      return [x, y];\n    }\n    /**\n     * Constrain the box to a fixed ratio.\n     * @param {Number} ratio\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {String} [grow] The axis to grow to maintain the ratio.\n     *     Defaults to 'height'.\n     */\n  }, {\n    key: 'constrainToRatio',\n    value: function constrainToRatio(ratio) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0];\n      var grow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'height';\n      if (ratio === null) {\n        return;\n      }\n      var width = this.width();\n      var height = this.height();\n      switch (grow) {\n        case 'height':\n          this.resize(this.width(), this.width() * ratio, origin);\n          break;\n        case 'width':\n          this.resize(this.height() * 1 / ratio, this.height(), origin);\n          break;\n        default:\n          this.resize(this.width(), this.width() * ratio, origin);\n      }\n      return this;\n    }\n    /**\n     * Constrain the box within a boundary.\n     * @param {Number} boundaryWidth\n     * @param {Number} boundaryHeight\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     */\n  }, {\n    key: 'constrainToBoundary',\n    value: function constrainToBoundary(boundaryWidth, boundaryHeight) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0];\n      var _getAbsolutePoint = this.getAbsolutePoint(origin),\n          _getAbsolutePoint2 = slicedToArray(_getAbsolutePoint, 2),\n          originX = _getAbsolutePoint2[0],\n          originY = _getAbsolutePoint2[1];\n      var maxIfLeft = originX;\n      var maxIfTop = originY;\n      var maxIfRight = boundaryWidth - originX;\n      var maxIfBottom = boundaryHeight - originY;\n      var directionX = -2 * origin[0] + 1;\n      var directionY = -2 * origin[1] + 1;\n      var maxWidth = null,\n          maxHeight = null;\n      switch (directionX) {\n        case -1:\n          maxWidth = maxIfLeft;break;\n        case 0:\n          maxWidth = Math.min(maxIfLeft, maxIfRight) * 2;break;\n        case +1:\n          maxWidth = maxIfRight;break;\n      }\n      switch (directionY) {\n        case -1:\n          maxHeight = maxIfTop;break;\n        case 0:\n          maxHeight = Math.min(maxIfTop, maxIfBottom) * 2;break;\n        case +1:\n          maxHeight = maxIfBottom;break;\n      }\n      if (this.width() > maxWidth) {\n        var factor = maxWidth / this.width();\n        this.scale(factor, origin);\n      }\n      if (this.height() > maxHeight) {\n        var _factor = maxHeight / this.height();\n        this.scale(_factor, origin);\n      }\n      return this;\n    }\n    /**\n     * Constrain the box to a maximum/minimum size.\n     * @param {Number} [maxWidth]\n     * @param {Number} [maxHeight]\n     * @param {Number} [minWidth]\n     * @param {Number} [minHeight]\n     * @param {Array} [origin] The origin point to resize from.\n     *     Defaults to [0, 0] (top left).\n     * @param {Number} [ratio] Ratio to maintain.\n     */\n  }, {\n    key: 'constrainToSize',\n    value: function constrainToSize() {\n      var maxWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var maxHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var minWidth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var minHeight = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var origin = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [0, 0];\n      var ratio = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      if (ratio) {\n        if (ratio > 1) {\n          maxWidth = maxHeight * 1 / ratio;\n          minHeight = minHeight * ratio;\n        } else if (ratio < 1) {\n          maxHeight = maxWidth * ratio;\n          minWidth = minHeight * 1 / ratio;\n        }\n      }\n      if (maxWidth && this.width() > maxWidth) {\n        var newWidth = maxWidth,\n            newHeight = ratio === null ? this.height() : maxHeight;\n        this.resize(newWidth, newHeight, origin);\n      }\n      if (maxHeight && this.height() > maxHeight) {\n        var _newWidth = ratio === null ? this.width() : maxWidth,\n            _newHeight = maxHeight;\n        this.resize(_newWidth, _newHeight, origin);\n      }\n      if (minWidth && this.width() < minWidth) {\n        var _newWidth2 = minWidth,\n            _newHeight2 = ratio === null ? this.height() : minHeight;\n        this.resize(_newWidth2, _newHeight2, origin);\n      }\n      if (minHeight && this.height() < minHeight) {\n        var _newWidth3 = ratio === null ? this.width() : minWidth,\n            _newHeight3 = minHeight;\n        this.resize(_newWidth3, _newHeight3, origin);\n      }\n      return this;\n    }\n  }]);\n  return Box;\n}();\n\n/**\n * Binds an element's touch events to be simulated as mouse events.\n * @param {Element} element\n */\nfunction enableTouch(element) {\n  element.addEventListener('touchstart', simulateMouseEvent);\n  element.addEventListener('touchend', simulateMouseEvent);\n  element.addEventListener('touchmove', simulateMouseEvent);\n}\n/**\n * Translates a touch event to a mouse event.\n * @param {Event} e\n */\nfunction simulateMouseEvent(e) {\n  e.preventDefault();\n  var touch = e.changedTouches[0];\n  var eventMap = {\n    'touchstart': 'mousedown',\n    'touchmove': 'mousemove',\n    'touchend': 'mouseup'\n  };\n  touch.target.dispatchEvent(new MouseEvent(eventMap[e.type], {\n    bubbles: true,\n    cancelable: true,\n    view: window,\n    clientX: touch.clientX,\n    clientY: touch.clientY,\n    screenX: touch.screenX,\n    screenY: touch.screenY\n  }));\n}\n\n/**\n * Define a list of handles to create.\n *\n * @property {Array} position - The x and y ratio position of the handle within\n *      the crop region. Accepts a value between 0 to 1 in the order of [X, Y].\n * @property {Array} constraints - Define the side of the crop region that is to\n *      be affected by this handle. Accepts a value of 0 or 1 in the order of\n *      [TOP, RIGHT, BOTTOM, LEFT].\n * @property {String} cursor - The CSS cursor of this handle.\n */\nvar HANDLES = [{ position: [0.0, 0.0], constraints: [1, 0, 0, 1], cursor: 'nw-resize' }, { position: [0.5, 0.0], constraints: [1, 0, 0, 0], cursor: 'n-resize' }, { position: [1.0, 0.0], constraints: [1, 1, 0, 0], cursor: 'ne-resize' }, { position: [1.0, 0.5], constraints: [0, 1, 0, 0], cursor: 'e-resize' }, { position: [1.0, 1.0], constraints: [0, 1, 1, 0], cursor: 'se-resize' }, { position: [0.5, 1.0], constraints: [0, 0, 1, 0], cursor: 's-resize' }, { position: [0.0, 1.0], constraints: [0, 0, 1, 1], cursor: 'sw-resize' }, { position: [0.0, 0.5], constraints: [0, 0, 0, 1], cursor: 'w-resize' }];\nvar CropprCore = function () {\n  function CropprCore(element, options) {\n    var _this = this;\n    var deferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    classCallCheck(this, CropprCore);\n    this.options = CropprCore.parseOptions(options || {});\n    if (!element.nodeName) {\n      element = document.querySelector(element);\n      if (element == null) {\n        throw 'Unable to find element.';\n      }\n    }\n    if (!element.getAttribute('src')) {\n      throw 'Image src not provided.';\n    }\n    this._initialized = false;\n    this._restore = {\n      parent: element.parentNode,\n      element: element\n    };\n    if (!deferred) {\n      if (element.width === 0 || element.height === 0) {\n        element.onload = function () {\n          _this.initialize(element);\n        };\n      } else {\n        this.initialize(element);\n      }\n    }\n  }\n  createClass(CropprCore, [{\n    key: 'initialize',\n    value: function initialize(element) {\n      this.createDOM(element);\n      this.options.convertToPixels(this.cropperEl);\n      this.attachHandlerEvents();\n      this.attachRegionEvents();\n      this.attachOverlayEvents();\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n      this._initialized = true;\n      if (this.options.onInitialize !== null) {\n        this.options.onInitialize(this);\n      }\n    }\n  }, {\n    key: 'createDOM',\n    value: function createDOM(targetEl) {\n      this.containerEl = document.createElement('div');\n      this.containerEl.className = 'croppr-container';\n      this.eventBus = this.containerEl;\n      enableTouch(this.containerEl);\n      this.cropperEl = document.createElement('div');\n      this.cropperEl.className = 'croppr';\n      this.imageEl = document.createElement('img');\n      this.imageEl.setAttribute('src', targetEl.getAttribute('src'));\n      this.imageEl.setAttribute('alt', targetEl.getAttribute('alt'));\n      this.imageEl.className = 'croppr-image';\n      this.imageClippedEl = this.imageEl.cloneNode();\n      this.imageClippedEl.className = 'croppr-imageClipped';\n      this.regionEl = document.createElement('div');\n      this.regionEl.className = 'croppr-region';\n      this.overlayEl = document.createElement('div');\n      this.overlayEl.className = 'croppr-overlay';\n      var handleContainerEl = document.createElement('div');\n      handleContainerEl.className = 'croppr-handleContainer';\n      this.handles = [];\n      for (var i = 0; i < HANDLES.length; i++) {\n        var handle = new Handle(HANDLES[i].position, HANDLES[i].constraints, HANDLES[i].cursor, this.eventBus);\n        this.handles.push(handle);\n        handleContainerEl.appendChild(handle.el);\n      }\n      this.cropperEl.appendChild(this.imageEl);\n      this.cropperEl.appendChild(this.imageClippedEl);\n      this.cropperEl.appendChild(this.regionEl);\n      this.cropperEl.appendChild(this.overlayEl);\n      this.cropperEl.appendChild(handleContainerEl);\n      this.containerEl.appendChild(this.cropperEl);\n      targetEl.parentElement.replaceChild(this.containerEl, targetEl);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      var _this2 = this;\n      this.imageEl.onload = function () {\n        _this2.box = _this2.initializeBox(_this2.options);\n        _this2.redraw();\n      };\n      this.imageEl.src = src;\n      this.imageClippedEl.src = src;\n      return this;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._restore.parent.replaceChild(this._restore.element, this.containerEl);\n    }\n    /**\n     * Create a new box region with a set of options.\n     * @param {Object} opts The options.\n     * @returns {Box}\n     */\n  }, {\n    key: 'initializeBox',\n    value: function initializeBox(opts) {\n      var width = opts.startSize.width;\n      var height = opts.startSize.height;\n      var box = new Box(0, 0, width, height);\n      box.constrainToRatio(opts.aspectRatio, [0.5, 0.5]);\n      var min = opts.minSize;\n      var max = opts.maxSize;\n      box.constrainToSize(max.width, max.height, min.width, min.height, [0.5, 0.5], opts.aspectRatio);\n      var parentWidth = this.cropperEl.offsetWidth;\n      var parentHeight = this.cropperEl.offsetHeight;\n      box.constrainToBoundary(parentWidth, parentHeight, [0.5, 0.5]);\n      var x = this.cropperEl.offsetWidth / 2 - box.width() / 2;\n      var y = this.cropperEl.offsetHeight / 2 - box.height() / 2;\n      box.move(x, y);\n      return box;\n    }\n  }, {\n    key: 'redraw',\n    value: function redraw() {\n      var _this3 = this;\n      var width = Math.round(this.box.width()),\n          height = Math.round(this.box.height()),\n          x1 = Math.round(this.box.x1),\n          y1 = Math.round(this.box.y1),\n          x2 = Math.round(this.box.x2),\n          y2 = Math.round(this.box.y2);\n      window.requestAnimationFrame(function () {\n        _this3.regionEl.style.transform = 'translate(' + x1 + 'px, ' + y1 + 'px)';\n        _this3.regionEl.style.width = width + 'px';\n        _this3.regionEl.style.height = height + 'px';\n        _this3.imageClippedEl.style.clip = 'rect(' + y1 + 'px, ' + x2 + 'px, ' + y2 + 'px, ' + x1 + 'px)';\n        var center = _this3.box.getAbsolutePoint([.5, .5]);\n        var xSign = center[0] - _this3.cropperEl.offsetWidth / 2 >> 31;\n        var ySign = center[1] - _this3.cropperEl.offsetHeight / 2 >> 31;\n        var quadrant = (xSign ^ ySign) + ySign + ySign + 4;\n        var foregroundHandleIndex = -2 * quadrant + 8;\n        for (var i = 0; i < _this3.handles.length; i++) {\n          var handle = _this3.handles[i];\n          var handleWidth = handle.el.offsetWidth;\n          var handleHeight = handle.el.offsetHeight;\n          var left = x1 + width * handle.position[0] - handleWidth / 2;\n          var top = y1 + height * handle.position[1] - handleHeight / 2;\n          handle.el.style.transform = 'translate(' + Math.round(left) + 'px, ' + Math.round(top) + 'px)';\n          handle.el.style.zIndex = foregroundHandleIndex == i ? 5 : 4;\n        }\n      });\n    }\n  }, {\n    key: 'attachHandlerEvents',\n    value: function attachHandlerEvents() {\n      var eventBus = this.eventBus;\n      eventBus.addEventListener('handlestart', this.onHandleMoveStart.bind(this));\n      eventBus.addEventListener('handlemove', this.onHandleMoveMoving.bind(this));\n      eventBus.addEventListener('handleend', this.onHandleMoveEnd.bind(this));\n    }\n  }, {\n    key: 'attachRegionEvents',\n    value: function attachRegionEvents() {\n      var eventBus = this.eventBus;\n      var self = this;\n      this.regionEl.addEventListener('mousedown', onMouseDown);\n      eventBus.addEventListener('regionstart', this.onRegionMoveStart.bind(this));\n      eventBus.addEventListener('regionmove', this.onRegionMoveMoving.bind(this));\n      eventBus.addEventListener('regionend', this.onRegionMoveEnd.bind(this));\n      function onMouseDown(e) {\n        e.stopPropagation();\n        document.addEventListener('mouseup', onMouseUp);\n        document.addEventListener('mousemove', onMouseMove);\n        eventBus.dispatchEvent(new CustomEvent('regionstart', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseMove(e) {\n        e.stopPropagation();\n        eventBus.dispatchEvent(new CustomEvent('regionmove', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseUp(e) {\n        e.stopPropagation();\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        eventBus.dispatchEvent(new CustomEvent('regionend', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n    }\n  }, {\n    key: 'attachOverlayEvents',\n    value: function attachOverlayEvents() {\n      var SOUTHEAST_HANDLE_IDX = 4;\n      var self = this;\n      var tmpBox = null;\n      this.overlayEl.addEventListener('mousedown', onMouseDown);\n      function onMouseDown(e) {\n        e.stopPropagation();\n        document.addEventListener('mouseup', onMouseUp);\n        document.addEventListener('mousemove', onMouseMove);\n        var container = self.cropperEl.getBoundingClientRect();\n        var mouseX = e.clientX - container.left;\n        var mouseY = e.clientY - container.top;\n        tmpBox = self.box;\n        self.box = new Box(mouseX, mouseY, mouseX + 1, mouseY + 1);\n        self.eventBus.dispatchEvent(new CustomEvent('handlestart', {\n          detail: { handle: self.handles[SOUTHEAST_HANDLE_IDX] }\n        }));\n      }\n      function onMouseMove(e) {\n        e.stopPropagation();\n        self.eventBus.dispatchEvent(new CustomEvent('handlemove', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n      function onMouseUp(e) {\n        e.stopPropagation();\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n        if (self.box.width() === 1 && self.box.height() === 1) {\n          self.box = tmpBox;\n          return;\n        }\n        self.eventBus.dispatchEvent(new CustomEvent('handleend', {\n          detail: { mouseX: e.clientX, mouseY: e.clientY }\n        }));\n      }\n    }\n  }, {\n    key: 'onHandleMoveStart',\n    value: function onHandleMoveStart(e) {\n      var handle = e.detail.handle;\n      var originPoint = [1 - handle.position[0], 1 - handle.position[1]];\n      var _box$getAbsolutePoint = this.box.getAbsolutePoint(originPoint),\n          _box$getAbsolutePoint2 = slicedToArray(_box$getAbsolutePoint, 2),\n          originX = _box$getAbsolutePoint2[0],\n          originY = _box$getAbsolutePoint2[1];\n      this.activeHandle = { handle: handle, originPoint: originPoint, originX: originX, originY: originY };\n      if (this.options.onCropStart !== null) {\n        this.options.onCropStart(this.getValue());\n      }\n    }\n  }, {\n    key: 'onHandleMoveMoving',\n    value: function onHandleMoveMoving(e) {\n      var _e$detail = e.detail,\n          mouseX = _e$detail.mouseX,\n          mouseY = _e$detail.mouseY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      if (mouseX < 0) {\n        mouseX = 0;\n      } else if (mouseX > container.width) {\n        mouseX = container.width;\n      }\n      if (mouseY < 0) {\n        mouseY = 0;\n      } else if (mouseY > container.height) {\n        mouseY = container.height;\n      }\n      var origin = this.activeHandle.originPoint.slice();\n      var originX = this.activeHandle.originX;\n      var originY = this.activeHandle.originY;\n      var handle = this.activeHandle.handle;\n      var TOP_MOVABLE = handle.constraints[0] === 1;\n      var RIGHT_MOVABLE = handle.constraints[1] === 1;\n      var BOTTOM_MOVABLE = handle.constraints[2] === 1;\n      var LEFT_MOVABLE = handle.constraints[3] === 1;\n      var MULTI_AXIS = (LEFT_MOVABLE || RIGHT_MOVABLE) && (TOP_MOVABLE || BOTTOM_MOVABLE);\n      var x1 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x1;\n      var x2 = LEFT_MOVABLE || RIGHT_MOVABLE ? originX : this.box.x2;\n      var y1 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y1;\n      var y2 = TOP_MOVABLE || BOTTOM_MOVABLE ? originY : this.box.y2;\n      x1 = LEFT_MOVABLE ? mouseX : x1;\n      x2 = RIGHT_MOVABLE ? mouseX : x2;\n      y1 = TOP_MOVABLE ? mouseY : y1;\n      y2 = BOTTOM_MOVABLE ? mouseY : y2;\n      var isFlippedX = false,\n          isFlippedY = false;\n      if (LEFT_MOVABLE || RIGHT_MOVABLE) {\n        isFlippedX = LEFT_MOVABLE ? mouseX > originX : mouseX < originX;\n      }\n      if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n        isFlippedY = TOP_MOVABLE ? mouseY > originY : mouseY < originY;\n      }\n      if (isFlippedX) {\n        var tmp = x1;x1 = x2;x2 = tmp;\n        origin[0] = 1 - origin[0];\n      }\n      if (isFlippedY) {\n        var _tmp = y1;y1 = y2;y2 = _tmp;\n        origin[1] = 1 - origin[1];\n      }\n      var box = new Box(x1, y1, x2, y2);\n      if (this.options.aspectRatio) {\n        var ratio = this.options.aspectRatio;\n        var isVerticalMovement = false;\n        if (MULTI_AXIS) {\n          isVerticalMovement = mouseY > box.y1 + ratio * box.width() || mouseY < box.y2 - ratio * box.width();\n        } else if (TOP_MOVABLE || BOTTOM_MOVABLE) {\n          isVerticalMovement = true;\n        }\n        var ratioMode = isVerticalMovement ? 'width' : 'height';\n        box.constrainToRatio(ratio, origin, ratioMode);\n      }\n      var min = this.options.minSize;\n      var max = this.options.maxSize;\n      box.constrainToSize(max.width, max.height, min.width, min.height, origin, this.options.aspectRatio);\n      var parentWidth = this.cropperEl.offsetWidth;\n      var parentHeight = this.cropperEl.offsetHeight;\n      box.constrainToBoundary(parentWidth, parentHeight, origin);\n      this.box = box;\n      this.redraw();\n      if (this.options.onCropMove !== null) {\n        this.options.onCropMove(this.getValue());\n      }\n    }\n  }, {\n    key: 'onHandleMoveEnd',\n    value: function onHandleMoveEnd(e) {\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveStart',\n    value: function onRegionMoveStart(e) {\n      var _e$detail2 = e.detail,\n          mouseX = _e$detail2.mouseX,\n          mouseY = _e$detail2.mouseY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      this.currentMove = {\n        offsetX: mouseX - this.box.x1,\n        offsetY: mouseY - this.box.y1\n      };\n      if (this.options.onCropStart !== null) {\n        this.options.onCropStart(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveMoving',\n    value: function onRegionMoveMoving(e) {\n      var _e$detail3 = e.detail,\n          mouseX = _e$detail3.mouseX,\n          mouseY = _e$detail3.mouseY;\n      var _currentMove = this.currentMove,\n          offsetX = _currentMove.offsetX,\n          offsetY = _currentMove.offsetY;\n      var container = this.cropperEl.getBoundingClientRect();\n      mouseX = mouseX - container.left;\n      mouseY = mouseY - container.top;\n      this.box.move(mouseX - offsetX, mouseY - offsetY);\n      if (this.box.x1 < 0) {\n        this.box.move(0, null);\n      }\n      if (this.box.x2 > container.width) {\n        this.box.move(container.width - this.box.width(), null);\n      }\n      if (this.box.y1 < 0) {\n        this.box.move(null, 0);\n      }\n      if (this.box.y2 > container.height) {\n        this.box.move(null, container.height - this.box.height());\n      }\n      this.redraw();\n      if (this.options.onCropMove !== null) {\n        this.options.onCropMove(this.getValue());\n      }\n    }\n  }, {\n    key: 'onRegionMoveEnd',\n    value: function onRegionMoveEnd(e) {\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (mode === null) {\n        mode = this.options.returnMode;\n      }\n      if (mode == 'real') {\n        var actualWidth = this.imageEl.naturalWidth;\n        var actualHeight = this.imageEl.naturalHeight;\n        var _imageEl$getBoundingC = this.imageEl.getBoundingClientRect(),\n            elementWidth = _imageEl$getBoundingC.width,\n            elementHeight = _imageEl$getBoundingC.height;\n        var factorX = actualWidth / elementWidth;\n        var factorY = actualHeight / elementHeight;\n        return {\n          x: Math.round(this.box.x1 * factorX),\n          y: Math.round(this.box.y1 * factorY),\n          width: Math.round(this.box.width() * factorX),\n          height: Math.round(this.box.height() * factorY)\n        };\n      } else if (mode == 'ratio') {\n        var _imageEl$getBoundingC2 = this.imageEl.getBoundingClientRect(),\n            _elementWidth = _imageEl$getBoundingC2.width,\n            _elementHeight = _imageEl$getBoundingC2.height;\n        return {\n          x: round(this.box.x1 / _elementWidth, 3),\n          y: round(this.box.y1 / _elementHeight, 3),\n          width: round(this.box.width() / _elementWidth, 3),\n          height: round(this.box.height() / _elementHeight, 3)\n        };\n      } else if (mode == 'raw') {\n        return {\n          x: Math.round(this.box.x1),\n          y: Math.round(this.box.y1),\n          width: Math.round(this.box.width()),\n          height: Math.round(this.box.height())\n        };\n      }\n    }\n  }], [{\n    key: 'parseOptions',\n    value: function parseOptions(opts) {\n      var defaults$$1 = {\n        aspectRatio: null,\n        maxSize: { width: null, height: null },\n        minSize: { width: null, height: null },\n        startSize: { width: 100, height: 100, unit: '%' },\n        returnMode: 'real',\n        onInitialize: null,\n        onCropStart: null,\n        onCropMove: null,\n        onCropEnd: null\n      };\n      var aspectRatio = null;\n      if (opts.aspectRatio !== undefined) {\n        if (typeof opts.aspectRatio === 'number') {\n          aspectRatio = opts.aspectRatio;\n        } else if (opts.aspectRatio instanceof Array) {\n          aspectRatio = opts.aspectRatio[1] / opts.aspectRatio[0];\n        }\n      }\n      var maxSize = null;\n      if (opts.maxSize !== undefined && opts.maxSize !== null) {\n        maxSize = {\n          width: opts.maxSize[0] || null,\n          height: opts.maxSize[1] || null,\n          unit: opts.maxSize[2] || 'px'\n        };\n      }\n      var minSize = null;\n      if (opts.minSize !== undefined && opts.minSize !== null) {\n        minSize = {\n          width: opts.minSize[0] || null,\n          height: opts.minSize[1] || null,\n          unit: opts.minSize[2] || 'px'\n        };\n      }\n      var startSize = null;\n      if (opts.startSize !== undefined && opts.startSize !== null) {\n        startSize = {\n          width: opts.startSize[0] || null,\n          height: opts.startSize[1] || null,\n          unit: opts.startSize[2] || '%'\n        };\n      }\n      var onInitialize = null;\n      if (typeof opts.onInitialize === 'function') {\n        onInitialize = opts.onInitialize;\n      }\n      var onCropStart = null;\n      if (typeof opts.onCropStart === 'function') {\n        onCropStart = opts.onCropStart;\n      }\n      var onCropEnd = null;\n      if (typeof opts.onCropEnd === 'function') {\n        onCropEnd = opts.onCropEnd;\n      }\n      var onCropMove = null;\n      if (typeof opts.onUpdate === 'function') {\n        console.warn('Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead.');\n        onCropMove = opts.onUpdate;\n      }\n      if (typeof opts.onCropMove === 'function') {\n        onCropMove = opts.onCropMove;\n      }\n      var returnMode = null;\n      if (opts.returnMode !== undefined) {\n        var s = opts.returnMode.toLowerCase();\n        if (['real', 'ratio', 'raw'].indexOf(s) === -1) {\n          throw \"Invalid return mode.\";\n        }\n        returnMode = s;\n      }\n      var convertToPixels = function convertToPixels(container) {\n        var width = container.offsetWidth;\n        var height = container.offsetHeight;\n        var sizeKeys = ['maxSize', 'minSize', 'startSize'];\n        for (var i = 0; i < sizeKeys.length; i++) {\n          var key = sizeKeys[i];\n          if (this[key] !== null) {\n            if (this[key].unit == '%') {\n              if (this[key].width !== null) {\n                this[key].width = this[key].width / 100 * width;\n              }\n              if (this[key].height !== null) {\n                this[key].height = this[key].height / 100 * height;\n              }\n            }\n            delete this[key].unit;\n          }\n        }\n      };\n      var defaultValue = function defaultValue(v, d) {\n        return v !== null ? v : d;\n      };\n      return {\n        aspectRatio: defaultValue(aspectRatio, defaults$$1.aspectRatio),\n        maxSize: defaultValue(maxSize, defaults$$1.maxSize),\n        minSize: defaultValue(minSize, defaults$$1.minSize),\n        startSize: defaultValue(startSize, defaults$$1.startSize),\n        returnMode: defaultValue(returnMode, defaults$$1.returnMode),\n        onInitialize: defaultValue(onInitialize, defaults$$1.onInitialize),\n        onCropStart: defaultValue(onCropStart, defaults$$1.onCropStart),\n        onCropMove: defaultValue(onCropMove, defaults$$1.onCropMove),\n        onCropEnd: defaultValue(onCropEnd, defaults$$1.onCropEnd),\n        convertToPixels: convertToPixels\n      };\n    }\n  }]);\n  return CropprCore;\n}();\nfunction round(value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nvar Croppr$1 = function (_CropprCore) {\n  inherits(Croppr, _CropprCore);\n  /**\n   * @constructor\n   * Calls the CropprCore's constructor.\n   */\n  function Croppr(element, options) {\n    var _deferred = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    classCallCheck(this, Croppr);\n    return possibleConstructorReturn(this, (Croppr.__proto__ || Object.getPrototypeOf(Croppr)).call(this, element, options, _deferred));\n  }\n  /**\n   * Gets the value of the crop region.\n   * @param {String} [mode] Which mode of calculation to use: 'real', 'ratio' or\n   *      'raw'.\n   */\n  createClass(Croppr, [{\n    key: 'getValue',\n    value: function getValue(mode) {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'getValue', this).call(this, mode);\n    }\n    /**\n     * Changes the image src.\n     * @param {String} src\n     */\n  }, {\n    key: 'setImage',\n    value: function setImage(src) {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'setImage', this).call(this, src);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      return get(Croppr.prototype.__proto__ || Object.getPrototypeOf(Croppr.prototype), 'destroy', this).call(this);\n    }\n    /**\n     * Moves the crop region to a specified coordinate.\n     * @param {Number} x\n     * @param {Number} y\n     */\n  }, {\n    key: 'moveTo',\n    value: function moveTo(x, y) {\n      this.box.move(x, y);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n    /**\n     * Resizes the crop region to a specified width and height.\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n  }, {\n    key: 'resizeTo',\n    value: function resizeTo(width, height) {\n      var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [.5, .5];\n      this.box.resize(width, height, origin);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n    /**\n     * Scale the crop region by a factor.\n     * @param {Number} factor\n     * @param {Array} origin The origin point to resize from.\n     *      Defaults to [0.5, 0.5] (center).\n     */\n  }, {\n    key: 'scaleBy',\n    value: function scaleBy(factor) {\n      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [.5, .5];\n      this.box.scale(factor, origin);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.box = this.initializeBox(this.options);\n      this.redraw();\n      if (this.options.onCropEnd !== null) {\n        this.options.onCropEnd(this.getValue());\n      }\n      return this;\n    }\n  }]);\n  return Croppr;\n}(CropprCore);\n\nreturn Croppr$1;\n\n})));\n","/*\n * JavaScript Load Image Orientation\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/*\nExif orientation values to correctly display the letter F:\n\n    1             2\n  ██████        ██████\n  ██                ██\n  ████            ████\n  ██                ██\n  ██                ██\n\n    3             4\n      ██        ██\n      ██        ██\n    ████        ████\n      ██        ██\n  ██████        ██████\n\n    5             6\n██████████    ██\n██  ██        ██  ██\n██            ██████████\n\n    7             8\n        ██    ██████████\n    ██  ██        ██  ██\n██████████            ██\n\n*/\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-scale', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(\n      require('./load-image'),\n      require('./load-image-scale'),\n      require('./load-image-meta')\n    )\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var originalTransform = loadImage.transform\n  var originalRequiresCanvas = loadImage.requiresCanvas\n  var originalRequiresMetaData = loadImage.requiresMetaData\n  var originalTransformCoordinates = loadImage.transformCoordinates\n  var originalGetTransformedOptions = loadImage.getTransformedOptions\n\n  ;(function ($) {\n    // Guard for non-browser environments (e.g. server-side rendering):\n    if (!$.global.document) return\n    // black+white 3x2 JPEG, with the following meta information set:\n    // - EXIF Orientation: 6 (Rotated 90° CCW)\n    // Image data layout (B=black, F=white):\n    // BFF\n    // BBB\n    var testImageURL =\n      'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n      'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n      'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n      'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/x' +\n      'ABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAA' +\n      'AAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQ' +\n      'voP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXw' +\n      'H/9k='\n    var img = document.createElement('img')\n    img.onload = function () {\n      // Check if the browser supports automatic image orientation:\n      $.orientation = img.width === 2 && img.height === 3\n      if ($.orientation) {\n        var canvas = $.createCanvas(1, 1, true)\n        var ctx = canvas.getContext('2d')\n        ctx.drawImage(img, 1, 1, 1, 1, 0, 0, 1, 1)\n        // Check if the source image coordinates (sX, sY, sWidth, sHeight) are\n        // correctly applied to the auto-orientated image, which should result\n        // in a white opaque pixel (e.g. in Safari).\n        // Browsers that show a transparent pixel (e.g. Chromium) fail to crop\n        // auto-oriented images correctly and require a workaround, e.g.\n        // drawing the complete source image to an intermediate canvas first.\n        // See https://bugs.chromium.org/p/chromium/issues/detail?id=1074354\n        $.orientationCropBug =\n          ctx.getImageData(0, 0, 1, 1).data.toString() !== '255,255,255,255'\n      }\n    }\n    img.src = testImageURL\n  })(loadImage)\n\n  /**\n   * Determines if the orientation requires a canvas element.\n   *\n   * @param {object} [options] Options object\n   * @param {boolean} [withMetaData] Is metadata required for orientation\n   * @returns {boolean} Returns true if orientation requires canvas/meta\n   */\n  function requiresCanvasOrientation(options, withMetaData) {\n    var orientation = options && options.orientation\n    return (\n      // Exif orientation for browsers without automatic image orientation:\n      (orientation === true && !loadImage.orientation) ||\n      // Orientation reset for browsers with automatic image orientation:\n      (orientation === 1 && loadImage.orientation) ||\n      // Orientation to defined value, requires meta for orientation reset only:\n      ((!withMetaData || loadImage.orientation) &&\n        orientation > 1 &&\n        orientation < 9)\n    )\n  }\n\n  /**\n   * Determines if the image requires an orientation change.\n   *\n   * @param {number} [orientation] Defined orientation value\n   * @param {number} [autoOrientation] Auto-orientation based on Exif data\n   * @returns {boolean} Returns true if an orientation change is required\n   */\n  function requiresOrientationChange(orientation, autoOrientation) {\n    return (\n      orientation !== autoOrientation &&\n      ((orientation === 1 && autoOrientation > 1 && autoOrientation < 9) ||\n        (orientation > 1 && orientation < 9))\n    )\n  }\n\n  /**\n   * Determines orientation combinations that require a rotation by 180°.\n   *\n   * The following is a list of combinations that return true:\n   *\n   * 2 (flip) => 5 (rot90,flip), 7 (rot90,flip), 6 (rot90), 8 (rot90)\n   * 4 (flip) => 5 (rot90,flip), 7 (rot90,flip), 6 (rot90), 8 (rot90)\n   *\n   * 5 (rot90,flip) => 2 (flip), 4 (flip), 6 (rot90), 8 (rot90)\n   * 7 (rot90,flip) => 2 (flip), 4 (flip), 6 (rot90), 8 (rot90)\n   *\n   * 6 (rot90) => 2 (flip), 4 (flip), 5 (rot90,flip), 7 (rot90,flip)\n   * 8 (rot90) => 2 (flip), 4 (flip), 5 (rot90,flip), 7 (rot90,flip)\n   *\n   * @param {number} [orientation] Defined orientation value\n   * @param {number} [autoOrientation] Auto-orientation based on Exif data\n   * @returns {boolean} Returns true if rotation by 180° is required\n   */\n  function requiresRot180(orientation, autoOrientation) {\n    if (autoOrientation > 1 && autoOrientation < 9) {\n      switch (orientation) {\n        case 2:\n        case 4:\n          return autoOrientation > 4\n        case 5:\n        case 7:\n          return autoOrientation % 2 === 0\n        case 6:\n        case 8:\n          return (\n            autoOrientation === 2 ||\n            autoOrientation === 4 ||\n            autoOrientation === 5 ||\n            autoOrientation === 7\n          )\n      }\n    }\n    return false\n  }\n\n  // Determines if the target image should be a canvas element:\n  loadImage.requiresCanvas = function (options) {\n    return (\n      requiresCanvasOrientation(options) ||\n      originalRequiresCanvas.call(loadImage, options)\n    )\n  }\n\n  // Determines if metadata should be loaded automatically:\n  loadImage.requiresMetaData = function (options) {\n    return (\n      requiresCanvasOrientation(options, true) ||\n      originalRequiresMetaData.call(loadImage, options)\n    )\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    originalTransform.call(\n      loadImage,\n      img,\n      options,\n      function (img, data) {\n        if (data) {\n          var autoOrientation =\n            loadImage.orientation && data.exif && data.exif.get('Orientation')\n          if (autoOrientation > 4 && autoOrientation < 9) {\n            // Automatic image orientation switched image dimensions\n            var originalWidth = data.originalWidth\n            var originalHeight = data.originalHeight\n            data.originalWidth = originalHeight\n            data.originalHeight = originalWidth\n          }\n        }\n        callback(img, data)\n      },\n      file,\n      data\n    )\n  }\n\n  // Transforms coordinate and dimension options\n  // based on the given orientation option:\n  loadImage.getTransformedOptions = function (img, opts, data) {\n    var options = originalGetTransformedOptions.call(loadImage, img, opts)\n    var exifOrientation = data.exif && data.exif.get('Orientation')\n    var orientation = options.orientation\n    var autoOrientation = loadImage.orientation && exifOrientation\n    if (orientation === true) orientation = exifOrientation\n    if (!requiresOrientationChange(orientation, autoOrientation)) {\n      return options\n    }\n    var top = options.top\n    var right = options.right\n    var bottom = options.bottom\n    var left = options.left\n    var newOptions = {}\n    for (var i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.orientation = orientation\n    if (\n      (orientation > 4 && !(autoOrientation > 4)) ||\n      (orientation < 5 && autoOrientation > 4)\n    ) {\n      // Image dimensions and target dimensions are switched\n      newOptions.maxWidth = options.maxHeight\n      newOptions.maxHeight = options.maxWidth\n      newOptions.minWidth = options.minHeight\n      newOptions.minHeight = options.minWidth\n      newOptions.sourceWidth = options.sourceHeight\n      newOptions.sourceHeight = options.sourceWidth\n    }\n    if (autoOrientation > 1) {\n      // Browsers which correctly apply source image coordinates to\n      // auto-oriented images\n      switch (autoOrientation) {\n        case 2:\n          // Horizontal flip\n          right = options.left\n          left = options.right\n          break\n        case 3:\n          // 180° Rotate CCW\n          top = options.bottom\n          right = options.left\n          bottom = options.top\n          left = options.right\n          break\n        case 4:\n          // Vertical flip\n          top = options.bottom\n          bottom = options.top\n          break\n        case 5:\n          // Horizontal flip + 90° Rotate CCW\n          top = options.left\n          right = options.bottom\n          bottom = options.right\n          left = options.top\n          break\n        case 6:\n          // 90° Rotate CCW\n          top = options.left\n          right = options.top\n          bottom = options.right\n          left = options.bottom\n          break\n        case 7:\n          // Vertical flip + 90° Rotate CCW\n          top = options.right\n          right = options.top\n          bottom = options.left\n          left = options.bottom\n          break\n        case 8:\n          // 90° Rotate CW\n          top = options.right\n          right = options.bottom\n          bottom = options.left\n          left = options.top\n          break\n      }\n      // Some orientation combinations require additional rotation by 180°:\n      if (requiresRot180(orientation, autoOrientation)) {\n        var tmpTop = top\n        var tmpRight = right\n        top = bottom\n        right = left\n        bottom = tmpTop\n        left = tmpRight\n      }\n    }\n    newOptions.top = top\n    newOptions.right = right\n    newOptions.bottom = bottom\n    newOptions.left = left\n    // Account for defined browser orientation:\n    switch (orientation) {\n      case 2:\n        // Horizontal flip\n        newOptions.right = left\n        newOptions.left = right\n        break\n      case 3:\n        // 180° Rotate CCW\n        newOptions.top = bottom\n        newOptions.right = left\n        newOptions.bottom = top\n        newOptions.left = right\n        break\n      case 4:\n        // Vertical flip\n        newOptions.top = bottom\n        newOptions.bottom = top\n        break\n      case 5:\n        // Vertical flip + 90° Rotate CW\n        newOptions.top = left\n        newOptions.right = bottom\n        newOptions.bottom = right\n        newOptions.left = top\n        break\n      case 6:\n        // 90° Rotate CW\n        newOptions.top = right\n        newOptions.right = bottom\n        newOptions.bottom = left\n        newOptions.left = top\n        break\n      case 7:\n        // Horizontal flip + 90° Rotate CW\n        newOptions.top = right\n        newOptions.right = top\n        newOptions.bottom = left\n        newOptions.left = bottom\n        break\n      case 8:\n        // 90° Rotate CCW\n        newOptions.top = left\n        newOptions.right = top\n        newOptions.bottom = right\n        newOptions.left = bottom\n        break\n    }\n    return newOptions\n  }\n\n  // Transform image orientation based on the given EXIF orientation option:\n  loadImage.transformCoordinates = function (canvas, options, data) {\n    originalTransformCoordinates.call(loadImage, canvas, options, data)\n    var orientation = options.orientation\n    var autoOrientation =\n      loadImage.orientation && data.exif && data.exif.get('Orientation')\n    if (!requiresOrientationChange(orientation, autoOrientation)) {\n      return\n    }\n    var ctx = canvas.getContext('2d')\n    var width = canvas.width\n    var height = canvas.height\n    var sourceWidth = width\n    var sourceHeight = height\n    if (\n      (orientation > 4 && !(autoOrientation > 4)) ||\n      (orientation < 5 && autoOrientation > 4)\n    ) {\n      // Image dimensions and target dimensions are switched\n      canvas.width = height\n      canvas.height = width\n    }\n    if (orientation > 4) {\n      // Destination and source dimensions are switched\n      sourceWidth = height\n      sourceHeight = width\n    }\n    // Reset automatic browser orientation:\n    switch (autoOrientation) {\n      case 2:\n        // Horizontal flip\n        ctx.translate(sourceWidth, 0)\n        ctx.scale(-1, 1)\n        break\n      case 3:\n        // 180° Rotate CCW\n        ctx.translate(sourceWidth, sourceHeight)\n        ctx.rotate(Math.PI)\n        break\n      case 4:\n        // Vertical flip\n        ctx.translate(0, sourceHeight)\n        ctx.scale(1, -1)\n        break\n      case 5:\n        // Horizontal flip + 90° Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.scale(-1, 1)\n        break\n      case 6:\n        // 90° Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-sourceWidth, 0)\n        break\n      case 7:\n        // Vertical flip + 90° Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-sourceWidth, sourceHeight)\n        ctx.scale(1, -1)\n        break\n      case 8:\n        // 90° Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(0, -sourceHeight)\n        break\n    }\n    // Some orientation combinations require additional rotation by 180°:\n    if (requiresRot180(orientation, autoOrientation)) {\n      ctx.translate(sourceWidth, sourceHeight)\n      ctx.rotate(Math.PI)\n    }\n    switch (orientation) {\n      case 2:\n        // Horizontal flip\n        ctx.translate(width, 0)\n        ctx.scale(-1, 1)\n        break\n      case 3:\n        // 180° Rotate CCW\n        ctx.translate(width, height)\n        ctx.rotate(Math.PI)\n        break\n      case 4:\n        // Vertical flip\n        ctx.translate(0, height)\n        ctx.scale(1, -1)\n        break\n      case 5:\n        // Vertical flip + 90° Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.scale(1, -1)\n        break\n      case 6:\n        // 90° Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(0, -height)\n        break\n      case 7:\n        // Horizontal flip + 90° Rotate CW\n        ctx.rotate(0.5 * Math.PI)\n        ctx.translate(width, -height)\n        ctx.scale(-1, 1)\n        break\n      case 8:\n        // 90° Rotate CCW\n        ctx.rotate(-0.5 * Math.PI)\n        ctx.translate(-width, 0)\n        break\n    }\n  }\n})\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/*\n * JavaScript Load Image IPTC Parser\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2013, Sebastian Tschan\n * Copyright 2018, Dave Bevan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, DataView */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image', './load-image-meta'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'), require('./load-image-meta'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  /**\n   * IPTC tag map\n   *\n   * @name IptcMap\n   * @class\n   */\n  function IptcMap() {}\n\n  IptcMap.prototype.map = {\n    ObjectName: 5\n  }\n\n  IptcMap.prototype.types = {\n    0: 'Uint16', // ApplicationRecordVersion\n    200: 'Uint16', // ObjectPreviewFileFormat\n    201: 'Uint16', // ObjectPreviewFileVersion\n    202: 'binary' // ObjectPreviewData\n  }\n\n  /**\n   * Retrieves IPTC tag value\n   *\n   * @param {number|string} id IPTC tag code or name\n   * @returns {object} IPTC tag value\n   */\n  IptcMap.prototype.get = function (id) {\n    return this[id] || this[this.map[id]]\n  }\n\n  /**\n   * Retrieves string for the given DataView and range\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Offset start\n   * @param {number} length Offset length\n   * @returns {string} String value\n   */\n  function getStringValue(dataView, offset, length) {\n    var outstr = ''\n    var end = offset + length\n    for (var n = offset; n < end; n += 1) {\n      outstr += String.fromCharCode(dataView.getUint8(n))\n    }\n    return outstr\n  }\n\n  /**\n   * Retrieves tag value for the given DataView and range\n   *\n   * @param {number} tagCode tag code\n   * @param {IptcMap} map IPTC tag map\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Range start\n   * @param {number} length Range length\n   * @returns {object} Tag value\n   */\n  function getTagValue(tagCode, map, dataView, offset, length) {\n    if (map.types[tagCode] === 'binary') {\n      return new Blob([dataView.buffer.slice(offset, offset + length)])\n    }\n    if (map.types[tagCode] === 'Uint16') {\n      return dataView.getUint16(offset)\n    }\n    return getStringValue(dataView, offset, length)\n  }\n\n  /**\n   * Combines IPTC value with existing ones.\n   *\n   * @param {object} value Existing IPTC field value\n   * @param {object} newValue New IPTC field value\n   * @returns {object} Resulting IPTC field value\n   */\n  function combineTagValues(value, newValue) {\n    if (value === undefined) return newValue\n    if (value instanceof Array) {\n      value.push(newValue)\n      return value\n    }\n    return [value, newValue]\n  }\n\n  /**\n   * Parses IPTC tags.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} segmentOffset Segment offset\n   * @param {number} segmentLength Segment length\n   * @param {object} data Data export object\n   * @param {object} includeTags Map of tags to include\n   * @param {object} excludeTags Map of tags to exclude\n   */\n  function parseIptcTags(\n    dataView,\n    segmentOffset,\n    segmentLength,\n    data,\n    includeTags,\n    excludeTags\n  ) {\n    var value, tagSize, tagCode\n    var segmentEnd = segmentOffset + segmentLength\n    var offset = segmentOffset\n    while (offset < segmentEnd) {\n      if (\n        dataView.getUint8(offset) === 0x1c && // tag marker\n        dataView.getUint8(offset + 1) === 0x02 // record number, only handles v2\n      ) {\n        tagCode = dataView.getUint8(offset + 2)\n        if (\n          (!includeTags || includeTags[tagCode]) &&\n          (!excludeTags || !excludeTags[tagCode])\n        ) {\n          tagSize = dataView.getInt16(offset + 3)\n          value = getTagValue(tagCode, data.iptc, dataView, offset + 5, tagSize)\n          data.iptc[tagCode] = combineTagValues(data.iptc[tagCode], value)\n          if (data.iptcOffsets) {\n            data.iptcOffsets[tagCode] = offset\n          }\n        }\n      }\n      offset += 1\n    }\n  }\n\n  /**\n   * Tests if field segment starts at offset.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Segment offset\n   * @returns {boolean} True if '8BIM<EOT><EOT>' exists at offset\n   */\n  function isSegmentStart(dataView, offset) {\n    return (\n      dataView.getUint32(offset) === 0x3842494d && // Photoshop segment start\n      dataView.getUint16(offset + 4) === 0x0404 // IPTC segment start\n    )\n  }\n\n  /**\n   * Returns header length.\n   *\n   * @param {DataView} dataView Data view interface\n   * @param {number} offset Segment offset\n   * @returns {number} Header length\n   */\n  function getHeaderLength(dataView, offset) {\n    var length = dataView.getUint8(offset + 7)\n    if (length % 2 !== 0) length += 1\n    // Check for pre photoshop 6 format\n    if (length === 0) {\n      // Always 4\n      length = 4\n    }\n    return length\n  }\n\n  loadImage.parseIptcData = function (dataView, offset, length, data, options) {\n    if (options.disableIptc) {\n      return\n    }\n    var markerLength = offset + length\n    while (offset + 8 < markerLength) {\n      if (isSegmentStart(dataView, offset)) {\n        var headerLength = getHeaderLength(dataView, offset)\n        var segmentOffset = offset + 8 + headerLength\n        if (segmentOffset > markerLength) {\n          // eslint-disable-next-line no-console\n          console.log('Invalid IPTC data: Invalid segment offset.')\n          break\n        }\n        var segmentLength = dataView.getUint16(offset + 6 + headerLength)\n        if (offset + segmentLength > markerLength) {\n          // eslint-disable-next-line no-console\n          console.log('Invalid IPTC data: Invalid segment size.')\n          break\n        }\n        // Create the iptc object to store the tags:\n        data.iptc = new IptcMap()\n        if (!options.disableIptcOffsets) {\n          data.iptcOffsets = new IptcMap()\n        }\n        parseIptcTags(\n          dataView,\n          segmentOffset,\n          segmentLength,\n          data,\n          options.includeIptcTags,\n          options.excludeIptcTags || { 202: true } // ObjectPreviewData\n        )\n        return\n      }\n      // eslint-disable-next-line no-param-reassign\n      offset += 1\n    }\n  }\n\n  // Registers this IPTC parser for the APP13 JPEG metadata segment:\n  loadImage.metaDataParsers.jpeg[0xffed].push(loadImage.parseIptcData)\n\n  loadImage.IptcMap = IptcMap\n\n  // Adds the following properties to the parseMetaData callback data:\n  // - iptc: The iptc tags, parsed by the parseIptcData method\n\n  // Adds the following options to the parseMetaData method:\n  // - disableIptc: Disables IPTC parsing when true.\n  // - disableIptcOffsets: Disables storing IPTC tag offsets when true.\n  // - includeIptcTags: A map of IPTC tags to include for parsing.\n  // - excludeIptcTags: A map of IPTC tags to exclude from parsing.\n})\n","/*\n * JavaScript Load Image Scaling\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var originalTransform = loadImage.transform\n\n  loadImage.createCanvas = function (width, height, offscreen) {\n    if (offscreen && loadImage.global.OffscreenCanvas) {\n      return new OffscreenCanvas(width, height)\n    }\n    var canvas = document.createElement('canvas')\n    canvas.width = width\n    canvas.height = height\n    return canvas\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    originalTransform.call(\n      loadImage,\n      loadImage.scale(img, options, data),\n      options,\n      callback,\n      file,\n      data\n    )\n  }\n\n  // Transform image coordinates, allows to override e.g.\n  // the canvas orientation based on the orientation option,\n  // gets canvas, options and data passed as arguments:\n  loadImage.transformCoordinates = function () {}\n\n  // Returns transformed options, allows to override e.g.\n  // maxWidth, maxHeight and crop options based on the aspectRatio.\n  // gets img, options, data passed as arguments:\n  loadImage.getTransformedOptions = function (img, options) {\n    var aspectRatio = options.aspectRatio\n    var newOptions\n    var i\n    var width\n    var height\n    if (!aspectRatio) {\n      return options\n    }\n    newOptions = {}\n    for (i in options) {\n      if (Object.prototype.hasOwnProperty.call(options, i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.crop = true\n    width = img.naturalWidth || img.width\n    height = img.naturalHeight || img.height\n    if (width / height > aspectRatio) {\n      newOptions.maxWidth = height * aspectRatio\n      newOptions.maxHeight = height\n    } else {\n      newOptions.maxWidth = width\n      newOptions.maxHeight = width / aspectRatio\n    }\n    return newOptions\n  }\n\n  // Canvas render method, allows to implement a different rendering algorithm:\n  loadImage.drawImage = function (\n    img,\n    canvas,\n    sourceX,\n    sourceY,\n    sourceWidth,\n    sourceHeight,\n    destWidth,\n    destHeight,\n    options\n  ) {\n    var ctx = canvas.getContext('2d')\n    if (options.imageSmoothingEnabled === false) {\n      ctx.msImageSmoothingEnabled = false\n      ctx.imageSmoothingEnabled = false\n    } else if (options.imageSmoothingQuality) {\n      ctx.imageSmoothingQuality = options.imageSmoothingQuality\n    }\n    ctx.drawImage(\n      img,\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n      0,\n      0,\n      destWidth,\n      destHeight\n    )\n    return ctx\n  }\n\n  // Determines if the target image should be a canvas element:\n  loadImage.requiresCanvas = function (options) {\n    return options.canvas || options.crop || !!options.aspectRatio\n  }\n\n  // Scales and/or crops the given image (img or canvas HTML element)\n  // using the given options:\n  loadImage.scale = function (img, options, data) {\n    // eslint-disable-next-line no-param-reassign\n    options = options || {}\n    // eslint-disable-next-line no-param-reassign\n    data = data || {}\n    var useCanvas =\n      img.getContext ||\n      (loadImage.requiresCanvas(options) &&\n        !!loadImage.global.HTMLCanvasElement)\n    var width = img.naturalWidth || img.width\n    var height = img.naturalHeight || img.height\n    var destWidth = width\n    var destHeight = height\n    var maxWidth\n    var maxHeight\n    var minWidth\n    var minHeight\n    var sourceWidth\n    var sourceHeight\n    var sourceX\n    var sourceY\n    var pixelRatio\n    var downsamplingRatio\n    var tmp\n    var canvas\n    /**\n     * Scales up image dimensions\n     */\n    function scaleUp() {\n      var scale = Math.max(\n        (minWidth || destWidth) / destWidth,\n        (minHeight || destHeight) / destHeight\n      )\n      if (scale > 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    /**\n     * Scales down image dimensions\n     */\n    function scaleDown() {\n      var scale = Math.min(\n        (maxWidth || destWidth) / destWidth,\n        (maxHeight || destHeight) / destHeight\n      )\n      if (scale < 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    if (useCanvas) {\n      // eslint-disable-next-line no-param-reassign\n      options = loadImage.getTransformedOptions(img, options, data)\n      sourceX = options.left || 0\n      sourceY = options.top || 0\n      if (options.sourceWidth) {\n        sourceWidth = options.sourceWidth\n        if (options.right !== undefined && options.left === undefined) {\n          sourceX = width - sourceWidth - options.right\n        }\n      } else {\n        sourceWidth = width - sourceX - (options.right || 0)\n      }\n      if (options.sourceHeight) {\n        sourceHeight = options.sourceHeight\n        if (options.bottom !== undefined && options.top === undefined) {\n          sourceY = height - sourceHeight - options.bottom\n        }\n      } else {\n        sourceHeight = height - sourceY - (options.bottom || 0)\n      }\n      destWidth = sourceWidth\n      destHeight = sourceHeight\n    }\n    maxWidth = options.maxWidth\n    maxHeight = options.maxHeight\n    minWidth = options.minWidth\n    minHeight = options.minHeight\n    if (useCanvas && maxWidth && maxHeight && options.crop) {\n      destWidth = maxWidth\n      destHeight = maxHeight\n      tmp = sourceWidth / sourceHeight - maxWidth / maxHeight\n      if (tmp < 0) {\n        sourceHeight = (maxHeight * sourceWidth) / maxWidth\n        if (options.top === undefined && options.bottom === undefined) {\n          sourceY = (height - sourceHeight) / 2\n        }\n      } else if (tmp > 0) {\n        sourceWidth = (maxWidth * sourceHeight) / maxHeight\n        if (options.left === undefined && options.right === undefined) {\n          sourceX = (width - sourceWidth) / 2\n        }\n      }\n    } else {\n      if (options.contain || options.cover) {\n        minWidth = maxWidth = maxWidth || minWidth\n        minHeight = maxHeight = maxHeight || minHeight\n      }\n      if (options.cover) {\n        scaleDown()\n        scaleUp()\n      } else {\n        scaleUp()\n        scaleDown()\n      }\n    }\n    if (useCanvas) {\n      pixelRatio = options.pixelRatio\n      if (\n        pixelRatio > 1 &&\n        // Check if the image has not yet had the device pixel ratio applied:\n        !(\n          img.style.width &&\n          Math.floor(parseFloat(img.style.width, 10)) ===\n            Math.floor(width / pixelRatio)\n        )\n      ) {\n        destWidth *= pixelRatio\n        destHeight *= pixelRatio\n      }\n      // Check if workaround for Chromium orientation crop bug is required:\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=1074354\n      if (\n        loadImage.orientationCropBug &&\n        !img.getContext &&\n        (sourceX || sourceY || sourceWidth !== width || sourceHeight !== height)\n      ) {\n        // Write the complete source image to an intermediate canvas first:\n        tmp = img\n        // eslint-disable-next-line no-param-reassign\n        img = loadImage.createCanvas(width, height, true)\n        loadImage.drawImage(\n          tmp,\n          img,\n          0,\n          0,\n          width,\n          height,\n          width,\n          height,\n          options\n        )\n      }\n      downsamplingRatio = options.downsamplingRatio\n      if (\n        downsamplingRatio > 0 &&\n        downsamplingRatio < 1 &&\n        destWidth < sourceWidth &&\n        destHeight < sourceHeight\n      ) {\n        while (sourceWidth * downsamplingRatio > destWidth) {\n          canvas = loadImage.createCanvas(\n            sourceWidth * downsamplingRatio,\n            sourceHeight * downsamplingRatio,\n            true\n          )\n          loadImage.drawImage(\n            img,\n            canvas,\n            sourceX,\n            sourceY,\n            sourceWidth,\n            sourceHeight,\n            canvas.width,\n            canvas.height,\n            options\n          )\n          sourceX = 0\n          sourceY = 0\n          sourceWidth = canvas.width\n          sourceHeight = canvas.height\n          // eslint-disable-next-line no-param-reassign\n          img = canvas\n        }\n      }\n      canvas = loadImage.createCanvas(destWidth, destHeight)\n      loadImage.transformCoordinates(canvas, options, data)\n      if (pixelRatio > 1) {\n        canvas.style.width = canvas.width / pixelRatio + 'px'\n      }\n      loadImage\n        .drawImage(\n          img,\n          canvas,\n          sourceX,\n          sourceY,\n          sourceWidth,\n          sourceHeight,\n          destWidth,\n          destHeight,\n          options\n        )\n        .setTransform(1, 0, 0, 1, 0, 0) // reset to the identity matrix\n      return canvas\n    }\n    img.width = destWidth\n    img.height = destHeight\n    return img\n  }\n})\n","/*\n * JavaScript Load Image Fetch\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2017, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, module, require, Promise */\n\n;(function (factory) {\n  'use strict'\n  if (typeof define === 'function' && define.amd) {\n    // Register as an anonymous AMD module:\n    define(['./load-image'], factory)\n  } else if (typeof module === 'object' && module.exports) {\n    factory(require('./load-image'))\n  } else {\n    // Browser globals:\n    factory(window.loadImage)\n  }\n})(function (loadImage) {\n  'use strict'\n\n  var global = loadImage.global\n\n  if (\n    global.fetch &&\n    global.Request &&\n    global.Response &&\n    global.Response.prototype.blob\n  ) {\n    loadImage.fetchBlob = function (url, callback, options) {\n      /**\n       * Fetch response handler.\n       *\n       * @param {Response} response Fetch response\n       * @returns {Blob} Fetched Blob.\n       */\n      function responseHandler(response) {\n        return response.blob()\n      }\n      if (global.Promise && typeof callback !== 'function') {\n        return fetch(new Request(url, callback)).then(responseHandler)\n      }\n      fetch(new Request(url, options))\n        .then(responseHandler)\n        .then(callback)\n        [\n          // Avoid parsing error in IE<9, where catch is a reserved word.\n          // eslint-disable-next-line dot-notation\n          'catch'\n        ](function (err) {\n          callback(null, err)\n        })\n    }\n  } else if (\n    global.XMLHttpRequest &&\n    // https://xhr.spec.whatwg.org/#the-responsetype-attribute\n    new XMLHttpRequest().responseType === ''\n  ) {\n    loadImage.fetchBlob = function (url, callback, options) {\n      /**\n       * Promise executor\n       *\n       * @param {Function} resolve Resolution function\n       * @param {Function} reject Rejection function\n       */\n      function executor(resolve, reject) {\n        options = options || {} // eslint-disable-line no-param-reassign\n        var req = new XMLHttpRequest()\n        req.open(options.method || 'GET', url)\n        if (options.headers) {\n          Object.keys(options.headers).forEach(function (key) {\n            req.setRequestHeader(key, options.headers[key])\n          })\n        }\n        req.withCredentials = options.credentials === 'include'\n        req.responseType = 'blob'\n        req.onload = function () {\n          resolve(req.response)\n        }\n        req.onerror = req.onabort = req.ontimeout = function (err) {\n          if (resolve === reject) {\n            // Not using Promises\n            reject(null, err)\n          } else {\n            reject(err)\n          }\n        }\n        req.send(options.body)\n      }\n      if (global.Promise && typeof callback !== 'function') {\n        options = callback // eslint-disable-line no-param-reassign\n        return new Promise(executor)\n      }\n      return executor(callback, callback)\n    }\n  }\n})\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n"],"sourceRoot":""}